webpackJsonp([18],Array(161).concat([function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(e){if($.default.set(e.dm),(0,b.default)(e),re.default.attachTo(document,{noTeardown:!0}),Ie.default.attachTo(document),z.default.attachTo("body"),vt.default.attachTo(document),Fe.default.attachTo("body",{noTeardown:!0}),I.default.attachTo(document,{noTeardown:!0}),C.default.attachTo("#spam_challenge_dialog",{noTeardown:!0}),We.default.attachTo(document,e,{noTeardown:!0}),e.loggedIn){(0,si.default)(e),ee.default.attachTo(document,e,{noTeardown:!0});var i=$.default.get("poll_options");i?q.default.attachTo(document,{foregroundPollInterval:i.foreground_poll_interval,burstPollInterval:i.burst_poll_interval,burstPollDuration:i.burst_poll_duration,maxPollInterval:i.max_poll_interval,noTeardown:!0}):q.default.attachTo(document,{foregroundPollInterval:1e3*e.deciders.dm_polling_frequency_in_seconds,noTeardown:!0}),e.deciders.live_pipeline_consume&&At.default.attachTo(document),It.default.attachTo("#list-membership-dialog",e,{noTeardown:!0}),xt.default.attachTo("#list-operations-dialog",e,{noTeardown:!0}),O.default.attachTo("#create-custom-timeline-dialog",e),F.default.attachTo("#curate-dialog",e),$t.default.attachTo("#moments-summary-list-dialog",e),(0,L.default)(e),K.default.attachTo(document,{noTeardown:!0}),Z.default.attachTo(document,{noTeardown:!0}),X.default.attachTo(document,{noTeardown:!0}),me.default.attachTo(document,{currentUserPath:e.routes.profile,noTeardown:!0}),xe.default.attachTo("#retweet-tweet-dialog",e,{noTeardown:!0}),U.default.attachTo("#delete-tweet-dialog",e,{noTeardown:!0}),p.default.attachTo("#block-dialog",e,{noTeardown:!0}),De.default.attachTo("#report-dialog",e,{noTeardown:!0}),a.default.attachTo("#age-gate-dialog",e,{noTeardown:!0}),e.deciders.enable_tweetstorm_creation&&(ri.default.attachTo("#new-tweetstorm-button"),ui.default.attachTo("#Tweetstorm-dialog",e,{noTeardown:!0}),fi.default.attachTo(document,e,{noTeardown:!0}),ci.default.attachTo(document,e,{noTeardown:!0}))}Ue.default.attachTo(document),wi.default.getDecider("native_notifications")&&(Kt.default.attachTo(document,{defaultIcon:e.defaultNotificationIcon}),Xt.default.attachTo(document)),_e.default.attachTo(document),we.default.attachTo(document,{autoSubscribe:wi.default.getDecider("autoSubscribeNativePush"),allowRegistration:wi.default.getDecider("enableNativePush"),noTeardown:!0}),vi.default.attachTo(document,{noTeardown:!0}),mi.default.attachTo(document,e.typeaheadData,{noTeardown:!0}),Oe.default.attachTo(document,{noTeardown:!0}),Ae.default.attachTo(document,{noTeardown:!0}),ct.default.attachTo(document,{noTeardown:!0}),_t.default.attachTo("#goto-user-dialog",e),(0,fe.default)({profile_user:e.profile_user,deviceEnabled:e.deviceEnabled,deviceVerified:e.deviceVerified,formAuthenticityToken:e.formAuthenticityToken,loggedIn:e.loggedIn}),mt.default.attachTo(document,{noTeardown:!0});var s={itemType:"tweet",noTeardown:!0,loggedIn:e.loggedIn,eventData:{scribeContext:{component:"gallery"}}};ft.default.attachTo(".Gallery",e,s),ei.default.attachTo(".Gallery",e,s),qt.default.attachTo(".Gallery",e,s),oe.default.attachTo(document,{noTeardown:!0}),se.default.attachTo(document,e),Ct.default.attachTo(document,e,{noTeardown:!0,loggedIn:e.loggedIn,keyboardShortcuts:e.keyboardShortcuts}),A.default.attachTo(document,e,{noTeardown:!0}),Ce.default.attachTo("#quick-promote-dialog",e,{noTeardown:!0}),g.default.attachTo("#block-user-dialog",e,{noTeardown:!0}),et.default.attachTo(document,{noTeardown:!0}),st.default.attachTo("#embed-tweet-dialog",e,{noTeardown:!0}),Di.default.attachTo("#why-this-ad-dialog",e,{noTeardown:!0}),Dt.default.attachTo("#leadgen-confirm-dialog",e),(0,Le.default)("uiWantsToRefreshTimestamps"),ce.default.attachTo(document),ut.default.attachTo(document,{theme:e.theme}),D.default.attachTo(document,{noTeardown:!0}),Ke.default.attachTo(document,{noTeardown:!0}),Ze.default.attachTo("#translation-feedback-dialog",e,{noTeardown:!0}),Ut.default.attachTo("#media-edit-dialog",{noTeardown:!0}),Wt.default.attachTo(document),Zt.default.attachTo(".dashboard",{eventData:{scribeContext:{component:"dashboard_nav"}}}),rt.default.attachTo("#feedback_dialog",e.debugData,{noTeardown:!0}),ot.default.attachTo(document,e.debugData,{noTeardown:!0}),t(".uz_block_user_survey")[0]&&Ci.default.attachTo(".uz_block_user_survey"),(0,ve.default)(e),wt.default.attachTo(document,e,{noTeardown:!0}),x.default.attachTo(document,e,{noTeardown:!0}),S.default.attachTo("#bouncer-dialog",e,{noTeardown:!0}),Ot.default.attachTo("#location-picker-dialog",e,{noTeardown:!0}),Ft.default.attachTo(document,{noTeardown:!0}),l.default.attachTo("#auth-webview-dialog",e,{noTeardown:!0}),zt.default.attachTo(document),oi.default.attachTo(document,e,{noTeardown:!0}),$e.default.attachTo("#sms-confirmation-dialog"),qe.default.attachTo("#sms-confirmation-dialog",e,{noTeardown:!0}),ze.default.attachTo(document),W.default.attachTo(document,{includeLongVideos:wi.default.getDecider("dynamic_video_ads_include_long_videos")}),_i.default.attachTo(document,e,{noTeardown:!0}),Xe.default.attachTo(document,{noTeardown:!0}),d.default.attachTo("#page-container",e),ue.default.attachTo("#page-container",{liveVideoContinuePlayingBehindModalsEnabled:e.liveVideoContinuePlayingBehindModalsEnabled}),Lt.default.attachTo(document),h.default.attachTo(document)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;var o=i(162),a=s(o),r=i(171),l=s(r),c=i(176),d=s(c),u=i(179),h=s(u),f=i(180),p=s(f),m=i(181),g=s(m),v=i(128),b=s(v),w=i(213),S=s(w),y=i(214),C=s(y),T=i(215),D=s(T),M=i(217),I=s(M),P=i(222),x=s(P),k=i(223),A=s(k),E=i(226),O=s(E),R=i(237),F=s(R),N=i(241),U=s(N),j=i(242),L=s(j),B=i(461),$=s(B),V=i(901),q=s(V),H=i(904),z=s(H),G=i(906),W=s(G),Q=i(907),K=s(Q),Y=i(908),X=s(Y),J=i(909),Z=s(J),tt=i(910),et=s(tt),it=i(911),st=s(it),nt=i(913),ot=s(nt),at=i(914),rt=s(at),lt=i(915),ct=s(lt),dt=i(916),ut=s(dt),ht=i(917),ft=s(ht),pt=i(923),mt=s(pt),gt=i(203),vt=s(gt),bt=i(924),wt=s(bt),St=i(925),_t=s(St),yt=i(926),Ct=s(yt),Tt=i(929),Dt=s(Tt),Mt=i(930),It=s(Mt),Pt=i(931),xt=s(Pt),kt=i(932),At=s(kt),Et=i(934),Ot=s(Et),Rt=i(935),Ft=s(Rt),Nt=i(936),Ut=s(Nt),jt=i(942),Lt=s(jt),Bt=i(944),$t=s(Bt),Vt=i(947),qt=s(Vt),Ht=i(951),zt=s(Ht),Gt=i(953),Wt=s(Gt),Qt=i(955),Kt=s(Qt),Yt=i(956),Xt=s(Yt),Jt=i(957),Zt=s(Jt),te=i(958),ee=s(te),ie=i(960),se=s(ie),ne=i(961),oe=s(ne),ae=i(962),re=s(ae),le=i(963),ce=s(le),de=i(485),ue=s(de),he=i(964),fe=s(he),pe=i(972),me=s(pe),ge=i(973),ve=s(ge),be=i(1023),we=s(be),Se=i(1024),_e=s(Se),ye=i(1025),Ce=s(ye),Te=i(1026),De=s(Te),Me=i(1027),Ie=s(Me),Pe=i(1028),xe=s(Pe),ke=i(1033),Ae=s(ke),Ee=i(1034),Oe=s(Ee),Re=i(1035),Fe=s(Re),Ne=i(1036),Ue=s(Ne),je=i(959),Le=s(je),Be=i(1037),$e=s(Be),Ve=i(1038),qe=s(Ve),He=i(1041),ze=s(He),Ge=i(1042),We=s(Ge),Qe=i(1043),Ke=s(Qe),Ye=i(1044),Xe=s(Ye),Je=i(1045),Ze=s(Je),ti=i(1046),ei=s(ti),ii=i(1050),si=s(ii),ni=i(1078),oi=s(ni),ai=i(1079),ri=s(ai),li=i(1080),ci=s(li),di=i(1082),ui=s(di),hi=i(1086),fi=s(hi),pi=i(1088),mi=s(pi),gi=i(1106),vi=s(gi),bi=i(136),wi=s(bi),Si=i(1107),_i=s(Si),yi=i(1108),Ci=s(yi),Ti=i(1109),Di=s(Ti)}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({submitButtonSelector:"#age-gate-dialog-submit-button",monthSelector:"#age-gate-month",daySelector:"#age-gate-day",yearSelector:"#age-gate-year",requiredSelector:".age-gate-error",ageGateCookieKey:"age-gated"}),this.setUpDialog=function(t,e){e.ageGated?this.showError():(this.reset(),this.ageData=e,this.setDateOption(),this.open())},this.fillYearSelect=function(){var t=(new Date).getFullYear(),e=void 0;for(e=t;e>t-100;e--)this.yearSelect.options.add(new Option(e,e));this.yearSelect.options.add(new Option((0,u.default)("Before {{year}}",{year:e}),e))},this.month={1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"},this.fillMonthSelect=function(){for(var t=1;t<=12;t++)this.monthSelect.options.add(new Option(this.month[t],t))},this.fillDaySelect=function(t,e){t||(t=1),e||(e=31);for(var i=t;i<=e;i++)this.daySelect.options.add(new Option(i,i))},this.resetSelect=function(t,e){t.options.length=0,t.options.add(new Option(e,(-1),(!0),(!0))),t.options[0].disabled=!0},this.reset=function(){this.resetSelect(this.yearSelect,"Year"),this.resetSelect(this.monthSelect,"Month"),this.resetSelect(this.daySelect,"Day"),this.hideRequired()},this.setDateOption=function(){this.fillYearSelect(),this.fillMonthSelect(),this.fillDaySelect()},this.showRequired=function(){this.select("requiredSelector").removeClass("hidden")},this.hideRequired=function(){this.select("requiredSelector").addClass("hidden")},this.getDateFromSelect=function(){var t={};return t.year=this.yearSelect.options[this.yearSelect.selectedIndex].value,t.month=this.monthSelect.options[this.monthSelect.selectedIndex].value,t.day=this.daySelect.options[this.daySelect.selectedIndex].value,t},this.getNumberOfDaysGivenMonthYear=function(t,e){return e<0&&(e=2012),new Date(e,t,0).getDate()},this.validateDate=function(){var t=this.getDateFromSelect(),e=t.year>=0&&t.month>=0&&t.month<=12&&t.day>=0&&t.day<=this.getNumberOfDaysGivenMonthYear(t.month,t.year);return e?new Date(t.year,t.month-1,t.day):("-1"===t.year||"-1"===t.month||"-1"===t.day?this.showRequired():this.trigger("uiShowMessage",{message:"Invalid date. Please input your date of birth."}),null)},this.updateDays=function(){var t=this.getDateFromSelect();if(this.hideRequired(),!(t.month<1||t.month>12)){this.resetSelect(this.daySelect,"Day");var e=this.getNumberOfDaysGivenMonthYear(t.month,t.year);this.fillDaySelect(1,e),t.day>0&&t.day<=e&&(this.daySelect.selectedIndex=t.day)}},this.showError=function(){this.trigger("uiShowMessage",{message:"You do not meet the minimum age requirements to follow this account."})},this.setAgeGateCookie=function(){(0,f.default)(this.attr.ageGateCookieKey,(new Date).getTime())},this.submitAgeGating=function(){var t=this.validateDate();t&&(t.getTime()<=this.ageData.minBirthDate?this.trigger("uiAgeGatePassed",o({},this.ageData.originalData,{passedAgeGating:!0})):(this.showError(),this.setAgeGateCookie()),this.close())},this.after("initialize",function(){this.monthSelect=this.select("monthSelector")[0],this.daySelect=this.select("daySelector")[0],this.yearSelect=this.select("yearSelector")[0],this.on(document,"uiNeedsAgeGateDialog",this.setUpDialog),this.on("click",{submitButtonSelector:this.submitAgeGating}),this.on("change",{monthSelector:this.updateDays,yearSelector:this.updateDays,daySelector:this.hideRequired})})}Object.defineProperty(e,"__esModule",{value:!0});var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},a=i(111),r=s(a),l=i(163),c=s(l),d=i(123),u=s(d),h=i(154),f=s(h),p=(0,r.default)(n,c.default);e.default=p},,,,,,,,,function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({authWebViewDialogIframeSelector:".auth-webview-card-iframe",authWebViewDialogTitleSelector:".modal-title",authWebViewActionSelector:".AuthWebViewCard-authWebViewAction",authWebViewCardCtaClass:"AuthWebViewCard-button",authWebViewCardImageClass:"AuthWebViewCard-productImageWrapper",authWebViewTweetSelector:".tweet",commerceCardSelector:".AuthWebViewCard",top:47}),this.openAuthWebViewDialog=function(t,e){if(this.attr.loggedIn){var i=e.webviewUrl;e.tweetId&&(i=this.appendQueryParam(i,"referringTweetId",e.tweetId)),e.impressionId&&(i=this.appendQueryParam(i,"impressionId",e.impressionId)),this.select("authWebViewDialogIframeSelector").attr("src",i),this.select("authWebViewDialogTitleSelector").html(e.webviewTitle),this.open()}else this.trigger(document,"uiOpenSignupDialog")},this.appendQueryParam=function(t,e,i){var s=document.createElement("a");s.href=t;var n=encodeURIComponent(e)+"="+encodeURIComponent(i);""===s.search?s.search=n:s.search+="&"+n;var o=s.href;return s=null,o},this.closeDialog=function(t,e){this.select("authWebViewDialogIframeSelector").attr("src","about:blank"),this.off(window,"message",this.adjustIframeHeight),this.off(window,"message",this.proxyIframeEvents)},this.adjustIframeHeight=function(t){this.fitIframeHeight(t,{iframeSelector:this.attr.authWebViewDialogIframeSelector,isQualified:function(t){return t.name&&"auth_webview"===t.name&&t.height}})},this.setActiveViewSelector=function(t,e){this.activeViewSelector=e.selector||""},this.setupMessageListener=function(){this.on(window,"message",this.adjustIframeHeight),this.on(window,"message",this.proxyIframeEvents)},this.after("initialize",function(){this.activeViewSelector="",this.on("uiDialogOpened",this.setupMessageListener),this.on("uiDialogClosed",this.closeDialog),this.on(window,"uiOpenAuthWebViewDialog",this.openAuthWebViewDialog),this.on(document,"uiCommerceSetActiveViewSelector",this.setActiveViewSelector)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(163),l=s(r),c=i(172),d=s(c),u=i(173),h=s(u),f=i(175),p=s(f),m=i(139),g=s(m),v=(0,a.default)(n,l.default,d.default,h.default,p.default,g.default);e.default=v},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.adjacent=function(e,i,s){var n=void 0,o=void 0;return s=s||{},s.pos=i.offset(),"relative"===s.position&&(n.top=0),s.rtl=s.rtl||"rtl"===t("body").attr("dir"),s.gravity=s.gravity||"vertical",s.attachBox={height:i.outerHeight(),width:i.outerWidth()},s.overlayBox={height:s.height||e.outerHeight(),width:s.width||e.outerWidth()},s.winBox={height:a.default.getWindow().height(),width:a.default.getWindow().width()},s.bodyBox={height:this.getBody().height(),width:this.getBody().width()},"vertical,vertical-north,north,south".indexOf(s.gravity)!==-1?(n=this.processVertical(s),s.allowGravitySwitch&&!n.validFit&&(s.gravity="horizontal",o=this.processHorizontal(s))):"horizontal,east,west".indexOf(s.gravity)!==-1&&(n=this.processHorizontal(s),s.allowGravitySwitch&&!n.validFit&&(s.gravity="vertical",o=this.processVertical(s))),o&&o.validFit?o:n},this.processVertical=function(e){var i=t.extend(!0,{},e.pos),s=e.pos.top-e.overlayBox.height>=a.default.getWindow().scrollTop()+this.topBarHeight(),n=e.pos.top+e.attachBox.height+e.overlayBox.height<=a.default.getWindow().scrollTop()+e.winBox.height;if(i.validFit=s||n,"vertical-north"===e.gravity?i.gravity=n||!i.validFit?"north":"south":"vertical"===e.gravity?i.gravity=s||!i.validFit?"south":"north":i.gravity=e.gravity,"relative"===e.position&&(i.left=0),"right,left,center".indexOf(e.weight)===-1){var o=e.rtl?"right":"left";"left"===o?i.weight=e.pos.left+e.overlayBox.width>e.winBox.width?"right":"left":i.weight=e.pos.left+e.attachBox.width-e.overlayBox.width<0?"left":"right"}return i.weight=i.weight||e.weight,"right"===i.weight?i.left=e.pos.left-e.overlayBox.width+e.attachBox.width:"center"===i.weight&&(i.left=e.pos.left-(e.overlayBox.width-e.attachBox.width)/2),i.top="north"===i.gravity?e.pos.top+e.attachBox.height:e.pos.top-e.overlayBox.height,i},this.processHorizontal=function(e){var i=t.extend(!0,{},e.pos),s=e.pos.top+e.attachBox.height/2;"top,bottom,center".indexOf(e.weight)===-1&&(s-e.overlayBox.height/2<0?i.weight="bottom":s+e.overlayBox.height/2>Math.max(e.winBox.height,e.bodyBox.height)?i.weight="top":i.weight="center"),i.weight=i.weight||e.weight;var n=e.pos.left+e.attachBox.width+e.overlayBox.width<=e.winBox.width,o=e.pos.left-e.overlayBox.width>=0;return i.validFit=o||n,"horizontal"===e.gravity&&(i.gravity=e.pos.left+e.attachBox.width/2>e.winBox.width/2?"east":"west"),i.gravity=i.gravity||e.gravity,"relative"===e.position&&(i.top=0),"center"===i.weight?i.top=e.pos.top+e.attachBox.height/2-e.overlayBox.height/2:"bottom"===i.weight&&(i.top=e.pos.top-e.overlayBox.height+e.attachBox.height),i.left="west"===i.gravity?e.pos.left+e.attachBox.width:e.pos.left-e.overlayBox.width,i},this.getBody=function(){return t("body")},this.topBarHeight=function(){return t(".topbar, .StreamsTopBar").outerHeight()||0}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(164),a=s(o);e.default=n}).call(e,i(10))},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.fitIframeHeight=function(e,i){if(e&&i){var s=i.iframeSelector||this.attr.iframeSelector,n={};if(e.originalEvent&&(e=e.originalEvent),(0,a.default)(e.origin,window.location)&&"string"==typeof e.data&&t.isFunction(i.isQualified))try{n=JSON.parse(e.data),n&&i.isQualified(n)&&(this.$node.find(s).css("height",n.height+"px"),t.isFunction(i.additonalTreatment)&&i.additonalTreatment(this.$node.find(s)))}catch(o){}}}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(174),a=s(o);e.default=n}).call(e,i(10))},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return i.reduce(function(i,n){return i||t===s(e.protocol,n)},t===s(e.protocol,e.host))};var i=["twitter.com","donate.twitter.com"],s=function(t,e){return[t,e].join("//")}},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.proxyIframeEvents=function(t){if(t){var e={};if(t.originalEvent&&(t=t.originalEvent),(0,a.default)(t.origin,window.location)&&"string"==typeof t.data)try{e=JSON.parse(t.data),e&&e.name&&"b2c"===e.name&&e.eventName&&this.trigger(e.eventName,e.data)}catch(i){}}}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(174),a=s(o);e.default=n},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.viewportHelpers=l.default,this.defaultAttrs({autoplayableContainerSelector:".has-autoplayable-media",mediaSelector:".animated-gif, .PlayableMedia, .js-macaw-cards-iframe-container",autoplayingMediaDataAttr:"data-autoplaying-media",scrollThrottle:100,watchDocumentScroll:!0,autoplayOnFractionInViewport:.25}),this.watchContainers=function(){this.$containers=this.select("autoplayableContainerSelector"),this.throttledProcessWatchedContainers()},this.stopAutoplaying=function(){this.$currentlyAutoplayingContainer&&(this.$currentlyAutoplayingContainer.attr(this.attr.autoplayingMediaDataAttr,!1),this.$currentlyAutoplayingMedia.trigger("uiStopAutoplayingMedia"),this.$currentlyAutoplayingContainer=void 0,this.$currentlyAutoplayingMedia=void 0)},this.processWatchedContainers=function(){if(0!==this.$containers.length&&this.$viewport){var t=this.viewportHelpers.getGlobalNavHeight(),e=this.viewportHelpers.getElementClosestToMiddleOfViewport({$container:this.$viewport,$elements:this.$containers,topThreshold:t,fractionInViewport:this.attr.autoplayOnFractionInViewport});e&&!e.is(this.$currentlyAutoplayingContainer)&&(this.stopAutoplaying(),e.attr(this.attr.autoplayingMediaDataAttr,!0),this.$currentlyAutoplayingContainer=e,this.$currentlyAutoplayingMedia=e.find(this.attr.mediaSelector),this.$currentlyAutoplayingMedia.trigger("uiAutoplayMedia")),this.$currentlyAutoplayingContainer&&!this.viewportHelpers.isPartiallyContainedInViewport({$container:this.$viewport,$element:this.$currentlyAutoplayingContainer,topThreshold:t,fractionInViewport:this.attr.autoplayOnFractionInViewport})&&this.stopAutoplaying()}},this.resetWatchedContainers=function(){this.$containers=t(),this.stopAutoplaying(),this.watchContainers()},this.cleanup=function(){this.off(document,"uiPageChanged"),this.off(this.$viewport,"resize"),this.$viewport=void 0,this.attr.watchDocumentScroll?this.off(document,"scroll",this.throttledProcessWatchedContainers):this.off("scroll",this.throttledProcessWatchedContainers)},this.before("teardown",function(){this.cleanup()}),this.after("initialize",function(){this.$currentlyAutoplayingContainer=void 0,this.$currentlyAutoplayingMedia=void 0,this.$viewport=t(window),this.$containers=t(),this.throttledProcessWatchedContainers=d.default.throttle(this.processWatchedContainers.bind(this),this.attr.scrollThrottle),this.on(document,"uiPageChanged",this.resetWatchedContainers),this.attr.watchDocumentScroll?this.on(document,"scroll",this.throttledProcessWatchedContainers):this.on("scroll",this.throttledProcessWatchedContainers),this.on(this.$viewport,"resize",this.throttledProcessWatchedContainers),this.on(document,"uiDynamicCardLoaded uiDynamicCardUnloaded",this.throttledProcessWatchedContainers),this.on(document,"uiWatchAutoplayMedia uiSwiftLoaded",this.watchContainers),this.on(document,"uiPageHidden",this.stopAutoplaying),this.on(document,"uiPageVisible",this.processWatchedContainers)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(177),l=s(r),c=i(126),d=s(c);e.default=(0,a.default)(n)}).call(e,i(10))},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var n=i(178),o=s(n);e.default={getGlobalNavHeight:o.default.getGlobalYOffset,isWithinBounds:function(t,e,i,s,n){return s=s||this.getContainerRect(t),n=n||e[0].getBoundingClientRect(),!this.isBelowViewport(t,e,i,s,n)&&!this.isAboveViewport(t,e,i,s,n)},getContainerRect:function(t){return t.get(0)===window?{top:0,left:0,right:window.innerWidth,bottom:window.innerHeight,width:window.innerWidth,height:window.innerHeight}:t.get(0).getBoundingClientRect()},isContainedInViewport:function(t,e,i,s,n,o){return n=n||this.getContainerRect(t),o=o||e[0].getBoundingClientRect(),i=i||0,s=s||0,n.top+i<=o.top&&n.bottom+s>=o.bottom},isPartiallyContainedInViewport:function(t){if(!(t.$container&&t.$element||t.containerRect&&t.elementRect))return!1;var e=t.containerRect||this.getContainerRect(t.$container),i=t.elementRect||t.$element[0].getBoundingClientRect(),s=t.topThreshold||0,n=t.bottomThreshold||0,o=e.top+s,a=e.top+e.height+n,r=i.top,l=i.bottom;if(a<r||o>l)return!1;var c=r-o>0?a-r:l-o;return c>=t.fractionInViewport*i.height},isAboveViewport:function(t,e,i,s,n){return s=s||this.getContainerRect(t),n=n||e[0].getBoundingClientRect(),s.top>=n.top+n.height/2+(i||0)},isBelowViewport:function(t,e,i,s,n){return s=s||this.getContainerRect(t),n=n||e[0].getBoundingClientRect(),s.bottom<=n.top+n.height/2-(i||0)},getElementClosestToMiddleOfViewport:function(e){var i=this,s=this.getContainerRect(e.$container),n=s.top+s.height/2,o=e.topThreshold||0,a=e.bottomThreshold||0,r=isNaN(parseFloat(e.fractionInViewport))?1:e.fractionInViewport,l=1/0,c=void 0;return e.$elements.each(function(t,e){var d=e.getBoundingClientRect(),u=d.top+d.height/2,h=Math.abs(u-n);h<l&&i.isPartiallyContainedInViewport({topThreshold:o,bottomThreshold:a,fractionInViewport:r,containerRect:s,elementRect:d})&&(l=h,c=e)}),c?t(c):void 0},getContainerOffsetTop:function(t){return t.offset()?t.offset().top:0},getVisibleViewport:function(){return{top:this.getGlobalNavHeight(),bottom:window.innerHeight,left:0,right:window.innerWidth,width:window.innerWidth,height:window.innerHeight}}}}).call(e,i(10))},,function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({topbarSpacerSelector:".topbar-spacer"}),this.adjustHeight=function(t,e){this.select("topbarSpacerSelector").css("padding-top","-="+e.height)},this.after("initialize",function(){this.on("uiBannerDismissed",this.adjustHeight)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o);e.default=(0,a.default)(n)},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({blockUserLabelSelector:".block-user-label",blockUserTextSelector:".block-user-text",blockButtonSelector:".block-button",blockInputSelector:"input[name=block_user]"}),this.setUpDialog=function(t,e){this.eventData=e,this.setTriggeredTarget(),this.setScreenNameText(),this.isComplete=!1,this.open()},this.setTriggeredTarget=function(){"user"===this.eventData.target?this.$node.addClass("block-from-user"):this.$node.removeClass("block-from-user")},this.setScreenNameText=function(){var t=this.select("blockUserLabelSelector");t.text((0,l.default)("Block @{{screenName}}?",this.eventData)),this.select("blockUserTextSelector").text((0,l.default)("@{{screenName}} will no longer be able to follow or message you, and you will not see notifications from @{{screenName}}.",this.eventData))},this.submitBlock=function(){this.trigger("uiBlockAction",{eventData:this.eventData,tweetId:this.eventData.tweetId,userId:this.eventData.userId,screenName:this.eventData.screenName,impressionId:this.eventData.impressionId,disclosureType:this.eventData.disclosureType,scribeContext:{component:"block_dialog",element:"user"===this.eventData.target?"user":"tweet"}}),this.trigger("uiDidTriggerBlockingAction",{userId:this.eventData.userId}),this.isComplete=!0,this.close()},this.around("close",function(t){this.isOpen()&&!this.isComplete&&this.trigger("uiBlockDialogCancel",this.eventData),t()}),this.after("initialize",function(){this.on(document,"uiNeedsBlockDialog",this.setUpDialog),this.on("click",{blockButtonSelector:this.submitBlock})})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(123),l=s(r),c=i(163),d=s(c),u=(0,a.default)(d.default,n);e.default=u},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaults={cancelSelector:".cancel-action",blockSelector:".block-action"},this.openBlockUser=function(t,e){var i={userOnly:!0,modal:"block"};this.attr.sourceEventData=e,this.displayTweet(e.tweetId,i),this.open()},this.blockUser=function(){this.trigger("uiDidBlockUser",{sourceEventData:this.attr.sourceEventData}),this.close()},this.after("initialize",function(){this.on("click",{cancelSelector:this.close,blockSelector:this.blockUser}),this.on(document,"uiOpenBlockUserDialog",this.openBlockUser)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(163),l=s(r),c=i(182),d=s(c);e.default=(0,a.default)(n,l.default,d.default)},function(t,e){"use strict";function i(){this.defaultAttrs({modalTweetContainerSelector:".modal-container",modalTweetLoadingClass:"tweet-loading",modalTweetSelector:".modal-tweet",modalTweetShowingClass:"tweet-showing",modalTweetTimeSelector:".time",modalTweetTextSelector:".js-tweet-text"}),this.modalTweetOptions={fetchIndex:-1},this.turnOnShowingTweetClass=function(){this.$node.addClass(this.attr.modalTweetShowingClass)},this.turnOffShowingTweetClass=function(){this.$node.removeClass(this.attr.modalTweetShowingClass)},this.turnOnLoadingTweetClass=function(){this.$node.addClass(this.attr.modalTweetLoadingClass)},this.turnOffLoadingTweetClass=function(){this.$node.removeClass(this.attr.modalTweetLoadingClass)},this.requestForTweet=function(t,e){this.displayTweet(e.tweetId,e.tweetOptions)},this.displayTweet=function(t,e){this.retrieveTweet(t,e)},this.retrieveTweet=function(t,e){this.modalTweetOptions=s({fetchIndex:++n},e),this.turnOnLoadingTweetClass(),this.trigger("uiGetTweet",{id:t,modal:this.modalTweetOptions.modal,fetchIndex:this.modalTweetOptions.fetchIndex})},this.gotTweet=function(t,e){e.sourceEventData.fetchIndex===this.modalTweetOptions.fetchIndex&&(this.turnOffLoadingTweetClass(),e.id&&e.tweet_html&&(this.addTweet(e.tweet_html),this.modifyTweetOnRender(this.modalTweetOptions)))},this.failedToGetTweet=function(t,e){e.sourceEventData.fetchIndex===this.modalTweetOptions.fetchIndex&&this.removeTweet()},this.modifyTweetOnRender=function(t){t.userOnly&&(this.$node.find(this.attr.modalTweetTimeSelector).remove(),this.$node.find(this.attr.modalTweetTextSelector).remove()),t.disableLinks&&(this.select("modalTweetSelector").addClass("disabled-links"),this.$node.find("a").attr("tabindex",-1).click(function(t){t.preventDefault(),t.stopPropagation()}))},this.addTweet=function(t){this.select("modalTweetSelector").empty().append(t),this.turnOnShowingTweetClass()},this.removeTweet=function(){this.turnOffLoadingTweetClass(),this.turnOffShowingTweetClass(),this.select("modalTweetSelector").empty()},this.after("initialize",function(){this.on("uiWantsTweet",this.requestForTweet),this.on(document,"dataGotTweet",this.gotTweet),this.on(document,"dataFailedToGetTweet",this.failedToGetTweet),this.on("uiActivityPopupRendered",this.modifyTweetOnRender.bind(this,this.modalTweetOptions)),this.on("uiDialogClosed",this.removeTweet)})}Object.defineProperty(e,"__esModule",{value:!0});var s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},n=0;e.default=i},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({safeOrigins:["https://localhost.twitter.com","https://twitter.com"],iframeSelector:"#bouncer-flow",contentSelector:".BouncerContent",spinnerSelector:".BouncerSpinner",dismissButtonSelector:".js-close"}),this.openBouncerDialog=function(t,e){this.select("iframeSelector").attr("src",e.bounce.bounce_location||"/account/access"),this.open()},this.onBeforeIframeUnload=function(){this.setIframeLoading(!0),this.position()},this.onIframeLoad=function(){this.setIframeLoading(!1),this.position()},this.setIframeLoading=function(t){if(t)this.$bouncerContent.hide(),this.$dismissButton.hide(),this.$spinner.show(),this.$bouncerContent.height(this.$spinner.height()),this.$iframe.height(this.$spinner.height());else{this.$spinner.hide(),this.$dismissButton.show(),this.$bouncerContent.show();var e=this.$iframe.contents().find("body").height()+20;e>this.$iframe.height()&&(this.$bouncerContent.height(e),this.$iframe.height(e))}},this.onCancel=function(){this.trigger("uiBouncerCancelled"),this.close()},this.onComplete=function(){this.trigger("uiBouncerCompleted"),this.close()},this.on2FAComplete=function(){this.is2faEnrollmentComplete=!0},this.onDialogClosed=function(){this.is2faEnrollmentComplete?(this.is2faEnrollmentComplete=!1,this.trigger("uiBouncer2FACompleted")):this.trigger("uiBouncerCancelled")},this.aroundAfterClose=function(t){t(),this.onDialogClosed(),this.reset()},this.reset=function(){this.setIframeLoading(!0)},this.dispatchBouncerMessage=function(t,e){var i=t.originalEvent,s=i&&i.data;if(this.attr.safeOrigins.indexOf(i.origin)!==-1&&s&&s.bouncer&&s.event){var n=s.event;"beforeunload"===n?this.onBeforeIframeUnload():"load"===n?this.onIframeLoad():"cancel"===n?this.onCancel():"complete"===n?this.onComplete():"2fa_complete"===n&&this.on2FAComplete()}},this.after("initialize",function(){this.on(document,"dataRequestBounced",this.openBouncerDialog),this.on(document,"uiPreOpenBouncerDialog",this.open),this.is2faEnrollmentComplete=!1,this.on(window,"message",this.dispatchBouncerMessage),this.around("afterClose",this.aroundAfterClose),this.$modalContent=this.select("modalContentSelector"),this.$iframe=this.select("iframeSelector"),this.$bouncerContent=this.select("contentSelector"),this.$spinner=this.select("spinnerSelector"),this.$dismissButton=this.select("dismissButtonSelector"),this.reset()})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(163),l=s(r),c=(0,a.default)(n,l.default);e.default=c},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({challengeSelector:"#recaptcha_challenge_field",responseSelector:"#recaptcha_response_field",submitSelector:"#recaptcha_submit",captchaName:"Captcha",bodyTextSelector:".modal-text",captchaFormSelector:"#captcha-challenge-form",recaptchaPublicKey:"6LfbTAAAAAAAAE0hk8Vnfd1THHnn9lJuow6fgulO"}),this.refreshCaptchaDialog=function(t,e){this.reloadCaptcha(),this.open()},this.reloadCaptcha=function(){window.Recaptcha&&window.Recaptcha.reload()},this.submitCaptcha=function(){var t=this.select("challengeSelector").val(),e=this.select("responseSelector").val();this.trigger("uiSubmitSpamChallenge",{challenge:t,response:e,challengeName:this.attr.captchaName})},this.getRecaptcha=function(t,e){this.isRecaptchaDefined()&&window.Recaptcha.create(this.attr.recaptchaPublicKey,"captcha-challenge-form",{
theme:"clean",callback:function(){window.Recaptcha.focus_response_field(),t&&e.select("bodyTextSelector").text(t),e.open()}})},this.isRecaptchaDefined=function(){return"undefined"!=typeof window.Recaptcha},this.openCaptchaDialog=function(t,e){this.getRecaptcha(e.message,this)},this.after("initialize",function(){this.on("click",{submitSelector:this.submitCaptcha}),this.on(document,"uiOpenSpamCaptchaChallenge",this.openCaptchaDialog),this.on(document,"uiCloseSpamCaptchaChallenge",this.blurAndCloseImmediately),this.on(document,"uiRefreshSpamCaptchaChallenge",this.refreshCaptchaDialog)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(163),l=s(r);e.default=(0,a.default)(n,l.default)},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.scribeAjaxDuration=function(t,e){this.scribeClientStats(t,e,"perf")},this.scribeApiStats=function(t,e){this.scribeClientStats(t,e,"api")},this.scribeClientStats=function(t,e,i){if(!e.statsName)throw new Error("statsName is required for stats logging.");var s=["stats","ajax",i,e.statsName];e.statsSubcategory&&s.push(e.statsSubcategory);var n=e.requestData||{};n.interval?s.push("polling"):n.min_position?s.push("newer"):n.max_position&&s.push("older"),e.status&&s.push(e.status),e.statusCode&&s.push(e.statusCode),e.apiErrorName&&s.push(e.apiErrorName);var o=s.join(":"),a={url:e.url,browser:(0,h.default)(),response_size:(e.responseText||{}).length};this.scribePerftown(o,e.duration,a)},this.after("initialize",function(){d.default.getDecider("web_perftown_stats")&&this.on("dataAjaxDuration",this.scribeAjaxDuration),d.default.getDecider("web_client_api_stats")&&this.on("dataApiStats",this.scribeApiStats)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(216),l=s(r),c=i(136),d=s(c),u=i(156),h=s(u);e.default=(0,a.default)(n,l.default)},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.scribeTransport=a.default,this.scribePerftown=function(t,e,i){var s={product:"webclient",description:t,duration_ms:e,start_time_ms:this.startTime,metadata:JSON.stringify(i)};this.scribeTransport.send(s,"perftown")},this.after("initialize",function(){this.startTime=(new Date).getTime()})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(131),a=s(o);e.default=n},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({confirmDialogSelector:"#confirm_dialog",cancelSelector:"#confirm_dialog_cancel_button",submitSelector:"#confirm_dialog_submit_button",modalSizes:{small:"modal-small",medium:"modal-medium",large:"modal-large"}}),this.openWithOptions=function(e,i){if(!this.openState){this.attr.eventParams={action:i.action},this.attr.top=i.top,this.eventNode=e.target;var s={title_text:i.titleText,body_text:i.bodyText,cancel_text:i.cancelText,submit_text:i.submitText},n=h.default.render(s);t("#confirm_dialog").length?t("#confirm_dialog").replaceWith(n):t("body").append(n),this.$dialogContainer=t("#confirm_dialog"),this.$dialog=this.$dialogContainer.find(this.attr.modalSelector);var o=this.attr.modalSizes[i.modalSize];"undefined"!=typeof o&&this.$dialog.addClass(o),this.open()}},this.submit=function(t,e){this.trigger(this.eventNode,"ui{{action}}Confirm"),this.close()},this.cancel=function(t,e){this.trigger(this.eventNode,"ui{{action}}Cancel"),"click"===t.type&&this.close()},this.after("initialize",function(){this.on(document,"uiOpenConfirmDialog",this.openWithOptions),this.on("click",{submitSelector:this.submit,cancelSelector:this.cancel}),this.on("uiDialogCloseRequested",{confirmDialogSelector:this.cancel})})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(163),l=s(r),c=i(218),d=s(c),u=i(219),h=s(u);e.default=(0,a.default)(n,l.default,d.default)}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.rewriteEventName=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var s="string"==typeof e[0]||e[0].defaultBehavior?0:1,n=e[s],o=n.type||n;e[s]=(0,a.default)(o,this.attr.eventParams,!0),n.type&&(n.type=e[s],e[s]=n),t.apply(this,e)},this.around("on",this.rewriteEventName),this.around("off",this.rewriteEventName),this.around("trigger",this.rewriteEventName)}Object.defineProperty(e,"__esModule",{value:!0});var o=i(124),a=s(o);e.default=n},function(t,e,i){(function(e){function s(t,e,i){e=e||{};for(var s in a)e[s]||(e[s]=a[s]);return r.render(t,e,i)}var n=i(220).default,o={"dialogs/close_button":i(221)},a=n(o),r=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<div id="confirm_dialog" class="modal-container">\n  <div class="modal draggable">\n    <div class="modal-content">\n'),s.b(s.rp("<dialogs/close_button0",t,e,"      ")),s.b('      <div class="modal-header">\n        <h3 class="modal-title">'),s.b(s.v(s.f("title_text",t,e,0))),s.b("</h3>\n      </div>\n"),s.s(s.f("body_text",t,e,1),t,e,0,264,374,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b('        <div class="modal-body">\n          <p class="modal-body-text">'),i.b(i.v(i.f("body_text",t,e,0))),i.b("</p>\n        </div>\n")}),t.pop()),s.b('      <div class="modal-footer">\n        <button class="EdgeButton EdgeButton--tertiary js-close" id="confirm_dialog_cancel_button">'),s.b(s.v(s.f("cancel_text",t,e,0))),s.b('</button>\n        <button id="confirm_dialog_submit_button" class="EdgeButton EdgeButton--primary modal-submit">'),s.b(s.v(s.f("submit_text",t,e,0))),s.b("</button>\n      </div>\n    </div>\n  </div>\n</div>\n"),s.fl()},partials:{"<dialogs/close_button0":{name:"dialogs/close_button",partials:{},subs:{}}},subs:{}});t.exports={template:r,partials:a,render:s}}).call(e,i(1))},function(t,e){"use strict";function i(t){return Object.keys(t).reduce(function(e,i){var n=t[i];return e[i]=n.template||n,n.partials&&"object"===s(n.partials)&&Object.keys(n.partials).forEach(function(t){return e[t]=n.partials[t]}),e},{})}Object.defineProperty(e,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.default=i},function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<button type="button" class="modal-btn modal-close js-close">\n  <span class="Icon Icon--close Icon--medium">\n    <span class="visuallyhidden">Close</span>\n  </span>\n</button>\n'),s.fl()},partials:{},subs:{}})}).call(e,i(1))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({keepBadgeStorageKey:"keep_badge_until",keepBadgeInterval:1e3}),this.processNewNotifications=function(t,e){e&&e.b&&"ok"===e.b.status&&e.b.response&&this.possiblyUpdateBadgeAndHighlighting(e.b.response)},this.possiblyUpdateBadgeAndHighlighting=function(t){t.show_badge_highlighting&&t.count>=0&&(this.trigger("uiUpdateConnectBadge",t),t.timestamp>=0&&(t.count>0||this.pastStorageTime())&&this.trigger("uiUpdateActivityHighlighting",t.timestamp),this.updateStorageTime())},this.pastStorageTime=function(){var t=(new Date).getTime(),e=this.storage.getItem(this.attr.keepBadgeStorageKey)||{until:0};return e.until<t},this.updateStorageTime=function(){var t=(new Date).getTime();this.storage.setItem(this.attr.keepBadgeStorageKey,{until:t+this.attr.keepBadgeInterval})},this.after("initialize",function(){this.storage=new l.default("connect_badge"),this.updateStorageTime(0),this.on(document,"dataNotificationsReceived",this.processNewNotifications)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(202),l=s(r);e.default=(0,a.default)(n)},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({copyFoundMediaLinkDialogSelector:"#copy-found-media-link-dialog",foundMediaLinkDestinationSelector:".found-media-link-destination"}),this.openDialog=function(e,i){var s=l.default.get(i.fileId);if(s){t(this.attr.copyFoundMediaLinkDialogSelector).remove();var n={attribution_name:s.attribution.name,details_url:s.detailsUrl},o=h.default.render(n);this.$dialogContainer=t(o).appendTo("body"),this.$dialog=this.$dialogContainer.find(this.attr.modalSelector),this.open(),this.selectLink()}},this.after("afterClose",function(){this.$dialogContainer.remove(),this.$dialog=t(),this.$dialogContainer=t()}),this.selectLink=function(){this.select("foundMediaLinkDestinationSelector").focus().select()},this.after("initialize",function(){this.on("click",{foundMediaLinkDestinationSelector:this.selectLink}),this.on(document,"uiNeedsCopyFoundMediaDialog",this.openDialog)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(224),l=s(r),c=i(163),d=s(c),u=i(225),h=s(u),f=(0,a.default)(d.default,n);e.default=f}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var n=i(126),o=s(n),a={},r=0,l={add:function(t){var e=++r;return a[e]=t,e},update:function(t,e){var i=this.get(t);return a[t]=o.default.merge(i,e,!0)},remove:function(t){delete a[t]},removeAll:function(){a={}},get:function(t){return a[t]},keys:function(){return Object.keys(a)}};e.default=l},function(t,e,i){(function(e){function s(t,e,i){e=e||{};for(var s in a)e[s]||(e[s]=a[s]);return r.render(t,e,i)}var n=i(220).default,o={"dialogs/close_button":i(221)},a=n(o),r=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<div id="copy-found-media-link-dialog" class="modal-container">\n  <div class="modal modal-medium draggable">\n'),s.b(s.rp("<dialogs/close_button0",t,e,"    ")),s.b('    <div class="modal-content">\n      <div class="modal-header">\n        <h3 class="modal-title">GIF provided by <span class="provided-by">'),s.b(s.v(s.f("attribution_name",t,e,0))),s.b('</span></h3>\n      </div>\n      <div class="modal-body">\n        <div class="copy-found-media-link-container">\n          <textarea class="found-media-link-destination js-initial-focus u-dir" readonly>'),s.b(s.v(s.f("details_url",t,e,0))),s.b("</textarea>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n"),s.fl()},partials:{"<dialogs/close_button0":{name:"dialogs/close_button",partials:{},subs:{}}},subs:{}});t.exports={template:r,partials:a,render:s}}).call(e,i(1))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({createOrUpdateEventName:"uiCreateCustomTimeline",orderSelector:"[name=create-timeline-order]:checked"}),this.around("params",function(t){var e=t();return e.tweetId=this.tweetId,e.impressionId=this.impressionId,e}),this.openDialog=function(t,e){this.tweetId=e.tweetId,this.impressionId=e.impressionId;var i={is_create_dialog:!0,id_prefix:"create",curation_reverse_chron:!0},s=p.default.render(i);this.$node.html(s),this.$dialog=this.$dialogContainer.find(this.attr.modalSelector),this.open()},this.after("open",function(){l.default.attachTo(".custom-timeline-name-field",{maxLength:25,superwarnLength:20,warnLength:15,textSelector:"#custom-timeline-name",counterSelector:".custom-timeline-name-count"}),l.default.attachTo(".custom-timeline-description-field",{maxLength:160,superwarnLength:150,warnLength:140,textSelector:"#custom-timeline-description",counterSelector:".custom-timeline-description-count"})}),this.after("initialize",function(){this.on(document,"uiOpenCreateCustomTimelineDialog",this.openDialog)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(227),l=s(r),c=i(163),d=s(c),u=i(235),h=s(u),f=i(236),p=s(f);e.default=(0,a.default)(d.default,h.default,n)},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.after("initialize",function(){this.initTextNode()})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(228),l=s(r),c=i(233),d=s(c),u=(0,a.default)(n,l.default,d.default);e.default=u},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){l.default.mixin(this,[h.default]),this.caret=a.default,this.defaultAttrs({textSelector:"textarea.tweet-box",textFakeFocusClass:"fake-focus"}),this.hasFakeFocus=function(){return this.$text.hasClass(this.attr.textFakeFocusClass)},this.toggleFakeFocus=function(t){this.$text.toggleClass(this.attr.textFakeFocusClass,!!t)},this.ignoreDuringFakeFocus=function(t){var e=this;return function(){if(!e.$text.hasClass(e.attr.textFakeFocusClass))return t.apply(this,arguments)}},this.hasFocus=function(){return document.activeElement===this.$text[0]||this.hasFakeFocus()},this.getVisibleText=function(){return this.cleanedText||""},this.setVisibleText=function(t){this.detectUpdatedText(!1,t)},this.addHiddenText=function(t){return t},this.cleanText=function(t){return t},this.detectUpdatedText=function(t,e){void 0===e?e=this.$text.val():this.$text.val(e);var i=a.default.getPosition(this.$text[0]);(e!==this.prevText||t)&&(this.prevText=e,this.updateCleanedTextAndPosition(this.cleanText(e),i)),this.detectUpdatedCursorPosition(i)},this.updateCleanedTextAndPosition=function(t,e){this.cleanedText=t,this.trigger("uiTextChanged",{text:t,position:Math.min(e,t.length)})},this.detectUpdatedCursorPosition=function(t){t=Math.min(t,(this.cleanedText||"").length),t!==this.prevPosition&&(this.prevPosition=t,this.trigger("uiCursorPositionChanged",{position:t}))},this.setCursorPosition=function(t){void 0===t&&(t=this.cursorPosition),void 0===t&&(t=this.$text.val().length),a.default.setPosition(this.$text.get(0),t),this.detectUpdatedCursorPosition(t)},this.changeTextAndPosition=function(t,e){this.setVisibleText(e.text),this.setCursorPosition(e.position)},this.focus=function(){this.hasFocus()||(document.body.focus(),this.$text.trigger("focusin"),this.$text.focus())},this.initTextNode=function(){this.$text=this.select("textSelector"),this.detectUpdatedText()},this.inputPoll=function(){this.detectUpdatedText()},this.setEditability=function(t){this.$text.prop("disabled",!t)},this.after("initialize",function(){this.on("uiChangeTextAndPosition",this.changeTextAndPosition),this.on("uiInputPoll",this.inputPoll),this.on("uiEnableEditing",this.setEditability.bind(this,!0)),this.on("uiDisableEditing",this.setEditability.bind(this,!1)),this.attachChild(d.default,this.$text)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(229),a=s(o),r=i(121),l=s(r),c=i(230),d=s(c),u=i(231),h=s(u);e.default=n},,function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({pollIntervalInMs:100}),this.hasFocus=function(){return document.activeElement===this.node},this.start=function(){this.poll(),void 0===this.intervalId&&(this.intervalId=setInterval(this.poll.bind(this),this.attr.pollIntervalInMs))},this.poll=function(){this.trigger("uiInputPoll"),this.hasFocus()||this.stop()},this.stop=function(){void 0!==this.intervalId&&(clearInterval(this.intervalId),this.intervalId=void 0)},this.after("initialize",function(){this.on("focus",this.start),this.hasFocus()&&this.start()}),this.before("teardown",this.stop)}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o);e.default=(0,a.default)(n)},,,function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({counterSelector:".tweet-counter",maxLength:140,superwarnLength:130,warnLength:120,superwarnClass:"superwarn",warnClass:"warn",maxReachedClass:"max-reached",dmOnly:!1}),this.updateCounter=function(){var t=this.getLength(),e=t>=this.attr.warnLength&&t<this.attr.superwarnLength,i=t>=this.attr.superwarnLength,s=this.maxReached(),n=this.attr.maxLength-t;this.$counter.html(n).toggleClass(this.attr.warnClass,e).toggleClass(this.attr.superwarnClass,i).toggleClass(this.attr.maxReachedClass,s),(e||i)&&this.trigger("uiCharCountWarningVisible",{charCount:n})},this.getLength=function(t){return t=this.addHiddenText(void 0===t?this.getVisibleText():t),t!==this.prevCounterText&&(this.prevCounterText=t,this.prevCounterLength=a.default.getTweetLength(t)),this.prevCounterLength},this.maxReached=function(){return this.getLength()>this.attr.maxLength},this.after("initialize",function(){this.$counter=this.select("counterSelector"),this.on("uiTextChanged uiAttachmentChanged",this.updateCounter),this.updateCounter()})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(234),a=s(o);e.default=n},,function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var t=/^\s*$/;this.defaultAttrs({top:90,saveSelector:".update-custom-timeline-button",nameSelector:"[name=name]",descriptionSelector:"[name=custom-timeline-description]",dialogTitleSelector:".modal-title",maxReachedSelector:".max-reached"}),this.params=function(){return{name:this.$name.val(),description:this.$description.val(),order:this.select("orderSelector").val()}},this.saveCustomTimeline=function(t,e){this.disableSaveButton(),this.trigger(this.attr.createOrUpdateEventName,this.params())},this.disableSaveButton=function(){this.$saveButton.prop("disabled",!0)},this.toggleSaveButton=function(e,i){var s=t.test(this.$name.val()),n=this.select("maxReachedSelector").length>0;this.$saveButton.prop("disabled",s||n)},this.after("open",function(){this.$saveButton=this.select("saveSelector"),this.$name=this.select("nameSelector"),this.$description=this.select("descriptionSelector"),this.toggleSaveButton()}),this.after("initialize",function(){this.on(document,"dataCustomTimelineUpdated",this.close),this.on("click",{saveSelector:this.saveCustomTimeline}),this.on("input",{nameSelector:this.toggleSaveButton}),this.on("uiTextChanged",this.toggleSaveButton)})}},function(t,e,i){(function(e){function s(t,e,i){e=e||{};for(var s in a)e[s]||(e[s]=a[s]);return r.render(t,e,i)}var n=i(220).default,o={"dialogs/close_button":i(221)},a=n(o),r=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<div class="modal modal-medium draggable">\n  <div class="modal-content">\n'),s.b(s.rp("<dialogs/close_button0",t,e,"    ")),s.b('    <div class="modal-header">\n      <h3 class="modal-title">\n        '),s.s(s.f("is_create_dialog",t,e,1),t,e,0,194,217,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b("Create a new collection")}),t.pop()),s.b("\n"+i),s.b("        "),s.s(s.f("is_create_dialog",t,e,1),t,e,1,0,0,"")||s.b("Edit collection"),s.b("\n"+i),s.b('      </h3>\n    </div>\n\n    <div class="modal-body">\n      <div class="custom-timeline-editor">\n        '),s.s(s.f("is_create_dialog",t,e,1),t,e,0,430,621,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b('<p class="explanation">\n          Collections are public sets of Tweets that you control.\n          <br />\n          Create a collection, add Tweets, and share it with the world.\n        </p>')}),t.pop()),s.b("\n"),s.b("\n"+i),s.b('        <div class="field custom-timeline-name-field">\n          <label class="t1-label" for="custom-timeline-name">Collection name</label>\n          <input type="text" class="text" name="name" id="custom-timeline-name" value="'),s.b(s.v(s.f("timeline_name",t,e,0))),s.b('" aria-describedby="custom-timeline-name-help" />\n          <p class="help-text">\n            <span id="custom-timeline-name-help">25 characters</span>\n            <span class="custom-timeline-name-count">25</span>\n          </p>\n        </div>\n        <hr/>\n\n        <div class="field custom-timeline-description-field">\n          <label class="t1-label" for="custom-timeline-description">Description</label>\n          <textarea name="custom-timeline-description" id="custom-timeline-description" aria-describedby="custom-timeline-description-help">'),s.b(s.v(s.f("timeline_description",t,e,0))),s.b('</textarea>\n          <p class="help-text">\n            <span id="custom-timeline-description-help">160 characters, optional</span>\n            <span class="custom-timeline-description-count">160</span>\n          </p>\n        </div>\n        <hr/>\n\n        <fieldset class="field">\n          <legend class="t1-legend">Collection order</legend>\n          <div class="options">\n            <label class="t1-label u-block">\n              <input class="radio u-inlineBlock" type="radio" name="'),s.b(s.v(s.f("id_prefix",t,e,0))),s.b('-timeline-order" value="curation_reverse_chron"'),s.s(s.f("curation_reverse_chron",t,e,1),t,e,0,2037,2055,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(' checked="checked"')}),t.pop()),s.b(' />\n              <b>Recently added first</b>\n            </label>\n            <label class="t1-label u-block">\n              <input class="radio u-inlineBlock" type="radio" name="'),s.b(s.v(s.f("id_prefix",t,e,0))),s.b('-timeline-order" value="tweet_chron"'),s.s(s.f("tweet_chron",t,e,1),t,e,0,2327,2345,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(' checked="checked"')}),t.pop()),s.b(' />\n              <b>Oldest first</b>\n            </label>\n            <label class="t1-label u-block">\n              <input class="radio u-inlineBlock" type="radio" name="'),s.b(s.v(s.f("id_prefix",t,e,0))),s.b('-timeline-order" value="tweet_reverse_chron"'),s.s(s.f("tweet_reverse_chron",t,e,1),t,e,0,2614,2632,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(' checked="checked"')}),t.pop()),s.b(' />\n              <b>Newest first</b>\n            </label>\n          </div>\n        </fieldset>\n        <hr/>\n\n        <div class="custom-timeline-editor-save">\n          <button type="button" class="btn btn-primary update-custom-timeline-button" data-custom-timeline-id="'),s.b(s.v(s.f("id",t,e,0))),s.b('" disabled>\n            '),s.s(s.f("is_create_dialog",t,e,1),t,e,0,2979,2996,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b("Create collection")}),t.pop()),s.b("\n"+i),s.b("            "),s.s(s.f("is_create_dialog",t,e,1),t,e,1,0,0,"")||s.b("Save collection"),s.b("\n"+i),s.b("          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n"),s.fl()},partials:{"<dialogs/close_button0":{name:"dialogs/close_button",partials:{},subs:{}}},subs:{}});t.exports={template:r,partials:a,render:s}}).call(e,i(1))},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({top:90,closeOnOtherDialogOpened:!0,timelineSelectorSelector:".timeline-selector",wasMemberSelector:".timeline-item .was-member",wasNotMemberSelector:".timeline-item .was-not-member",submitSelector:".js-submit"}),this.openDialog=function(t,e){var i=p.default.render({});this.$node.html(i),this.$dialog=this.$dialogContainer.find(this.attr.modalSelector),this.tweetId=e.tweetId,this.impressionId=e.impressionId,this.trigger("uiNeedsFullCustomTimelines",{tweetId:e.tweetId}),this.scribe({component:"curate_dialog",action:"open"},e),this.open()},this.renderFullTimelinesList=function(t,e){this.select("timelineSelectorSelector").html(e.html)},this.submitChanges=function(){function e(e){return e.map(function(){return t(this).attr("data-timeline-id")}).get()}this.select("submitSelector").prop("disabled",!0);var i=this.select("wasMemberSelector").filter(":not(:checked)"),s=this.select("wasNotMemberSelector").filter(":checked"),n={removed:e(i),added:e(s),tweetId:this.tweetId,impressionId:this.impressionId};this.trigger("uiCurateTweets",n)},this.after("initialize",function(){this.on(document,"uiOpenCurateDialog",this.openDialog),this.on(document,"dataGotFullCustomTimelines",this.renderFullTimelinesList),this.on(document,"dataTweetsCurated",this.close),this.on("click",{submitSelector:this.submitChanges})})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(163),l=s(r),c=i(238),d=s(c),u=i(142),h=s(u),f=i(239),p=s(f);e.default=(0,a.default)(l.default,n,d.default,h.default)}).call(e,i(10))},function(t,e){"use strict";function i(){this.defaultAttrs({createCustomTimelineSelector:".js-create-custom-timeline-button"}),this.openCreateDialog=function(){this.trigger("uiOpenCreateCustomTimelineDialog",{tweetId:this.tweetId,impressionId:this.impressionId})},this.after("initialize",function(){this.on("click",{createCustomTimelineSelector:this.openCreateDialog})})}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i},function(t,e,i){(function(e){function s(t,e,i){e=e||{};for(var s in a)e[s]||(e[s]=a[s]);return r.render(t,e,i)}var n=i(220).default,o={"dialogs/close_button":i(221),create_custom_timeline_button:i(240)},a=n(o),r=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<div class="modal modal-medium draggable">\n  <div class="modal-content">\n'),s.b(s.rp("<dialogs/close_button0",t,e,"    ")),s.b('    <div class="modal-header">\n      <h3 class="modal-title">Add Tweet to collection</h3>\n    </div>\n    <div class="modal-body">\n      <div class="timeline-selector"></div>\n    </div>\n    <div class="modal-footer">\n'),s.b(s.rp("<create_custom_timeline_button1",t,e,"      ")),s.b("\n"+i),s.b('      <button type="button" class="btn js-close">Cancel</button>\n      <button type="button" class="btn primary-btn modal-submit js-submit">Save changes</button>\n    </div>\n  </div>\n</div>\n'),s.fl()},partials:{"<dialogs/close_button0":{name:"dialogs/close_button",partials:{},subs:{}},"<create_custom_timeline_button1":{name:"create_custom_timeline_button",partials:{},subs:{}}},subs:{}});t.exports={template:r,partials:a,render:s}}).call(e,i(1))},function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<button type="button" class="btn-link js-create-custom-timeline-button" data-element-term="create_custom_timeline_button">Create new collection</button>\n'),s.fl()},partials:{},subs:{}})}).call(e,i(1))},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({cancelSelector:".cancel-action",deleteSelector:".delete-action"}),this.openDeleteTweet=function(t,e){this.attr.sourceEventData=e,this.displayTweet(e.tweetId,{modal:"delete"}),this.id=e.id,this.open()},this.deleteTweet=function(){this.trigger("uiDidDeleteTweet",{id:this.id,sourceEventData:this.attr.sourceEventData})},this.deleteTweetSuccess=function(t,e){this.trigger("uiDidDeleteTweetSuccess",this.attr.sourceEventData),this.close()},this.restoreFocusToTweet=function(e){t(e.target).is(this.$dialog)&&this.activeEl&&this.trigger(t(this.activeEl).closest(".tweet"),"uiShouldAddFocusStyle")},this.after("initialize",function(){this.on("click",{cancelSelector:this.close,deleteSelector:this.deleteTweet}),this.on(document,"uiOpenDeleteDialog",this.openDeleteTweet),this.on(document,"dataDidDeleteTweet",this.deleteTweetSuccess),this.on(document,"uiDialogRestorePreviousFocus",this.restoreFocusToTweet),this.on(document,"uiCloseDeleteTweetDialog",this.close)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(163),l=s(r),c=i(182),d=s(c),u=(0,a.default)(n,l.default,d.default);e.default=u}).call(e,i(10))},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(t){var e="#dm_dialog";mt.default.attachTo(document,t),rt.default.attachTo(document),ct.default.attachTo(e,t,{timestampSelector:".time"}),ut.default.attachTo(document,t),ft.default.attachTo(".dm-media-container"),_t.default.attachTo(document),vt.default.attachTo(document),a.default.attachTo(document),g.default.attachTo(document),W.default.attachTo(document),K.default.attachTo(document),X.default.get("welcome_message_add_to_conversation_enabled")&&b.default.attachTo(document),D.default.attachTo(document),z.default.attachTo(".DMInbox",{notifications:X.default.get("notifications"),usePushNotifications:X.default.get("usePushForNotifications")}),d.default.attachTo(".DMCompose",{maxParticipants:X.default.get("participant_max")||t.dm_participant_max||50,currentUserId:t.userId}),p.default.attachTo(e),X.default.get("notifications")&&et.default.attachTo(document,{conversationSelector:".DMConversation-content"}),S.default.attachTo(document),I.default.attachTo(document),F.default.attachTo(document),U.default.attachTo(document),$.default.attachTo(document),q.default.attachTo(document),C.default.attachTo(document),x.default.attachTo(document),O.default.attachTo(document),L.default.attachTo(document),A.default.attachTo(document),h.default.attachTo(document),Z.default.attachTo(document),ot.default.attachTo(document),X.default.get("twitter_video_player")||st.default.attachTo(document);var i=t.dm_options||{};wt.default.attachTo(document,{open:i.show_dm_dialog,text:i.default_composer_text,welcomeMessageId:i.welcome_message_id,conversation:{id:i.conversation_id},compose:{id:i.recipient_id,screenName:i.recipient,name:i.recipient_name,avatar:i.recipient_avatar}}),Ct.default.attachTo(document),Dt.default.attachTo(document),X.default.get("card_prefetch")&&l.default.attachTo(".DMComposer",{cardPrefetchInterval:X.default.get("card_prefetch_interval_in_seconds")})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(243),a=s(o),r=i(353),l=s(r),c=i(355),d=s(c),u=i(382),h=s(u),f=i(383),p=s(f),m=i(851),g=s(m),v=i(852),b=s(v),w=i(853),S=s(w),y=i(855),C=s(y),T=i(856),D=s(T),M=i(857),I=s(M),P=i(858),x=s(P),k=i(859),A=s(k),E=i(867),O=s(E),R=i(868),F=s(R),N=i(869),U=s(N),j=i(870),L=s(j),B=i(871),$=s(B),V=i(872),q=s(V),H=i(873),z=s(H),G=i(875),W=s(G),Q=i(876),K=s(Q),Y=i(461),X=s(Y),J=i(877),Z=s(J),tt=i(878),et=s(tt),it=i(879),st=s(it),nt=i(880),ot=s(nt),at=i(881),rt=s(at),lt=i(882),ct=s(lt),dt=i(891),ut=s(dt),ht=i(892),ft=s(ht),pt=i(894),mt=s(pt),gt=i(895),vt=s(gt),bt=i(896),wt=s(bt),St=i(897),_t=s(St),yt=i(898),Ct=s(yt),Tt=i(899),Dt=s(Tt),Mt=!!t("#dm_dialog").length;e.default=Mt?n:t.noop}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({noShowError:!0}),this.addParticipants=function(t,e){e=e||{},this.post({url:"/i/direct_messages/add_participants",data:{id:e.conversation_id,participant_ids:e.participant_ids},eventData:e,success:u(t.target,"dataDMConversationResult"),error:u(t.target,"dataDMError")})},this.after("initialize",function(){this.on("uiAddConversationParticipants",this.addParticipants)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(244),l=s(r),c=i(352),d=s(c),u=d.default.triggerFn;e.default=(0,a.default)(n,l.default)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,i){(function(t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={triggerFn:function(e,i,s){return i=Array.isArray(i)?i:[i],function(n){i.forEach(function(i){var o=t.isFunction(i)?i(n):i,a=t.isFunction(s)?s(n):s;o&&t(e).trigger(o,a||n)})}},chain:function(){var e=Array.prototype.slice.call(arguments);return function(){var i=Array.prototype.slice.call(arguments);for(var s in e)t.isFunction(e[s])&&e[s].apply(e[s],i)}}}}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({basePrefetchEndpointUrl:"/i/cards/preview/v1",cardPrefetchInterval:1e4,prefetchOnLeadingEdge:!0}),this.filterCachedUri=function(t){return!this.prefetchedUri[t]},this.prefetchCardWithUri=function(t){this.prefetchedUri[t]=!0,this.get({url:this.attr.basePrefetchEndpointUrl,data:{card_uri:t},dataType:this.DATA_TYPES.TEXT})},this.setCardUriParam=function(t,e){var i=e&&e.urls;Array.isArray(i)&&(1===i.length?this.trigger("uiSetDmCreateCardUriParam",{cardUri:i[0]}):this.trigger("uiResetDmCreateCardUriParam"))},this.prefetchCard=function(t,e){var i=e&&e.urls;Array.isArray(i)&&1===i.length&&i.filter(this.filterCachedUri,this).forEach(this.prefetchCardWithUri,this)},this.after("initialize",function(){this.prefetchedUri={},this.on("uiGotUrlInText",this.setCardUriParam),this.on("uiGotUrlInText",(0,d.default)(this.prefetchCard,this.attr.cardPrefetchInterval,this.attr.cardPrefetchInterval,this.attr.prefetchOnLeadingEdge))})}Object.defineProperty(e,"__esModule",{
value:!0});var o=i(111),a=s(o),r=i(244),l=s(r),c=i(354),d=s(c),u=(0,a.default)(n,l.default);e.default=u},function(t,e){"use strict";function i(t,e,i,s){var n=void 0,o=void 0,a=void 0;return function(){var r=this,l=arguments;n&&clearTimeout(n);var c=Date.now(),d=function(){n=null,a=void 0,o=s?o:t.apply(r,l)};return a?c-a>i&&(o=t.apply(r,l),a=c):(o=s?t.apply(r,l):o,a=c),n=setTimeout(d,e),o}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.attributes({nextButtonSelector:".dm-initiate-conversation",dmTypeaheadSelector:".DMDialogTypeahead",maxParticipants:50,currentUserId:null}),this.enable=function(){this.select("nextButtonSelector").removeClass("disabled").prop("disabled",!1)},this.disable=function(){this.select("nextButtonSelector").addClass("disabled").prop("disabled",!0)},this.isGroupSelected=function(t,e){return e&&e.groups&&e.groups.length},this.initiateConversationFromSelectedGroup=function(t,e){var i=e.groups[0];this.initiateConversation("uiRenderConversationView",{conversation_id:i.id,name:i.name})},this.isNextButtonSelected=function(t,e){return"click"===t.type||"keydown"===t.type&&t.which===f.default.ENTER},this.initiateConversationFromSelectedAccounts=function(){var t=void 0,e=void 0;switch(this.selectedAccounts.length){case 0:t="uiRenderNewConversationView",e={name:"@"+this.manualScreenName,screen_names:this.manualScreenName?[this.manualScreenName]:[]};break;case 1:var i=this.selectedAccounts[0];t="uiRenderConversationView",e={conversation_id:c.default.generateConversationId(this.attr.currentUserId,i.id),name:i.name,is_oto:!0};break;default:var s=this.selectedAccounts.map(function(t){return t.id});t="uiRenderNewConversationView",e={name:c.default.generateConversationName(this.selectedAccounts),recipient_ids:s}}this.initiateConversation(t,e)},this.reset=function(t,e){this.trigger("uiInitializeDMTypeahead"),this.defaultComposerText=e&&e.default_composer_text||"",this.hasTweetAttachment=e&&e.has_tweet_attachment||!1},this.storeSelectedAccounts=function(t,e){this.selectedAccounts=e.accounts||[]},this.handleTextChange=function(t,e){var i=(e.text||"").replace(/^@/,"");this.manualScreenName=m.default.isValidUsername("@"+i)?i:""},this.initiateConversation=function(t,e){this.trigger(t,o({},e,{default_composer_text:this.defaultComposerText,has_tweet_attachment:this.hasTweetAttachment,retain_tweet_attachment:!0})),this.reset()},this.updateState=function(t,e){var i=this.manualScreenName,s=this.selectedAccounts.length;i||s?this.enable():this.disable()},this.after("handleTextChange",this.updateState),this.after("storeSelectedAccounts",this.updateState),this.after("reset",this.updateState),this.after("initialize",function(){this.attachChild(v.default,this.$node,{maxItems:this.attr.maxParticipants-1}),this.selectedAccounts=[],this.on("uiDMTypeaheadSelectedItemsChanged",this.storeSelectedAccounts),this.on("uiDMTypeaheadSelectedItemsChanged",(0,u.default)(this.initiateConversationFromSelectedGroup,this.isGroupSelected)),this.on("uiTextChanged",this.handleTextChange),this.on("click keydown",{nextButtonSelector:(0,u.default)(this.initiateConversationFromSelectedAccounts,this.isNextButtonSelected)}),this.on(document,"uiOpenNewDM",this.reset)})}Object.defineProperty(e,"__esModule",{value:!0});var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},a=i(111),r=s(a),l=i(356),c=s(l),d=i(358),u=s(d),h=i(359),f=s(h),p=i(234),m=s(p),g=i(360),v=s(g),b=i(231),w=s(b),S=(0,r.default)(n,w.default);e.default=S},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var n=i(123),o=s(n),a=i(357),r=s(a),l={generateConversationName:function(t){return 1===t.length?t[0].name:2===t.length?(0,o.default)("{{first}}, {{second}}",{first:t[0].name,second:t[1].name}):t.length>2?(0,o.default)("{{first}} + {{count}}",{first:t[0].name,count:t.length-1}):void 0},generateConversationId:function(t,e){if(t&&e){var i=[t,e];return(r.default.compare(i[0],i[1])<0?i:i.reverse()).join("-")}},sortRecipients:function(t){return(t||[]).sort(function(t,e){return r.default.compare(t.id,e.id)})}};e.default=l},,function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i){return function(){if(e.apply(i||this,arguments))return t.apply(i||this,arguments)}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={BACKSPACE:8,CLEAR:12,TAB:9,ENTER:13,ESC:27,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46,Y:89,Z:90}},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.attributes({textSelector:"textarea.TokenizedMultiselect-input",selectedClass:"is-selected",suggestionClass:"DMTypeaheadSuggestions-item",suggestionSelector:".DMTypeaheadSuggestions-item",highlightedClass:"is-highlighted",highlightedSelector:".is-highlighted",suggestionsContainerSelector:".DMTypeaheadSuggestions",tokenIdDelimiter:"::",topAccountsLength:5,accountsDatasource:"dmAccounts",conversationsDatasource:"dmConversations",typeaheadSrc:"compose_message",preselectedItems:[],maxItems:50}),this.buildAccountTemplateData=function(t){var e=t.id_str,i=this.generateTokenId(this.attr.accountsDatasource,e),s=this.isItemSelected(i),n=this.isPreSelected(e),o=n?"":this.attr.suggestionClass,a=this.hasBusinessContext(t),r={emojified_text_as_html:d.default.emojifyText(t.name)};return{data_token_id:i,data_token_text:t.name,suggestion_class:o,title:{text:t.name,rich_text:r,screen_name:t.screen_name,verified:t.verified,"protected":!(!t.is_protected&&!t.protected)},avatar:{images:{src:t.profile_image_url_https,alt:t.name}},selected:s,preselected:n,is_group:!1,has_business_context:a}},this.buildGroupTemplateData=function(t){return{data_token_id:this.generateTokenId(this.attr.conversationsDatasource,t.id),data_token_text:t.emojified_title,suggestion_class:this.attr.suggestionClass,html:t.html,is_group:!0}},this.buildTemplateDataFromDMConversation=function(t){return t.is_group?this.buildGroupTemplateData(t):1===t.participants.length?this.buildAccountTemplateData(t.participants[0]):void 0},this.processEmptyQuerySuggestions=function(t){var e=t.suggestions.dmConversations||[],i=e.map(this.buildTemplateDataFromDMConversation.bind(this)),s=g.default.render({suggestions:i,has_suggestions:Boolean(i.length)});this.trigger("uiTokenizedMultiselectSuggestions",{html:s,preserve_previous_hightlight:!1})},this.processNonEmptyQuerySuggestions=function(t){var e=(t.suggestions.dmAccounts||[]).map(this.buildAccountTemplateData.bind(this)),i=(t.suggestions.dmConversations||[]).map(this.buildGroupTemplateData.bind(this)),s=i.length?e.slice(0,this.attr.topAccountsLength):e,n=b.default.render({accounts:s,groups:i,has_accounts:s.length,has_groups:i.length});this.trigger("uiTokenizedMultiselectSuggestions",{html:n,preserve_previous_hightlight:!0})},this.processSuggestions=function(t,e){var i=e.queryData&&e.queryData.query;e.suggestions&&this.currentQuery===i&&(""===i?this.processEmptyQuerySuggestions(e):this.processNonEmptyQuerySuggestions(e))},this.requestEmptyQuerySuggestions=function(){var t=this.attr.preselectedItems||[],e={id:this.typeaheadId,queryData:{query:"",dmConversationsOptions:{excludeGroups:this.selectedItems.length||t.length,sortBySortId:!0,excludeOneToOnes:!1}},datasources:[this.attr.conversationsDatasource]};this.trigger("uiNeedsTypeaheadSuggestions",e)},this.requestSuggestions=function(t,e){if(this.currentQuery=e.text,""===this.currentQuery)return void this.requestEmptyQuerySuggestions();var i=this.attr.preselectedItems||[],s=this.selectedItems.length||i.length,n=s?[this.attr.accountsDatasource]:[this.attr.accountsDatasource,this.attr.conversationsDatasource],o={id:this.typeaheadId,queryData:{query:e.text,typeaheadSrc:this.attr.typeaheadSrc,dmConversationsOptions:{excludeGroups:s,sortBySortId:!1,excludeOneToOnes:!s}},datasources:n};this.trigger("uiNeedsTypeaheadSuggestions",o)},this.splitTokenId=function(t){var e=t.split(this.attr.tokenIdDelimiter);return{datasource:e[0],id:e[1]}},this.handleItemSelected=function(t,e){this.selectedItems=e.selected_items||[];var i=this.selectedItems.map(function(t){var e=this.splitTokenId(t.id);return{datasource:e.datasource,id:e.id,text:t.text}},this),s=i.filter(function(t){return t.datasource===this.attr.accountsDatasource},this).map(function(t){return{id:t.id,name:t.text}}),n=i.filter(function(t){return t.datasource===this.attr.conversationsDatasource},this).map(function(t){return{id:t.id,name:t.text}});this.trigger("uiDMTypeaheadSelectedItemsChanged",{accounts:s,groups:n})},this.generateTokenId=function(t,e){return t+this.attr.tokenIdDelimiter+e},this.isItemSelected=function(e){var i=this.selectedItems.map(function(t){return t.id});return t.inArray(e+"",i||[])>=0},this.isPreSelected=function(e){return t.inArray(e+"",this.attr.preselectedItems||[])>=0},this.hasBusinessContext=function(t){return"enabled"===t.customer_service_state},this.resetAndInitialize=function(t,e){this.select("suggestionsContainerSelector").empty(),this.trigger("uiResetTokenizedMultiselect"),this.attr.preselectedItems=e&&e.preselectedItems&&e.preselectedItems.length?e.preselectedItems:[],e&&e.maxItems&&(this.attr.maxItems=e.maxItems,this.trigger("uiTokenizedMultiSelectMaxItems",{maxItems:e.maxItems})),this.selectedItems=[],this.requestEmptyQuerySuggestions(),this.currentQuery=""},this.after("handleItemSelected",this.requestEmptyQuerySuggestions),this.handleTokenChangeAccessibility=function(t,e){var i=this.splitTokenId(e.id);if(i.datasource===this.attr.accountsDatasource){var s="uiTokenizedMultiselectTokenAdded"===t.type?(0,a.default)("Added {{user}}",{user:e.text}):(0,a.default)("Removed {{user}}",{user:e.text});this.trigger("uiShouldSpeakMessage",{message:s})}},this.after("initialize",function(){this.typeaheadId="dm_typeahead"+Math.floor(1e6*Math.random()),this.attachChild(h.default,this.$node,this.attr),this.on("uiTokenizedMultiselectTokenAdded uiTokenizedMultiselectTokenRemoved",this.handleTokenChangeAccessibility),this.on("uiTokenizedMultiselectTextChanged",this.requestSuggestions),this.on(document,"dataTypeaheadSuggestionsResults",this.processSuggestions),this.on("uiTokenizedMultiselectItemSelectionChanged",this.handleItemSelected),this.on("uiInitializeDMTypeahead",this.resetAndInitialize),this.selectedItems=[],this.requestEmptyQuerySuggestions()})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(123),a=s(o),r=i(111),l=s(r),c=i(361),d=s(c),u=i(367),h=s(u),f=i(231),p=s(f),m=i(370),g=s(m),v=i(381),b=s(v),w=(0,l.default)(n,p.default);e.default=w}).call(e,i(10))},,,,,,,function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.keymap=h.default;var e=0,i=1;this.attributes({textSelector:"textarea.TokenizedMultiselect-input",inputContainerSelector:".TokenizedMultiselect-inputContainer",textMinWidth:100,tokenClass:"InputToken",tokenSelector:".InputToken",focusedTokenSelector:".InputToken:focus",tokenDeleteClass:"InputToken-delete",tokenDeleteSelector:".InputToken-delete",highlightedClass:"is-highlighted",highlightedSelector:".is-highlighted",selectedClass:"is-selected",suggestionClass:"TokenizedMultiselect-suggestion",suggestionSelector:".TokenizedMultiselect-suggestion",suggestionsContainerSelector:".TokenizedMultiselect-suggestionsContainer",maxItems:50}),this.handleKeyPress=function(t){if("keydown"===t.type&&!t.shiftKey){var s=t.which||t.keycode,n=this.select("focusedTokenSelector").length,o=this.select("highlightedSelector").length,a=!this.$text.val();switch(s){case h.default.TAB:n?(t.preventDefault(),t.stopPropagation(),this.focusInput()):o&&(t.preventDefault(),t.stopPropagation(),this.tokenizeHighlightedSuggestion());break;case h.default.ENTER:t.preventDefault(),this.toggleTokenization();break;case h.default.ESC:o&&(t.preventDefault(),t.stopPropagation(),this.clearHighlight());break;case h.default.BACKSPACE:n?(this.removeFocusedToken(),t.preventDefault()):a&&(this.removeLastToken(),t.preventDefault());break;case h.default.DELETE:n&&this.removeFocusedToken();break;case h.default.UP:t.preventDefault(),n&&this.focusInput(),this.moveSuggestionHighlight(i);break;case h.default.DOWN:t.preventDefault(),n&&this.focusInput(),this.moveSuggestionHighlight(e);break;case h.default.LEFT:n?this.focusNeighbor(i):a&&this.focusLastToken();break;case h.default.RIGHT:n&&this.focusNeighbor(e)}}},this.focusNeighbor=function(t){var i=t===e?"next":"prev",s=this.select("focusedTokenSelector");s.length&&s[i]().focus()},this.focusLastToken=function(){this.select("tokenSelector").last().focus()},this.focusInput=function(){this.$text.focus()},this.removeFocusedToken=function(t){var i=this.select("focusedTokenSelector");t&&"click"===t.type?this.focusInput():this.focusNeighbor(e),this.removeToken(i)},this.removeLastToken=function(){this.removeToken(this.select("tokenSelector").last())},this.removeToken=function(t){t.length&&(this.trigger("uiTokenizedMultiselectTokenRemoved",{text:t.attr("data-token-text"),id:t.attr("data-token-id")}),t.remove())},this.getFirstSuggestion=function(){return this.select("suggestionSelector").first()},this.getHighlightedSuggestion=function(){return this.select("highlightedSelector").first()},this.getNeighboringSuggestion=function(t,i){var s=i===e?"nextAll":"prevAll";return t[s](this.attr.suggestionSelector).first()},this.moveSuggestionHighlight=function(t){var e=this.getHighlightedSuggestion(),i=this.getNeighboringSuggestion(e,t);e.length?i.length&&this.setHighlight(i):this.setHighlight(this.getFirstSuggestion())},this.toggleTokenization=function(){var t=this.getHighlightedSuggestion(),e=t.attr("data-token-id");this.isTokenized(t)?(this.removeToken(this.select("tokenSelector").filter('[data-token-id="'+e+'"]')),this.$text.val("").focus()):this.tokenizeHighlightedSuggestion()},this.tokenizeHighlightedSuggestion=function(){var e=this.getHighlightedSuggestion(),i=e.attr("data-token-text");if(this.canTokenize(e)){var s=t(p.default.render({token_class:this.attr.tokenClass,token_delete_class:this.attr.tokenDeleteClass,emojified_token_text:{emojified_text_as_html:l.default.emojifyText(i),text:i},token_id:e.attr("data-token-id"),token_text:i}));e.addClass(this.attr.selectedClass),this.$text.before(s),this.$text.val("").focus(),this.trigger("uiTokenizedMultiselectTokenAdded",{text:s.attr("data-token-text"),id:s.attr("data-token-id")})}},this.isTokenized=function(e){return t.inArray(e.attr("data-token-id"),this.getSelectedItemsIds())>=0},this.canTokenize=function(t){var e=this.select("tokenSelector").length>=this.attr.maxItems;return!e&&t.length&&!this.isTokenized(t)},this.getSelectedItemsIds=function(){return t.map(this.select("tokenSelector"),function(e){return t(e).attr("data-token-id")})},this.getSelectedItems=function(){return t.map(this.select("tokenSelector"),function(e){return{id:t(e).attr("data-token-id"),text:t(e).attr("data-token-text")}})},this.handleTextChange=function(t,e){this.trigger("uiTokenizedMultiselectTextChanged",{text:e.text,selected_items:this.getSelectedItemsIds()})},this.handleMouseOver=function(e){this.setHighlight(t(e.target).closest(this.attr.suggestionSelector))},this.updateWidth=function(){var t=this.select("tokenSelector").last();if(t.length){var e=this.select("inputContainerSelector").width()-t.position().left-t.outerWidth(!0),i=e<this.attr.textMinWidth?"100%":e;this.$text.outerWidth(i)}this.$text.prop("scrollHeight")>this.$text.prop("clientHeight")&&this.$text.outerWidth("100%")},this.selectedItemsChanged=function(){this.trigger("uiTokenizedMultiselectItemSelectionChanged",{selected_items:this.getSelectedItems()})},this.updateScroll=function(){var t=this.getHighlightedSuggestion(),e=this.select("suggestionsContainerSelector"),i=e.prop("scrollTop"),s=t.position().top+t.outerHeight();if(s>e.height()){var n=s-e.height();e.scrollTop(i+n)}else t.position().top<0&&e.scrollTop(i+t.position().top)},this.reset=function(){this.select("tokenSelector").remove(),this.$text.val("")},this.setMaxItems=function(t){this.attr.maxItems=t.maxItems},this.handleTokenChange=function(){this.updateWidth(),this.selectedItemsChanged()},this.updateSuggestions=function(t,e){var i=e.html,s=e.preserve_previous_hightlight,n=this.select("highlightedSelector").first().attr("data-token-id");if(this.clearHighlight(),this.select("suggestionsContainerSelector").html(i),s){var o=this.select("suggestionSelector").filter('[data-token-id="'+n+'"]').first(),a=o.length?o:this.select("suggestionSelector").first();this.setHighlight(a)}},this.clearHighlight=function(){this.select("suggestionSelector").removeAttr("id aria-selected").removeClass(this.attr.highlightedClass),this.$text.removeAttr("aria-activedescendant")},this.setHighlight=function(t){this.clearHighlight();var e="tokenizedMultiselectHighlight"+Math.floor(1e10*Math.random()).toString();t.addClass(this.attr.highlightedClass).attr({id:e,"aria-selected":!0}),this.$text.attr("aria-activedescendant",e)},this.after("moveSuggestionHighlight",this.updateScroll),this.after("tokenizeHighlightedSuggestion",this.handleTokenChange),this.after("toggleTokenization",this.handleTokenChange),this.after("removeFocusedToken",this.handleTokenChange),this.after("removeLastToken",this.handleTokenChange),this.after("reset",this.handleTokenChange),this.setupAria=function(){var t="TokenizedMultiselectOwns"+Math.floor(1e10*Math.random()).toString();this.select("suggestionsContainer").attr("id",t),this.$text.attr("aria-owns",t)},this.after("initialize",function(){this.initTextNode(),this.attr.placeholderText=this.$text.attr("placeholder"),this.setupAria(),this.on("uiTextChanged",this.handleTextChange),this.on("uiTextChanged",this.updateWidth),this.on("keyup keydown keypress paste",this.handleKeyPress),this.on("uiResetTokenizedMultiselect",this.reset),this.on("uiTokenizedMultiSelectMaxItems",this.setMaxItems),this.on("uiTokenizedMultiselectSuggestions",this.updateSuggestions),this.on("mouseover",{suggestionSelector:this.handleMouseOver}),this.on("click",{suggestionSelector:this.toggleTokenization,tokenDeleteSelector:this.removeFocusedToken})})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(361),l=s(r),c=i(228),d=s(c),u=i(359),h=s(u),f=i(368),p=s(f),m=(0,a.default)(n,d.default);e.default=m}).call(e,i(10))},function(t,e,i){(function(e){function s(t,e,i){e=e||{};for(var s in a)e[s]||(e[s]=a[s]);return r.render(t,e,i)}var n=i(220).default,o={emojified_text:i(369)},a=n(o),r=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<li\n  class="'),s.b(s.v(s.f("token_class",t,e,0))),s.b('"\n  tabindex="-1"\n  data-token-id="'),s.b(s.v(s.f("token_id",t,e,0))),s.b('"\n  data-token-text="'),s.b(s.v(s.f("token_text",t,e,0))),s.b('"\n  aria-label="'),s.b(s.v(s.f("token_text",t,e,0))),s.b('">\n'),s.s(s.f("emojified_token_text",t,e,1),t,e,0,170,189,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(i.rp("<emojified_text0",t,e,""))}),t.pop()),s.b('  <span class="'),s.b(s.v(s.f("token_delete_class",t,e,0))),s.b(' Icon Icon--close" aria-hidden="true"></span>\n</li>'),s.fl()},partials:{"<emojified_text0":{name:"emojified_text",partials:{},subs:{}}},subs:{}});t.exports={template:r,partials:a,render:s}}).call(e,i(1))},function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.s(s.f("emojified_text_as_html",t,e,1),t,e,0,27,55,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(i.t(i.f("emojified_text_as_html",t,e,0)))}),t.pop()),s.s(s.f("emojified_text_as_html",t,e,1),t,e,1,0,0,"")||s.b(s.v(s.f("text",t,e,0))),s.fl()},partials:{},subs:{}})}).call(e,i(1))},function(t,e,i){(function(e){function s(t,e,i){e=e||{};for(var s in a)e[s]||(e[s]=a[s]);return r.render(t,e,i)}var n=i(220).default,o={"dm/dm_typeahead_group_suggestion":i(371),"dm/dm_typeahead_account_suggestion":i(372)},a=n(o),r=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.s(s.f("has_suggestions",t,e,1),t,e,0,20,86,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b('  <li class="DMTypeaheadHeader">\n    <span>Recent</span>\n  </li>\n')}),t.pop()),s.s(s.f("suggestions",t,e,1),t,e,0,123,274,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.s(i.f("is_group",t,e,1),t,e,0,139,184,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b(i.rp("<dm/dm_typeahead_group_suggestion0",t,e,"    "))}),t.pop()),i.s(i.f("is_group",t,e,1),t,e,1,0,0,"")||i.b(i.rp("<dm/dm_typeahead_account_suggestion1",t,e,"    "))}),t.pop()),s.fl()},partials:{"<dm/dm_typeahead_group_suggestion0":{name:"dm/dm_typeahead_group_suggestion",partials:{},subs:{}},"<dm/dm_typeahead_account_suggestion1":{name:"dm/dm_typeahead_account_suggestion",partials:{},subs:{}}},subs:{}});t.exports={template:r,partials:a,render:s}}).call(e,i(1))},function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<li class="DMTokenizedMultiselectSuggestion '),s.b(s.v(s.f("suggestion_class",t,e,0))),s.b('" data-token-id="'),s.b(s.v(s.f("data_token_id",t,e,0))),s.b('" data-token-text="'),s.b(s.v(s.f("data_token_text",t,e,0))),s.b('" role="option" tabindex="-1">\n  <div class="DMTokenizedMultiselectSuggestion-body">\n    '),s.b(s.t(s.f("html",t,e,0))),s.b("\n"+i),s.b("  </div>\n</li>\n"),s.fl()},partials:{},subs:{}})}).call(e,i(1))},function(t,e,i){(function(e){function s(t,e,i){e=e||{};for(var s in a)e[s]||(e[s]=a[s]);return r.render(t,e,i)}var n=i(220).default,o={"dm/dm_typeahead_item":i(373)},a=n(o),r=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<li class="DMTokenizedMultiselectSuggestion '),s.b(s.v(s.f("suggestion_class",t,e,0))),s.b(" "),s.s(s.f("preselected",t,e,1),t,e,0,81,95,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b("is-preselected")}),t.pop()),s.b(" "),s.s(s.f("selected",t,e,1),t,e,0,125,136,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b("is-selected")}),t.pop()),s.b('" data-token-id="'),s.b(s.v(s.f("data_token_id",t,e,0))),s.b('" data-token-text="'),s.b(s.v(s.f("data_token_text",t,e,0))),s.b('" role="option" tabindex="-1">\n  <div class="DMTokenizedMultiselectSuggestion-body">\n'),s.b(s.rp("<dm/dm_typeahead_item0",t,e,"    ")),s.b('  </div>\n  <div class="DMTokenizedMultiselectSuggestion-state">\n    <span class="DMTokenizedMultiselectSuggestion-selectedIndicator Icon Icon--check"></span>\n    <span class="DMTokenizedMultiselectSuggestion-preselectedIndicator">In Group</span>\n  </div>\n</li>\n'),s.fl()},partials:{"<dm/dm_typeahead_item0":{name:"dm/dm_typeahead_item",partials:{},subs:{}}},subs:{}});t.exports={template:r,partials:a,render:s}}).call(e,i(1))},function(t,e,i){(function(e){function s(t,e,i){e=e||{};for(var s in a)e[s]||(e[s]=a[s]);return r.render(t,e,i)}var n=i(220).default,o={"dm/dm_avatar":i(374),emojified_text:i(369),user_badges:i(375),user_name_break:i(379),screen_name:i(380)},a=n(o),r=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<div class="DMTypeaheadItem">\n  <div class="DMTypeaheadItem-avatar" aria-hidden="true">\n'),s.s(s.f("avatar",t,e,1),t,e,0,103,120,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(i.rp("<dm/dm_avatar0",t,e,""))}),t.pop()),s.b('  </div>\n  <div class="DMTypeaheadItem-body">\n    <div class="DMTypeaheadItem-title account-group">\n'),s.s(s.f("title",t,e,1),t,e,0,248,519,"{{ }}")&&(s.rs(t,e,function(t,e,s){s.b('        <b class="fullname">'),s.s(s.f("rich_text",t,e,1),t,e,0,305,324,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(i.rp("<emojified_text1",t,e,""))}),t.pop()),s.s(s.f("rich_text",t,e,1),t,e,1,0,0,"")||s.b(s.v(s.f("text",t,e,0))),s.b("</b>"),s.b(s.rp("<user_badges2",t,e,"")),s.b(s.rp("<user_name_break3",t,e,"")),s.s(s.f("screen_name",t,e,1),t,e,0,480,496,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(i.rp("<screen_name4",t,e,""))}),t.pop()),s.b("\n"+i)}),t.pop()),s.b("    </div>\n"),s.s(s.f("has_business_context",t,e,1),t,e,0,603,718,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b('      <div class="DMTypeaheadItem-context DMTypeaheadItem-businessContext">\n      Provides support\n    </div>\n')}),t.pop()),s.b("  </div>\n</div>\n"),s.fl()},partials:{"<dm/dm_avatar0":{name:"dm/dm_avatar",partials:{},subs:{}},"<emojified_text1":{name:"emojified_text",partials:{},subs:{}},"<user_badges2":{name:"user_badges",partials:{},subs:{}},"<user_name_break3":{name:"user_name_break",partials:{},subs:{}},"<screen_name4":{name:"screen_name",partials:{},subs:{}}},subs:{}});t.exports={template:r,partials:a,render:s}}).call(e,i(1))},function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<div class="DMAvatar DMAvatar--'),s.s(s.f("image_count",t,e,1),t,e,0,47,62,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(i.v(i.f("image_count",t,e,0)))}),t.pop()),s.s(s.f("image_count",t,e,1),t,e,1,0,0,"")||s.b("1"),s.b(' u-chromeOverflowFix">\n'),s.s(s.f("images",t,e,1),t,e,0,147,279,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b('    <span class="DMAvatar-container">\n      <img class="DMAvatar-image" src="'),i.b(i.v(i.f("src",t,e,0))),i.b('" alt="'),i.b(i.v(i.f("alt",t,e,0))),i.b('" title="'),i.b(i.v(i.f("alt",t,e,0))),i.b('">\n    </span>\n')}),t.pop()),s.b("</div>\n"),s.fl()},partials:{},subs:{}})}).call(e,i(1))},function(t,e,i){(function(e){function s(t,e,i){e=e||{};for(var s in a)e[s]||(e[s]=a[s]);return r.render(t,e,i)}var n=i(220).default,o={verified_account_badge:i(376),translator_account_badges:i(377),protected_account_badge:i(378)},a=n(o),r=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<span class="UserBadges">'),s.b(s.rp("<verified_account_badge0",t,e,"")),s.b(s.rp("<translator_account_badges1",t,e,"")),s.b(s.rp("<protected_account_badge2",t,e,"")),s.b("</span>"),s.fl()},partials:{"<verified_account_badge0":{name:"verified_account_badge",partials:{},subs:{}},"<translator_account_badges1":{name:"translator_account_badges",partials:{},subs:{}},"<protected_account_badge2":{name:"protected_account_badge",partials:{},subs:{}}},subs:{}});t.exports={template:r,partials:a,render:s}}).call(e,i(1))},function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.s(s.f("verified",t,e,1),t,e,0,13,134,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b('<span class="Icon Icon--verified">'),i.b('<span class="u-hiddenVisually">Verified account</span>'),i.b("</span>")}),t.pop()),s.fl()},partials:{},subs:{}})}).call(e,i(1))},function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.s(s.f("is_translator",t,e,1),t,e,0,18,121,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b('<span class="Icon Icon--translator"><span class="u-hiddenVisually">Translator</span></span>')}),t.pop()),s.s(s.f("is_translation_moderator",t,e,1),t,e,0,175,288,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b('<span class="Icon Icon--moderator"><span class="u-hiddenVisually">Translation Moderator</span></span>')}),t.pop()),s.fl()},partials:{},subs:{}})}).call(e,i(1))},function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.s(s.f("protected",t,e,1),t,e,0,14,128,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b('<span class="Icon Icon--protected">'),i.b('<span class="u-hidden">Protected Tweets</span>'),i.b("</span>")}),t.pop()),s.fl()},partials:{},subs:{}})}).call(e,i(1))},function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<span class="UserNameBreak">&nbsp;</span>'),s.fl()},partials:{},subs:{}})}).call(e,i(1))},function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<span class="username u-dir" dir="ltr" '),s.sub("wrapper_attr",t,e,i),s.b(">@<b>"),s.b(s.v(s.f("screen_name",t,e,0))),s.b("</b></span>"),s.fl()},partials:{},subs:{wrapper_attr:function(t,e,i,s){}}})}).call(e,i(1))},function(t,e,i){(function(e){function s(t,e,i){e=e||{};for(var s in a)e[s]||(e[s]=a[s]);return r.render(t,e,i)}var n=i(220).default,o={"dm/dm_typeahead_account_suggestion":i(372),"dm/dm_typeahead_group_suggestion":i(371)},a=n(o),r=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.s(s.f("has_accounts",t,e,1),t,e,0,45,111,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b('  <li class="DMTypeaheadHeader">\n    <span>People</span>\n  </li>\n')}),t.pop()),s.s(s.f("accounts",t,e,1),t,e,0,142,185,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(i.rp("<dm/dm_typeahead_account_suggestion0",t,e,"  "))}),t.pop()),s.b("\n"+i),s.s(s.f("has_groups",t,e,1),t,e,0,240,306,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b('  <li class="DMTypeaheadHeader">\n    <span>Groups</span>\n  </li>\n')}),t.pop()),s.s(s.f("groups",t,e,1),t,e,0,333,374,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(i.rp("<dm/dm_typeahead_group_suggestion1",t,e,"  "))}),t.pop()),s.fl()},partials:{"<dm/dm_typeahead_account_suggestion0":{name:"dm/dm_typeahead_account_suggestion",partials:{},subs:{}},"<dm/dm_typeahead_group_suggestion1":{name:"dm/dm_typeahead_group_suggestion",partials:{},subs:{}}},subs:{}});t.exports={template:r,partials:a,render:s}}).call(e,i(1))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.publishTyping=function(t,e){e&&e.conversation_id&&(this.trigger("dataDMTypingPublished"),this.post({url:"/i/direct_messages/publish_typing",data:{conversation_id:e.conversation_id}}))},this.after("initialize",function(){this.on("uiDMUserTyping",this.publishTyping)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(244),l=s(r);e.default=(0,a.default)(n,l.default)},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.attributes({conversation:".DMConversationContainer",groupAvatars:!1,maxCharacters:1e4}),this.openConversation=function(t,e){var i="uiRenderNewConversationView"===t.type?"uiOpenNewConversationView":"uiOpenConversationView";this.select("conversation").trigger(i,e)},this.after("initialize",function(){l.default.getDecider("dm_convo_settings_page_enabled")?this.attachChild(b.default,this.attr.conversation):this.attachChild(g.default,this.attr.conversation),this.attachChild(h.default,this.attr.conversation),this.attachChild(p.default,this.attr.conversation,{groupAvatars:this.attr.groupAvatars,maxCharacters:this.attr.maxCharacters}),this.attachChild(S.default,this.attr.conversation),this.on("uiRenderConversationView uiRenderNewConversationView",this.openConversation)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(136),l=s(r),c=i(231),d=s(c),u=i(384),h=s(u),f=i(385),p=s(f),m=i(846),g=s(m),v=i(847),b=s(v),w=i(848),S=s(w);e.default=(0,a.default)(n,d.default)},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.attributes({addParticipantsSelector:".DMAddParticipants",addParticipantsInputSelector:".TokenizedMultiselect-input",addParticipantsDoneSelector:".DMAddParticipants-done",dialogBodySelector:".DMAddParticipants-content",spinnerSelector:".DMAddParticipants-spinner"}),this.setParticipants=function(t,e){this.conversationId&&this.conversationId===e.conversation_id&&(this.resetDMTypeahead(e),this.select("dialogBodySelector").css("visibility","visible"),this.select("spinnerSelector").addClass("u-hidden"),this.select("addParticipantsInputSelector").focus())},this.resetDMTypeahead=function(t){var e=t||{},i=e.participants&&e.participants.map(function(t){return t.id});this.trigger(this.attr.addParticipantsSelector,"uiInitializeDMTypeahead",{preselectedItems:i,maxItems:e.additional_participants_allowed})},this.prepareAddParticipants=function(t,e){this.conversationId=e.conversation_id,this.select("dialogBodySelector").css("visibility","hidden"),this.select("spinnerSelector").removeClass("u-hidden"),this.resetDMTypeahead(),this.trigger("uiNeedsDMConversation",{conversation_id:e.conversation_id})},this.addParticipants=function(){this.conversationId&&this.selectedAccounts.length&&this.trigger("uiAddConversationParticipants",{
conversation_id:this.conversationId,participant_ids:this.selectedAccounts}),this.trigger("uiDMAddParticipantsDone")},this.handleSelectedItems=function(t,e){var i=e&&e.accounts&&e.accounts.length?e.accounts:[];this.selectedAccounts=i.map(function(t){return t.id})},this.possibleAddParticipants=function(t,e){("click"===t.type||"keydown"===t.type&&t.which===d.default.ENTER)&&this.addParticipants()},this.after("initialize",function(){this.attachChild(l.default,this.select("addParticipantsSelector")),this.selectedAccounts=[],this.on("uiDMTypeaheadSelectedItemsChanged",this.handleSelectedItems),this.on(document,"dataDMConversationResult",this.setParticipants),this.on("uiAddParticipants",this.prepareAddParticipants),this.on("click keydown",{addParticipantsDoneSelector:this.possibleAddParticipants})})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(360),l=s(r),c=i(359),d=s(c),u=i(231),h=s(u);e.default=(0,a.default)(n,h.default)},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.attributes({messageClass:"DirectMessage",sentMessageSelector:".DirectMessage--sent",emojiOnlyMessageSelector:".DirectMessage--emoji",receivedMessageSelector:".DirectMessage--received",newMessagesPillSelector:".DMConversation-newMessagesPill",pageBackRange:1e3,dmComposerSelector:".DMComposer",dmComposerSectionSelector:".DMConversation-composer",viewConversation:".DMConversation",conversationContentSelector:".DMConversation-content",conversationScrollContainer:".DMConversation-scrollContainer",conversationActionsDropdownSelector:".DMConversationActions",conversationActionsContentSelector:".DMConversationActions-content",conversationNameSelector:".DMConversation-name",conversationReadonlyClass:"is-readonly",spinnerSelector:".DMConversation-spinner",quickReplyOptionPanelSelector:".DMConversation-quickReply",conversationAvatarSelector:".DMUpdateAvatar",sendingStateSelector:".DMConversation-sendingStateIndicator",openConvoSettingsSelector:".DMConversation-convoSettings",maxCharacters:1e4}),this.prepareConversationView=function(t,e){e=e||{};var i="uiOpenNewConversationView"===t.type,s=i&&e.screen_names&&1===e.screen_names.length;this.trigger("uiDMDialogClearActions"),this.trigger("uiUpdateConversationType",{is_oto:e.is_oto}),this.trigger("uiUpdateConversationState",{is_readonly:e.is_readonly}),this.triggerOnConversationAvatar("uiDMResetConversationAvatar");var n=e.name||e.generated_name,o=s?"text":"html";this.$conversationName[o](n),this.trigger("uiClearRichHeaderState"),this.$content.empty().removeAttr("data-thread-id").attr("data-thread-id",e.conversation_id),this.$viewConversation.removeAttr("data-thread-id").attr("data-thread-id",e.conversation_id),this.removeConversationActions(),this.hideNewMessagesPill(),this.trigger("uiRemoveQuickReply"),i?(this.hideSpinner(),this.hideConversationSettings()):(this.showSpinner(),this.showConversationSettings(),this.loadConversationData(e)),this.trigger("uiDMConversationUpdated",e)},this.currentConversationId=function(){return this.$content.attr("data-thread-id")},this.isExistingConversation=function(){return!!this.currentConversationId()},this.isDataForCurrentConversation=function(t){return!this.isExistingConversation()||t.conversation_id===this.currentConversationId()},this.processConversationResult=function(t,e){if(t&&t.preventDefault(),e&&this.isDataForCurrentConversation(e)){if(this.isExistingConversation()||(this.initializeDMComposer(null,e),this.showConversationSettings()),this.$content.attr("data-thread-id",e.conversation_id),this.$viewConversation.attr("data-thread-id",e.conversation_id),this.$conversationName.empty().removeData("raw-name"),e.conversation&&e.conversation.title){var i=e.conversation.title;this.$conversationName.html(i.html).data("raw-name",i.raw),i.screen_name&&this.trigger("uiSetRichHeaderState",i)}this.updateConversationAvatar(e),this.trigger("uiUpdateConversationType",{is_oto:e.is_oto}),this.trigger("uiUpdateConversationState",{is_readonly:e.is_readonly}),e.conversation_actions?this.updateConversationActions(e.conversation_actions.html):this.removeConversationActions();var s=this.$content.children(),n=s.first().attr("data-message-id"),o=s.last().attr("data-message-id");this.isPageVisible()&&this.$content.is(":visible")&&e.conversation&&e.conversation.is_unread&&this.trigger("dataMarkDMsAsRead",{last_message_id:e.sort_event_id||-1,recipient_id:e.conversation_id}),this.trigger("uiDMUpdateTrustRequest",e),this.updateConversationHTML(e,n,o),e.has_more===!1&&this.hideSpinner(),this.trigger("uiDMConversationUpdated",e)}},this.processUserUpdatesResult=function(e,i){if(!i.should_request_inbox&&!i.is_empty){var s=this.$content.attr("data-thread-id");(i.conversations||[]).forEach(function(t){t.conversation_id===s&&this.processConversationResult(null,t)},this),(i.update_events||[]).filter(function(_){return _.conversation_id===s}).forEach(function(e){switch(e.type){case"conversation_delete":this.trigger("uiCloseDMConversation");break;case"message_delete":this.$content.find('[data-message-id="'+e.message_id+'"]').remove(),0===this.$content.children().length&&this.trigger("uiCloseDMConversation"),this.updateQR(),this.trigger("uiDMMesageDeleted",{dmId:e.message_id});break;case"mark_spam":case"unmark_spam":e.messages.forEach(function(e){var i=t(e.html);this.$content.find('[data-message-id="'+e.message_id+'"]').replaceWith(i)},this)}},this),this.updateRapidFire()}},this.isPageVisible=function(){return"visible"===document.visibilityState},this.removeAnimationClass=function(e,i){var s=t(e.target).closest(this.attr.emojiOnlyMessageSelector);s.removeClass("is-animating")},this.removeConversationActions=function(){this.$conversationActionsDropdown.addClass("u-hidden"),this.$conversationActionsContent.empty()},this.updateConversationActions=function(t){this.$conversationActionsContent.html(t),this.$conversationActionsDropdown.removeClass("u-hidden")},this.updateConversationState=function(t,e){this.$viewConversation.toggleClass(this.attr.conversationReadonlyClass,!!e.is_readonly)},this.generateConversationHTML=function(t,e,i){var s=t.items,n=Object.keys(s);n.sort(a.default.compare);var o=!(e&&i),r="",l="";return n.forEach(function(t){o||a.default.compare(t,e)<0?r+=s[t]:a.default.compare(t,i)>0&&(l+=s[t])}),{prepend:r,append:l}},this.applyNewHtml=function(t,e,i,s){var n=this.$container[0].scrollHeight-this.$container.scrollTop();this.$content.prepend(e.prepend);var o=this.$container[0].scrollHeight-n;this.$container.scrollTop(o),this.$content.append(e.append),this.updateRapidFire(s),this.addAnimation(s),this.updateScrollPosition(t,s),this.updateQR(s)},this.updateConversationHTML=function(t,e,i){var s=this.generateConversationHTML(t,e,i),n=s.append||s.prepend;n&&this.applyNewHtml(t,s,e,i)},this.updateRapidFire=function(e){if(e){var i=this.attr.messageClass,s=this.$content.find('[data-message-id="'+e+'"]').nextAll().addBack();s.each(function(e,s){var n=t(this),o=n.next(),a=n.hasClass(i);if(a&&o.hasClass(i)){var r=n.find("[data-user-id]").attr("data-user-id"),l=n.find("[data-time]").attr("data-time"),c=n.find("[data-custom-profile-id]").attr("data-custom-profile-id"),d=o.find("[data-user-id]").attr("data-user-id"),u=o.find("[data-time]").attr("data-time"),h=o.find("[data-custom-profile-id]").attr("data-custom-profile-id");n.css("height"),r===d&&u-l<60&&c===h&&!n.hasClass("DirectMessage--emoji")&&!o.hasClass("DirectMessage--emoji")?n.addClass("is-rapidFire"):n.removeClass("is-rapidFire")}else a&&!o.hasClass(i)&&n.removeClass("is-rapidFire")})}},this.addAnimation=function(t){this.$content.find('[data-message-id="'+t+'"]').nextAll(this.attr.emojiOnlyMessageSelector).addClass("is-animating")},this.requestNextPage=function(){this.trigger("uiNeedsDMConversation",{conversation_id:this.$content.attr("data-thread-id"),max_entry_id:this.$content.children().first().attr("data-message-id")})},this.hideNewMessagesPill=function(){this.$newMessagesPill.addClass("is-hidden")},this.showNewMessagesPill=function(){this.$newMessagesPill.removeClass("is-hidden"),setTimeout(this.hideNewMessagesPill.bind(this),3500)},this.showSpinner=function(){this.$spinner.removeClass("u-hidden")},this.hideSpinner=function(){this.$spinner.addClass("u-hidden")},this.showConversationSettings=function(){this.select("openConvoSettingsSelector").removeClass("u-hidden")},this.hideConversationSettings=function(){this.select("openConvoSettingsSelector").addClass("u-hidden")},this.isMessageVisible=function(t){return t.position().top<this.$container[0].clientHeight},this.findMessage=function(t){return this.$content.find('[data-message-id="'+t+'"]')},this.hasNewReceivedMessages=function(t){return t.nextAll(this.attr.receivedMessageSelector).length},this.updateScrollPosition=function(t,e){var i=!e,s=this.findMessage(e),n=s.nextAll(this.attr.sentMessageSelector).length,o=this.hasNewReceivedMessages(s);i?(this.$container.scrollTop(this.$container[0].scrollHeight),this.applyMarker(t.last_read_event_id)):o?this.isMessageVisible(s)?this.scrollToBottom():this.showNewMessagesPill():n&&(this.scrollToBottom(),this.removeMarker())},this.updateQR=function(t){var e=!t,i=this.findMessage(t),s=this.hasNewReceivedMessages(i);if(e||s){var n=this.$content.children().last().data("quick-reply-json");this.trigger("uiRemoveQuickReply"),n&&(this.trigger("uiShowQuickReply",{qrJson:n,isFirstResult:e}),this.scrollToBottom())}},this.addDMComposerSectionQuickReplyClass=function(){this.$dmComposerSection.addClass("is-showingQuickReply")},this.removeDMComposerSectionQuickReplyClass=function(){this.$dmComposerSection.removeClass("is-showingQuickReply")},this.scrollToBottom=function(t){var e=t?250:0;this.$container.stop().clearQueue().animate({scrollTop:this.$container[0].scrollHeight-this.$container[0].clientHeight},e),this.hideNewMessagesPill()},this.initializeDMComposer=function(t,e){this.trigger(this.attr.dmComposerSelector,"uiInitializeDMComposer",e)},this.loadConversationData=function(t){this.$viewConversation.trigger("uiNeedsDMConversation",{conversation_id:t.conversation_id,fromInitData:t.fromInitData})},this.updateConversationAvatar=function(t){var e=t.conversation&&t.conversation.avatar;e?this.triggerOnConversationAvatar("uiDMSetConversationAvatar",{html:e.html,full_size_url:e.full_size_url,conversation_id:t.conversation_id,is_custom:e.is_custom,is_oto:t.is_oto}):this.triggerOnConversationAvatar("uiDMResetConversationAvatar")},this.triggerOnConversationAvatar=function(t,e){this.$avatar.trigger(t,e)},this.showComposeSection=function(){this.select("dmComposerSectionSelector").removeClass("u-hidden")},this.hideComposeSection=function(){this.select("dmComposerSectionSelector").addClass("u-hidden"),this.scrollToBottom(!1)},this.handleViewChange=function(t,e){var i="uiDMDialogClosed"===t.type||"conversation"!==e.activity?"uiDMConversationActivityHidden":"uiDMConversationActivityVisible";this.trigger(i,e)},this.handleTypingIndicatorShown=function(){var t=this.$content.children().last();this.isMessageVisible(t)&&this.scrollToBottom()},this.removeCardsFromConversation=function(){this.trigger(this.select("conversationScrollContainer"),"uiUnloadAllCards")},this.after("initialize",function(){h.default.getDecider("dm_convo_settings_page_enabled")||this.attachChild(g.default,this.$node),this.attachChild(I.default,this.$node),this.attachChild(x.default,this.$node),this.attachChild(O.default,this.$node),this.attachChild(F.default,this.$node),this.attachChild(U.default,this.$node),this.attachChild(L.default,this.$node),this.attachChild($.default,this.$node),this.attachChild(ct.default,this.select("quickReplyOptionPanelSelector")),this.attachChild(q.default,this.$node,{tweetSelector:".DirectMessage-message",mediaNotDisplayedSelector:".Sensitive-warning",mediaContainerSelector:".Sensitive-content",hiddenClass:"u-hidden"}),this.attachChild(z.default,this.$node),this.attachChild(W.default,this.$node,{eventData:{scribeContext:{component:"dm_existing_conversation_dialog"}}}),this.attachChild(K.default,this.$node),this.attachChild(X.default,this.$node),this.attachChild(Z.default,this.$node.find(".DMUpdateAvatar")),this.attachChild(et.default,this.$node),this.attachChild(S.default,this.select("dmComposerSelector"),{defaultText:"",condensedText:"",suppressFlashMessage:!0,eventData:{scribeContext:{component:"tweet_box_dm"}},dmOnly:!0,mediaCategoryPrefix:"dm_",fileDataString:"media",fileInputString:"media",maxLength:this.attr.maxCharacters,warnLength:this.attr.maxCharacters-20,superwarnLength:this.attr.maxCharacters-10,timeToDismissSelectedQRInMS:C.default.get("dm_quick_reply_options_panel_dismiss_in_ms")}),this.attachChild(b.default,this.$node),this.attachChild(A.default,this.$node),this.attachChild(D.default,this.select("sendingStateSelector")),this.attachChild(rt.default,this.select("conversationScrollContainer"),{containerSelector:this.attr.conversationScrollContainer,cardContainerSelector:".DirectMessage",unloadedCardsFilter:".DirectMessage .js-macaw-cards-iframe-container"}),this.attachChild(ut.default,this.$node),this.attachChild(ft.default,this.$node),this.attachChild(ot.default,this.select("conversationScrollContainer"),{watchDocumentScroll:!1}),this.on("uiDMConversationActivityHidden","uiPauseAllMedia"),this.$avatar=this.select("conversationAvatarSelector"),this.$container=this.select("conversationScrollContainer"),this.$content=this.select("conversationContentSelector"),this.$viewConversation=this.select("viewConversation"),this.$conversationName=this.select("conversationNameSelector"),this.$spinner=this.select("spinnerSelector"),this.$newMessagesPill=this.select("newMessagesPillSelector"),this.$conversationActionsContent=this.select("conversationActionsContentSelector"),this.$conversationActionsDropdown=this.select("conversationActionsDropdownSelector"),this.$dmComposerSection=this.select("dmComposerSectionSelector"),this.on(document,"dataDMConversationResult dataDMSendSuccess",this.processConversationResult),this.on("dataDMDeleteSuccess",this.processUserUpdatesResult),this.on("uiOpenConversationView uiOpenNewConversationView",this.prepareConversationView),this.on("uiOpenConversationView uiOpenNewConversationView",this.initializeDMComposer),this.on("uiUpdateConversationState",this.updateConversationState),this.on("uiWantsConversationHistory",d.default.throttle(this.requestNextPage,1e3)),this.on(document,"uiDMDialogClosed uiDMActivityOpened",this.handleViewChange),this.on("uiDMConversationActivityHidden",this.removeCardsFromConversation),this.on("uiFeedbackPanelOpened uiDMHideComposeSection",this.hideComposeSection),this.on("uiFeedbackPanelClosed uiDMShowComposeSection",this.showComposeSection),this.on("uiB2CFeedbackUpdateView",this.scrollToBottom),this.on("uiShowQuickReplyOptionPanel",this.addDMComposerSectionQuickReplyClass),this.on("uiQuickReplyRemoved",this.removeDMComposerSectionQuickReplyClass),this.on("uiUpdateQR",function(){this.updateQR()}),this.on("uiDMTypingIndicatorShown",this.handleTypingIndicatorShown),this.on("click",{newMessagesPillSelector:this.scrollToBottom}),this.on("mouseover",{emojiOnlyMessageSelector:this.removeAnimationClass}),this.on(document,"dataDMUserUpdates",this.processUserUpdatesResult)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(357),a=s(o),r=i(111),l=s(r),c=i(126),d=s(c),u=i(136),h=s(u),f=i(231),p=s(f),m=i(386),g=s(m),v=i(387),b=s(v),w=i(388),S=s(w),y=i(461),C=s(y),T=i(462),D=s(T),M=i(464),I=s(M),P=i(465),x=s(P),k=i(466),A=s(k),E=i(467),O=s(E),R=i(469),F=s(R),N=i(470),U=s(N),j=i(471),L=s(j),B=i(472),$=s(B),V=i(474),q=s(V),H=i(475),z=s(H),G=i(476),W=s(G),Q=i(478),K=s(Q),Y=i(479),X=s(Y),J=i(480),Z=s(J),tt=i(481),et=s(tt),it=i(482),st=s(it),nt=i(485),ot=s(nt),at=i(833),rt=s(at),lt=i(839),ct=s(lt),dt=i(841),ut=s(dt),ht=i(844),ft=s(ht),pt=(0,l.default)(n,p.default,st.default);e.default=pt}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.attributes({conversationIdSelector:"[data-conversation-id]",conversationTypeSelector:"[data-is-oto]",reportScreenNameSelector:".DMConversationActions [data-screen-name]",reportUserIdSelector:".DMConversationActions [data-other-participant-id]",addParticipantsSelector:".js-actionAddParticipants",viewParticipantsSelector:".js-actionViewParticipants",editConversationNameSelector:".js-actionEditConversationName",deleteConversationSelector:".js-actionDeleteConversation",reportConversationSelector:".js-actionReportConversation",enableNotificationsSelector:".js-actionEnableNotifications",disableNotificationsSelector:".js-actionDisableNotifications",shareLocationSelector:".js-shareLocation",actionsContainerSelector:".DMConversationActions-content"}),this.getConversationId=function(){return this.select("conversationIdSelector").attr("data-conversation-id")},this.isGroupConversation=function(){return!this.select("conversationTypeSelector").data("is-oto")},this.getReportScreenName=function(){return this.select("reportScreenNameSelector").attr("data-screen-name")},this.getReportedUserId=function(){return this.select("reportUserIdSelector").attr("data-other-participant-id")},this.toggleNotificationsAction=function(t){this.select("enableNotificationsSelector").toggleClass("u-hidden",!!t),this.select("disableNotificationsSelector").toggleClass("u-hidden",!t)},this.toggleNotifications=function(t){this.trigger("uiToggleNotifications",{conversation_id:this.getConversationId(),enable_notifications:t})},this.updateNotificationsState=function(t,e){switch(t.type){case"dataDMConversationResult":e.conversation_actions&&this.getConversationId()===e.conversation_actions.conversation_id&&this.toggleNotificationsAction(e.conversation_actions.notifications);break;case"dataNotificationsEnabled":case"dataNotificationsDisableFailed":this.getConversationId()===e.sourceEventData.conversation_id&&this.toggleNotificationsAction(!0);break;case"dataNotificationsDisabled":case"dataNotificationsEnableFailed":this.getConversationId()===e.sourceEventData.conversation_id&&this.toggleNotificationsAction(!1)}},this.triggerAction=function(t){this.trigger(t,{conversation_id:this.getConversationId(),is_group:this.isGroupConversation(),report_screen_name:this.getReportScreenName(),reported_user_id:this.getReportedUserId()})},this.updateUIOnToggle=function(t,e){this.toggleNotificationsAction(e.enable_notifications)},this.after("initialize",function(){this.on("uiToggleNotifications",this.updateUIOnToggle),this.on("uiEnableDMNotifications",this.toggleNotifications.bind(this,!0)),l.default.getDecider("dm_granular_mute_controls")?this.on("uiDisableDMNotifications","uiShowDMMuteNotificationsConfirmation"):this.on("uiDisableDMNotifications",this.toggleNotifications.bind(this,!1));var t=void 0;t=l.default.getDecider("dm_report_webview_macaw_swift_enabled")?"uiDMLaunchConversationReportWebView":"uiShowDMReportConversationConfirmation",this.on("click",{enableNotificationsSelector:"uiEnableDMNotifications",disableNotificationsSelector:"uiDisableDMNotifications",addParticipantsSelector:this.triggerAction.bind(this,"uiAddParticipants"),viewParticipantsSelector:this.triggerAction.bind(this,"uiViewParticipants"),editConversationNameSelector:this.triggerAction.bind(this,"uiEditConversationName"),deleteConversationSelector:this.triggerAction.bind(this,"uiShowDMDeleteConversationConfirmation"),reportConversationSelector:this.triggerAction.bind(this,t),shareLocationSelector:this.triggerAction.bind(this,"uiShareLocation"),actionsContainerSelector:"uiCloseDropdowns"}),this.on("dataDMConversationResult dataNotificationsEnabled dataNotificationsDisabled dataNotificationsEnableFailed dataNotificationsDisableFailed",this.updateNotificationsState)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(136),l=s(r),c=(0,a.default)(n);e.default=c},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.requestAnimationFrame=window.requestAnimationFrame.bind(window),this.attributes({conversationContentSelector:".DMConversation-content",pageBackRange:500,scrollContainerSelector:".DMConversation-scrollContainer",spinnerSelector:".DMConversation-spinner"}),this.checkForConversationHistory=function(){var t=this;this.requestAnimationFrame(function(){var e=!t.$spinner.hasClass("u-hidden")&&0!==t.$scrollContainer.prop("clientHeight")&&(t.$content.prop("clientHeight")<t.$scrollContainer.prop("clientHeight")||t.$scrollContainer.prop("scrollTop")<t.attr.pageBackRange);e&&t.trigger("uiWantsConversationHistory")})},this.after("initialize",function(){this.$content=this.select("conversationContentSelector"),this.$scrollContainer=this.select("scrollContainerSelector"),this.$spinner=this.select("spinnerSelector"),this.on(this.$scrollContainer,"scroll",l.default.debounce(this.checkForConversationHistory,250)),this.on("uiDMConversationUpdated",this.checkForConversationHistory)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(126),l=s(r);e.default=(0,a.default)(n)},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({tweetBoxSelector:".tweet-box",tweetActionSelector:".tweet-action",discardTweet:".DMComposer-discardTweet",imageDataSelector:".file-data",removeTweetEvents:"uiDMDialogOpenedConversationList uiDMDialogClosed uiDMSendMessage dataFailedToGetTweet",gifSupport:!0,videoSupport:!0,sruAllMedia:!0,preferredGravity:"vertical",preferredWeight:"right",composeAltText:!1,typingPublishInterval:2e3}),this.isEmpty=function(){return!(this.hasAttachment()||this.getVisibleText().trim())},this.hasAttachment=function(){return!1},this.getMediaData=function(){var t=this.getTweetboxId(),e=h.default.keys().filter(function(e){return h.default.get(e).tweetboxId===t})[0],i=h.default.get(e)||{};return{fileId:i.fileId,fileType:i.fileType,mediaCategory:i.mediaCategory,trimRange:i.trimRange,uploadId:i.uploadId,foundMediaInfo:this.foundMediaInfo,sourceUrl:i.sourceUrl,mediaType:i.mediaType}},this.createDataForSending=function(){return o({conversation_id:this.conversationId,media_data:this.hasMedia?this.getMediaData():void 0,recipient_ids:this.conversationId?[]:this.recipientIds,screen_name:this.conversationId||this.recipientIds?[]:this.screenNames,text:this.addHiddenText(this.getVisibleText()),tweetboxId:this.getTweetboxId(),tweet_id:this.hasTweetAttachment()?this.tweetAttachmentId:void 0,message_me_scribe_data:this.messageMeScribeData,card_uri:this.cardUri},this.getQuickReplyResponseData())},this.sendDM=function(){this.detectUpdatedText(),this.trigger("uiDMSendMessage",this.createDataForSending()),this.removeTextInputQuickReply(),delete this.recipientIds,delete this.screenNames,this.revertComposer()},this.getTweetboxId=function(){return this.tweetboxId=this.tweetboxId||"swift_tweetbox_"+ +new Date,this.tweetboxId},this.isOwnTweetbox=function(t,e){var i=e.tweetboxId||e.sourceEventData&&e.sourceEventData.tweetboxId;return i===this.getTweetboxId()},this.canSend=function(){var t=this.conversationId||this.recipientIds||this.screenNames;return!this.isEmpty()&&!this.maxReached()&&t},this.updateSendButton=function(){this.canSend()?this.enable():this.disable()},this.enable=function(){this.select("tweetActionSelector").removeClass("disabled").prop("disabled",!1)},this.disable=function(){this.select("tweetActionSelector").addClass("disabled").prop("disabled",!0)},this.initializeComposer=function(t,e){e=e||{},this.conversationId=e.conversation_id,this.recipientIds=e.recipient_ids,this.screenNames=e.screen_names,this.revertComposer(e.retain_tweet_attachment),this.setVisibleText(e.default_composer_text||""),this.focus()},this.revertComposer=function(t){t!==!0&&this.handleTweetRemoval(),this.reset(),this.updateSendButton(),this.handleAttachmentChange(),this.focus()},this.reset=function(){this.setVisibleText("")},this.handleKeyboardSubmit=function(){this.select("tweetActionSelector").hasClass("disabled")||this.sendDM()},this.handleTweetRemoval=function(){this.removeTweet(),this.removeTweetAttachment(),this.focus()},this.handleAttachmentChange=function(){var t=this.hasAttachment()?"Add a comment...":void 0,e=this.hasAttachment()?"uiComposerDisableExclusiveAttachments":"uiComposerEnableExclusiveAttachments";this.trigger("uiUpdateComposerPlaceholder",{placeholderText:t}),this.trigger(e)},this.showQuickReplyConditionally=function(t,e){var i=e&&e.qrJson,s=e&&e.isFirstResult;!this.isEmpty()&&s||this.handleShowQuickReply(i)},this.broadcastTyping=function(){this.conversationId&&this.trigger("uiDMUserTyping",{conversation_id:this.conversationId})},this.unfocus=function(){this.select("composerEditorSelector").blur()},this.after("initialize",function(){this.initTextNode(),this.updateSendButton(),this.on(this.select("tweetActionSelector"),"click",this.sendDM),this.on("uiSendQROptionResponse",this.sendDM),this.on("uiShortcutEnter uiShortcutCmdEnter",this.handleKeyboardSubmit),this.on("uiEmojiSuggestion","uiInsertText"),this.on("uiTextChanged uiAttachmentChanged",this.updateSendButton),this.on("keydown",{tweetBoxSelector:(0,l.default)(this.broadcastTyping.bind(this),this.attr.typingPublishInterval,this.attr.typingPublishInterval,!0)}),this.on("uiAttachmentChanged",this.handleAttachmentChange),this.on("click",{discardTweet:this.handleTweetRemoval}),this.on("uiInitializeDMComposer",this.initializeComposer),this.on("uiRevertComposer",this.revertComposer),this.on(document,"uiDMDialogClosed",this.revertComposer),this.on(document,"uiShowQuickReply",this.showQuickReplyConditionally),this.on("uiShowQuickReplyOptionPanel",this.unfocus)})}Object.defineProperty(e,"__esModule",{value:!0});var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},a=i(123),r=(s(a),i(354)),l=s(r),c=i(111),d=s(c),u=i(224),h=s(u),f=i(389),p=s(f),m=i(233),g=s(m),v=i(390),b=s(v),w=i(435),S=s(w),y=i(182),C=s(y),T=i(436),D=s(T),M=i(437),I=s(M),P=i(438),x=s(P),k=i(228),A=s(k),E=i(451),O=s(E),R=i(452),F=s(R),N=i(454),U=s(N),j=i(458),L=s(j),B=i(460),$=s(B),V=i(441),q=s(V),H=(0,d.default)(n,A.default,g.default,I.default,b.default,C.default,O.default,F.default,p.default,D.default,x.default,S.default,U.default,L.default,$.default,q.default);e.default=H},function(t,e){"use strict";function i(){this.allowTeardown=function(t,e){this.attr.noTeardown=!1},this.after("initialize",function(){this.on("uiAllowTeardown",this.allowTeardown)})}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){l.default.mixin(this,[I.default,D.default]),this.defaultAttrs({thumbContainerSelector:".thumbnail-container",taggingSelector:".photo-tagging-container",taggingButtonSelector:".js-open-user-select",taggedUsersSelector:".tagged-users",thumbSelector:".ComposerThumbnail",photoSelectorSelector:".photo-selector"}),this.hasMedia=!1,this.isVideo=!1,this.isGif=!1,this.taggedUsers=[],this.showPreview=function(t,e){this.isVideo=e.isVideo,this.isGif=e.isGif;var i=["has-thumbnail",this.attr.composeAltText?"has-alt-text":"",this.isVideo?"has-video":""];this.stateClasses=i.join(" "),this.$node.addClass(this.stateClasses),this.hasMedia=!0,this.detectUpdatedText(!0);var s=this.select("taggingButtonSelector");this.isGif||this.isVideo?s.hide():s.show().prop("disabled",!1)},this.updateThumbnailCount=function(t){var e=this.select("thumbSelector").length;0!==e&&0!==this.taggedUsers.length||this.trigger("uiUpdatedSelectedUsers",{items:[]})},this.hidePreview=function(t,e){this.$node.removeClass(this.stateClasses),this.hasMedia=!1,this.isVideo=!1,this.isGif=!1,this.detectUpdatedText(!0),this.taggedUsers=[],this.select("taggingButtonSelector").prop("disabled",!0)},this.updateTaggedUsers=function(t,e){var i=this.select("taggedUsersSelector"),s=this.select("taggingButtonSelector");return this.taggedUsers=e.items,0===e.items.length?(this.updateTagText(),void s.addClass("no-users")):(s.removeClass("no-users"),void i.html(this.getTaggedUsersString(e.items)))},this.updateTagText=function(){if(!this.taggedUsers.length){var t=this.select("thumbSelector").length,e=t>1?x:P;this.select("taggedUsersSelector").text(e)}},this.getTaggedUsersString=function(t){return 1===t.length?(0,a.default)("{{name1}}",{name1:t[0].name}):2===t.length?(0,a.default)("<span class='user-name'>{{name1}}</span> and 1 other",{name1:t[0].name}):t.length>2?(0,a.default)("<span class='user-name'>{{name1}}</span> and {{count}} others",{name1:t[0].name,count:t.length-1}):void 0},this.after("reset",function(){var t=this.select("thumbSelector").map(function(){return this.getAttribute("data-file-id")}).get();this.trigger("uiPreviewThumbnailHide"),this.trigger("uiPreviewThumbnailRemoveAll"),this.trigger(this.attr.taggingSelector,"uiResetSelectedUserComposer"),t.forEach(function(t){return b.default.remove(t)})}),this.around("createDataForSending",function(t){var e=t();return e.tagged_users=this.taggedUsers.map(function(t){return t.id_str}).join(","),this.trigger("uiUpdateRecentTags",{items:this.taggedUsers}),e}),this.around("hasAttachment",function(t){return this.hasMedia||t()}),this.getPhotoLimit=function(){return!this.attr.dmOnly&&h.default.hasFileReader()&&p.default.hasCanvas()?4:1},this.annotateThumbWithTweetboxId=function(t,e){var i=e.fileId,s=b.default.get(i);s&&b.default.update(i,{tweetboxId:this.getTweetboxId()})},this.focusIfNotCondensed=function(){this.isCondensed&&this.isCondensed()?t(document.activeElement).not("body").blur():this.focus()},this.after("initialize",function(t,e){this.attachChild(d.default,this.select("thumbContainerSelector"),{eventData:this.attr.eventData,composeAltText:this.attr.composeAltText,thumbnailSize:this.attr.thumbnailSize,tweetboxId:this.getTweetboxId()});var i={photoLimit:this.getPhotoLimit(),gifSupport:!this.attr.dmOnly,environment:e.environment},s=["fileDataString","fileDataSelector","fileInputString","emptyFileDataString","emptyFileInputString","uploadType","eventData","gifSupport","videoFormats","videoSupport","sruAllMedia","mediaCategoryPrefix"];s.forEach(function(t){t in this.attr&&(i[t]=this.attr[t])},this),this.attachChild(g.default,this.select("photoSelectorSelector"),i),this.on("uiPreviewThumbnailShow",this.showPreview),this.on("uiPreviewThumbnailHide",this.hidePreview),this.on("uiImagePickerAdd uiVideoPickerAdd uiPreviewThumbnailRemove",this.focus),this.on("uiFileInputClicked",this.focusIfNotCondensed),this.on("uiPreviewThumbnailAdded",this.annotateThumbWithTweetboxId),this.attachChild(S.default,this.select("taggingSelector"),{includePreviouslySelectedUsers:!0,eventData:this.attr.eventData}),this.attachChild(C.default,this.select("taggingSelector")),this.on(this.select("taggingButtonSelector"),"click",function(){this.trigger(this.select("taggingSelector"),"uiShowSelectPopover")}),this.on("uiUpdatedSelectedUsers",this.updateTaggedUsers),this.on("uiUpdatedThumbnails",this.updateThumbnailCount),this.on("uiPreviewThumbnailRemoved",this.updateTagText)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(123),a=s(o),r=i(121),l=s(r),c=i(391),d=s(c),u=i(393),h=s(u),f=i(403),p=s(f),m=i(404),g=s(m),v=i(224),b=s(v),w=i(412),S=s(w),y=i(431),C=s(y),T=i(432),D=s(T),M=i(434),I=s(M),P="Who's in this photo?",x="Who's in these photos?";e.default=n}).call(e,i(10))},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaults={thumbSelector:".ComposerThumbnail",thumbsSelector:".ComposerThumbnails",thumbImageSelector:".ComposerThumbnail-image",thumbRemoveSelector:".ComposerThumbnail-remove",composerSelector:".tweet-form",attributionSelector:".js-attribution",thumbnailSize:"small",composeAltText:!1},this.update=function(t,e){var i=v.default.get(e.fileId);i&&(i.isVideo?this.updateVideoThumbnail(i):!i.isGif&&i.isImage&&this.updateDescription(i),this.updateLabels())},this.updateVideoThumbnail=function(t){var e=this.getByFileId(t.fileId);e.length&&(e.find("img").attr("src",t.thumbnail.src),
e.find(".ComposerThumbnail-duration").text(T.default.formatDuration(t.duration)))},this.updateDescription=function(t){var e=t.altText;if("undefined"!=typeof e){var i=this.getByFileId(t.fileId),s=e||A;i.find(".ComposerThumbnail-description").text(s)}},this.updateLabels=function(){this.select("thumbSelector").each(function(e){var i=t(this),s=i.find("img").attr("alt"),n=s||(0,M.default)("Image {{image_number}}",{image_number:e+1}),o=s?U:N,a=i.find(".ComposerThumbnail-ariaDescription");a.text(o),i.attr("aria-label",n)})},this.getByFileId=function(t){return this.select("thumbsSelector").find(".ComposerThumbnail[data-file-id="+t+"]")},this.removeAllBlobs=function(){(0,c.default)(this.attr.tweetboxId).forEach(function(t){return t.thumbnail&&u.default.revokeObjectUrl(t.thumbnail.src)})},this.removeAll=function(t,e){this.removeAllBlobs(),this.select("thumbsSelector").empty(),this.select("attributionSelector").empty(),this.removeDynamicSizing(),this.$node.closest(this.attr.composerSelector).removeClass(L).removeClass(B)},this.addPlaceholder=function(t,e){var i=o({},e,{isPlaceholder:!0});this.add(i),this.trigger("uiPreviewThumbnailShow",i)},this.render=function(t){var e=t.isVideo,i=t.isGif,s=!e&&!i,n=j[this.attr.thumbnailSize],o=y.default.getDeciderValue("web_upload_video_advanced")?E:O,a=t.thumbnail,r=s?f.default.getThumbnailOffset(a.height,a.width,n):{},l=Object.keys(r).map(function(t){return t+": "+r[t]+"px"}).join(";"),c=this.select("thumbSelector").length,d=void 0;d=e?F:i?R:(0,M.default)("Image {{image_number}}",{image_number:c+1});var u={aria_description_id:(0,w.default)(),aria_description:N,can_compose_alt_text:!e&&!i&&this.attr.composeAltText,duration:T.default.formatDuration(t.duration),edit_button_label:o,file_id:t.fileId,is_gif:i,is_large_size:!e&&!i&&"large"===this.attr.thumbnailSize,is_photo:s,is_placeholder:t.isPlaceholder,is_video:e,offset_styles:l,label:d,src:a.src,whitelisted_video_user:y.default.getDeciderValue("web_upload_video_advanced")},h=this.select("thumbsSelector");h.find(".ComposerThumbnail-loading").closest(".ComposerThumbnail").remove();var p=P.default.render(u);h.append(p)},this.add=function(t){var e=t.fileId,i=t.thumbnail.width,s=t.thumbnail.height,n=t.attribution,o=void 0!==n,a=this.$node.closest(this.attr.composerSelector);a.toggleClass(B,o),this.render(t),o&&a.find(this.attr.attributionSelector).attr("data-file-id",e).html(k.default.render(n)),t.isVideo?this.resize(s,i):t.isGif&&(a.addClass(L),this.resize(s,i,o)),this.trigger("uiUpdatedThumbnails"),this.trigger(a,"uiPreviewThumbnailAdded",{fileId:e})},this.resize=function(e,i,s){var n=this.select("thumbSelector"),o=this.$node.closest(this.attr.composerSelector);if(!n.length)return this.removeDynamicSizing(),void o.removeClass(L);var a={},r=void 0,l=330,c=330,d=void 0;e>i?(r=Math.min(e,c),d=Math.round(i*(r/e))):(d=Math.min(i,l),r=Math.round(e*(d/i))),a={height:r,width:d},o.addClass($),n.each(function(){var e=t(this),i=e.find("img");e.add(i).add(i.closest(".ComposerThumbnail-imageContainer")).css(a)})},this.removeDynamicSizing=function(){var t=this.$node.closest(this.attr.composerSelector);this.$node.removeAttr("style"),t.find(".RichEditor,.tweet-box").eq(0).removeAttr("style"),t.find(".typeahead").removeAttr("style"),t.removeClass($).removeClass(B),this.$node.closest(".ComposerThumbnail--video").removeClass("ComposerThumbnail--video")},this.completeRemoval=function(e){var i=t(e.target),s=i.attr("data-file-id"),n=v.default.get(s),o=n.thumbnail.height,a=n.thumbnail.width,r=j[this.attr.thumbnailSize];this.trigger("uiPreviewThumbnailRemove",{fileId:s}),i.remove(),this.trigger("uiPreviewThumbnailRemoved",{fileId:s}),n.isVideo||n.isGif?this.resize(o,a):i.find("img").css(f.default.getThumbnailOffset(o,a,r)),this.updateLabels(),v.default.remove(s)},this.remove=function(e){var i=t(e.target).closest(this.attr.thumbSelector),s=i.attr("data-file-id"),n=v.default.get(s);if(n){u.default.revokeObjectUrl(i.find("img").attr("src")),i.addClass("is-removing"),i.on("animationend",this.completeRemoval.bind(this));var o=n.uploadId;o&&this.trigger(document,"uiMediaSruCancel",{uploadId:o}),this.trigger("uiImagePickerRemove"),this.trigger("uiUpdatedThumbnails")}},this.openMediaEditDialog=function(e){var i=t(e.target);if(!i.closest(this.attr.thumbRemoveSelector).length){var s=this.$node.closest(this.attr.composerSelector);if(!s.hasClass("tweeting")){var n=i.closest(this.attr.thumbSelector),a=n.attr("data-file-id"),r=v.default.get(a);if(r){var l={fileId:a},c=r.isVideo||r.isGif?l:o({},l,{composeAltText:this.attr.composeAltText});this.trigger(document,"uiOpenMediaEditDialog",c)}}}},this.showAttributionLink=function(t){var e=t.target.getAttribute("data-file-id");this.trigger("uiNeedsCopyFoundMediaDialog",{fileId:e})},this.handleKeyActions=function(t){V.indexOf(t.keyCode)>=0&&(t.preventDefault(),this.remove(t)),q.indexOf(t.keyCode)>=0&&this.openMediaEditDialog(t)},this.preventFocus=function(t){t.preventDefault()},this.after("initialize",function(){var t=this.$node.closest(this.attr.composerSelector);this.on(t,"uiFileSelected",function(t,e){var i=v.default.get(e.fileId);i&&this.add(i)}),this.on(t,"uiPreviewThumbnailPlaceholderAdd",this.addPlaceholder),this.on(t,"uiPreviewThumbnailRemoveAll",this.removeAll),this.on("click",{attributionSelector:this.showAttributionLink,thumbSelector:this.openMediaEditDialog,thumbRemoveSelector:this.remove}),this.on("keydown",{thumbSelector:this.handleKeyActions}),this.on("mousedown",{thumbSelector:this.preventFocus}),this.on(document,"uiMediaEditDialogDone",this.update)})}Object.defineProperty(e,"__esModule",{value:!0});var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},a=i(111),r=s(a),l=i(392),c=s(l),d=i(393),u=s(d),h=i(395),f=s(h),p=i(359),m=s(p),g=i(224),v=s(g),b=i(399),w=s(b),S=i(136),y=s(S),C=i(400),T=s(C),D=i(123),M=s(D),I=i(401),P=s(I),x=i(402),k=s(x),A="Add description",E="Edit",O="Trim",R="GIF thumbnail",F="Video thumbnail",N="Click to add description to image",U="Click to edit description for image",j={small:113,large:127},L="ComposerThumbnail--gif",B="has-attribution",$="dynamic-photos",V=[m.default.DELETE,m.default.BACKSPACE,m.default.CLEAR],q=[m.default.ENTER,m.default.SPACE];e.default=(0,r.default)(n)}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(t){var e=a.default.keys().filter(function(e){return a.default.get(e).tweetboxId===t});return e.map(a.default.get)}Object.defineProperty(e,"__esModule",{value:!0});var o=i(224),a=s(o);e.default=n},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(t){if(!(0,u.default)().webkit)return t;var e=t.indexOf("?")===-1?"?":"&";return t+e+"_blob=1"}function o(){return++D}Object.defineProperty(e,"__esModule",{value:!0});var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l=i(394),c=s(l),d=i(156),u=s(d),h=i(362),f=s(h),p=i(396),m=s(p),g=i(397),v=s(g),b=i(398),w=s(b),S=i(252),y=s(S),C=i(224),T=s(C),D=0,M={MAX_FILE_SIZE:5242880,MAX_UPLOAD_FILE_SIZE:3145728,GIF_NAME_REGEXP:/.+\.gif$/i,IMAGE_NAME_REGEXP:/.+\.(jpg|jpeg|png|gif)$/i,VIDEO_NAME_REGEXP:/.+\.(mp4|mov|m4v)$/i,GIF_TYPE_REGEXP:/\/+gif$/i,IMAGE_TYPE_REGEXP:/\/+(jpg|jpeg|png|gif)$/i,VIDEO_TYPE_REGEXP:/\/+(mp4|mov|m4v)$/i,vendorURL:window.URL||window.webkitURL,canvasToBlob:function(t,e){var i=this;return e=e||"image/jpeg",new Promise(function(s,n){t.toBlob?t.toBlob(s,e):s(i.getBlobFromDataUri(t.toDataURL(e)))})},validateFileSize:function(t,e){var i=t&&t.size||t.fileSize;return e=e||this.MAX_FILE_SIZE,!i||i<=e},getFileName:function(t){if(t.indexOf("/")===-1&&t.indexOf("\\")===-1)return t;var e=t.match(/(?:.*)[\/\\]([^\/\\]+(?:\.\w+)?)$/);return e[1]},hasFileReader:function(){return!("function"!=typeof FileReader&&"object"!==("undefined"==typeof FileReader?"undefined":r(FileReader))||"no_file_reader"in y.default.fromQuery(window.location))},getFileHandles:function(t){return t.files||!1},getFileExtension:function(t){return t.split(".").pop().toLowerCase()},getBlobFromDataUri:function(t){var e=t.split(/data:|;base64,/);if(3!==e.length||!window.Blob)return null;for(var i=atob(e[2]),s=i.length,n=Array(s),o=0;o<s;o++)n[o]=i.charCodeAt(o);return new Blob([new Uint8Array(n)],{type:e[1]})},getDataUriObjectSize:function(t){var e=t.match(/^.*;base64,/)||[""],i=t.match(/=*$/)||[""];return Math.floor(.75*(t.length-i[0].length-e[0].length))},hasBlob:function(){return null!=window.Blob},getObjectUrl:function(t){return this.vendorURL&&t?this.vendorURL.createObjectURL(t):""},revokeObjectUrl:function(t){this.vendorURL&&this.vendorURL.revokeObjectURL(t)},getFileType:function(t,e){var i=this;return new Promise(function(s,n){var o=e&&e.type;i.GIF_NAME_REGEXP.test(t)||M.GIF_TYPE_REGEXP.test(o)?(0,m.default)(e,function(t){return s(t?w.default.GIF:w.default.IMAGE)}):i.IMAGE_NAME_REGEXP.test(t)||M.IMAGE_TYPE_REGEXP.test(o)?s(w.default.IMAGE):i.VIDEO_NAME_REGEXP.test(t)||M.VIDEO_TYPE_REGEXP.test(o)?s(w.default.VIDEO):n()})},getVideoInfo:function(t,e){var i=this,s=this.getObjectUrl(t),n=e?"seeked":"loadeddata",o=document.createElement("video");o.src=s,e&&o.addEventListener("canplay",function(){return o.currentTime=e});var a=this,r=function(t){return i.revokeObjectUrl.bind(i,s),t};return new Promise(function(t,e){o.addEventListener(n,function(){var e=document.createElement("canvas");e.width=o.videoWidth,e.height=o.videoHeight;var i=e.getContext("2d");i.drawImage(o,0,0),a.canvasToBlob(e).then(function(e){return t({duration:o.duration,thumbnail:{src:a.getObjectUrl(e)}})})},!1),o.addEventListener("error",function(){return e(v.default.FILE_UNSUPPORTED)})}).then(r,r)},getFileInfo:function(t,e,i){var s=this;return M.getFileType(t,e).then(function(n){var r=n===w.default.VIDEO,l=o(),d=a({isGif:n===w.default.GIF,isImage:n===w.default.IMAGE,isVideo:r,fileName:r?"video-thumbnail-"+l:t,fileHandle:e,fileType:n,fileSize:e.size,uploadId:l,mediaType:e.type},i);i&&i.mediaCategoryPrefix&&(d.mediaCategory=i.mediaCategoryPrefix+n),r||(d.thumbnail={src:s.getObjectUrl(e)});var u=T.default.add(d);return d=T.default.update(u,{fileId:u}),r?s.getVideoInfo(e).then(function(t){return t}).then(T.default.update.bind(T.default,d.fileId)).then(c.default):(0,c.default)(d)})},fetchAsBlob:function(t){var e=this,i=/^data:/;return new Promise(function(s,o){if(i.test(t)){var a=e.getBlobFromDataUri(t);a?s(a):o()}else{var r=new XMLHttpRequest;r.open("GET",n(t),!0),r.responseType="blob",r.onload=function(t){r.status<400?s(r.response):o()},r.onerror=function(){o()},r.send()}})},createMapOfBlobUrls:function(t){var e=f.default.unique(t),i=Promise.all(e.map(function(t){return this.fetchAsBlob(t)},this));return i.then(function(t){return e.reduce(function(e,i,s){return e[i]=URL.createObjectURL(t[s]),e},{})})},revokeMapOfBlobUrls:function(t){Object.keys(t).forEach(function(e){return URL.revokeObjectURL(t[e])})}};e.default=M},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(t){return a.default.getDimensions(t.thumbnail.src).then(function(e){var i={thumbnail:{width:e.width,height:e.height}};return l.default.update(t.fileId,i)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(395),a=s(o),r=i(224),l=s(r);e.default=n},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={getDimensions:function(t){return new Promise(function(e,i){var s=new Image;s.onload=function(){e({height:s.height,width:s.width})},s.onerror=i,s.src=t})},getThumbnailOffset:function(t,e,i){var s=void 0;if(e=+e,t=+t,i=+i,e===t&&e>=i&&t>=i)return{height:i,width:i,"margin-left":0,"margin-top":0};if(t<i||e<i)s={height:t,width:e,"margin-top":(i-t)/2,"margin-left":(i-e)/2};else if(e>t){var n=i/t*e;s={height:i,width:n,"margin-left":-(n-i)/2,"margin-top":0}}else if(t>e){var o=i/e*t;s={height:o,width:i,"margin-top":-(o-i)/2,"margin-left":0}}return s}};e.default=i},function(t,e){"use strict";function i(t,e,i){function o(s,n,o){var a=s-f,r=a+n;if(a>=0&&r<=h.length)o(h.subarray(a,r),s);else{var l=new FileReader;l.onload=function(){h=new Uint8Array(this.result),f=s,o(h.subarray(0,n),s)},l.onerror=e.bind(null,!1),l.readAsArrayBuffer(t.slice(s,s+Math.max(i,n)))}}function a(t){return(t>>7)*(2<<(7&t))*3}function r(t,i){u++?e(!0):o(i+n+a(t[9]||0),1,l)}function l(t,e){var i=t[0];i?o(e+1+i,1,l):o(e+1,n,c)}function c(t,i){var s=t[0];33===s?l(t.subarray(2,3),i+2):44===s?r(t,i):e(!1)}function d(t){/^GIF8[79]a/.test(String.fromCharCode.apply(null,t))?o(s+a(t[10]||0),n,c):e(!1)}i=i||65536;var u=0,h=[],f=0;t instanceof Blob?o(0,s,d):e(!1)}Object.defineProperty(e,"__esModule",{value:!0});var s=13,n=11;e.default=i},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={FILE_TOO_LARGE:"tooLarge",FILE_UNSUPPORTED:"fileUnsupported",GIF_LIMIT:"gifLimit",GIF_TOO_LARGE:"gifTooLarge",GIF_UNSUPPORTED:"gifUnsupported",IO_ERROR:"ioError",NOT_IMAGE:"notImage",MIXED_MEDIA:"mixedMedia",VIDEO_TOO_LARGE:"videoTooLarge",TOO_MANY_VIDEOS_1:"videosTooMany1",TOO_MANY_PHOTOS_1:"photosTooMany1",TOO_MANY_PHOTOS:"photosTooMany"}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={GIF:"gif",IMAGE:"image",VIDEO:"video"}},function(t,e){"use strict";function i(t,e){t=t||{},e=e||s;var i=t.id;if(i)return i;do n++,i=e+n;while(document.getElementById(i));return t.id=i,i}Object.defineProperty(e,"__esModule",{value:!0});var s="uuid-",n=0;i.resetCount=function(){n=0},e.default=i},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={formatDuration:function(t){var e=Math.floor(t/60),i=Math.floor(t%60);return e+":"+("0"+i).slice(-2)}};e.default=i},function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<div role="button" tabindex="0" aria-label="'),s.b(s.v(s.f("label",t,e,0))),s.b('" '),s.s(s.f("can_compose_alt_text",t,e,1),t,e,0,434,476,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b('aria-describedby="'),i.b(i.v(i.f("aria_description_id",t,e,0))),i.b('"')}),t.pop()),s.b(' class="ComposerThumbnail'),s.s(s.f("is_large_size",t,e,1),t,e,0,544,569,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(" ComposerThumbnail--large")}),t.pop()),s.b(" "),s.s(s.f("is_gif",t,e,1),t,e,0,599,621,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b("ComposerThumbnail--gif")}),t.pop()),s.s(s.f("is_video",t,e,1),t,e,0,645,669,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b("ComposerThumbnail--video")}),t.pop()),s.b('" data-file-id="'),s.b(s.v(s.f("file_id",t,e,0))),s.b('">\n  <div class="ComposerThumbnail-imageContainer">\n'),s.b('    <img class="ComposerThumbnail-image" src="'),s.b(s.v(s.f("src",t,e,0))),s.b('" style="'),s.b(s.v(s.f("offset_styles",t,e,0))),s.b('" draggable="false" alt="">\n  </div>\n\n'),s.s(s.f("is_gif",t,e,1),t,e,0,1022,1266,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b('    <div class="ComposerThumbnail-overlay ComposerThumbnail-gifBadge">\n      <div class="Icon Icon--medium Icon--gifBadge"></div>\n    </div>\n'),i.s(i.f("is_placeholder",t,e,1),t,e,0,1187,1244,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('      <div class="ComposerThumbnail-loading"></div>\n')}),t.pop())}),t.pop()),s.b("\n"+i),s.s(s.f("is_video",t,e,1),t,e,0,1294,1580,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b('    <div class="ComposerThumbnail-overlay ComposerThumbnail-edit">'),i.b(i.v(i.f("edit_button_label",t,e,0))),i.b('</div>\n    <div class="ComposerThumbnail-overlay ComposerThumbnail-duration">'),i.b(i.v(i.f("duration",t,e,0))),i.b('</div>\n    <div class="ComposerThumbnail-play">\n      <div class="Icon Icon--playButton"></div>\n    </div>\n')}),t.pop()),s.b("\n"+i),s.s(s.f("can_compose_alt_text",t,e,1),t,e,0,1622,1818,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b('    <div class="ComposerThumbnail-description">Add description</div>\n    <div id="'),i.b(i.v(i.f("aria_description_id",t,e,0))),i.b('" class="u-hiddenVisually ComposerThumbnail-ariaDescription">'),i.b(i.v(i.f("aria_description",t,e,0))),i.b("</div>\n")}),t.pop()),s.b("\n"+i),s.s(s.f("is_placeholder",t,e,1),t,e,1,0,0,"")||s.b('    <div class="ComposerThumbnail-overlay ComposerThumbnail-remove">\n      <div class="Icon Icon--close Icon--smallest"></div>\n    </div>\n'),s.b("</div>\n"),s.fl()},partials:{},subs:{}})}).call(e,i(1))},function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b("\n"+i),s.b("  via &nbsp;\n"),s.s(s.f("image",t,e,1),t,e,0,26,91,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b('    <span class="provider provider--'),i.b(i.v(i.f("image",t,e,0))),i.b('"></span> &nbsp;\n')}),t.pop()),s.b("  "),s.b(s.v(s.f("name",t,e,0))),s.b("\n"),s.b("\n"),s.fl()},partials:{},subs:{}})}).call(e,i(1))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var n=i(393),o=s(n),a={MAX_DIMENSION:4096,getUserMedia:function(){var t=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;return!!t&&t.bind(navigator)}(),hasCanvas:function(){var t=document.createElement("canvas");return!(!t.getContext||!t.getContext("2d"))},supportsCropper:function(){return this.hasCanvas()&&o.default.hasFileReader()}};e.default=a},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaults={tweetBoxSelector:".tweet-form",photoButtonSelector:".file-input",photoIconSelector:".tweet-camera",tooltipElementsSelector:".file-input,button.btn",addPhotoLabelSelector:".add-photo-label",multiPhotoDataContainerSelector:".multi-photo-data-container",cameraIconSelector:".tweet-camera.Icon",dragMediaTextSelector:".ComposerDragHelp-text",interceptAvatarImageData:!1,photoLimit:1,disabledClass:"disabled",tooltipClass:"js-tooltip",disabledAttribute:"disabled"},this.disableButton=function(){this.isDisabled=!0,this.$node.addClass(this.attr.disabledClass),this.select("buttonSelector").prop(this.attr.disabledAttribute,!0).addClass(this.attr.disabledClass)},this.enableButton=function(){this.isDisabled=!1,this.$node.removeClass(this.attr.disabledClass),this.select("buttonSelector").prop(this.attr.disabledAttribute,!1).removeClass(this.attr.disabledClass)},this.thumbAdded=function(t,e){var i=e.fileId,s=v.default.get(i);if(s){var n=s.isGif;this.singleSelectionType=s.isVideo||n,this.mediaItems.push(i),this.updateInterface(),this.trigger("uiPreviewThumbnailShow",{isGif:n,isVideo:s.isVideo,isImage:s.isImage});var o=this.$node.closest(this.attr.tweetBoxSelector);o.trigger("uiComposerDisableExclusiveAttachments"),this.canUpload()?this.enableButton():this.disableButton(),this.popImageToAddQueue()}},this.updateInterface=function(){this.updateAddPhotoLabel(),this.updateAcceptedFormats()},this.thumbRemoved=function(t,e){var i=parseInt(e.fileId,10),s=v.default.get(i);s&&(this.mediaItems=this.mediaItems.filter(function(t){return t!==i}),this.singleSelectionType=!1,this.enableButton(),this.updateInterface(),this.mediaItems.length||(this.trigger("uiPreviewThumbnailHide"),this.trigger("uiComposerEnableExclusiveAttachments")))},this.removeAllThumbs=function(){this.mediaItems=[],this.singleSelectionType=!1,this.updateInterface(),this.reset(),this.enableButton(),this.trigger("uiComposerEnableExclusiveAttachments")},this.interceptGotImageData=function(t,e){var i=e.fileIds,s=0===this.imageToAddQueue.length;this.imageToAddQueue=this.imageToAddQueue.concat(i),s&&this.processNextImageToAdd()},this.processNextImageToAdd=function(){if(0!==this.imageToAddQueue.length){var t=this.imageToAddQueue[0],e=v.default.get(t);if(!e||this.isDisabled&&!this.canUpload(e,!0))return void this.popImageToAddQueue();var i=e.fileHandle;i?e.isVideo?this.mediaItems.length>0?this.addFileError(u.default.MIXED_MEDIA):this.validateVideo(i)&&this.gotVideo(e):e.isGif?this.validateGif(i)&&this.gotImageData(e):this.validateImage(i)&&this.gotImageData(e):(this.trigger("uiImagePickerNoFileReaderError"),this.trigger("uiShowError",{message:"Error uploading media"}),this.popImageToAddQueue())}},this.popImageToAddQueue=function(){this.imageToAddQueue=this.imageToAddQueue.slice(1),this.imageToAddQueue.length>0&&this.processNextImageToAdd()},this.interceptAvatarImageData=function(t,e){"avatar"===e.uploadType&&this.gotImageData(e)},this.addFileError=function(t){var e=(0,m.default)(t);e&&this.trigger("uiShowError",{message:e}),this.trigger("uiImagePickerError",{message:t}),this.popImageToAddQueue()},this.imageSelectorClicked=function(t,e){this.supportsImageUpload()?this.trigger("uiImagePickerClick",this.eventDataOverrides):(this.trigger("uiImagePickerNoFileReaderError"),this.trigger("uiShowError",{message:'You need Adobe Flash to upload photos. <a href="http://get.adobe.com/flashplayer">Install Adobe Flash</a>'}),t.preventDefault(),t.stopPropagation())},this.supportsImageUpload=function(){return f.default.hasFileReader()},this.canUpload=function(t,e){if(t=t||{},this.attr.photoLimit===this.mediaItems.length)return e&&(1===this.attr.photoLimit?this.addFileError(u.default.TOO_MANY_PHOTOS_1):t.isGif||t.isVideo?this.addFileError(u.default.MIXED_MEDIA):this.addFileError(u.default.TOO_MANY_PHOTOS)),!1;var i=v.default.get(this.mediaItems[0]);return!!i&&(this.singleSelectionType?(e&&(i.isGif&&t.isGif?this.addFileError(u.default.GIF_LIMIT):i.isVideo&&t.isVideo?this.addFileError(u.default.TOO_MANY_VIDEOS_1):this.addFileError(u.default.MIXED_MEDIA)),!1):!t.isGif&&!t.isVideo||(e&&this.addFileError(u.default.MIXED_MEDIA),!1))},this.updateAddPhotoLabel=function(){var t=void 0,e=!1,i=this.mediaItems.length,s=1===i?v.default.get(this.mediaItems[0]):{},n=s.isGif,o=s.isVideo,a=this.attr.photoLimit;i?n?t="You can only add one GIF":o?t="You can only add one video":1===a&&1===i?t="You can only add one photo":4===a&&4===i?(t="You must remove a photo before adding another one",e=!0):(t="Add more photos",e=!0):t=1===a?this.hasVideoSupport()?"Add photo or video":"Add photo":this.hasVideoSupport()?"Add photos or video":"Add photos",this.select("tooltipElementsSelector").attr("data-original-title",t),this.select("photoButtonSelector").prev("span.visuallyhidden").text(t),this.select("addPhotoLabelSelector").text(t);var r=w.default.getDecider("edge_design");r||this.select("cameraIconSelector").toggleClass("Icon--camera",!e).toggleClass("Icon--cameraPlus",e)},this.overrideScribeContext=function(t,e){this.eventDataOverrides={scribeContext:e}},this.dragEnter=function(t,e){this.isDisabled||this.showDragTarget(e)},this.showDragTarget=function(t){var e="Drag file here",i=t&&c.default.hasFiles(t,f.default.GIF_TYPE_REGEXP),s=!i&&t&&c.default.hasFiles(t,f.default.IMAGE_TYPE_REGEXP),n=t&&c.default.hasFiles(t,f.default.VIDEO_TYPE_REGEXP),o=this.mediaItems.length&&(n||i||this.singleSelectionType)||this.mediaItems.length>=this.attr.photoLimit,a=this.$node.closest(this.attr.tweetBoxSelector);o?a.removeClass("is-droppable"):(s?e="Drag photo here":i?e="Drag GIF here":n&&(e="Drag video here"),a.addClass("is-droppable")),a.find(this.attr.dragMediaTextSelector).html(e)},this.dragLeave=function(t,e){var i=this.$node.closest(this.attr.tweetBoxSelector);i.removeClass("is-droppable")},this.after("initialize",function(){this.on("click",{photoButtonSelector:this.imageSelectorClicked});var t=this.$node.closest(this.attr.tweetBoxSelector);this.on(t,"uiPreviewThumbnailRemove",this.thumbRemoved),this.on(t,"uiPreviewThumbnailAdded",this.thumbAdded),this.on(t,"uiPreviewThumbnailRemoveAll",this.removeAllThumbs),this.on(t,"uiGotImageData",this.interceptGotImageData),this.on(t,"uiEnableImageSelection",this.enableButton),this.on(t,"uiDisableImageSelection",this.disableButton),this.on(t,"uiOverrideImageSelectorScribeContext",this.overrideScribeContext),this.on(t,"uiComposerEnableExclusiveAttachments",this.enableButton),this.on(t,"uiComposerDisableExclusiveAttachments",this.disableButton),this.attr.interceptAvatarImageData&&this.on(document,"uiImageSave",this.interceptAvatarImageData),this.on(document.body,"uiDragEnter",this.dragEnter),this.on(document.body,"uiDragLeave uiDrop",this.dragLeave),this.mediaItems=[],this.imageToAddQueue=[],this.updateInterface()})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(123),a=(s(o),i(111)),r=s(a),l=i(405),c=s(l),d=i(397),u=s(d),h=i(393),f=s(h),p=i(406),m=s(p),g=i(224),v=s(g),b=i(136),w=s(b),S=i(407),y=s(S),C=(0,r.default)(n,y.default);e.default=C},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={hasFiles:function(t,e){var i=(t.originalEvent||t).dataTransfer,s=i&&(i.types.contains?i.types.contains("Files"):i.types.indexOf("Files")>=0);if(!s||!e||!i.items&&!i.files)return s;for(var n=i.items||i.files,o=0;o<n.length;++o)s=s&&!!n[o].type.match(e);return s},onlyHandleEventsWithFiles:function(t,e){return function(s,n){if(i.hasFiles(s,e))return t.call(this,s,n)}}};e.default=i},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){switch(t){case r.default.NOT_IMAGE:case r.default.IO_ERROR:return(0,o.default)("You did not select an image.");case r.default.FILE_TOO_LARGE:return(0,o.default)("Sorry! The file is too big. Maximum file size is 50MB.");case r.default.FILE_UNSUPPORTED:return(0,o.default)("That kind of file isn't supported yet. Try uploading a gif, video, or picture instead.");case r.default.GIF_LIMIT:return(0,o.default)("You cannot upload more GIFs.");case r.default.GIF_TOO_LARGE:return(0,o.default)("Sorry! The file is too big. Maximum file size is {{maxSize}}MB.",{maxSize:c.default.getDeciderValue("photoSruGifLimitMb")});case r.default.GIF_UNSUPPORTED:return(0,o.default)("GIFs are not supported here.");case r.default.MIXED_MEDIA:return(0,o.default)("Media of that type can not be added at this time.");case r.default.TOO_MANY_VIDEOS_1:return(0,o.default)("You can only add one video.");case r.default.TOO_MANY_PHOTOS_1:return(0,o.default)("You can only add one photo.");case r.default.TOO_MANY_PHOTOS:return(0,o.default)("You must remove a photo before adding another one.");case r.default.VIDEO_TOO_LARGE:return(0,o.default)('Your video file is too large. Videos should be less than {{maxSize}} MB. <a href="https://support.twitter.com/articles/20172128#import-web" target="_blank">Learn more</a>.',{maxSize:c.default.getDeciderValue("upload_video_size")});default:return}};var n=i(123),o=s(n),a=i(397),r=s(a),l=i(136),c=s(l)},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({buttonSelector:".btn",fileInputString:"media[]",emptyFileInputString:"media_empty",fileSelector:"input.file-input",uploadType:"",shouldInterceptTab:!0}),a.default.mixin(this,[g.default,b.default]),this.gotMedia=function(t){t.isVideo?this.gotVideo(t):this.gotImageData(t)},this.gotFileHandle=function(t,e){var i={mediaCategoryPrefix:this.attr.mediaCategoryPrefix};d.default.getFileInfo(t,e,i).then(this.gotMedia.bind(this))},this.reset=function(){this.resetInput("fileSelector",this.attr.emptyFileInputString),this.trigger("uiPreviewThumbnailHide")},this.notifyMediaSruInit=function(t){var e={fileId:t.fileId,url:t.url,uploadId:t.uploadId,mediaCategory:t.mediaCategory,sourceUrl:t.sourceUrl,mediaType:t.mediaType};this.trigger("uiMediaSruInit",e)},this.beginSru=function(t){var e=p.default.get(t);e&&this.notifyMediaSruInit(e)},this.resetInput=function(t,e){var i=this.select(t);i.val("");var s=i.clone().attr("name",e);i.replaceWith(s)},this.validate=function(t,e){var i=this;return d.default.getFileType(t,e).then(function(s){var n=!1;if(s===h.default.GIF?n=i.validateGif(e):s===h.default.IMAGE?n=i.validateImage(e):s===h.default.VIDEO&&(n=i.validateVideo(e)),n)return{fileName:t,fileHandle:e};throw new Error("invalid file")},function(){var t=i.hasVideoSupport()?l.default.FILE_UNSUPPORTED:l.default.NOT_IMAGE;throw i.addFileError(t),t})},this.setup=function(){this.select("fileSelector").attr("name",this.attr.fileInputString)},this.fileSelected=function(t){var e=this.select("fileSelector").get(0),i=d.default.getFileName(e.value);if(!i)return Promise.resolve();for(var s=d.default.getFileHandles(e),n=[],o=0;o<s.length;o++){var a=s[o];n.push(this.validate(i,a))}this.resetInput("fileSelector",this.attr.emptyFileInputString);var r=this;return Promise.all(n).then(function(t){return t.filter(Boolean).forEach(function(t){return r.gotFileHandle(t.fileName,t.fileHandle)})})},this.maybeTabToNextFocusable=function(e){if(9===e.which){e.preventDefault();var i=e.shiftKey?-1:1,s=t("button,input,textarea,object,a[href],[tabindex],[contenteditable=true],[contenteditable=plaintext-only]").filter(":visible:not(:disabled):not([tabindex=-1])");s.eq(s.index(e.target)+i).focus()}},this.updateAcceptedFormats=function(){var t=this.mediaItems&&this.mediaItems.length||0,e=this.videoFormats(t),i=this.imageFormats(t),s=i+","+e;this.select("photoButtonSelector").prop("accept",s)},this.notifyFileSelected=function(t){var e={type:"uiFileSelected",defaultBehavior:this.beginSru.bind(this,t.fileId)};this.trigger(e,t)},this.after("initialize",function(){this.setup(),this.on("change",this.fileSelected),this.attr.shouldInterceptTab&&this.on("keydown",this.maybeTabToNextFocusable),this.on("click",{fileSelector:"uiFileInputClicked"})})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(121),a=s(o),r=i(397),l=s(r),c=i(393),d=s(c),u=i(398),h=s(u),f=i(224),p=s(f),m=i(408),g=s(m),v=i(411),b=s(v);e.default=n}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({maxSizeInBytes:52428800,uploadType:"",gifSupport:!0,imageFormats:["image/gif","image/jpeg","image/jpg","image/png"]}),this.maxGifSizeInBytes=function(){return 1048576*g.default.getDeciderValue("photoSruGifLimitMb")},this.imageFormats=function(t){return t?this.attr.imageFormats.filter(function(t){return"image/gif"!==t}).join(","):this.attr.imageFormats.join(",")},this.validateImage=function(t){if(t){var e=d.default.validateFileSize(t,this.attr.maxSizeInBytes);if(!e)return this.addFileError(l.default.FILE_TOO_LARGE),!1}return!0},this.validateGif=function(t){if(t){if(!this.attr.gifSupport)return this.addFileError(l.default.GIF_UNSUPPORTED),!1;var e=d.default.validateFileSize(t,this.maxGifSizeInBytes());if(!e)return this.addFileError(l.default.GIF_TOO_LARGE),!1}return!0},this.resizeImage=function(t){return t.isGif?Promise.resolve(t):h.default.resize(t.fileHandle).then(function(e){return d.default.revokeObjectUrl(t.thumbnail.src),p.default.update(t.fileId,{fileHandle:e,thumbnail:{src:d.default.getObjectUrl(e)}})}).then(a.default)},this.gotImageData=function(t){var e=this;this.resizeImage(t).then(function(t){var i=t.fileId,s=e.mediaItems&&e.mediaItems.length,n=s?p.default.get(e.mediaItems[0]):null,o=t.isGif,a=n&&o?n.isGif?l.default.GIF_LIMIT:l.default.MIXED_MEDIA:null;return a?void e.addFileError(a):(e.trigger("uiImagePickerAdd",b.default.merge({message:"flash"},e.eventDataOverrides,!0)),e.select("fileNameSelector").attr("value",t.fileName),void e.notifyFileSelected({fileId:i,uploadType:e.attr.uploadType}))})}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(394),a=s(o),r=i(397),l=s(r),c=i(393),d=s(c),u=i(409),h=s(u),f=i(224),p=s(f),m=i(136),g=s(m),v=i(126),b=s(v);e.default=n},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var n=i(393),o=s(n),a=i(403),r=s(a),l=i(410),c=s(l),d={getOrientation:function(t){return new Promise(function(e,i){return c.default.detectOrientation(t,e)})},drawImageWithOrientation:function(t,e,i,s,n){switch(t.save(),n){case c.default.TOP_RIGHT:t.scale(-1,1),t.drawImage(e,-i,0,i,s);break;case c.default.BOTTOM_RIGHT:t.rotate(Math.PI),
t.drawImage(e,-i,-s,i,s);break;case c.default.BOTTOM_LEFT:t.scale(1,-1),t.drawImage(e,0,-s,i,s);break;case c.default.LEFT_TOP:t.translate(i/2,s/2),t.rotate(Math.PI/2),t.scale(1,-1),t.drawImage(e,-s/2,-i/2,s,i);break;case c.default.RIGHT_TOP:t.translate(i/2,s/2),t.rotate(Math.PI/2),t.drawImage(e,-s/2,-i/2,s,i);break;case c.default.RIGHT_BOTTOM:t.translate(i/2,s/2),t.rotate(Math.PI/2),t.scale(-1,1),t.drawImage(e,-s/2,-i/2,s,i);break;case c.default.LEFT_BOTTOM:t.translate(i/2,s/2),t.rotate(-Math.PI/2),t.drawImage(e,-s/2,-i/2,s,i);break;default:t.drawImage(e,0,0,i,s)}t.restore()},widthAndHeightForOrientation:function(t,e){return e===c.default.LEFT_TOP||e===c.default.RIGHT_TOP||e===c.default.RIGHT_BOTTOM||e===c.default.LEFT_BOTTOM?{width:t.height,height:t.width}:{width:t.width,height:t.height}},progressiveResizeRoughPass:function(t,e,i){for(var s=t,n=void 0;s.width/2>e||s.height/2>i;)n=document.createElement("canvas"),n.width=s.width/2,n.height=s.height/2,n.getContext("2d").drawImage(s,0,0,s.width/2,s.height/2),s=n;return s},progressiveResize:function(t,e,i){var s=this.progressiveResizeRoughPass(t,e,i),n=document.createElement("canvas");n.width=e,n.height=i;var a=n.getContext("2d");a.drawImage(s,0,0,e,i);var l=n.toDataURL("image/jpeg"),c=e>r.default.MAX_DIMENSION||i>r.default.MAX_DIMENSION,d=o.default.getDataUriObjectSize(l)>o.default.MAX_UPLOAD_FILE_SIZE,u=.8;return c||d?(c&&(u=e>i?r.default.MAX_DIMENSION/e:r.default.MAX_DIMENSION/i),this.progressiveResize(t,e*u,i*u)):o.default.getBlobFromDataUri(l)},resize:function(t){var e=this;return new Promise(function(i,s){r.default.hasCanvas()?e.getOrientation(t).then(e.resizeWorker.bind(e,t)).then(i).catch(s):i(t)})},resizeWorker:function(t,e){var i=this,s=new Image,n=o.default.getObjectUrl(t),a=new Promise(function(a,l){s.onload=function(n){var d=i.widthAndHeightForOrientation(s,e),u=d.width,h=d.height;if(!u||!h)return l(n);var f=t.size>o.default.MAX_UPLOAD_FILE_SIZE||u>r.default.MAX_DIMENSION||h>r.default.MAX_DIMENSION||e!==c.default.TOP_LEFT&&e!==c.default.UNKNOWN;if(!f)return a(t);var p=document.createElement("canvas");p.width=u,p.height=h;var m=p.getContext("2d");i.drawImageWithOrientation(m,s,u,h,e),a(i.progressiveResize(p,u,h))},s.onerror=l,s.src=n});return a.then(function(t){return o.default.revokeObjectUrl(n),t}).catch(function(t){throw o.default.revokeObjectUrl(n),t})}};e.default=d},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=65536,s=0,n=10,o={UNKNOWN:s,TOP_LEFT:1,TOP_RIGHT:2,BOTTOM_RIGHT:3,BOTTOM_LEFT:4,LEFT_TOP:5,RIGHT_TOP:6,RIGHT_BOTTOM:7,LEFT_BOTTOM:8,detectOrientation:function(t,e,o){function a(i,n,a){var r=i-d,l=r+n;if(r>=0&&l<=c.length)a(c.subarray(r,l),i);else{var u=new FileReader;u.onload=function(){c=new Uint8Array(this.result),d=i,a(c.subarray(0,n),i)},u.onerror=e.bind(null,s),u.readAsArrayBuffer(t.slice(i,i+Math.max(o,n)))}}function r(t){function i(e,i){for(var s=0,n=0;n<i;n++)s=(s<<8)+t[e+(o?n:i-1-n)];return s}var n=String.fromCharCode.apply(null,t.subarray(0,4)),o={"MM\0*":!0,"II*\0":!1}[n];if(void 0===o)return void e(s);var a=t.length>8&&i(4,4);if(!a||a+2>t.length)return void e(s);var r=i(a,2);if(a+12*r+6>t.length)return void e(s);for(var l=a+2;r--;){if(274===i(l,2)&&3===i(l+2,2)&&1===i(l+4,4))return void e(i(l+8,2));l+=12}e(s)}function l(t,i){var o=t[1];if(t.length<4||255!==t[0]||217===o)return void e(s);var c=o<208||o>217?(t[2]<<8)+t[3]:0;225===o&&c>8&&"Exif\0\0"===String.fromCharCode.apply(null,t.subarray(4,10))?a(i+10,c-8,r):a(i+2+c,n,l)}o=o||i;var c=[],d=0;t instanceof Blob?a(0,n,l):e(s)}};e.default=o},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){var t=45,e=15;this.defaultAttrs({videoFormats:['video/mp4; codecs="avc1.42E01E,mp4a.40.2"','video/quicktime; codecs="avc1.42E01E,mp4a.40.2"','video/x-m4v; codecs="avc1.42E01E,mp4a.40.2"'],videoSupport:!1}),this.videoFormats=function(t){return!t&&this.hasVideoSupport()?this.canPlayFormats().join(","):""},this.canPlayFormats=function(){var t=this;return void 0!==this.supportedVideoFormats?this.supportedVideoFormats:function(){var e=document.createElement("video");return t.supportedVideoFormats=t.attr.videoFormats.filter(function(t){return!!e.canPlayType(t)}).map(function(t){return t.split(";")[0]})}()},this.hasVideoSupport=function(){var t=this;return void 0!==this.hasVideoSupportResult?this.hasVideoSupportResult:function(){var e=document.createElement("video"),i=t.attr.videoFormats.some(function(t){return!!e.canPlayType(t)});return t.hasVideoSupportResult=l.default.hasFileReader()&&h.default.getDecider("web_upload_video")&&t.attr.videoSupport&&i}()},this.gotVideo=function(e){var i={scribeData:{items:[{media_details:{duration:e.duration,size:e.fileSize}}]}};h.default.getDeciderValue("web_upload_video_advanced")&&this.trigger("uiVideoPickerProAdd",i),this.trigger("uiVideoPickerAdd",i);var s=e.fileId,n=e.duration>t;n&&d.default.update(s,{duration:t}),this.notifyFileSelected({fileId:s,uploadType:this.attr.uploadType}),n&&this.trigger(document,"uiOpenMediaEditDialog",{fileId:e.fileId})},this.validateVideo=function(t){if(!this.hasVideoSupport())return this.addFileError(a.default.NOT_IMAGE),!1;if(this.canPlayFormats().indexOf(t.type)===-1)return this.addFileError(a.default.FILE_UNSUPPORTED),!1;var i=h.default.getDeciderValue("upload_video_size")||e;return!(t.size>1024*i*1024)||(this.addFileError(a.default.VIDEO_TOO_LARGE),!1)}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(397),a=s(o),r=i(393),l=s(r),c=i(224),d=s(c),u=i(136),h=s(u);e.default=n},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({dropdownSelector:".user-select-container.dropdown-menu",openPopoverButtonSelector:".js-open-user-select",includePreviouslySelectedUsers:!0,typeaheadSrc:"COMPOSE_MEDIA_TAGGING",datasourceForTagging:"mediaTagAccounts",requestType:"compose_media_tagging"}),this.showSelectPopover=function(t){this.previouslyFocused=document.activeElement,this.$node.show(),this.trigger("uiSetFocusInSelectedUserInput")},this.hideSelectPopover=function(e){if(e.target!==this.$node.get(0)&&!t.contains(this.$node.get(0),e.target)&&0===t(e.target).closest(this.attr.openPopoverButtonSelector).length){if(this.previouslyFocused&&"focusin"===e.type){var i=this.previouslyFocused;this.previouslyFocused=null,i.focus()}else this.previouslyFocused=null;this.forceHide()}},this.forceHide=function(t){this.$node.hide(),this.trigger("uiTypeaheadSetPreventDefault",{preventDefault:!1,key:9}),this.trigger("uiTypeaheadResultsHidden")},this.hideAndManageEsc=function(t){t.preventDefault(),t.stopPropagation(),this.forceHide()},this.after("initialize",function(){l.default.attachTo(this.$node,{alwaysOpen:!0,datasourceForTagging:this.attr.datasourceForTagging,includePreviouslySelectedUsers:this.attr.includePreviouslySelectedUsers,requestType:this.attr.requestType,typeaheadSrc:this.attr.typeaheadSrc}),this.on("uiShowSelectPopover",this.showSelectPopover),this.on("uiShortcutEsc",this.hideAndManageEsc),this.on(document,"mousedown : focusin",this.hideSelectPopover)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(413),l=s(r),c=(0,a.default)(n);e.default=c}).call(e,i(10))},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({selectUsersContainerSelector:".user-select-container",typeaheadContainerSelector:".typeahead-container",dropdownSelector:".dropdown-menu.typeahead",inputSelector:".user-select-controls input",itemSelector:".typeahead-item",maxSelection:10,requestType:"",alwaysOpen:!1,includePreviouslySelectedUsers:!1,controlsSelector:".user-select-controls",userBorderColorClass:"u-borderUserColorLight",datasourceForTagging:"accounts",additionalDatasourceRenderers:[],typeaheadSrc:"",decidersForTypeahead:{},selectedItemType:"mediaTagUsers",cannotSelectClass:"cannot-select",eventData:{scribeContext:{element:"tweet_box"}}}),this.selectUser=function(t,e){var i=e&&e.item&&e.item.id;if(null!=i){var s=this.shouldUpdateUserList(t,e),n=this.selectedUserIndex(e.item.id);n!==-1||s||t.stopImmediatePropagation(),n===-1&&s?this.selectedUsers.push(e.item):n!==-1&&(this.selectedUsers.splice(n,1),s=!0),s?(this.trigger("uiUpdatedSelectedUsers",{items:this.selectedUsers}),this.$input.val(""),this.trigger(this.$input,"uiTextChanged",{text:this.$input.val(),position:a.default.getPosition(this.$input[0])})):this.trigger("uiCouldNotSelectUser"),this.$input.focus()}},this.shouldUpdateUserList=function(e,i){var s=i&&i.item&&i.item.id;return null!=s&&!t(e.target).find("[data-user-id="+s+"]").hasClass(this.attr.cannotSelectClass)&&this.selectedUsers.length<this.maxSelectedItems},this.selectedUserIndex=function(t){for(var e=0;e<this.selectedUsers.length;e++)if(this.selectedUsers[e].id===t)return e;return-1},this.resetSelectedUsers=function(){this.selectedUsers=[],this.trigger("uiTypeaheadClearRenderedResults")},this.setMaxSelectedItems=function(t){this.maxSelectedItems=parseInt(t,10)},this.updateMaxSelectedItems=function(t,e){var i=e&&e.maxSelectedItems>=0?e.maxSelectedItems:this.maxSelectedItems;this.setMaxSelectedItems(i)},this.resetComposer=function(){this.resetSelectedUsers(),this.$input.val(""),this.trigger("uiUpdatedSelectedUsers",{items:this.selectedUsers}),this.trigger(this.$input,"uiTextChanged",{text:this.$input.val(),position:a.default.getPosition(this.$input[0])})},this.focusInputWithResultsShown=function(t,e){this.$input.focus(),this.forceShow(),this.trigger("uiTypeaheadResultsShown")},this.focusInput=function(){this.select("controlsSelector").addClass(this.attr.userBorderColorClass)},this.blurInput=function(){this.select("controlsSelector").removeClass(this.attr.userBorderColorClass)},this.forceShow=function(){this.select("dropdownSelector").show()},this.forceHide=function(){this.select("dropdownSelector").hide(),this.trigger("uiTypeaheadSetPreventDefault",{preventDefault:!1,key:9}),this.trigger("uiTypeaheadResultsHidden")},this.hideAndManageEsc=function(t){t.preventDefault(),t.stopPropagation(),this.$input.blur(),this.forceHide()},this.possiblyHide=function(e){e.target===this.$node.get(0)||t.contains(this.$node.get(0),e.target)||this.forceHide()},this.after("initialize",function(){h.default.attachTo(this.$node,{inputSelector:this.attr.inputSelector,eventData:this.attr.eventData});var t=[this.attr.datasourceForTagging,"selectedUsers"];this.attr.includePreviouslySelectedUsers&&t.push("prefillUsers");var e=[["selectedUsers",t]];this.attr.additionalDatasourceRenderers&&this.attr.additionalDatasourceRenderers.length&&e.push.apply(e,this.attr.additionalDatasourceRenderers),this.setMaxSelectedItems(this.attr.maxSelection),d.default.attachTo(this.$node,{alwaysOpen:this.attr.alwaysOpen,blockLinkActions:!0,typeaheadSrc:this.attr.typeaheadSrc,datasourceRenders:e,datasourceOptions:{requestType:this.attr.requestType},selectedItemType:this.attr.selectedItemType,deciders:this.attr.decidersForTypeahead,inputSelector:this.attr.inputSelector,eventData:this.attr.eventData}),this.on("uiTypeaheadRenderResults uiShowSelectedUsers",this.forceShow),this.on("uiTypeaheadItemSelected uiSelectUser",this.selectUser),this.on("uiUpdateMaxSelectedItems",this.updateMaxSelectedItems),this.on("uiResetSelectedUsers",this.resetSelectedUsers),this.on("uiResetSelectedUserComposer",this.resetComposer),this.on("uiShortcutEsc",this.hideAndManageEsc),this.selectedUsers=[],this.$input=this.select("inputSelector"),this.on("uiSetFocusInSelectedUserInput",this.focusInputWithResultsShown),this.on(this.$input,"focusin",this.focusInput),this.on(this.$input,"focusout",this.blurInput),this.on(document,"mousedown : focusin",this.possiblyHide)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(229),a=s(o),r=i(111),l=s(r),c=i(414),d=s(c),u=i(429),h=s(u),f=(0,l.default)(n);e.default=f}).call(e,i(10))},,,,,,,,,,,,,,,,,,function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.scribeClickOnButton=function(t,e){this.scribe({element:"media_tag_prompt",action:"click"},e)},this.scribeUserSelected=function(t,e){e.items.length&&this.scribe({component:"media_tag",element:"taggable_user",action:"click"},e)},this.scribeUserNotSelected=function(t,e){this.scribe({component:"media_tag",element:"nontaggable_user",action:"click"},e)},this.scribeTweet=function(t,e){e.tweetData.tagged_users&&e.tweetData.tagged_users.length&&e.tweetData.in_reply_to_status_id&&e.tweetData.in_reply_to_status_id.length?this.scribe({action:"reply_with_tags"},e):e.tweetData.tagged_users&&e.tweetData.tagged_users.length&&this.scribe({action:"tweet_with_tags"},e)},this.after("initialize",function(){this.on("uiShowSelectPopover",this.scribeClickOnButton),this.on("uiUpdatedSelectedUsers",this.scribeUserSelected),this.on("uiSendTweetWithMedia",this.scribeTweet),this.on("uiCouldNotSelectUser",this.scribeUserNotSelected)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(142),l=s(r);e.default=(0,a.default)(n,l.default)},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){a.default.mixin(this,[d.default]),this.triggerGotImageData=function(t){var e=t.map(function(t){return t.fileId});this.trigger("uiGotImageData",{fileIds:e})},this.captureImageData=function(t,e){for(var i={mediaCategoryPrefix:this.attr.mediaCategoryPrefix},s=[],n=0;n<e.files.length;n++){var o=e.files[n],a=o.name;s.push(l.default.getFileInfo(a,o,i).catch(function(t){return null}))}Promise.all(s).then(function(t){return t.filter(function(t){return!!t})}).then(this.triggerGotImageData.bind(this))},this.after("initialize",function(){this.on("uiDrop",this.captureImageData)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(121),a=s(o),r=i(393),l=s(r),c=i(433),d=s(c);e.default=n},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.drop=function(t){t.preventDefault(),t.stopImmediatePropagation();var e=l.default.getFileHandles(t.originalEvent.dataTransfer);this.trigger("uiDrop",{files:e}),e.length>1&&this.trigger("uiDropMany"),this.trigger("uiDragEnd")},this.after("initialize",function(){this.on("drop",a.default.onlyHandleEventsWithFiles(this.drop))})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(405),a=s(o),r=i(393),l=s(r);e.default=n},function(t,e){"use strict";function i(){this.defaultAttrs({focusClass:"focus",activeClass:"active",fileInputSelector:".file-input",uploadPhotoSelector:".photo-selector",imageBtnSelector:".photo-selector .btn"}),this.hideAndDisableImageButton=function(){this.select("uploadPhotoSelector").hide()},this.showAndEnableImageButton=function(){this.select("uploadPhotoSelector").show()},this.applyFocusStyleImageButton=function(t){this.select("imageBtnSelector").addClass(this.attr.focusClass)},this.removeFocusStyleImageButton=function(t){this.select("imageBtnSelector").removeClass(this.attr.focusClass)},this.applyActiveStyleImageButton=function(t){this.select("imageBtnSelector").addClass(this.attr.activeClass)},this.removeActiveStyleImageButton=function(t){this.select("imageBtnSelector").removeClass(this.attr.activeClass)},this.after("initialize",function(){this.on("focusin",{fileInputSelector:this.applyFocusStyleImageButton}),this.on("focusout",{fileInputSelector:this.removeFocusStyleImageButton}),this.on("mousedown",{fileInputSelector:this.applyActiveStyleImageButton}),this.on("mouseup mouseleave",{fileInputSelector:this.removeActiveStyleImageButton}),this.on("uiEnableImageSelection",this.showAndEnableImageButton),this.on("uiDisableImageSelection",this.hideAndDisableImageButton)})}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i},function(t,e){"use strict";function i(){this.defaultAttrs({fromMessageMeCardClass:"from-message-me-card"}),this.addMessageMeCardData=function(t,e){this.addMessageMeScribeData(e),this.addFromMessageMeCardClass()},this.addMessageMeScribeData=function(t){this.messageMeScribeData={cardName:t.cardName,cardUri:t.cardUri,userId:t.userId}},this.addFromMessageMeCardClass=function(){this.$node.addClass(this.attr.fromMessageMeCardClass)},this.removeMessageMeCardData=function(){this.removeMessageMeScribeData(),this.removeFromMessageMeCardClass()},this.removeMessageMeScribeData=function(){this.messageMeScribeData=void 0},this.removeFromMessageMeCardClass=function(){this.$node.removeClass(this.attr.fromMessageMeCardClass)},this.after("initialize",function(){this.removeMessageMeCardData(),this.on(document,"uiAddMessageMeCardData",this.addMessageMeCardData)}),this.after("reset",function(){this.removeMessageMeCardData()})}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i},function(t,e){"use strict";function i(){this.defaultAttrs({showPlaceholderClass:"is-showPlaceholder"}),this.determinePlaceholderVisibilityNotInComposition=function(t){var e=this.getVisibleText();this.$text.toggleClass(this.attr.showPlaceholderClass,!e)},this.determinePlaceholderVisibility=function(t){this.$text.attr("data-in-composition")||this.determinePlaceholderVisibilityNotInComposition()},this.after("initialize",function(){this.determinePlaceholderVisibility(),this.on("uiTextChanged",this.determinePlaceholderVisibility),this.on(this.$text,"compositionend",this.determinePlaceholderVisibilityNotInComposition)})}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(t,e,i){var s=0,n="";return e(t).forEach(function(e){n+=t.slice(s,e.indices[0])+i(t.slice(e.indices[0],e.indices[1])),s=e.indices[1]}),n+t.slice(s)}function o(){this.defaultAttrs({isRTL:"rtl"===t("body").attr("dir"),rtlCharRegex:/[\u0600-\u06FF]|[\u0750-\u077F]|[\u0590-\u05FF]|[\uFE70-\uFEFF]/gm,dirMarkRegex:/\u200e|\u200f/gm,rtlThreshold:.3}),this.shouldBeRTL=function(t,e,i){void 0===i&&(i=t.match(this.attr.rtlCharRegex));var s=t.trim();if(!s)return this.attr.isRTL;if(!i)return!1;var n=s.length-e;return n>0&&i.length/n>this.attr.rtlThreshold},this.removeMarkers=function(t){return t.replace(this.attr.dirMarkRegex,"")},this.setMarkersAndRTL=function(t,e){var i=e.match(this.attr.rtlCharRegex),s=0;if(i){t=e,t=n(t,r.default.extractMentionsWithIndices,function(t){return s+=t.length+1,"‎"+t+"‏"});var o=this.attr.rtlCharRegex;t=n(t,r.default.extractHashtagsWithIndices,function(t){return t[1].match(o)?t:"‎"+t}),t=n(t,r.default.extractUrlsWithIndices,function(t){return s+=t.length+2,t+"‎"})}var a=this.shouldBeRTL(e,s,i);return this.$text.attr("dir",a?"rtl":"ltr"),t},this.erasePastMarkers=function(t){var e=void 0;if(8===t.which)e=-1;else{if(46!==t.which)return;e=0}var i=c.default.getPosition(this.$text[0]),s=this.$text.val(),n=0,o=void 0;do o=s[i+e]||"",o&&(i+=e,n++,s=s.slice(0,i)+s.slice(i+1));while(o.match(this.attr.dirMarkRegex));n>1&&(this.$text.val(s),c.default.setPosition(this.$text[0],i),t.preventDefault(),this.detectUpdatedText())},this.around("cleanText",function(t,e){var i=this.removeMarkers(t(e)),s=this.setMarkersAndRTL(e,i);if(s!==e){var n=this.$text[0],o=c.default.getPosition(n);this.$text.val(s),this.prevText=s,c.default.setPosition(n,o+s.length-e.length)}return i}),this.after("initTextNode",function(){this.on(this.$text,"keydown",this.erasePastMarkers)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(234),r=s(a),l=i(229),c=s(l);e.default=o}).call(e,i(10))},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({richEditorTextSelector:"div.rich-editor",linksSelector:"a",hashtagSelector:".twitter-hashtag",pictographsSelector:".RichEditor-pictographs",pictographTextSelector:".RichEditor-pictographText",pictographImageSelector:".RichEditor-pictographImage",richEditorSelector:".RichEditor",pictographTextClass:"RichEditor-pictographText",tempTextAreaClass:"RichEditor-tempTextArea",fakeFocusClass:"is-fakeFocus",singleLineClass:"is-singleLine",plainTextClass:"is-plainText",hashflagsEnabled:!1}),this.linkify=function(t){var e=this,i={urlTarget:null,textWithSymbolTag:L?"b":"",linkAttributeBlock:function(t,i){var s=t.screenName||t.url;s&&(e.urlAndMentionsCharCount+=s.length+2),delete i.title,delete i["data-screen-name"],i.dir=t.hashtag&&e.shouldBeRTL(t.hashtag,0)?"rtl":"ltr",i.role="presentation"}};return this.urlAndMentionsCharCount=0,T.default.linkify(t,i)},this.setSelection=function(t){t&&this.setSelectionIfFocused(t)},this.getSelection=function(){return this.previousSelection||this.htmlRich.getSelectionOffsets()},this.around("setCursorPosition",function(t,e){void 0===e&&(e=this.cursorPosition),void 0===e&&(e=q),this.setSelectionIfFocused([e]),this.detectUpdatedCursorPosition(e)}),this.isInputMethodEditorInComposition=function(){return this.$text.attr("data-in-composition")},this.isEmoji=function(t){return f.default.regex.lastIndex=0,f.default.regex.test(t)},this.around("detectUpdatedText",function(t,e,i){var s=this.htmlRich.getHtml(),n=this.htmlRich.getSelectionOffsets()||this.previousSelection||[q],o=void 0!==i;if(s!==this.prevHtml||e||o){var a=o?i:this.htmlRich.getText(),r=a.replace(U,"");if(2===n.length&&this.isInputMethodEditorInComposition()){var l=a.substr(n[0],n[1]-n[0]),c=a.substr(n[1]);if(G.test(c)){this.caughtIMEBug=!0;for(var d=G.exec(c)[1],u=l+d,h=l,f=1;f<l.length;f++){var p=l.substr(0,f)+d.substr(0,l.length-f);if(this.isEmoji(p)){h=p;break}}r=a.replace(u,h),this.htmlRich.setHtml(s.replace(u,h)),this.setSelectionIfFocused(n)}}this.caughtIMEBug&&1===n.length&&(this.$text.removeAttr("data-in-composition"),this.caughtIMEBug=!1),this.isSingleLine&&(r=r.replace($," ")),o||(s||this.hasFocus())&&!this.isInputMethodEditorInComposition()?this.reformatHtml(r,s,n,o):this.prevHtml=void 0,this.generatePictographs(),(e||this.cleanedText!==r)&&this.updateCleanedTextAndPosition(r,n[0])}this.detectUpdatedCursorPosition(n[0])}),this.emojifyPlainTextSpans=function(t){return t.replace(j,function(t,e,i){return e+u.default.emojifyPreEscapedText(i,u.default.EMOJIFY_FOR_COMPOSER,V)})},this.reformatHtml=function(e,i,s,n){this.$normalizer||(this.$normalizer=t("<div>",{css:{position:"absolute",visibility:"hidden"}}).appendTo(this.$node),this.htmlNormalizer=(0,w.default)(this.$normalizer[0],this.userAgent()));var o=this.linkify(e),a=this.isPlainText||this.isNoMarkup?M.default.htmlEscape(e):o,r=this.isNoMarkup||this.isPlainText?a:this.emojifyPlainTextSpans(a);this.htmlNormalizer.setTextWithMarkup(r),this.interceptDataImageInContent();var l=this.shouldBeRTL(e,this.urlAndMentionsCharCount||0);this.$text.attr("dir",l?"rtl":"ltr"),this.$normalizer.find(l?"[dir=rtl]":"[dir=ltr]").removeAttr("dir");var c=this.$normalizer.find(".twitter-timeline-link");if(c.length>0){var d=c.map(function(t,e){return e.href}).get();this.trigger("uiGotUrlInText",{urls:d})}L&&this.$normalizer.find(".twitter-timeline-link").wrapInner("<b>").addClass("pretty-link"),this.hashflagsEnabled&&this.addHashflags(this.$normalizer);var u=this.getMaxLengthOffset(e);u>=0&&(this.htmlNormalizer.emphasizeText([u,q]),this.$normalizer.find("em").each(function(){this.innerHTML=this.innerHTML.replace(B," ")}));var h=this.htmlNormalizer.getHtml();if(h!==i){var f=n&&!this.isFocusing&&this.hasFocus()&&!this.hasFakeFocus();f&&(this.toggleFakeFocus(!0),this.$text.blur()),this.htmlRich.setHtml(h),f&&(this.$text.focus(),this.toggleFakeFocus(!1)),this.setSelectionIfFocused(s)}this.prevHtml=h},this.generatePictographs=function(){var t=this.$text.find(this.attr.pictographTextSelector).map(function(t,e){return{left:e.offsetLeft,top:e.offsetTop,imageUrl:e.getAttribute("data-pictograph-image")}}).get(),e=R.default.render({pictographs:t});e!==this.previousPictographsHtml&&(this.previousPictographsHtml=e,this.$pictographs.html(e))},this.generatePictographsDeferred=function(){setTimeout(this.generatePictographs.bind(this),0)},this.addHashflags=function(e){e.find(this.attr.hashtagSelector).each(function(e,i){var s=t(i),n=s.text().slice(1),o=v.default.getImageUrl(n);o&&s.append(N.default.render({imageUrl:o,description:"Twitter Emoji"}))})},this.interceptDataImageInContent=function(){var t=this;if(this.triggerGotImageData){var e=this.$text.find("img").filter(function(t,e){return e.src.match(/^data:/)})[0];if(e){var i=m.default.getBlobFromDataUri(e.src);return m.default.getFileInfo("pasted.png",i).then(function(e){return t.triggerGotImageData([e])})}}},this.getMaxLengthOffset=function(t){var e=this.getLength(t),i=this.attr.maxLength;if(e<=i)return-1;i+=M.default.getUnicodeTextLength(t)-e;var s=[{indices:[i,i]}];return M.default.modifyIndicesFromUnicodeToUTF16(t,s),s[0].indices[0]},this.setSelectionIfFocused=function(t){this.hasFocus()&&!this.hasFakeFocus()?(this.previousSelection=null,this.htmlRich.setSelectionOffsets(t)):this.previousSelection=t},this.augmentShiftEnter=function(t){t.which!==y.default.ENTER||t.metaKey||!t.shiftKey||t.altKey||t.ctrlKey||this.temporarilyFocusPlainText()},this.maybeBlockCommandArrow=function(t){!this.isFirefoxLessThan29||!t.metaKey||t.shiftKey||t.ctrlKey||t.altKey||t.which!==y.default.LEFT&&t.which!==y.default.RIGHT||this.stopEvent(t)},this.stopEvent=function(t){t.preventDefault(),t.stopPropagation()},this.handleKeyDown=function(t){this.augmentShiftEnter(t),this.maybeBlockCommandArrow(t)},this.temporarilyFocusPlainText=function(){var e=this;if(this.hasFocus()&&!this.isInputMethodEditorInComposition()){this.$tempTextArea||(this.$tempTextArea=t("<textarea>",{"class":this.attr.tempTextAreaClass,tabindex:-1}).appendTo(document.body));var i=this.getVisibleText(),s=this.getSelection()||[i.length],n=this.$tempTextArea[0];this.toggleFakeFocus(!0),this.$tempTextArea.focus().val(i),n.setSelectionRange(s[0],s[s.length-1]),setTimeout(function(){var t=e.$tempTextArea.val(),s=i.length-t.length,o=n.selectionStart,a=n.selectionEnd;s>0&&t===i.slice(0,o)+i.slice(o+s)&&e.htmlRich.deleteText([o,o+s]),e.setVisibleText(t),e.$text.focus(),e.toggleFakeFocus(!1),e.setSelectionIfFocused([o,a])},0)}},this.temporarilyRemoveMarkup=function(){var t=this;this.isNoMarkup=!0,this.detectUpdatedText(!0),setTimeout(function(){t.isNoMarkup=!1,t.detectUpdatedText(!0)},0)},this.interceptPastedImage=function(t){var e=this,i=t.originalEvent||{},s=i.clipboardData;if(this.triggerGotImageData&&s){var n=s.items;if(n&&n.length){var o=n[0];if("file"===o.kind&&"image/png"===o.type){var a=o.getAsFile();this.pendingPastedFileInfo=m.default.getFileInfo("pasted.png",a).then(function(t){return e.triggerGotImageData([t]),delete e.pendingPastedFileInfo,t}),t.preventDefault()}}}},this.clearSelectionOnBlur=function(t){if(window.getSelection){var e=this.htmlRich.getSelectionOffsets();e&&(this.previousSelection=e,getSelection().removeAllRanges())}},this.restoreSelectionOnFocus=function(){var t=this;this.previousSelection&&setTimeout(function(){t.htmlRich.setSelectionOffsets(t.previousSelection),t.previousSelection=null},0)},this.setFocusingState=function(){var t=this;this.isFocusing=!0,setTimeout(function(){return t.isFocusing=!1},0)},this.insertText=function(t,e){var i=this.getVisibleText(),s=this.getSelection()||[i.length],n=s[0],o=s[s.length-1],a=!this.hasFocus();a&&this.toggleFakeFocus(!0),this.setVisibleText(i.slice(0,n)+e.text+i.slice(o)),this.setSelection([n+e.text.length]),a&&this.toggleFakeFocus(!1),e.noFocus||this.focus()},this.filterKey=function(t){this.isSingleLine&&t.which===y.default.ENTER&&t.preventDefault()},this.setContentEditablePlainTextOnly=function(){this.isPlainTextOnlySupported&&"true"===this.$text.attr(H)&&this.$text.attr(H,z)},this.around("setEditability",function(t,e){this.$text.prop(H,e),this.setContentEditablePlainTextOnly()}),this.updateScrollContainerFocus=function(t){this.select("richEditorSelector").toggleClass(this.attr.fakeFocusClass,this.hasFocus())},this.userAgent=function(){return navigator.userAgent},this.temporarilyFocusPlainTextOnEmojiTextInput=function(t){var e=t&&t.originalEvent&&t.originalEvent.data;f.default.regex.lastIndex=0,e&&f.default.regex.test(e)&&this.temporarilyFocusPlainText()},this.around("initTextNode",function(e){var i=this.userAgent().toLowerCase();this.isIELessThan12=!/opera/.test(i)&&/msie|trident/.test(i),this.isIELessThan11=this.isIELessThan12&&!/trident\/7/.test(i),this.isFirefox=!/webkit|chrome|trident|msie|compatible/.test(i)&&/mozilla/.test(i),this.isFirefoxLessThan29=this.isFirefox&&parseFloat(i.replace(/^.* rv:([\w.]+).*$/,"$1"))<29,this.isChrome=!/edge/.test(i)&&/chrome\/\d+/.test(i),this.isMacChromeLessThan55=this.isChrome&&/macintosh;/.test(i)&&i.replace(/^.*chrome\/(\d+).*$/,"$1")<55,this.isPlainTextOnlySupported=P.default.getDeciderValue("contentEditablePlainTextOnly")&&t("<div>").attr(H,z)[0].contentEditable===z,this.$text=this.select("richEditorTextSelector"),this.$pictographs=this.select("pictographsSelector"),this.previousPictographsHtml="",this.hashflagsEnabled=this.attr.hashflagsEnabled&&v.default.isEnabled(),this.htmlRich=(0,w.default)(this.$text[0],this.userAgent());var s=navigator.platform;this.isMac=s.indexOf("Mac")!==-1,this.isWin=s.indexOf("Win")!==-1,this.isSingleLine=this.$text.hasClass(this.attr.singleLineClass),this.isPlainText=this.$text.hasClass(this.attr.plainTextClass),this.on(this.$text,"click",{linksSelector:this.stopEvent}),this.on(this.$text,"focusin",this.setFocusingState),this.on(this.$text,"keydown",this.handleKeyDown),this.on(this.$text,"focusout",this.clearSelectionOnBlur),this.on(this.$text,"focusin",this.restoreSelectionOnFocus),this.on(this.$text,"cut copy paste",this.isFirefox||this.isIELessThan11?this.temporarilyRemoveMarkup:this.temporarilyFocusPlainText),this.on(this.$text,"paste",this.interceptPastedImage),this.on(this.$text,"keypress",this.filterKey),this.isMacChromeLessThan55&&this.on(this.$text,"textInput",this.temporarilyFocusPlainTextOnEmojiTextInput),this.on(this.$text,"focusin focusout",this.ignoreDuringFakeFocus(this.updateScrollContainerFocus)),this.updateScrollContainerFocus(),this.on("uiInsertText",this.insertText),this.on("uiComposerHadFocus",this.temporarilyFocusPlainText),this.on("focusin uiComposerHadFocus",this.setContentEditablePlainTextOnly),this.isIELessThan12?this.on(this.$text,"DOMSubtreeModified",this.generatePictographsDeferred):this.on(this.$text,"input",this.generatePictographs),this.on("uiTweetBoxExpanded uiTweetBoxCondensed",this.generatePictographs),this.on(this.$node,"mousedown",{pictographImageSelector:this.stopEvent}),this.detectUpdatedText()}),this.after("teardown",function(){this.$normalizer&&this.$normalizer.remove(),this.$tempTextArea&&this.$tempTextArea.remove()}),c.default.mixin(this,[k.default,E.default])}Object.defineProperty(e,"__esModule",{value:!0});var o=i(123),a=(s(o),i(156)),r=s(a),l=i(121),c=s(l),d=i(361),u=s(d),h=i(363),f=s(h),p=i(393),m=s(p),g=i(421),v=s(g),b=i(439),w=s(b),S=i(359),y=s(S),C=i(440),T=s(C),D=i(234),M=s(D),I=i(136),P=s(I),x=i(441),k=s(x),A=i(449),E=s(A),O=i(450),R=s(O),F=i(364),N=s(F);e.default=n;var U=/[\uFFFE\uFEFF\uFFFF\u200E\u200F\u202A-\u202E\x00-\x09\x0B\x0C\x0E-\x1F]/g,j=/(<[^>]*>|^)([^<]+)/g,L=(0,r.default)().mozilla&&parseInt((0,r.default)().version,10)<2,B=/ $/,$=/\r\n|\n\r|\n/g,V=1e3,q=Number.MAX_VALUE,H="contenteditable",z="plaintext-only",G=/^([\udc00-\udfff]+)/}).call(e,i(10))},function(t,e){"use strict";function i(t){return 3===t.nodeType||4===t.nodeType}function s(t){return 1===t.nodeType}function n(t,e){return t.nodeName.toLowerCase()===e}function o(t,e){for(;t!==e;){if(!t)return!0;t=t.parentNode}}Object.defineProperty(e,"__esModule",{value:!0});var a="Microsoft Internet Explorer"===navigator.appName,r=/[\xa0\n\t]/g,l=/\u2003/,c=/\r\n/g,d=/(.*?)\n/g,u=/^ |(<\/[^>]+>) | (?= )/g,h=/^ | $|( ) /g,f=Number.MAX_VALUE,p="Emoji--forLinks",m=function(t,e){function m(t,e){function o(t){var h=a.length;if(i(t)){var f=t.parentNode;n(f,"em")&&(f=f.parentNode);var m=t.nodeValue,g=-1,v=void 0,b=0;if(f.hasAttribute("data-pictograph-text")){var w=f.getAttribute("data-pictograph-text");v=m.replace(l,function(t,e){return g=e,b=w.length-t.length,w})}else f.classList&&f.classList.contains(p)?(g=0,b=-m.length,v=""):v=m.replace(r," ");
var S=v.length;S&&(a+=v,c=!0),e(t,!0,0,h,h+S,g,b)}else if(s(t))if(e(t,!1,0,h,h),n(t,"br")||P===I&&!t.firstChild&&"<br>"===t.innerHTML)t===d?u=!0:(a+="\n",c=!1);else if(n(t,"img")){var y=t.getAttribute("alt")||"",C=y.length;C&&(a+=y,c=!0)}else{var T=t.currentStyle||window.getComputedStyle(t,""),x="block"===T.display;!x||P!==D&&P!==M||(c=!0);for(var k=t.firstChild,A=1;k;k=k.nextSibling,A++){if(o(k),u)return;h=a.length,e(t,!1,A,h,h)}u||t===d?u=!0:x&&c&&(a+="\n",c=!1)}}for(var a="",c=void 0,d=void 0,u=void 0,h=t;h&&s(h);h=h.lastChild)d=h;return o(t),a}function g(t,e){var i=null,s=e.length-1,o=e.map(function(){return{}}),a=void 0;return m(t,function(t,i,r,l,c,d,u){a||o.forEach(function(o,h){var f=e[h];l<=f&&!n(t,"br")&&(o.node=t,i&&(r=Math.min(f,c)-l,u&&r>d&&(r=Math.max(r-u,0))),o.offset=r,a=i&&h===s&&c>=f)})}),o[0].node&&o[s].node&&(i=document.createRange(),i.setStart(o[0].node,o[0].offset),i.setEnd(o[s].node,o[s].offset)),i}function v(){return document.body.contains(t)}function b(e){if(t.innerHTML=e,a)for(var i=t.firstChild;i;i=i.nextSibling)n(i,"p")&&""===i.innerHTML&&(i.innerText="")}function w(t,e){return t.map(function(t){return Math.min(t,e.length)})}var S=0,y=1,C=2,T=3,D=4,M=5,I=6,P=void 0,x=(e||navigator.userAgent).toLowerCase();return P=/edge/.test(x)?I:/chrome|webkit/.test(x)?y:/opera/.test(x)?T:/trident\/7/.test(x)?M:/msie/.test(x)?D:!/compatible/.test(x)&&/mozilla/.test(x)?C:S,{getHtml:function(){if(a){for(var e="",s=document.createElement("div"),n=t.firstChild;n;n=n.nextSibling)i(n)?(s.innerText=n.nodeValue,e+=s.innerHTML):e+=n.outerHTML.replace(c,"");return e}return t.innerHTML},setHtml:function(t){b(t)},getText:function(){return m(t,function(){})},setTextWithMarkup:function(t){b((t+"\n").replace(d,function(t,e){return P===C||P===D?(e=e.replace(u,"$1&nbsp;"),P===C?e+"<BR>":"<P>"+e+"</P>"):(e=(e||"<br>").replace(h,"$1&nbsp;"),P===T||P===M?"<p>"+e+"</p>":"<div>"+e+"</div>")}))},getSelectionOffsets:function(){var e=getSelection();if(!v()||!e||1!==e.rangeCount)return null;var i=e.getRangeAt(0);if(o(i.commonAncestorContainer,t))return null;var s=[{node:i.startContainer,offset:i.startOffset}];i.collapsed||s.push({node:i.endContainer,offset:i.endOffset});var n=s.map(function(){return f}),a=m(t,function(t,e,i,o,a,r,l){return s.forEach(function(s,c){if(n[c]===f&&t===s.node&&(e||i===s.offset)){var d=0;e&&(d=Math.min(a-o,s.offset),l&&d>r&&(d+=l)),n[c]=o+d}})});return w(n,a)},setSelectionOffsets:function(e){if(e&&v()){var i=g(t,e);if(i){var s=window.getSelection();s.removeAllRanges(),s.addRange(i)}}},emphasizeText:function(e){var i=[];e&&e.length>1&&v()&&(m(t,function(t,s,n,o,a){if(s){var r=Math.max(o,e[0]),l=Math.min(a,e[1]);l>r&&i.push([r,l])}}),i.forEach(function(e){var i=g(t,e);i&&i.surroundContents(document.createElement("em"))}))},deleteText:function(e){var i=g(t,e);i&&i.deleteContents()}}};e.default=m},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},o=i(362),a=s(o),r=i(234),l=s(r),c={extractMentionsForReply:function(t,e){var i=t.attr("data-screen-name"),s=t.attr("data-retweeter"),n=t.attr("data-mentions")?t.attr("data-mentions").split(" "):[],o=t.attr("data-tagged")?t.attr("data-tagged").split(" "):[];n=n.concat(o);var r=[i,e,s];return n=n.filter(function(t){return r.indexOf(t)<0}),s&&s!==i&&s!==e&&n.unshift(s),(i&&!n.length||i!==e)&&n.unshift(i),a.default.unique(n)},linkify:function(t,e){return e=n({hashtagClass:"twitter-hashtag pretty-link",hashtagUrlBase:"/search?q=%23",symbolTag:"s",textWithSymbolTag:"b",cashtagClass:"twitter-cashtag pretty-link",cashtagUrlBase:"/search?q=%24",usernameClass:"twitter-atreply pretty-link",usernameUrlBase:"/",usernameIncludeSymbol:!0,listClass:"twitter-listname pretty-link",urlClass:"twitter-timeline-link",urlTarget:"_blank",suppressNoFollow:!0,htmlEscapeNonEntities:!0},e||{}),l.default.autoLinkEntities(t,l.default.extractEntitiesWithIndices(t),e)}};e.default=c},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){a.default.mixin(this,[h.default]),this.defaultAttrs({emojiPickerSelector:".EmojiPicker"}),this.insertEmoji=function(t,e){this.trigger("uiInsertText",{text:e.unicode,noFocus:!0})},this.after("reset",function(){this.select("emojiPickerSelector").each(function(t,e){e.style.display="none",e.offsetHeight,e.style.display=""})}),this.after("initialize",function(){var t=d.default.merge(this.attr.eventData,{scribeContext:{element:"emoji_picker"}},!0);this.attachChild(l.default,this.select("emojiPickerSelector"),{eventData:t,preferredGravity:this.attr.preferredGravity,preferredWeight:this.attr.preferredWeight,preventDropdownsOpeningUp:this.attr.preventDropdownsOpeningUp,restoreFocusOnClose:!0}),this.on("uiEmojiPicked",this.insertEmoji);var e=this.select("emojiPickerSelector");e.length&&this.on(e,"uiDropdownClosed",this.focus)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(121),a=s(o),r=i(442),l=s(r),c=i(126),d=s(c),u=i(231),h=s(u);e.default=n},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){u.default.mixin(this,[M.default,r.default.withAdvice,k.default,P.default]),this.defaultAttrs({clearRecentSelector:".EmojiPicker-clearRecent",recentsSelector:".EmojiPicker-categoryItems:first",queryInputSelector:".EmojiPicker-queryInput",skinToneSelector:".EmojiPicker-skinTone",itemSelector:".EmojiPicker-item",itemWithTooltipSelector:".EmojiPicker-item.js-tooltip",categoryHeaderSeletor:".EmojiPicker-categoryHeader",categoryItemsSelector:".EmojiPicker-categoryItems",categoryIconSelector:".EmojiCategoryIcon",categoryResultSelector:".EmojiPicker-categoryResult",newCategorySelector:".EmojiCategoryIcon--new",scrollableRowSelector:".EmojiPicker-scrollableRow",emojiPickerTriggerSelector:".EmojiPicker-trigger",clearQuerySelector:".EmojiPicker-clearQuery",dropdownSelector:".EmojiPicker-dropdownMenu",resultUpClass:"EmojiPicker--top",contentSelector:".EmojiPicker-content",contentRightClass:"EmojiPicker-content--right",caretSelector:".Caret",caretUpClass:"Caret--top",caretDownClass:"Caret--bottom",focusableSelector:".EmojiPicker-item:not(.u-hidden)",firstFocusableSelector:".EmojiPicker-item:not(.u-hidden):first",focusedSelector:".EmojiPicker-item.is-focused",focusedClass:"is-focused",activeClass:"is-active",keyboardClass:"EmojiPicker--keyboard",maxRecents:14,scrollThrottleDelayInMs:100,extraPixelsToScrollIntoView:20,temporarilyActivateDelayInMs:100,textUserColorClass:"u-textUserColor",queryChangeThrottleDelayInMs:100}),this.prepareDropdown=function(t,e){if(!this.hasRendered){var i=R.default.render({categories:[{id:"recent",title:"Recently used",is_recent:!0},{id:"new",title:"New!"},{id:"people",title:"Smileys & people"},{id:"nature",title:"Animals & nature"},{id:"food",title:"Food & drink"},{id:"activity",title:"Activity"},{id:"travel",title:"Travel & places"},{id:"objects",title:"Objects"},{id:"symbols",title:"Symbols"},{id:"flags",title:"Flags"}],skin_tones:[{value:"",title:"No skin tone"},{value:"1f3fb",title:"Light skin tone"},{value:"1f3fc",title:"Medium light skin tone"},{value:"1f3fd",title:"Medium skin tone"},{value:"1f3fe",title:"Medium dark skin tone"},{value:"1f3ff",title:"Dark skin tone"}]});this.select("contentSelector").html(i),this.hasRendered=!0,this.on(this.select("scrollableRowSelector"),"scroll",{scrollableRowSelector:T.default.throttle(this.checkScrollPosition.bind(this),this.attr.scrollThrottleDelayInMs)})}this.skinTone=this.getEmojiStore().getItem("skin_tone")||"",this.updateDiversityRow(),this.setRecentCategoryItems(),this.setNewCategoryItems(),this.lastQuery="",this.updateResults(),this.select("focusedSelector").removeClass(this.attr.focusedClass),this.$node.hasClass("is-loading")&&this.trigger("uiEmojiInfoLoad")},this.continueInitializing=function(t,e){e&&Array.isArray(e.categories)&&this.$node.hasClass("is-loading")&&(this.emojiInfo=e,this.$node.removeClass("is-loading"),this.insertNextCategory(2))},this.setCategoryItems=function(t,e){var i=N.default.render({items:e});this.select("categoryResultSelector").filter('[data-category="'+t+'"]').find(this.attr.categoryItemsSelector).html(i)},this.insertNextCategory=function(t){if(t<this.emojiInfo.categories.length){var e=this.emojiInfo.categories[t],i=e.items.split(" ");this.setCategoryItems(e.id,this.addItemFlags(i)),this.updateResults(),requestAnimationFrame(this.insertNextCategory.bind(this,t+1))}},this.updateResults=function(){this.updateImages(),this.updateCategoryVisibility()},this.getQueryWords=function(){return(this.select("queryInputSelector").val()||"").split(" ").map(v.default.normalizeKeyword).filter(Boolean).slice(0,U)},this.isQueryMatched=function(t,e){return t.every(function(t){return e.some(function(e){return!e.indexOf(t)})})},this.updateImages=function(){var e=this,i=this.getQueryWords();i.length&&!this.hasSearched&&(this.hasSearched=!0,this.trigger("uiEmojiPickerResults")),this.select("itemSelector").each(function(s,n){var o=!1,a=t(n),r=a.attr("data-key"),l=e.skinToneForItem(a);l&&(r=e.updateKeyWithSkinTone(r,l));var c=v.default.infoFromSingleEmoji(v.default.hexCodePointsToUnicode(r));e.isQueryMatched(i,c.keywords)&&(o=!0,a.attr("title",c.description).css("background-image",'url("'+c.imageUrl+'")')),a.toggleClass("u-hidden",!o)})},this.updateDiversityRow=function(){this.select("skinToneSelector").filter('[value="'+this.skinTone+'"]').prop("checked",!0)},this.skinToneForItem=function(t){return t.hasClass("is-diversity")&&this.skinTone},this.updateKeyWithSkinTone=function(t,e){return e?t.replace(/(?:-fe0f)?(?=-200d-)|(?:-fe0f)?$/,"-"+e):t},this.changeSkinTone=function(){this.skinTone=this.select("skinToneSelector").filter(":checked").val()||"",this.updateDiversityRow(),this.updateResults(),this.getEmojiStore().setItem("skin_tone",this.skinTone||""),this.hasChangedSkinTone||(this.hasChangedSkinTone=!0,this.trigger("uiEmojiPickerChangeSkinTone"))},this.getEmojiStore=function(){return this.emojiStore||(this.emojiStore=new f.default("emoji_"+y.default.user.id)),this.emojiStore},this.setCategoryIcon=function(t){var e=this.select("categoryIconSelector");e.removeClass(this.attr.activeClass).filter('[data-category="'+t+'"]').addClass(this.attr.activeClass)},this.checkScrollPosition=function(){if(this.$node.hasClass(this.attr.keyboardClass)){var e=this.select("focusedSelector").closest(this.attr.categoryResultSelector).attr("data-category");e&&this.setCategoryIcon(e)}else{var i=this.select("scrollableRowSelector"),s=this.select("categoryResultSelector").toArray();s.some(function(e){var s=t(e),n=e.offsetTop-i[0].offsetTop,o=!1;return n+s.height()>i[0].scrollTop&&(this.setCategoryIcon(s.attr("data-category")),o=!0),o},this)}},this.updateCategoryVisibility=function(){var e=this;this.select("categoryIconSelector").each(function(i,s){var n=t(s),o=t(s).attr("data-category"),a=e.$node.find(e.attr.categoryResultSelector+'[data-category="'+o+'"]'),r=!a.find(e.attr.itemSelector+":not(.u-hidden)").length;a.toggleClass("u-hidden",r),n.prop("disabled",r)}),this.checkScrollPosition()},this.scrollCategoryResultIntoView=function(t){var e=this.select("scrollableRowSelector");e[0].scrollTop=t[0].offsetTop-e[0].offsetTop,this.checkScrollPosition()},this.pickCategory=function(e){var i=t(e.target).attr("data-category"),s=this.$node.find(this.attr.categoryResultSelector+'[data-category="'+i+'"]');this.scrollCategoryResultIntoView(s)},this.getRecentArray=function(){var t=this.getEmojiStore().getItem("recent");return(Array.isArray(t)?t:[]).slice(0,this.attr.maxRecents)},this.setRecentCategoryItems=function(){this.setCategoryItems("recent",this.getRecentArray().map(function(t){return{key:t}}))},this.clearRecent=function(t){this.getEmojiStore().removeItem("recent"),this.setRecentCategoryItems(),this.updateCategoryVisibility()},this.setNewCategoryItems=function(){var t=[];y.default.getDeciderValue("emojiNewCategory")&&(t=["1f929","1f928","1f92f","1f92a","1f92c","1f92e","1f92b","1f92d","1f9d0","1f9d2*","1f9d1*","1f9d3*","1f9d5*","1f9d4*","1f931*","1f9d9-200d-2640-fe0f*","1f9d9-200d-2642-fe0f*","1f9da-200d-2640-fe0f*","1f9da-200d-2642-fe0f*","1f9db-200d-2640-fe0f*","1f9db-200d-2642-fe0f*","1f9dc-200d-2640-fe0f*","1f9dc-200d-2642-fe0f*","1f9dd-200d-2640-fe0f*","1f9dd-200d-2642-fe0f*","1f9de-200d-2640-fe0f","1f9de-200d-2642-fe0f","1f9df-200d-2640-fe0f","1f9df-200d-2642-fe0f","1f9d6-200d-2640-fe0f*","1f9d6-200d-2642-fe0f*","1f9d7-200d-2640-fe0f*","1f9d7-200d-2642-fe0f*","1f9d8-200d-2640-fe0f*","1f9d8-200d-2642-fe0f*","1f91f*","1f932*","1f9e0","1f9e1","1f9e3","1f9e4","1f9e5","1f9e6","1f9e2","1f993","1f992","1f994","1f995","1f996","1f997","1f965","1f966","1f968","1f969","1f96a","1f963","1f96b","1f95f","1f960","1f961","1f967","1f964","1f962","1f6f8","1f6f7","1f94c","1f3f4-e0067-e0062-e0065-e006e-e0067-e007f","1f3f4-e0067-e0062-e0073-e0063-e0074-e007f","1f3f4-e0067-e0062-e0077-e006c-e0073-e007f"]),this.select("newCategorySelector").toggleClass("u-hidden",!y.default.getDeciderValue("emojiNewCategory")),this.setCategoryItems("new",this.addItemFlags(t))},this.addItemFlags=function(t){return t.map(function(t){return{key:t.replace(/[*=]/g,""),is_diversity:t.indexOf("*")>=0,is_variant:t.indexOf("=")>=0}})},this.pickItem=function(e){var i=t(e.target),s=i.attr("data-key");e.shiftKey&&e.preventDefault();var n=this.skinToneForItem(i);n?s=this.updateKeyWithSkinTone(s,n):!e.shiftKey&&i.hasClass("is-variant")&&(s+="-fe0f");var o=v.default.hexCodePointsToUnicode(s);this.hasAdded||(this.hasAdded=!0,this.trigger("uiEmojiPickerAdd")),this.trigger("uiEmojiPicked",{key:s,unicode:o});var a=c.default.unique([s].concat(this.getRecentArray())).slice(0,this.attr.maxRecents);this.getEmojiStore().setItem("recent",a)},this.scrolIntoView=function(t){var e=t.closest(this.attr.scrollableRowSelector);if(e.length){var i=e[0],s=t[0].offsetTop-i.offsetTop,n=i.scrollTop,o=e.height()-t.outerHeight(),a=this.attr.extraPixelsToScrollIntoView;s<n+a?i.scrollTop=Math.max(0,s-a):s-o>n-a&&(i.scrollTop=Math.min(s-o+a,i.scrollHeight-e.height()))}},this.moveFocus=function(t,e){var i=this.select("focusedSelector"),s=this.select("focusableSelector"),n=s.index(i),o=s.length-1,a=void 0,r=e?o:0;do n+=t,n<0?n=o:n>o&&(n=0),a=s.eq(n);while(r-- >0&&!a.parent().children(":visible:first").is(a));if(i.removeClass(this.attr.focusedClass),e){var l=a.closest(this.attr.categoryResultSelector);this.scrollCategoryResultIntoView(l)}else this.scrolIntoView(a);this.toggleKeyboardFocus(!0),a.addClass(this.attr.focusedClass+" js-tooltip").tooltip("enable").tooltip("show");var c=a.attr("title");c&&a.attr("data-original-title",c).removeAttr("title"),this.checkScrollPosition()},this.preventDefaultAndUpdateQueryResults=function(t){t.preventDefault(),this.updateResultsIfQueryChanges()},this.queryKeyDown=function(e){switch(!e.metaKey&&!e.ctrlKey&&e.which){case w.default.UP:this.preventDefaultAndUpdateQueryResults(e),this.moveFocus(-1);break;case w.default.DOWN:this.preventDefaultAndUpdateQueryResults(e),this.moveFocus(1);break;case w.default.PAGE_UP:this.preventDefaultAndUpdateQueryResults(e),this.moveFocus(-1,!0);break;case w.default.PAGE_DOWN:this.preventDefaultAndUpdateQueryResults(e),this.moveFocus(1,!0);break;case w.default.ENTER:this.preventDefaultAndUpdateQueryResults(e);var i=t.Event("click",{shiftKey:e.shiftKey}),s=this.select("focusedSelector");s.trigger(i),s.length>0?this.closeDropdown():this.temporarilyActivateItem(s);break;case w.default.LEFT:case w.default.RIGHT:this.toggleKeyboardFocus(!1);break;default:this.toggleKeyboardFocus(!1)}},this.temporarilyActivateItem=function(t){var e=this;t.addClass(this.attr.activeClass),setTimeout(function(){return t.removeClass(e.attr.activeClass)},this.attr.temporarilyActivateDelayInMs)},this.toggleKeyboardFocus=function(t){this.$node.hasClass(this.attr.keyboardClass)!==t&&(this.$node.toggleClass(this.attr.keyboardClass,t),t||this.select("itemWithTooltipSelector").removeClass("js-tooltip").tooltip("hide").tooltip("disable"))},this.setFocus=function(e){this.toggleKeyboardFocus(!1);var i=t(e.target).closest(this.attr.focusableSelector);i.hasClass(this.attr.focusedClass)||(this.select("focusedSelector").removeClass(this.attr.focusedClass),i.addClass(this.attr.focusedClass))},this.clearFocus=function(e){t(e.target).closest(this.attr.focusableSelector).removeClass(this.attr.focusedClass)},this.updateResultsIfQueryChanges=function(){var t=this.select("queryInputSelector").val()||"";this.lastQuery!==t&&(this.lastQuery=t,this.updateResults())},this.clearQuery=function(){this.select("queryInputSelector").val("").focus(),this.updateResultsIfQueryChanges()},this.positionDropdown=function(){var t=this.adjacent(this.select("dropdownSelector"),this.select("emojiPickerTriggerSelector"),{gravity:this.attr.preferredGravity||"vertical-north",weight:this.attr.preferredWeight,allowGravitySwitch:this.attr.allowGravitySwitch}),e="south"===t.gravity&&!this.attr.preventDropdownsOpeningUp;this.$node.toggleClass(this.attr.resultUpClass,e),this.select("caretSelector").toggleClass(this.attr.caretUpClass,!e).toggleClass(this.attr.caretDownClass,e);var i="right"===t.weight;this.select("contentSelector").toggleClass(this.attr.contentRightClass,i),this.$dropdown.find(this.attr.dropDownMenuSelector).toggleClass(this.attr.dropDownMenuAlignRightClass,i)},this.positionDropdownDebounced=T.default.debounce(this.positionDropdown,100),this.toggleTriggerActive=function(t){this.select("emojiPickerTriggerSelector").toggleClass(this.attr.textUserColorClass,t)},this.onEmojiDropdownOpened=function(){this.positionDropdown(),this.select("queryInputSelector").focus(),this.on(window,"resize",this.positionDropdownDebounced),this.checkScrollPosition(),this.activeEl=null,this.trigger("uiEmojiPickerOpen"),this.hasAdded=!1,this.hasSearched=!1,this.hasChangedSkinTone=!1,this.toggleTriggerActive(!0)},this.onEmojiDropdownClosed=function(){this.off(window,"resize",this.positionDropdownDebounced),this.toggleKeyboardFocus(!1),this.select("queryInputSelector").val(""),this.hasAdded||this.trigger("uiEmojiPickerCancel"),this.toggleTriggerActive(!1)},this.after("initialize",function(){this.on("uiDropdownOpenRequested",this.prepareDropdown),this.on("click",{categoryIconSelector:this.pickCategory,itemSelector:this.pickItem,clearRecentSelector:this.clearRecent,clearQuerySelector:this.clearQuery}),this.on("change",{skinToneSelector:this.changeSkinTone}),this.on("mousedown",{skinToneSelector:this.preventFocusLoss,categoryIconSelector:this.preventFocusLoss,itemSelector:this.preventFocusLoss,clearRecentSelector:this.preventFocusLoss}),this.on("mouseover",{focusableSelector:this.setFocus}),this.on("mouseout",{focusableSelector:this.clearFocus}),this.on("input",{queryInputSelector:T.default.debounce(this.updateResultsIfQueryChanges,this.attr.queryChangeThrottleDelayInMs)}),this.on("keydown",{queryInputSelector:this.queryKeyDown}),this.on("dataEmojiInfoLoaded",this.continueInitializing),this.on("uiDropdownOpened",this.onEmojiDropdownOpened),this.on("uiDropdownClosed",this.onEmojiDropdownClosed)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(123),a=(s(o),i(122)),r=s(a),l=i(362),c=s(l),d=i(121),u=s(d),h=i(202),f=s(h),p=i(111),m=s(p),g=i(361),v=s(g),b=i(359),w=s(b),S=i(136),y=s(S),C=i(126),T=s(C),D=i(443),M=s(D),I=i(444),P=s(I),x=i(172),k=s(x),A=i(231),E=s(A),O=i(447),R=s(O),F=i(448),N=s(F);e.default=(0,m.default)(n,E.default);var U=4}).call(e,i(10))},function(t,e,i){(function(t){"use strict";function i(){this.onClickOutside=function(e,i){i=i.bind(this),this.clickOutsideHandler=function(s,n){var o=!0;e.each(function(){if(t(s.target).closest(this).length)return o=!1,!1}),o&&i(s,n)},t(document).on("click",this.clickOutsideHandler)},this.offClickOutside=function(){this.clickOutsideHandler&&(t(document).off("click",this.clickOutsideHandler),this.clickOutsideHandler=null)},this.before("teardown",function(){this.offClickOutside()})}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i}).call(e,i(10))},,,,function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<span class="EmojiPicker-categoryColumn">\n'),s.s(s.f("categories",t,e,1),t,e,0,59,205,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b('    <button type="button" class="EmojiCategoryIcon EmojiCategoryIcon--'),i.b(i.v(i.f("id",t,e,0))),i.b('" title="'),i.b(i.v(i.f("title",t,e,0))),i.b('" data-category="'),i.b(i.v(i.f("id",t,e,0))),i.b('" tabindex="-1"></button>\n')}),t.pop()),s.b("</span>"),s.b('<span class="EmojiPicker-mainColumn">\n  <div class="EmojiPicker-query">\n    <input class="EmojiPicker-queryInput" type="text" autocomplete="off" placeholder="Search for emoji">\n    <button type="button" class="Icon Icon--close EmojiPicker-clearQuery"></button>\n  </div>\n  <div class="EmojiPicker-scrollableRow">\n    <div class="EmojiPicker-loading">\n      <span class="spinner-bigger"></span>\n    </div>\n    <div class="EmojiPicker-results">\n'),s.s(s.f("categories",t,e,1),t,e,0,723,1107,"{{ }}")&&(s.rs(t,e,function(t,e,s){s.b('        <div class="EmojiPicker-categoryResult" data-category="'),s.b(s.v(s.f("id",t,e,0))),s.b('">\n          <h3 class="EmojiPicker-categoryHeader">\n            '),s.b(s.v(s.f("title",t,e,0))),s.b("\n"+i),s.s(s.f("is_recent",t,e,1),t,e,0,894,999,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b('              <button type="button" class="EmojiPicker-clearRecent btn-link">clear</button>\n')}),t.pop()),s.b('          </h3>\n          <div class="EmojiPicker-categoryItems"></div>\n        </div>\n')}),t.pop()),s.b('    </div>\n  </div>\n  <div class="EmojiPicker-diversityRow">'),s.s(s.f("skin_tones",t,e,1),t,e,0,1208,1466,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b('<input class="EmojiPicker-skinTone" type="radio" name="skin-tone" value = "'),i.b(i.v(i.f("value",t,e,0))),i.b('" title="'),i.b(i.v(i.f("title",t,e,0))),i.b('"><span class="EmojiPicker-skinToneSwatch">'),i.b('<span class="Icon Icon--checkLight Icon--smallest"></span>'),i.b("</span>")}),t.pop()),s.b("</div>\n</span>\n"),s.fl()},partials:{},subs:{}})}).call(e,i(1))},function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.s(s.f("items",t,e,1),t,e,0,10,304,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b('<button type="button" class="EmojiPicker-item EmojiPicker-focusable u-userColorFocusRing'),i.s(i.f("is_diversity",t,e,1),t,e,0,133,146,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b(" is-diversity")}),t.pop()),i.s(i.f("is_variant",t,e,1),t,e,0,188,199,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b(" is-variant")}),t.pop()),i.b('" data-key="'),i.b(i.v(i.f("key",t,e,0))),i.b('" data-placement="bottom-right" tabindex="-1"></button>')}),t.pop()),s.fl()},partials:{},subs:{}})}).call(e,i(1))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.saveUndoStateDeferred=function(t){var e=this;"mousemove"===t.type&&1!==t.which||setTimeout(function(){e.detectUpdatedText(),e.saveUndoState()},0)},this.clearUndoState=function(){this.undoHistory=[],this.undoIndex=-1},this.saveUndoState=function(){var t=this.htmlRich.getText(),e=this.getSelection()||[t.length],i=this.undoHistory,s=i[this.undoIndex];s&&s.text===t?s&&(s.selection=e):i.splice(++this.undoIndex,i.length,{text:t,selection:e})},this.isUndoKey=function(t){return this.isMac?t.which===a.default.Z&&t.metaKey&&!t.shiftKey&&!t.ctrlKey&&!t.altKey:t.which===a.default.Z&&t.ctrlKey&&!t.shiftKey&&!t.altKey},this.isRedoKey=function(t){return this.isMac?t.which===a.default.Z&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey:this.isWin?t.which===a.default.Y&&t.ctrlKey&&!t.shiftKey&&!t.altKey:t.which===a.default.Z&&t.shiftKey&&t.ctrlKey&&!t.altKey},this.setUndoState=function(t){this.detectUpdatedText(!1,t.text),this.htmlRich.setSelectionOffsets(t.selection),this.trigger("uiHideAutocomplete")},this.emulateUndo=function(t){this.isUndoKey(t)&&(this.stopEvent(t),this.saveUndoState(),this.undoIndex>0&&this.setUndoState(this.undoHistory[--this.undoIndex]))},this.emulateRedo=function(t){var e=this.undoHistory,i=this.undoIndex;i<e.length-1&&this.htmlRich.getText()!==e[i].text&&e.splice(i+1,e.length),this.isRedoKey(t)&&(this.stopEvent(t),i<e.length-1&&this.setUndoState(e[++this.undoIndex]))},this.undoStateAfterCursorMovement=function(t){[a.default.PAGE_UP,a.default.PAGE_DOWN,a.default.HOME,a.default.END,a.default.UP,a.default.DOWN,a.default.LEFT,a.default.RIGHT].indexOf(t.which)>=0&&this.saveUndoStateDeferred(t)},this.undoStateForDeleteKeys=function(t){var e=this;if(!(!this.isChrome&&!this.isFirefox||t.metaKey||t.which!==a.default.BACKSPACE&&t.which!==a.default.DELETE)){var i=this.htmlRich.getText(),s=this.getSelection()||[i.length],n=s;setTimeout(function(){var o=e.htmlRich.getText(),r=o.length,l=i.length-r;if(l>0){if(1===n.length){var c=n[0];n=t.which===a.default.BACKSPACE?[c-l,c]:[c,c+l]}if(n[0]>=0&&n[1]<=i.length&&n[1]-n[0]===l){var d=e.undoHistory;e.undoIndex>=0&&d[e.undoIndex].text===i&&e.undoIndex--;var u=e.undoIndex>=0&&d[e.undoIndex].deletedSpan;u&&(s=d[e.undoIndex].selection,t.which===a.default.BACKSPACE&&n[1]===u[0]?(i=d[e.undoIndex--].text,n=[n[0],u[1]]):t.which===a.default.DELETE&&n[0]===u[0]&&(i=d[e.undoIndex--].text,n=[u[0],u[1]+l])),e.isChrome&&(s=n),d.splice(++e.undoIndex,d.length,{text:i,selection:s,deletedSpan:n}),e.saveUndoState()}}},0)}},this.handleKeyDownForUndo=function(t){this.emulateUndo(t),this.emulateRedo(t),this.undoStateAfterCursorMovement(t),this.undoStateForDeleteKeys(t)},this.after("initTextNode",function(){this.undoHistory=[{text:"",selection:[0]}],this.undoIndex=0,this.on(this.$text,"keydown",this.handleKeyDownForUndo),this.on(this.$text,"focusin",this.ignoreDuringFakeFocus(this.saveUndoStateDeferred)),this.on(this.$text,"cut paste drop",this.saveUndoState),this.on(this.$text,"cut paste drop mousedown mousemove",this.saveUndoStateDeferred),this.on("uiSaveUndoState",this.saveUndoState),this.on("uiClearUndoState",this.clearUndoState)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(359),a=s(o);e.default=n},function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.s(s.f("pictographs",t,e,1),t,e,0,16,132,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b('<img class="RichEditor-pictographImage" src="'),i.b(i.v(i.f("imageUrl",t,e,0))),i.b('" style="top:'),i.b(i.v(i.f("top",t,e,0))),i.b("px;left:"),i.b(i.v(i.f("left",t,e,0))),i.b('px;" draggable="false">')}),t.pop()),s.fl()},partials:{},subs:{}})}).call(e,i(1))},function(t,e){"use strict";function i(){this.addTweetAttachment=function(t,e){e&&e.id&&(this.tweetAttachmentId=e.id,this.trigger("uiWantsTweet",{tweetId:this.tweetAttachmentId,tweetOptions:{modal:"dm",disableLinks:!0}}),this.trigger("uiAttachmentChanged"))},this.removeTweetAttachment=function(){this.tweetAttachmentId=void 0,this.trigger("uiAttachmentChanged")},this.hasTweetAttachment=function(){return!!this.tweetAttachmentId},this.around("hasAttachment",function(t){return this.hasTweetAttachment()||t()}),this.after("initialize",function(){this.tweetAttachmentId=void 0,this.on(document,"uiComposeWithTweet",this.addTweetAttachment)})}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({videoInfoSelector:".ComposerVideoInfo"}),this.videoInfoHeight=null,this.clearStateData=function(t,e){this.videoInfoHeight=null,this.select("videoInfoSelector").addClass("u-hidden").html("")},this.renderAvancedVideoInfo=function(t){var e={has_cta:""!==t.ctaType,is_cta_visit_site:"visit_site"===t.ctaType,is_cta_watch_now:"watch_now"===t.ctaType,embeddable:t.embeddable,cta_url:t.ctaUrl,title:t.title,description:t.description},i=u.default.render(e);this.select("videoInfoSelector").removeClass("u-hidden").replaceWith(i)},this.updateFromEditDialog=function(t,e){var i=c.default.get(e.fileId);if(i){var s=i.advanced;i.isVideo&&s&&this.renderAvancedVideoInfo(s)}},this.createMediaDataForSending=function(){var t=this.getTweetboxId(),e=(0,r.default)(t);return e.reduce(function(t,e){var i=e.advanced,s=t.altText||e.altText,n=i?{advanced_title:i.title,advanced_description:i.description,advanced_cta_type:i.ctaType,advanced_cta_url:i.ctaUrl,advanced_embeddable:!!i.embeddable}:{},a=s?{has_alt_text:!0}:{};return o({},t,n,a)},{})},this.around("createDataForSending",function(t){var e=t();return o({},e,this.createMediaDataForSending())}),this.after("initialize",function(){this.on(document,"uiMediaEditDialogDone",this.updateFromEditDialog),this.on("uiTweetSent uiTweetCancelled uiPreviewThumbnailRemoveAll uiPreviewThumbnailRemoved",this.clearStateData)})}Object.defineProperty(e,"__esModule",{value:!0});var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},a=i(392),r=s(a),l=i(224),c=s(l),d=i(453),u=s(d);e.default=n},function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<div class="ComposerVideoInfo">\n  <div class="ComposerVideoInfo-title">'),s.b(s.v(s.f("title",t,e,0))),s.b('</div>\n  <div class="ComposerVideoInfo-description">'),s.b(s.v(s.f("description",t,e,0))),s.b("</div>\n"),s.s(s.f("has_cta",t,e,1),t,e,0,168,580,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b('    <div class="ComposerVideoInfo-cta">\n'),i.s(i.f("is_cta_visit_site",t,e,1),t,e,0,237,364,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('        <span class="ComposerVideoInfo-ctaType">Visit:</span> <span class="ComposerVideoInfo-ctaUrl">'),i.b(i.v(i.f("cta_url",t,e,0))),i.b("</span>\n")}),t.pop()),i.s(i.f("is_cta_watch_now",t,e,1),t,e,0,414,545,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('        <span class="ComposerVideoInfo-ctaType">Watch now:</span> <span class="ComposerVideoInfo-ctaUrl">'),i.b(i.v(i.f("cta_url",t,e,0))),i.b("</span>\n")}),t.pop()),i.b("    </div>\n")}),t.pop()),s.b('  <div class="ComposerVideoInfo-embeddable">\n    <span class="ComposerVideoInfo-embeddableValue">\n'),s.s(s.f("embeddable",t,e,1),t,e,0,712,807,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b('        <span class="ComposerVideoInfo-embeddableLabel">Video embedding:</span> allowed\n')}),t.pop()),s.s(s.f("embeddable",t,e,1),t,e,1,0,0,"")||s.b('        <span class="ComposerVideoInfo-embeddableLabel">Video embedding:</span> not allowed\n'),s.b("    </span>\n  </div>\n</div>\n"),s.fl()},partials:{},subs:{}})}).call(e,i(1))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){a.default.mixin(this,[d.default]),this.defaultAttrs({foundMediaSearch:".found-media-search"}),this.attachedImageUrl=function(t,e){this.foundMediaInfo=e},this.removedAttachment=function(){this.foundMediaInfo=void 0},this.after("initialize",function(t){this.attachChild(l.default,this.select("foundMediaSearch"),{autoplayDisabled:this.attr.autoplayDisabled,eventData:this.attr.eventData,preferredGravity:this.attr.preferredGravity,preferredWeight:this.attr.preferredWeight,preventDropdownsOpeningUp:this.attr.preventDropdownsOpeningUp,restoreFocusOnClose:!0,scribeContext:this.attr.scribeContext,mediaCategoryPrefix:this.attr.dmOnly?"dm_":"tweet_"}),this.on("uiAttachImageUrl",this.attachedImageUrl),this.on("uiPreviewThumbnailRemove uiPreviewThumbnailRemoveAll",this.removedAttachment)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(121),a=s(o),r=i(455),l=s(r),c=i(231),d=s(c);e.default=n},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){u.default.mixin(this,[y.default,r.default.withAdvice,M.default,T.default]),this.defaultAttrs({scribeContext:{},attachGifSelector:"button[data-gif-url]",resultUpClass:"FoundMediaSearch--top",contentSelector:".FoundMediaSearch-content",contentRightClass:"FoundMediaSearch-content--right",caretSelector:".Caret",caretUpClass:"Caret--top",caretDownClass:"Caret--bottom",
preferredGravity:void 0,preferredWeight:void 0,preventDropdownsOpeningUp:void 0,tweetFormSelector:".tweet-form",foundMediaSearchSelector:".js-found-media-search-trigger",queryInputSelector:".FoundMediaSearch-queryInput",queryLoadingClass:"FoundMediaSearch-queryInput--loading",dropdownSelector:".FoundMediaSearch-dropdownMenu",resultSelector:".FoundMediaSearch-results",itemsSelector:".FoundMediaSearch-items",focusableSelector:".FoundMediaSearch-focusable",firstFocusableSelector:".FoundMediaSearch-focusable:first",focusedSelector:".FoundMediaSearch-focusable.is-focused",focusedClass:"is-focused",dropdownContainerSelector:"span.dropdown-menu",categorySelector:".FoundMediaSearch-category",animatedFoundMediaSelector:".FoundMediaSearch-item",itemVisibleClass:"FoundMediaSearch-item--visible",columnSelector:".FoundMediaSearch-column",paginationSelector:".FoundMediaSearch-pagination",presentedClass:"js-presented",presentedSelector:".js-presented",keyboardClass:"FoundMediaSearch--keyboard",emptyStateClass:"FoundMediaSearch--emptyState",reloadSearchTriggerSelector:".js-found-media-reload-search-trigger"}),this.randomItemClasses=function(){return c.default.shuffleInPlace(["FoundMediaSearch-itemContainer--bg1","FoundMediaSearch-itemContainer--bg2","FoundMediaSearch-itemContainer--bg3","FoundMediaSearch-itemContainer--bg4","FoundMediaSearch-itemContainer--bg5","FoundMediaSearch-itemContainer--bg6"])},this.randomCategoryClasses=function(){return c.default.shuffleInPlace(["FoundMediaSearch-categoryContainer--bg1","FoundMediaSearch-categoryContainer--bg2","FoundMediaSearch-categoryContainer--bg3","FoundMediaSearch-categoryContainer--bg4","FoundMediaSearch-categoryContainer--bg5","FoundMediaSearch-categoryContainer--bg6"])},this.prepareDropdown=function(t,e){this.$node.addClass(this.attr.emptyStateClass),this.hasMoreItems(!0),this.select("itemsSelector").empty(),this.trigger("uiRequestFoundMediaCategories")},this.showCategories=function(e,i){var s=this;this.select("queryInputSelector").removeClass(this.attr.queryLoadingClass),this.$node.removeClass(this.attr.emptyStateClass),this.defaultResults=this.defaultResults||{html:i.html},this.select("itemsSelector").html(i.html),this.select("resultSelector").scrollTop(0),this.$focusables=this.select("focusableSelector");var n=this.randomCategoryClasses();this.$focusables.each(function(e,i){var o=n.pop();o||(n=s.randomCategoryClasses(),o=n.pop()),t(i).addClass(o)}),this.hasMoreItems(!1),this.trigger("uiFoundMediaGalleryImpression")},this.updateCategoryItems=function(t,e){this.select("queryInputSelector").removeClass(this.attr.queryLoadingClass),this.$node.removeClass(this.attr.emptyStateClass),this.defaultResults||(this.defaultResults={html:e.html,cursor:e.cursor}),this.presentFoundMediaItems(this.select("itemsSelector").html(e.html),"string"==typeof e.cursor),this.select("resultSelector").scrollTop(0),this.trigger(this.scribeEvents.itemsImpression)},this.errorState=function(){this.trigger("uiShowError",{message:"Failed to load GIFs. Please try again later."})},this.attachTarget=function(t){var e=t.closest(this.attr.attachGifSelector),i=e.data("gif-url");if(i){this.trigger(this.scribeEvents.itemSelect);var s=this.$node.closest(this.attr.tweetFormSelector),n=e.data(),o={url:i,origin:n.origin,provider:n.providerName,attribution:{name:n.attributionName,image:n.attributionImage},detailsUrl:n.detailsUrl,thumbnail:{src:n.stillUrl,width:n.width,height:n.height},isGif:!0,mediaCategoryPrefix:this.attr.mediaCategoryPrefix};this.itemWasAttached=!0,this.trigger(s,"uiPreviewThumbnailPlaceholderAdd",o),this.trigger("uiAttachImageUrl",o),this.closeDropdown()}},this.selectItem=function(t){if(t.has(this.attr.animatedFoundMediaSelector).length)this.attachTarget(t.find(this.attr.animatedFoundMediaSelector));else if(t.has(this.attr.categorySelector).length){var e=t.find(this.attr.categorySelector),i=e.data("display-name");this.trigger("uiRequestFoundMediaCategoryItems",{categoryName:e.data("name")}),this.lastQuery=i,this.select("queryInputSelector").val(i).focus().addClass(this.attr.queryLoadingClass)}},this.selectFocusedItem=function(){this.selectItem(this.select("focusedSelector"))},this.selectClickedItem=function(e){this.selectItem(t(e.target).closest(this.attr.focusableSelector))},this.getElementTopOffset=function(t){var e=t[0],i=0;return e&&(i=e.getBoundingClientRect().top),i},this.getWindowHeight=function(){return t(window).height()},this.showDropdownPosition=function(t){this.$node.toggleClass(this.attr.resultUpClass,t),this.select("caretSelector").toggleClass(this.attr.caretUpClass,!t).toggleClass(this.attr.caretDownClass,t)},this.positionDropdownUp=function(){this.showDropdownPosition(!0)},this.positionDropdownDown=function(){this.showDropdownPosition(!1);var t=this.select("resultSelector"),e=this.getElementTopOffset(t),i=this.getWindowHeight();t.css({height:i-e-O})},this.positionDropdown=function(){this.positionDropdownDown();var t=this.adjacent(this.select("dropdownSelector"),this.select("foundMediaSearchSelector"),{gravity:this.attr.preferredGravity||"vertical-north",weight:this.attr.preferredWeight});this.select("contentSelector").toggleClass(this.attr.contentRightClass,"right"===t.weight),this.$dropdown.find(this.attr.dropDownMenuSelector).toggleClass(this.attr.dropDownMenuAlignRightClass,"right"===t.weight),"south"!==t.gravity||this.attr.preventDropdownsOpeningUp||this.positionDropdownUp(),this.animateVisibleGifs()},this.positionDropdownDebounced=w.default.debounce(this.positionDropdown,100),this.gotFoundMediaBinaryData=function(t,e){this.trigger(this.scribeEvents.itemAdd),this.trigger("uiGotImageData",{fileIds:[e.fileId]})},this.failedFoundMediaBinaryData=function(t,e){this.trigger(this.scribeEvents.itemError),this.trigger("uiShowError",{message:"Failed to attach GIF. Please try again later."})},this.onFoundMediaDropdownOpened=function(){this.itemWasAttached=!1,this.positionDropdown(),this.select("itemsSelector").html('<div class="FoundMediaSearch-pagination"></div>'),this.select("foundMediaSearchSelector").addClass("enabled"),this.select("queryInputSelector").focus(),this.on(window,"resize",this.positionDropdownDebounced)},this.onFoundMediaDropdownClosed=function(){this.itemWasAttached||this.trigger(this.scribeEvents.itemCancel),this.off(window,"resize",this.positionDropdownDebounced),this.select("queryInputSelector").val(""),this.select("foundMediaSearchSelector").removeClass("enabled"),this.select("itemsSelector").empty()},this.searchQuery=function(t){""!==t&&this.select("queryInputSelector").addClass(this.attr.queryLoadingClass),this.trigger("uiFoundMediaSearch",{query:t||""})},this.searchRetry=function(){var t=this.select("queryInputSelector").val()||"";this.lastQuery===t&&(this.searchQuery(t),this.select("queryInputSelector").focus())},this.searchIfQueryChanged=function(){var t=this.select("queryInputSelector").val()||"";this.lastQuery!==t&&(this.lastQuery=t,this.searchQuery(t))},this.searchAutocomplete=function(){var t=this;setTimeout(function(){return t.searchIfQueryChanged()},0)},this.buildFocusIndex=function(){var e=this.select("focusableSelector");this.$focusables=e.sort(function(e,i){var s=t(e).offset(),n=t(i).offset();return s.top>n.top||s.top===n.top&&s.left>n.left?1:-1})},this.searchReset=function(){this.select("queryInputSelector").removeClass(this.attr.queryLoadingClass),this.select("resultSelector").scrollTop(0),this.defaultResults?this.presentFoundMediaItems(this.select("itemsSelector").html(this.defaultResults.html),"string"==typeof this.defaultResults.cursor):this.prepareDropdown()},this.searchResults=function(t,e){var i=e.sourceEventData;i&&i.query===this.select("queryInputSelector").val()&&(this.select("queryInputSelector").removeClass(this.attr.queryLoadingClass),this.lastQueryData=i,this.presentFoundMediaItems(this.select("itemsSelector").html(e.html),"string"==typeof e.cursor),this.select("resultSelector").scrollTop(0))},this.searchUnavailable=function(t,e){this.select("queryInputSelector").removeClass(this.attr.queryLoadingClass);var i=E.default.render({});this.select("itemsSelector").html(i),this.hasMoreItems(!1),this.buildFocusIndex()},this.presentFoundMedia=function(t,e,i,s){var n=[i,this.attr.presentedClass];s&&n.push("FoundMediaSearch-slideIn"),e.addClass(n.join(" "))},this.presentFoundMediaItems=function(e,i){var s=this;this.buildFocusIndex();var n=this.randomItemClasses();if(this.$focusables.not(this.attr.presentedSelector).each(function(e,i){var o=n.pop();o||(n=s.randomItemClasses(),o=n.pop()),s.presentFoundMedia(e,t(i),o,e<10)}),this.hasMoreItems(i),i){var o=this.select("paginationSelector").offset().top-e.offset().top;o<this.select("resultSelector").height()&&this.trigger("uiNearTheBottom")}this.animateVisibleGifs()},this.moveFocus=function(e){var i=this.select("focusedSelector"),s=void 0;if(0===i.length)s=t(this.$focusables.get(0));else{var n=this.$focusables.index(i)+e;s=n<0||n>=this.$focusables.length?i:t(this.$focusables.get(n))}if(i.removeClass(this.attr.focusedClass),s.addClass(this.attr.focusedClass),s.length>0){var o=this.select("resultSelector"),a=s.offset().top-o.offset().top,r=s.height(),l=o.height();l<a+r?o.scrollTop(o.scrollTop()+a-l+r):a<=0&&o.scrollTop(o.scrollTop()+a)}},this.queryKeyDown=function(t){switch(t.which){case v.default.UP:t.preventDefault(),this.moveFocus(-1),this.$node.addClass(this.attr.keyboardClass);break;case v.default.DOWN:t.preventDefault(),this.moveFocus(1),this.$node.addClass(this.attr.keyboardClass);break;case v.default.LEFT:case v.default.RIGHT:break;case v.default.ENTER:t.preventDefault(),this.trigger("uiFoundMediaSearchEnter");break;default:this.trigger("uiFoundMediaSearchAutocomplete")}},this.changeQuery=function(t){this.trigger("uiFoundMediaSearchAutocomplete")},this.enableButton=function(){this.select("foundMediaSearchSelector").prop("disabled",!1).removeClass("disabled")},this.disableButton=function(){this.select("foundMediaSearchSelector").prop("disabled",!0).addClass("disabled")},this.hasMoreItems=function(t){this.select("paginationSelector").toggle(t)},this.moreResults=function(e,i){var s=this.select("columnSelector"),n=t(i.html),o=n.filter(this.attr.columnSelector);s.first().append(o.first().children()),s.last().append(o.last().children()),this.presentFoundMediaItems(this.select("itemsSelector"),"string"==typeof i.cursor),this.animateVisibleGifs()},this.isContainedInViewport=function(t,e){return k.default.isPartiallyContainedInViewport({topThreshold:-500,bottomThreshold:500,fractionInViewport:0,containerRect:t,elementRect:e.rect})},this.animateVisibleGifs=function(){var e=this,i=this.select("resultSelector"),s=i[0].getBoundingClientRect(),n=this.select("animatedFoundMediaSelector").map(function(){return{item:t(this),rect:this.getBoundingClientRect()}}),o=n.filter(function(t,i){return e.isContainedInViewport(s,i)});o.sort(function(t,e){return t.rect.top-e.rect.top}).each(function(t,i){var s=i.item;if(s.find("img").attr("src",s.data("thumbnail-url")),!s.hasClass(e.attr.itemVisibleClass)){var n=40*t+"ms";s.parent().css({animationDelay:n}),s.addClass(e.attr.itemVisibleClass)}}),n.not(o).each(function(t,i){return i.item.removeClass(e.attr.itemVisibleClass).find("img").attr("src","")})},this.setFocus=function(e){this.$node.removeClass(this.attr.keyboardClass);var i=t(e.target).closest(this.attr.focusableSelector);i.hasClass(this.attr.focusedClass)||(this.$node.removeClass(this.attr.keyboardClass),this.select("focusedSelector").removeClass(this.attr.focusedClass),i.addClass(this.attr.focusedClass))},this.clearFocus=function(e){t(e.target).closest(this.attr.focusableSelector).removeClass(this.attr.focusedClass)},this.after("initialize",function(){var t=this.$node.closest(this.attr.tweetFormSelector);this.attachChild(m.default,this.select("resultSelector"),{contentSelector:this.attr.itemsSelector}),this.$node.toggleClass("autoplay-disabled",!!this.attr.autoplayDisabled),this.scribeEvents={itemsImpression:"uiFoundMediaCategoryImpression",itemSelect:"uiFoundMediaCategorySelect",itemAdd:"uiFoundMediaCategoryAdd",itemError:"uiFoundMediaCategoryError",itemCancel:"uiFoundMediaCategoryCancel"},this.skipFocusManager=!0,this.scribeContext=this.attr.scribeContext,this.on("uiDropdownOpenRequested",this.prepareDropdown),this.on("click",{focusableSelector:this.selectClickedItem,reloadSearchTriggerSelector:this.searchRetry}),this.on("mouseover",{focusableSelector:this.setFocus}),this.on("mouseout",{focusableSelector:this.clearFocus}),this.on("uiFoundMediaSearchEnter",this.selectFocusedItem),this.on("dataFoundMediaError",this.errorState),this.on("dataFoundMediaCategories",this.showCategories),this.on("dataFoundMediaCategoryItems",this.updateCategoryItems),this.on("dataFoundMediaSearchResults",this.searchResults),this.on("dataFoundMediaSearchResultsUnavailable",this.searchUnavailable),this.on("dataFoundMediaSearchClear",this.searchReset),this.on("dataFoundMediaFetchMoreResults",this.moreResults),this.on("dataImageAttachBinaryData",this.gotFoundMediaBinaryData),this.on("dataImageAttachFailed",this.failedFoundMediaBinaryData),this.on("uiFoundMediaSearchAutocomplete",this.searchAutocomplete),this.on("uiFoundMediaSearchSelect",{resultSelector:this.selectResult}),this.on("change paste cut input",{queryInputSelector:this.changeQuery}),this.on("keydown",{queryInputSelector:this.queryKeyDown}),this.on(this.attr.resultSelector,"scroll",w.default.debounce(this.animateVisibleGifs.bind(this),50)),this.on("uiNearTheBottom","uiFoundMediaFetchMore"),this.on(t,"uiComposerEnableExclusiveAttachments",this.enableButton),this.on(t,"uiComposerDisableExclusiveAttachments",this.disableButton),this.on(t,"uiPreviewThumbnailAdded",this.closeDropdown),this.on("uiDropdownOpened",this.onFoundMediaDropdownOpened),this.on("uiDropdownClosed",this.onFoundMediaDropdownClosed)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(123),a=(s(o),i(122)),r=s(a),l=i(362),c=s(l),d=i(121),u=s(d),h=i(111),f=s(h),p=i(456),m=s(p),g=i(359),v=s(g),b=i(126),w=s(b),S=i(443),y=s(S),C=i(444),T=s(C),D=i(172),M=s(D),I=i(231),P=s(I),x=i(177),k=s(x),A=i(457),E=s(A);e.default=(0,f.default)(n,P.default);var O=40}).call(e,i(10))},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){var e=0,i=1;this.checkScrollPosition=function(){var t=this.webkitFullscreenElement();if(!t||this.node===t||t.contains(this.node)){var s=this.$content.height(),n=!1;this.immediatelyRequestMoreItems?(this.immediatelyRequestMoreItems=!1,this.trigger("uiNearTheBottom"),this.lastTriggerFrom=i,n=!0):this.inTriggerRange(e)&&(s>this.lastTriggeredHeight||this.lastTriggeredFrom(i))?(this.trigger("uiNearTheTop"),this.lastTriggerFrom=e,n=!0):this.inTriggerRange(i)&&(s>this.lastTriggeredHeight||this.lastTriggeredFrom(e))&&(this.trigger("uiNearTheBottom"),this.lastTriggerFrom=i,n=!0),n&&(this.lastTriggeredHeight=s)}},this.inTriggerRange=function(t){var s=this.$content.height(),n=this.$node.scrollTop(),o=n+this.$node.height(),a=Math.abs(Math.min(o-s,0)),r=this.$node.height()/2;return n<r&&t===e||a<r&&t===i},this.lastTriggeredFrom=function(t){return this.lastTriggerFrom===t},this.resetScrollState=function(){this.lastTriggeredHeight=0,this.lastTriggerFrom=-1},this.webkitFullscreenElement=function(){return document.webkitFullscreenElement},this.after("initialize",function(){this.resetScrollState(),this.immediatelyRequestMoreItems=this.attr.immediatelyRequestMoreItems,this.$content=this.attr.contentSelector?this.select("contentSelector"):t(document),this.on("scroll",l.default.throttle(this.checkScrollPosition.bind(this),100)),this.on("uiTimelineReset",this.resetScrollState),this.on("uiSwiftLoaded uiPageChanged",this.checkScrollPosition)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(126),l=s(r),c=(0,a.default)(n);e.default=c}).call(e,i(10))},function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<div class="FoundMediaSearch-noResults">\n  <p>Yikes! GIFs aren\'t loading right now.</p>\n  <button type="button" class="btn js-found-media-reload-search-trigger">Reload</button>\n</div>\n'),s.fl()},partials:{},subs:{}})}).call(e,i(1))},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){var e=a.default.OPTIONS_TYPE,i=a.default.TEXT_INPUT_TYPE;this.defaultAttrs({hasTextInputQuickReplyClass:"has-text-input-quick-reply",composerEditorSelector:".DMComposer-editor",qrTextInputPlaceholderDataAttr:"data-qr-text-input-placeholder",dismissSelector:".QuickReplyDismiss",timeToDismissSelectedQRInMS:2e3}),this.getQuickReplyResponseData=function(){var t={};switch(this.quickReplyState.type){case i:t={"quick_reply_response[text_input][id]":this.quickReplyState.id};break;case e:this.quickReplyState.optionData&&(t={"quick_reply_response[options][id]":this.quickReplyState.id,"quick_reply_response[options][selected_id]":this.quickReplyState.optionData.optionId,text:this.quickReplyState.optionData.optionText})}return t},this.handleTextInputQuickReply=function(t){this.quickReplyState.id=t&&t.id;var e=t&&t.label||"";this.$node.addClass(this.attr.hasTextInputQuickReplyClass);var i=this.select("composerEditorSelector");i.attr(this.attr.qrTextInputPlaceholderDataAttr,e)},this.handleOptionQuickReply=function(t){var e=t&&t.id;this.quickReplyState&&this.quickReplyState.id===e||(this.quickReplyState.id=e,this.trigger("uiShowQuickReplyOptionPanel",t))},this.handleShowQuickReply=function(t){if(t)switch(this.quickReplyState.data=t,this.quickReplyState.type=t.type&&t.type.name,this.quickReplyState.type){case e:this.handleOptionQuickReply(t);break;case i:this.handleTextInputQuickReply(t)}},this.removeOptionsQuickReply=function(t,e){var i=e&&e.text&&e.text.length;i>0&&!this.$node.hasClass(this.attr.hasTextInputQuickReplyClass)&&this.removeQuickReply()},this.removeTextInputQuickReply=function(){this.quickReplyState.type===i&&this.removeQuickReply()},this.handleSendQROptionResponse=function(t,e){this.quickReplyState.optionData=e,this.trigger("uiSendQROptionResponse")},this.scheduleClearQROptions=function(){var t=this,e=this.quickReplyState.id;this.timer=setTimeout(function(){return t.trigger("uiRemoveQuickReplyWithId",{id:e})},this.attr.timeToDismissSelectedQRInMS)},this.removeQuickReply=function(){if(!t.isEmptyObject(this.quickReplyState)){this.$node.removeClass(this.attr.hasTextInputQuickReplyClass);var e=this.select("composerEditorSelector");e.removeAttr(this.attr.qrTextInputPlaceholderDataAttr),this.quickReplyState={},this.trigger("uiQuickReplyRemoved")}},this.removeQuickReplyWithId=function(t,e){var i=e&&e.id;i&&i===this.quickReplyState.id&&this.removeQuickReply()},this.removeTimer=function(){clearTimeout(this.timer)},this.handleSendQRFailed=function(){this.removeTimer(),this.trigger("uiUpdateQR")},this.removeQuickReplyPanelIfPureDM=function(){t.isEmptyObject(this.getQuickReplyResponseData())&&this.trigger("uiRemoveQuickReply")},this.after("initialize",function(){this.quickReplyState={},this.on(document,"uiQROptionClicked",this.handleSendQROptionResponse),this.on(document,"dataDMSendFailed",this.handleSendQRFailed),this.on(document,"uiQROptionClicked",this.scheduleClearQROptions),this.on(document,"uiRemoveQuickReply uiDMDialogClosed",this.removeQuickReply),this.on(document,"uiRemoveQuickReplyWithId",this.removeQuickReplyWithId),this.on("uiDMSendMessage",this.removeQuickReplyPanelIfPureDM),this.on("click",{dismissSelector:this.removeQuickReply})})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(459),a=s(o);e.default=n}).call(e,i(10))},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={OPTIONS_TYPE:"options",TEXT_INPUT_TYPE:"text_input",LOCATION_TYPE:"location"};e.default=i},function(t,e){"use strict";function i(){this.addCardUriToParams=function(t,e){this.cardUri=e&&e.cardUri},this.removeCardUriToParams=function(){delete this.cardUri},this.after("initialize",function(){this.on(document,"uiSetDmCreateCardUriParam",this.addCardUriToParams),this.on(document,"uiResetDmCreateCardUriParam",this.removeCardUriToParams)}),this.after("reset",function(){this.removeCardUriToParams()})}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={};e.default={get:function(t){return i[t]},set:function(t){i=t||{}},clear:function(){this.set({})}}},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.attributes({indicatorDelay:1e3}),this.state={current:0,conversationId:void 0,isVisible:!1,previousInFlight:0,total:0},this.render=function(){var t=this;this.$node.html(l.default.render({total:this.state.total,current:this.state.current})),this.state.isVisible?this.timeout=setTimeout(function(){return t.state.isVisible?t.$node.slideDown(300):t.$node.hide()},this.attr.indicatorDelay):(clearTimeout(this.timeout),this.$node.slideUp(100))},this.updateCount=function(t,e){var i=e[this.state.conversationId]||0;0===i?(this.state.total=0,this.state.current=0):0===this.state.previousInFlight?(this.state.total=i,this.state.current=1):this.state.previousInFlight<i?this.state.total=this.state.total+1:this.state.previousInFlight>i&&(this.state.current=this.state.current+1),this.state.previousInFlight=i,this.state.isVisible=i>0},this.updateConversationId=function(t,e){this.state={isVisible:!1,total:0,conversationId:e.conversation_id,current:0,previousInFlight:0},this.trigger("uiDMConversationNeedsInFlightState")},this.after("updateCount",this.render),this.after("updateConversationId",this.render),this.after("initialize",function(){this.on(document,"dataDMMessagesInFlight",this.updateCount),this.on(document,"uiRenderConversationView",this.updateConversationId)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(463),l=s(r);e.default=(0,a.default)(n)},function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<div class="DMSendingStateIndicator">\n  <span>Sending message '),s.b(s.v(s.f("current",t,e,0))),s.b(" of "),s.b(s.v(s.f("total",t,e,0))),s.b("</span>\n  <span>...</span>\n</div>"),s.fl()},partials:{},subs:{}})}).call(e,i(1))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.attributes({notice:".DMDeleteConversation",confirm:".DMDeleteConversation-confirm",cancel:".DMDeleteConversation-cancel",groupVariantClass:"DMDeleteConversation--group"}),this.showConfirmation=function(t,e){var i=e&&e.is_group;this.select("notice").toggleClass(this.attr.groupVariantClass,!!i).trigger("uiShowDMNotice")},this.hideConfirmation=function(){this.select("notice").trigger("uiDismissDMNotice")},this.state=function(t,e){return this._state=e||this._state||{},this._state},this.deleteConversation=function(){var t=this.state();this.trigger("uiDeleteConversation",{conversation_id:t.conversation_id}),this.hideConfirmation(),this.trigger("uiDMInboxWantsRefreshed")},this.after("initialize",function(){this.on("uiShowDMDeleteConversationConfirmation",this.state),this.on("uiShowDMDeleteConversationConfirmation",this.showConfirmation),this.on("click",{confirm:this.deleteConversation,cancel:this.hideConfirmation})})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=(0,a.default)(n);e.default=r},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.attributes({notice:".DMDeleteMessage",confirm:".DMDeleteMessage-confirm",cancel:".DMDeleteMessage-cancel"}),this.showConfirmation=function(){this.select("notice").trigger("uiShowDMNotice")},this.hideConfirmation=function(){this.select("notice").trigger("uiDismissDMNotice")},this.state=function(t,e){return this._state=e||this._state||{},this._state},this.deleteMessage=function(){var t=this.state();this.trigger("uiDMDialogDeleteMessage",{id:t.messageId,conversation_id:t.conversationId}),this.hideConfirmation(),this.trigger("uiDMInboxWantsRefreshed")},this.after("initialize",function(){this.on("uiShowDMDeleteMessageConfirmation",this.state),this.on("uiShowDMDeleteMessageConfirmation",this.showConfirmation),this.on("click",{confirm:this.deleteMessage,cancel:this.hideConfirmation})})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=(0,a.default)(n);e.default=r},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.attributes({feedbackDismissSelector:".DMFeedback-dismiss",feedbackSelector:".DMFeedback",feedbackPageFrameSelector:"iframe.B2CFeedback"}),this.showFeedback=function(t,e){this.$b2cFeedback.is(":visible")||this.$b2cFeedback.show();var i="/i/pages/feedback?cardUri="+encodeURIComponent(t)+"&lang="+e;this.$feedbackIframe.attr("src")!==i&&this.$feedbackIframe.attr("src",i),this.trigger("uiFeedbackPanelOpened")},this.dismissFeedback=function(){var t=this.$feedbackIframe.data("current-view");this.closeFeedback(),this.trigger("uiB2CFeedbackDismiss",{cardName:this.feedback.name,feedbackId:this.feedback.feedback_id,currentView:t})},this.closeFeedback=function(){this.$b2cFeedback.hide(),this.$feedbackIframe.attr("src",""),this.trigger("uiFeedbackPanelClosed")},this.handleFeedbackError=function(t,e){var i=e&&e.errorMessage;this.trigger(document,"uiShowError",{message:i}),this.trigger("dataDMError",{message:i})},this.handleFeedbackTweetBtnClick=function(t,e){this.closeFeedback(),this.trigger(document,"uiOpenTweetDialog",{title:"Tweet about your experience",canTweetDefaultText:!1,text:e&&e.prefilledText})},this.updateFeedbackPanel=function(e,i){var s=t("html").attr("lang")||"en";i&&i.feedback&&(this.feedback=i.feedback,this.showFeedback(this.feedback.card_uri,s))},this.handleFeedbackUpdateView=function(t,e){this.$feedbackIframe.data("current-view",e.view)},this.resizeIframe=function(t){this.fitIframeHeight(t,{iframeSelector:this.attr.feedbackPageFrameSelector,isQualified:function(t){return t.name&&"commerce_page"===t.name&&t.height}})},this.closeFeedbackPanelWithId=function(t,e){this.feedback&&e.dmId===this.feedback.dm_id&&this.closeFeedback()},this.after("initialize",function(){this.$b2cFeedback=this.select("feedbackSelector"),this.$feedbackIframe=this.select("feedbackPageFrameSelector"),this.on("uiB2CCloseFeedbackAnchor uiDMDialogClearActions",this.closeFeedback),this.on("uiB2CFeedbackPostError",this.handleFeedbackError),this.on("uiB2CTweetBtnClicked",this.handleFeedbackTweetBtnClick),this.on("uiB2CFeedbackUpdateView",this.handleFeedbackUpdateView),this.on("uiDMConversationUpdated",this.updateFeedbackPanel),this.on("uiDMMesageDeleted",this.closeFeedbackPanelWithId),this.on(window,"message",this.resizeIframe),this.on(window,"message",this.proxyIframeEvents),this.on("click",{feedbackDismissSelector:this.dismissFeedback})})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(175),l=s(r),c=i(173),d=s(c),u=i(123),h=(s(u),(0,a.default)(n,l.default,d.default));e.default=h}).call(e,i(10))},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({deleteSelector:".DMDeleteMessageAction",reportSelector:".DMReportMessageAction"}),this.hideMessage=function(t,e){if("not_spam"!==e.report_as){this.hiddenMessages=this.hiddenMessages||{};var i=".DMConversation [data-message-id='"+e.id+"'] {display: none !important;}";this.hiddenMessages[e.id]=this.insertCSSRule(this.stylesheet,i)}},this.unhideMessage=function(t,e){this.hiddenMessages=this.hiddenMessages||{};var i=this.hiddenMessages[e.id];null!=i&&this.removeCSSRule(this.stylesheet,i)},this.messageAction=function(e,i){var s=t(i.target);this.trigger(e,{messageId:s.closest("[data-message-id]").attr("data-message-id"),senderId:s.closest("[data-sender-id]").attr("data-sender-id"),conversationId:s.closest("[data-thread-id]").attr("data-thread-id"),is_group:!s.closest("[data-is-oto]").data("is-oto")})},this.after("initialize",function(){this.stylesheet=this.createStyleSheet("hidden-dms"),this.on("uiDMDialogReportDM uiDMDialogDeleteMessage",this.hideMessage),this.on("dataDMDeleteFailed dataDMReportFailed",this.unhideMessage);var t=void 0;t=d.default.getDecider("dm_report_webview_macaw_swift_enabled")?"uiDMLaunchDMReportWebView":"uiShowDMReportMessageConfirmation",this.on("click",{deleteSelector:this.messageAction.bind(this,"uiShowDMDeleteMessageConfirmation"),reportSelector:this.messageAction.bind(this,t)})})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(468),l=s(r),c=i(136),d=s(c),u=(0,a.default)(n,l.default);e.default=u}).call(e,i(10))},function(t,e){"use strict";function i(){this.createStyleSheet=function(t){var e=document.createElement("style");return e.type="text/css",t&&(e.id=t),document.getElementsByTagName("head")[0].appendChild(e),e.sheet||new s},this.rules=function(t){return t.cssRules?t.cssRules:t.rules},this.insertCSSRule=function(t,e){return t.insertRule(e,this.rules(t).length)},this.removeCSSRule=function(t,e){t.deleteRule(e)}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var s=function(){function t(){this.cssRules=[]}return t.prototype.insertRule=function(t,e){return this.cssRules[e]={cssText:t},e},t.prototype.deleteRule=function(t){delete this.cssRules[t],this.cssRules=this.cssRules.filter(function(t){return null!=t})},t}()},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.attributes({notice:".DMMuteNotifications",cancel:".DMMuteNotifications-cancel",muteConfirmation:".DMMuteNotifications-mute"}),this.showConfirmation=function(){this.select("notice").trigger("uiShowDMNotice")},this.hideConfirmation=function(){this.select("notice").trigger("uiDismissDMNotice")},this.muteNotifications=function(e){var i=t(e.target),s=i.data("mute-duration");this.trigger("uiToggleNotifications",{conversation_id:this.conversationId,enable_notifications:!1,mute_duration:s}),this.hideConfirmation()},this.updateCurrentConversation=function(t,e){this.conversationId=e.conversation_id},this.after("initialize",function(){this.on("uiShowDMMuteNotificationsConfirmation",this.showConfirmation),this.on(document,"uiRenderConversationView",this.updateCurrentConversation),this.on("click",{muteConfirmation:this.muteNotifications,cancel:this.hideConfirmation})})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=(0,a.default)(n);e.default=r}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.attributes({notice:".DMReportConversation",abuseConfirmation:".DMReportConversation-abuse",spamConfirmation:".DMReportConversation-spam",cancel:".DMReportConversation-cancel",messageContainer:".DMReportConversation-message"}),this.showConfirmation=function(t,e){var i=e&&e.is_group,s=(0,l.default)("The conversation will be deleted from your inbox, and @{{reported_user_screen_name}} cannot message you until you message them first.",{reported_user_screen_name:e.report_screen_name}),n="The conversation will be deleted from your inbox, and you cannot be added to this group again.",o=i?n:s;this.select("messageContainer").text(o),this.select("notice").trigger("uiShowDMNotice")},this.hideConfirmation=function(){this.select("notice").trigger("uiDismissDMNotice")},this.state=function(t,e){return this._state=e||this._state||{},this._state},this.reportConversation=function(t){var e=this.state();this.trigger("uiReportConversation",{conversation_id:e.conversation_id,report_as:t});var i="Marked as spam",s=(0,l.default)("Report sent. @{{screen_name}} can no longer message you.",{screen_name:e.report_screen_name}),n="Marked as abusive. You cannot be added to this group again.",o=e.is_group?n:s,a="spam"===t?i:o;this.hideConfirmation(),this.trigger("uiDMShowToast",{message:a}),this.trigger("uiDMInboxWantsRefreshed")},this.launchReportingWebview=function(t,e){var i={userId:e.reported_user_id,reportedDirectMessageConversationId:e.conversation_id,target:"dm-conversation"};this.trigger("uiNeedsReportDialog",i);
},this.after("initialize",function(){this.on("uiDMLaunchConversationReportWebView",this.launchReportingWebview),this.on("uiShowDMReportConversationConfirmation",this.state),this.on("uiShowDMReportConversationConfirmation",this.showConfirmation),this.on("click",{abuseConfirmation:this.reportConversation.bind(this,"abuse"),spamConfirmation:this.reportConversation.bind(this,"spam"),cancel:this.hideConfirmation})})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(123),l=s(r),c=(0,a.default)(n);e.default=c},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.attributes({notice:".DMReportMessage",abuseConfirmation:".DMReportMessage-abuse",spamConfirmation:".DMReportMessage-spam",cancel:".DMReportMessage-cancel"}),this.showConfirmation=function(){this.select("notice").trigger("uiShowDMNotice")},this.hideConfirmation=function(){this.select("notice").trigger("uiDismissDMNotice")},this.state=function(t,e){return this._state=e||this._state||{},this._state},this.reportMessage=function(t){var e=this.state();this.trigger("uiDMDialogReportDM",{id:e.messageId,conversation_id:e.conversationId,report_as:t});var i="Marked as spam",s="Report sent. The message has been deleted from your conversation view.",n="Marked as abusive. The message has been deleted from your conversation view.",o=e.is_group?n:s,a="spam"===t?i:o;this.hideConfirmation(),this.trigger("uiDMShowToast",{message:a}),this.trigger("uiDMInboxWantsRefreshed")},this.launchReportingWebview=function(t,e){var i={reportedDirectMessageConversationId:e.conversationId,reportedDirectMessageId:e.messageId,userId:e.senderId,target:"dm-conversation"};this.trigger("uiNeedsReportDialog",i)},this.after("initialize",function(){this.on("uiDMLaunchDMReportWebView",this.launchReportingWebview),this.on("uiShowDMReportMessageConfirmation",this.state),this.on("uiShowDMReportMessageConfirmation",this.showConfirmation),this.on("click",{abuseConfirmation:this.reportMessage.bind(this,"abuse"),spamConfirmation:this.reportMessage.bind(this,"spam"),cancel:this.hideConfirmation})})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(123),l=(s(r),(0,a.default)(n));e.default=l},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.attributes({allowRetryClass:"is-retryAllowed",allowCopyClass:"is-copyAllowed",cancel:".DMResendMessage-cancel",confirm:".DMResendMessage-confirm",copy:".DMResendMessage-copy",customErrorMessage:".DMResendMessage-customErrorMessage",dismiss:".DMResendMessage .DMNotice-dismiss",hasMessageTextClass:"has-messageText",messageText:".DMResendMessage-messageText",messageTextContainer:".DMResendMessage-messageTextContainer",messageTextCopyContainer:".DMResendMessage-messageCopyContainer",notice:".DMResendMessage",copyConfirmation:".DMCopyConfirmation"}),this.resendableImageErrors=[l.default.INTERNAL_ERROR,l.default.RATE_LIMIT,l.default.TIMEOUT],this.isRetryAllowed=function(t){return"media_upload"===t.type?!t.code||this.resendableImageErrors.indexOf(t.code)!==-1:"message_send"===t.type?!t.code||"500"===String(t.code):void 0},this.showConfirmation=function(t,e){var i=e.error||{},s=i.message,n=e.text||"",o=this.isRetryAllowed(i),a=!!n,r=this.isCopySupported()&&a;this.resendId=e.resend_id,this.select("messageText").text(n),this.select("messageTextCopyContainer").val(n),this.select("customErrorMessage").html(s),this.select("notice").toggleClass(this.attr.allowRetryClass,o).toggleClass(this.attr.allowCopyClass,r).toggleClass(this.attr.hasMessageTextClass,a),this.select("notice").trigger("uiShowDMNotice")},this.hideConfirmation=function(){this.trigger("uiDMResendDiscard",{resend_id:this.resendId}),this.select("notice").trigger("uiDismissDMNotice"),this.resendId=void 0},this.resendConfirmation=function(){this.select("notice").trigger("uiDismissDMNotice"),this.trigger("uiDMResendConfirm",{resend_id:this.resendId})},this.isCopySupported=function(){var t=!0;try{t=document.queryCommandSupported("copy")}catch(e){t=!1}return t},this.copyMessageToClipboard=function(){this.isCopySupported()&&document.execCommand&&(this.select("messageTextCopyContainer").select(),document.execCommand("copy"))},this.handleCopy=function(t,e){this.copyMessageToClipboard(),this.hideConfirmation(),this.trigger("uiDMShowToast",{message:"Message text copied to clipboard"})},this.after("initialize",function(){this.on("dataDMSendFailed",this.showConfirmation),this.on("click",{confirm:this.resendConfirmation,cancel:this.hideConfirmation,dismiss:this.hideConfirmation,copy:this.handleCopy})})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(473),l=s(r),c=i(123),d=(s(c),(0,a.default)(n));e.default=d},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={FILE_TOO_LARGE:2,INTERNAL_ERROR:131,INVALID_MEDIA:1,RATE_LIMIT:88,TIMEOUT:67,UNSUPPORTED_MEDIA:3,ZERO_FILE_LENGTH:4}},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({mediaNotDisplayedSelector:".Tombstone",displayMediaSelector:".js-display-this-media",mediaContainerSelector:".js-media-container, .AdaptiveMedia, .js-old-media-container",tweetSelector:".tweet",hiddenClass:"u-hidden"}),this.showMedia=function(t){t=t||this.$node,t.find(this.attr.mediaNotDisplayedSelector).slideUp(100),t.find(this.attr.mediaContainerSelector).removeClass(this.attr.hiddenClass).slideDown(100)},this.showLimitedMedia=function(e){e.stopImmediatePropagation();var i=t(e.target).closest(this.attr.tweetSelector);this.trigger("uiShowLimitedMedia"),this.showMedia(i)},this.showAllMedia=function(e,i){this.showMedia(t(e.target))},this.after("initialize",function(){this.on("click",{displayMediaSelector:this.showLimitedMedia}),this.on("uiShowAllMedia",this.showAllMedia)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o);e.default=(0,a.default)(n)}).call(e,i(10))},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({warningSelector:".suspicious-content-warning",messageSelector:".dm",conversationSelector:".js-dm-conversation",reportButtonsSelector:".suspicious-content-response",reportAsSpamSelector:".js-message-is-spam",reportAsSafeSelector:".js-message-is-safe"}),this.showMessage=function(e,i){e.preventDefault();var s=t(e.target),n=s.prev(this.attr.messageSelector);s.hide(),n.show()},this.reportMessage=function(e,i,s){var n=t(i.target),o=n.closest(this.attr.messageSelector).attr("data-message-id"),a=n.closest(this.attr.conversationSelector).attr("data-thread-id");this.trigger("uiDMDialogReportDM",{id:o,conversation_id:a,report_as:e}),this.select("reportButtonsSelector").hide(),this.trigger("uiDMInboxWantsRefreshed")},this.after("initialize",function(){this.on("uiRevealSuspiciousDM",this.showMessage),this.on("uiReportDMAsSpam",this.reportMessage.bind(this,"spam")),this.on("uiReportDMAsSafe",this.reportMessage.bind(this,"not_spam")),this.on("click",{warningSelector:"uiRevealSuspiciousDM",reportAsSpamSelector:"uiReportDMAsSpam",reportAsSafeSelector:"uiReportDMAsSafe"})})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=(0,a.default)(n);e.default=r}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({sharedTweetSelector:".DirectMessage-tweet"}),this.openSharedTweet=function(t,e){this.trigger("uiDMDialogSharedTweetClick")},this.after("initialize",function(){this.on("click",{sharedTweetSelector:this.openSharedTweet})})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(477),l=s(r),c=(0,a.default)(n,l.default);e.default=c},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({jsMediaPreviewSelector:".js-media-preview",jsTweetSelector:".js-stream-tweet",jsLinkSelector:".js-link",jsPermalinkSelector:".js-permalink",jsDetailsLinkSelector:".js-details",jsAdaptivePhotoSelector:".js-adaptive-photo",playableMediaPlayerSelector:".PlayableMedia-player",quoteTweetSelector:".QuoteTweet-container",quoteTweetClass:"QuoteTweet-container",quoteTweetInnerSelector:".QuoteTweet-innerContainer",pushState:!0,expandoHandleSelector:".js-open-close-tweet span",dropdownSelector:".ProfileTweet-action .dropdown-menu",withheldTweetClass:"withheld-tweet",profileTweetActionButtonSelector:".js-actionButton",profileTweetActionCountSelector:".js-actionCount",jsTweetTextContainer:".js-tweet-text-container",jsExpandedTweetTextSelector:".js-expanded-tweet-text",jsTweetText:".js-tweet-text",newWindowClass:"js-new-window"}),this.shouldNavigateToPermalink=function(t){return this.attr.isMobile||this.isQuoteTweet(t)},this.isQuoteTweet=function(t){return t.hasClass(this.attr.quoteTweetClass)},this.handleMediaPreviewClick=function(e,i){var s=t(i.el),n=s.closest(this.attr.jsTweetSelector);this.shouldExpandWhenTargetIs(t(e.target),n)&&(e.preventDefault(),e.stopPropagation(),this.handleClick(e,n,!0))},this.handleQuoteTweetClick=function(t){var e=t.closest("[data-tweet-id]").attr("data-tweet-id"),i=t.find(this.attr.quoteTweetInnerSelector).attr("data-item-id"),s=[{id:e,item_type:u.default.tweet},{id:i,item_type:u.default.quotedTweet}];this.trigger("uiQuoteTweetClick",{items:s})},this.handleTweetClick=function(e,i){var s=t(i.el);this.isQuoteTweet(s)&&this.handleQuoteTweetClick(s),this.shouldExpandWhenTargetIs(t(e.target),s)&&(e.preventDefault(),e.stopPropagation(),this.handleClick(e,s,!1))},this.handleClick=function(t,e,i){var s=e.hasClass(this.attr.quoteTweetClass),n=e.find(this.attr.jsPermalinkSelector),a=s?n.attr("href"):e.data("permalink-path"),r=s?n.data("conversation-id"):e.data("conversation-id"),l=e.closest("[data-impression-id]"),c={impressionId:l.attr("data-impression-id"),disclosureType:l.attr("data-disclosure-type"),impressionCookie:l.attr("data-impression-cookie"),href:a,conversation_id:r};!i&&this.shouldNavigateToPermalink(e)&&this.setImpressionCookieOnProfileTweet(e),e.trigger("uiHasClickedTweet",o({},c,{organicExpansion:!0})),this.modifierKey(t)||n.length&&(n.attr("target")||n.hasClass(this.attr.newWindowClass))?this.openNewTab(a):this.trigger("uiNavigate",c)},this.openNewTab=function(t){var e=window.open(t,"_blank");e.opener=null},this.setImpressionCookieOnProfileTweet=function(t){if(t.hasClass("profile-promoted-tweet")){var e=t.closest("[data-impression-cookie]").attr("data-impression-cookie");if(e){var i=new Date,s=1e4,n=new Date(i.getTime()+s);this.setCookie(e,n)}}},this.shouldExpandWhenTargetIs=function(t,e){return!this.selectedText()&&!e.hasClass(this.attr.withheldTweetClass)&&(this.targetIsWhitelistedToExpandTweet(t,e)||!this.targetIsBlacklistedToExpandTweet(t,e))},this.targetIsWhitelistedToExpandTweet=function(t,e){var i=[this.attr.expandoHandleSelector,this.attr.jsDetailsLinkSelector,this.attr.jsMediaPreviewSelector,this.attr.quoteTweetSelector];return t.closest(i.join(),e).length>0},this.targetIsBlacklistedToExpandTweet=function(t,e){var i=["a","button",this.attr.jsLinkSelector,this.attr.dropdownSelector,this.attr.jsAdaptivePhotoSelector,this.attr.playableMediaPlayerSelector];return t.closest(i.join(),e).length},this.selectedText=function(){return r.default.getSelection()},this.modifierKey=function(t){return t.shiftKey||t.ctrlKey||t.metaKey||t.which>1},this.preventFocusOnClick=function(t){t.preventDefault()},this.setCookie=function(t,e){(0,c.default)("ic",t,{expires:e})},this.after("initialize",function(){this.on("click",{jsMediaPreviewSelector:this.handleMediaPreviewClick,quoteTweetSelector:this.handleTweetClick,jsTweetSelector:this.handleTweetClick}),this.on("uiShortcutEnter",{quoteTweetSelector:this.handleTweetClick}),this.on("mousedown",{profileTweetActionButtonSelector:this.preventFocusOnClick,profileTweetActionCountSelector:this.preventFocusOnClick,quoteTweetSelector:this.preventFocusOnClick})})}Object.defineProperty(e,"__esModule",{value:!0});var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t};e.default=n;var a=i(229),r=s(a),l=i(154),c=s(l),d=i(144),u=s(d)}).call(e,i(10))},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({ctaLocationQRSelector:".js-locationQR-cta",ctaWebUrlSelector:".js-webUrl-cta",ctaViewSelector:".DMCtaView",convoContentSelector:".DMConversation-content"}),this.getJsonData=function(e){return t(e.target).closest(this.attr.ctaViewSelector).data("cta-json")},this.handleWebUrlClick=function(t){this.scribe(d)},this.handleLocationQRClick=function(t){t.preventDefault();var e=this.getJsonData(t),i=this.select("convoContentSelector").data("thread-id");e&&e.id&&i&&this.trigger("uiLocationQRCtaClicked",{qr_id:e.id,conversation_id:i})},this.after("initialize",function(){this.on("click",{ctaLocationQRSelector:this.handleLocationQRClick,ctaWebUrlSelector:this.handleWebUrlClick})})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(142),l=s(r),c=(0,a.default)(n,l.default),d={page:"messages",section:"thread",element:"cta_dm",action:"click"};e.default=c}).call(e,i(10))},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({locationAttachmentSelector:".DMLocationAttachment",expandedMapUriData:"expanded-url",headerSelector:".DMLocationAttachment-textHeader",bylineSelector:".DMLocationAttachment-byline",headerTextData:"header-text",bylineTextData:"byline-text"}),this.getClosestExpandedMapUri=function(t){return t.closest(this.attr.locationAttachmentSelector).data(this.attr.expandedMapUriData)},this.handleClick=function(e,i){e.preventDefault();var s=t(e.target),n=s.closest(this.attr.locationAttachmentSelector),o=this.getClosestExpandedMapUri(s),a=n.find(this.attr.headerSelector).data(this.attr.headerTextData),r=n.find(this.attr.bylineSelector).data(this.attr.bylineTextData);o&&this.trigger("uiLocationAttachmentClicked",{src:o,blackLine:a,grayLine:r})},this.after("initialize",function(){this.on("click",{locationAttachmentSelector:this.handleClick})})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=(0,a.default)(n);e.default=r}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.attributes({avatarSelector:".DMUpdateAvatar-avatar",popoverSelector:".DMPopover",popoverContentSelector:".DMPopover-content",viewAvatarSelector:".DMUpdateAvatar-view",removeAvatarSelector:".DMUpdateAvatar-remove",changeAvatarSelector:".DMUpdateAvatar-change",spinnerClass:"DMSpinner",fileDataSelector:"input.file-data",fileDataString:"media_data[]",emptyFileDataString:"media_data_empty",fileInputString:"media[]",emptyFileInputString:"media_empty",fileNameSelector:"input.file-name",fileNameString:"media_file_name",fileSelector:"input.file-input",gifSupport:!1,videoSupport:!1,shouldInterceptTab:!1}),this.resetAvatar=function(t,e){this.avatarHTML=void 0,this.fullSizeUrl=void 0,this.conversationId=void 0,this.customAvatar=!1,this.editAllowed=!1,this.isLoading=!1},this.updateAvatar=function(t,e){e&&e.html&&this.avatarHTML===e.html||(this.avatarHTML=e.html,this.fullSizeUrl=e.full_size_url,this.conversationId=e.conversation_id,this.customAvatar=e.is_custom,this.editAllowed=e.is_oto===!1,this.isLoading=!1)},this.showAvatar=function(){this.fullSizeUrl&&this.trigger("uiDMDialogMediaPreview",{imgUrl:this.fullSizeUrl})},this.removeAvatar=function(){this.isLoading=!0,this.trigger("uiDMRemoveConversationAvatar",{conversation_id:this.conversationId})},this.changeAvatar=function(){this.select("fileSelector").click()},this.handleFileSelected=function(t,e){t.preventDefault(),this.reset(),this.isLoading=!0;var i=e.fileId;this.beginSru(i),this.trigger("uiDMUpdateConversationAvatar",{conversation_id:this.conversationId,fileId:i})},this.updateFailed=function(){this.isLoading=!1},this.addFileError=function(t){var e=(0,l.default)(t);e&&this.trigger("uiShowError",{message:e}),this.updateFailed()},this.toggleSpinner=function(t){this.$avatar.toggleClass(this.attr.spinnerClass,t)},this.disablePopover=function(){this.select("popoverSelector").trigger("uiDisableDMPopover")},this.enablePopover=function(){this.select("popoverSelector").trigger("uiEnableDMPopover")},this.render=function(){this.isLoading?(this.$avatar.empty(),this.toggleSpinner(!0),this.disablePopover()):(this.avatarHTML?this.$avatar.html(this.avatarHTML):this.$avatar.empty(),this.toggleSpinner(!1),this.editAllowed?this.enablePopover():this.disablePopover(),this.$node.attr("data-has-custom-avatar",this.customAvatar))},this.after("resetAvatar",this.render),this.after("updateAvatar",this.render),this.after("removeAvatar",this.render),this.after("handleFileSelected",this.render),this.after("updateFailed",this.render),this.after("initialize",function(){this.$avatar=this.select("avatarSelector"),this.on("uiDMResetConversationAvatar",this.resetAvatar),this.on("uiDMSetConversationAvatar",this.updateAvatar),this.on("uiFileSelected",this.handleFileSelected),this.on("dataDMUpdateConversationAvatarFailed dataDMRemoveConversationAvatarFailed",this.updateFailed),this.on("click",{viewAvatarSelector:this.showAvatar,changeAvatarSelector:this.changeAvatar,removeAvatarSelector:this.removeAvatar,popoverContentSelector:"uiCloseDropdowns"})})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(406),l=s(r),c=i(407),d=s(c);e.default=(0,a.default)(n,d.default)},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.attributes({maxCharacters:20,conversationIdSelector:"[data-thread-id]",displayedHeaderSelector:".DMUpdateName-header",displayedNameSelector:".DMUpdateName-name",beginEditModeSelector:".DMUpdateName-name.edit-allowed",confirmButtonSelector:".DMUpdateName-confirm",inputGroupSelector:".DMUpdateName-form",spinnerSelector:".DMUpdateName-spinner",dmUpdateNameSelector:".DMUpdateName",displayedScreenNameSelector:".DMUpdateName-screenName",textSelector:".DMUpdateName-input",updateNameContainerSelector:".DMUpdateName-controls",verifiedBadgeSelector:".js-verified",protectedBadgeSelector:".js-protected",isRichHeaderClass:"is-richHeader",hiddenClass:"u-hidden",legacyHiddenClass:"hidden",invalidInputClass:"is-invalid"}),this.getConversationId=function(){return this.select("conversationIdSelector").attr("data-thread-id")},this.getCurrentName=function(){return this.select("displayedNameSelector").data("raw-name")},this.handleCommandInputs=function(t,e){switch(t.keyCode){case f.default.ESC:t.stopPropagation(),this.hideEditMode();break;case f.default.ENTER:t.stopPropagation(),this.requestUpdateConversationName(t)}},this.showEditMode=function(){this.select("displayedHeaderSelector").addClass(this.attr.hiddenClass),this.select("inputGroupSelector").removeClass(this.attr.hiddenClass),this.select("textSelector").focus().val(this.getCurrentName()),this.inEditMode=!0},this.hideEditMode=function(t,e){this.select("displayedHeaderSelector").removeClass(this.attr.hiddenClass),this.select("inputGroupSelector").addClass(this.attr.hiddenClass),this.inEditMode=!1},this.showSpinner=function(){this.select("textSelector").unbind("blur"),this.hideEditMode(),this.select("displayedHeaderSelector").addClass(this.attr.hiddenClass),this.select("spinnerSelector").removeClass(this.attr.hiddenClass)},this.hideSpinner=function(){this.on(this.attr.textSelector,"blur",this.hideEditMode),this.hideEditMode(),this.select("spinnerSelector").addClass(this.attr.hiddenClass),this.select("displayedHeaderSelector").removeClass(this.attr.hiddenClass)},this.requestUpdateConversationName=function(e){var i=t(e.target.closest(this.attr.dmUpdateNameSelector));if(!i.find(this.attr.inputGroupSelector).hasClass(this.attr.invalidInputClass)){var s=i.find(this.attr.textSelector).val();this.trigger("uiUpdateConversationName",{conversation_id:this.getConversationId(),name:s}),this.showSpinner()}},this.updateDisplayedName=function(t,e){this.select("displayedNameSelector").html(e.conversation.title.html),this.hideSpinner()},this.prepareUpdateNameUI=function(t,e){"undefined"==typeof e.is_oto||e.is_oto?(this.hideSpinner(),this.select("updateNameContainerSelector").addClass(this.attr.hiddenClass),this.select("displayedNameSelector").removeClass("edit-allowed js-tooltip").removeAttr("title")):this.inEditMode||(this.hideSpinner(),this.select("updateNameContainerSelector").removeClass(this.attr.hiddenClass),this.select("displayedNameSelector").attr("title","Click to edit group name").addClass("edit-allowed js-tooltip"))},this.handleInputChange=function(t,e){var i=c.default.getTweetLength(e.text)>this.attr.maxCharacters;this.select("inputGroupSelector").toggleClass(this.attr.invalidInputClass,i)},this.detectInputChange=function(){var t=this.select("textSelector").val();this.previousText!==t&&(this.trigger("uiTextChanged",{text:t}),this.previousText=t)},this.clearRichHeaderState=function(){this.$dmUpdateName.removeClass(this.attr.isRichHeaderClass),this.select("verifiedBadgeSelector").addClass(this.attr.legacyHiddenClass),this.select("protectedBadgeSelector").addClass(this.attr.legacyHiddenClass)},this.setRichHeaderState=function(t,e){this.$dmUpdateName.addClass(this.attr.isRichHeaderClass),this.select("verifiedBadgeSelector").toggleClass(this.attr.legacyHiddenClass,!e.is_verified),this.select("protectedBadgeSelector").toggleClass(this.attr.legacyHiddenClass,!e.protected),this.$displayedScreenName.text("@"+e.screen_name)},this.after("initialize",function(){this.$dmUpdateName=this.select("dmUpdateNameSelector"),this.$displayedScreenName=this.select("displayedScreenNameSelector"),this.on("click",{beginEditModeSelector:this.showEditMode}),this.on("mousedown",{confirmButtonSelector:this.requestUpdateConversationName}),this.on(this.attr.textSelector,"blur",this.hideEditMode),this.on(this.attr.textSelector,"keydown",this.handleCommandInputs),this.on("uiEditConversationName",this.showEditMode),this.on("uiUpdateConversationType",this.prepareUpdateNameUI),this.on("dataUpdateConversationNameSuccess",this.updateDisplayedName),this.on("dataUpdateConversationNameFailure",this.hideSpinner),this.on("uiTextChanged",this.handleInputChange),this.on("uiInputPoll",this.detectInputChange),this.on("uiClearRichHeaderState",this.clearRichHeaderState),this.on("uiSetRichHeaderState",this.setRichHeaderState),u.default.attachTo(this.select("textSelector"))})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(123),a=(s(o),i(111)),r=s(a),l=i(234),c=s(l),d=i(230),u=s(d),h=i(359),f=s(h),p=(0,r.default)(n);e.default=p}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.attributes({markerSelector:".DMConversation-lastReadMarker",messageIdAttr:"data-message-id",receivedMessagesSelector:".DirectMessage--received",scrollContainerSelector:".DMConversation-scrollContainer"}),this.removeMarker=function(){this.select("markerSelector").slideUp({duration:350})},this.applyMarker=function(t){var e=this.findLastReadNode(t),i=e.nextAll().filter(this.attr.receivedMessagesSelector),s=i.first(),n=!!s.length;if(n){s.prev().removeClass("is-rapidFire");var o=i.length,r={unread_count:o};r["unread_count_"+a.default.PluralRules.rule_for(i.length)]=!0,s.before(l.default.render(r));var c=s.prop("offsetTop")-.33*this.$scrollContainer.height();this.$scrollContainer.scrollTop(c)}},this.findLastReadNode=function(t){return this.$node.find("["+this.attr.messageIdAttr+"="+t+"]")},this.after("initialize",function(){this.$scrollContainer=this.select("scrollContainerSelector")})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(483),a=s(o),r=i(484),l=s(r);e.default=n},function(t,e){(function(){var t,i,s,n,o={}.hasOwnProperty,a=function(t,e){function i(){this.constructor=t}for(var s in e)o.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t={},t.is_rtl=!1,t.locale="en",t.Utilities=function(){function t(){}return t.from_char_code=function(t){return t>65535?(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t))):String.fromCharCode(t)},t.char_code_at=function(t,e){var i,s,n,o,a,r;for(t+="",s=t.length,r=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g;null!==r.exec(t)&&(o=r.lastIndex,o-2<e);)e+=1;return e>=s||e<0?NaN:(i=t.charCodeAt(e),55296<=i&&i<=56319?(n=i,a=t.charCodeAt(e+1),1024*(n-55296)+(a-56320)+65536):i)},t.unpack_string=function(t){var e,i,s,n,o;for(s=[],i=n=0,o=t.length;(0<=o?n<o:n>o)&&(e=this.char_code_at(t,i),e);i=0<=o?++n:--n)s.push(e);return s},t.pack_array=function(t){var e;return function(){var i,s,n;for(n=[],i=0,s=t.length;i<s;i++)e=t[i],n.push(this.from_char_code(e));return n}.call(this).join("")},t.arraycopy=function(t,e,i,s,n){var o,a,r,l,c;for(c=t.slice(e,e+n),o=r=0,l=c.length;r<l;o=++r)a=c[o],i[s+o]=a},t.max=function(t){var e,i,s,n,o,a,r,l;for(s=null,n=o=0,r=t.length;o<r;n=++o)if(e=t[n],null!=e){s=e;break}for(i=a=n,l=t.length;n<=l?a<=l:a>=l;i=n<=l?++a:--a)t[i]>s&&(s=t[i]);return s},t.min=function(t){var e,i,s,n,o,a,r,l;for(s=null,n=o=0,r=t.length;o<r;n=++o)if(e=t[n],null!=e){s=e;break}for(i=a=n,l=t.length;n<=l?a<=l:a>=l;i=n<=l?++a:--a)t[i]<s&&(s=t[i]);return s},t.is_even=function(t){return t%2===0},t.is_odd=function(t){return t%2===1},t.remove_duplicates=function(t){return t.reduce(function(t,e){return t.indexOf(e)<0&&t.push(e),t},[])},t.regex_escape=function(t){return t.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")},t.trim_string=function(t){return t.replace(/^\s+|\s+$/g,"")},t.clone=function(t){var e,i,s;if(null==t||"object"!=typeof t)return t;if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp)return e="",null!=t.global&&(e+="g"),null!=t.ignoreCase&&(e+="i"),null!=t.multiline&&(e+="m"),null!=t.sticky&&(e+="y"),new RegExp(t.source,e);s=new t.constructor;for(i in t)s[i]=this.clone(t[i]);return s},t.compute_cache_key=function(t){return null!=t&&t.length>0?t.join("|"):null},t.traverse_object=function(t,e){var i,s,n,o;if(s=t,0===e.length)return null;for(n=0,o=e.length;n<o;n++){if(i=e[n],null==s||!s.hasOwnProperty(i))return null;s=s[i]}return s},t}(),t.TimespanFormatter=function(){function e(){this.approximate_multiplier=.75,this.default_type="default",this.patterns={ago:{second:{"default":{one:"{0} second ago",other:"{0} seconds ago"}},minute:{"default":{one:"{0} minute ago",other:"{0} minutes ago"}},hour:{"default":{one:"{0} hour ago",other:"{0} hours ago"}},day:{"default":{one:"{0} day ago",other:"{0} days ago"}},week:{"default":{one:"{0} week ago",other:"{0} weeks ago"}},month:{"default":{one:"{0} month ago",other:"{0} months ago"}},year:{"default":{one:"{0} year ago",other:"{0} years ago"}}},until:{second:{"default":{one:"In {0} second",other:"In {0} seconds"}},minute:{"default":{one:"In {0} minute",other:"In {0} minutes"}},hour:{"default":{one:"In {0} hour",other:"In {0} hours"}},day:{"default":{one:"In {0} day",other:"In {0} days"}},week:{"default":{one:"In {0} week",other:"In {0} weeks"}},month:{"default":{one:"In {0} month",other:"In {0} months"}},year:{"default":{one:"In {0} year",other:"In {0} years"}}},none:{second:{"default":{one:"{0} second",other:"{0} seconds"},"short":{one:"{0} sec",other:"{0} secs"},abbreviated:{one:"{0}s",other:"{0}s"}},minute:{"default":{one:"{0} minute",other:"{0} minutes"},"short":{one:"{0} min",other:"{0} mins"},abbreviated:{one:"{0}m",other:"{0}m"}},hour:{"default":{one:"{0} hour",other:"{0} hours"},"short":{one:"{0} hr",other:"{0} hrs"},abbreviated:{one:"{0}h",other:"{0}h"}},day:{"default":{one:"{0} day",other:"{0} days"},"short":{one:"{0} day",other:"{0} days"},abbreviated:{one:"{0}d",other:"{0}d"}},week:{"default":{one:"{0} week",other:"{0} weeks"},"short":{one:"{0} wk",other:"{0} wks"}},month:{"default":{one:"{0} month",other:"{0} months"},"short":{one:"{0} mth",other:"{0} mths"}},year:{"default":{one:"{0} year",other:"{0} years"},"short":{one:"{0} yr",other:"{0} yrs"}}}},this.time_in_seconds={second:1,minute:60,hour:3600,day:86400,week:604800,month:2629743.83,year:31556926}}return e.prototype.format=function(e,i){var s,n,o,a;null==i&&(i={}),a={};for(s in i)o=i[s],a[s]=o;return a.direction||(a.direction=e<0?"ago":"until"),null!==a.unit&&void 0!==a.unit||(a.unit=this.calculate_unit(Math.abs(e),a)),a.type||(a.type=this.default_type),a.number=this.calculate_time(Math.abs(e),a.unit),n=this.calculate_time(Math.abs(e),a.unit),a.rule=t.PluralRules.rule_for(n),this.patterns[a.direction][a.unit][a.type][a.rule].replace(/\{[0-9]\}/,n.toString())},e.prototype.calculate_unit=function(t,e){var i,s,n,o;null==e&&(e={}),o={};for(i in e)n=e[i],o[i]=n;return null==o.approximate&&(o.approximate=!1),s=o.approximate?this.approximate_multiplier:1,t<this.time_in_seconds.minute*s?"second":t<this.time_in_seconds.hour*s?"minute":t<this.time_in_seconds.day*s?"hour":t<this.time_in_seconds.week*s?"day":t<this.time_in_seconds.month*s?"week":t<this.time_in_seconds.year*s?"month":"year"},e.prototype.calculate_time=function(t,e){return Math.round(t/this.time_in_seconds[e])},e}(),t.NumberFormatter=function(){function e(){this.tokens=[],this.default_symbols={group:",",decimal:".",plus_sign:"+",minus_sign:"-"}}return e.all_tokens={"default":{positive:["","#,##0.###"],negative:["-","#,##0.###"]},decimal:{positive:["","#,##0.###"],negative:["-","#,##0.###"]},long_decimal:{positive:{1000:{one:["","0"," thousand"],other:["","0"," thousand"]},10000:{one:["","00"," thousand"],other:["","00"," thousand"]},100000:{one:["","000"," thousand"],other:["","000"," thousand"]},1000000:{one:["","0"," million"],other:["","0"," million"]},10000000:{one:["","00"," million"],other:["","00"," million"]},100000000:{one:["","000"," million"],other:["","000"," million"]},1000000000:{one:["","0"," billion"],other:["","0"," billion"]},10000000000:{one:["","00"," billion"],other:["","00"," billion"]},100000000000:{one:["","000"," billion"],other:["","000"," billion"]},1000000000000:{one:["","0"," trillion"],other:["","0"," trillion"]},10000000000000:{one:["","00"," trillion"],other:["","00"," trillion"]},100000000000000:{one:["","000"," trillion"],other:["","000"," trillion"]}},negative:{1000:{one:["-","0"," thousand"],other:["-","0"," thousand"]},10000:{one:["-","00"," thousand"],other:["-","00"," thousand"]},100000:{one:["-","000"," thousand"],other:["-","000"," thousand"]},1000000:{one:["-","0"," million"],other:["-","0"," million"]},10000000:{one:["-","00"," million"],other:["-","00"," million"]},100000000:{one:["-","000"," million"],other:["-","000"," million"]},1000000000:{one:["-","0"," billion"],other:["-","0"," billion"]},10000000000:{one:["-","00"," billion"],other:["-","00"," billion"]},100000000000:{one:["-","000"," billion"],other:["-","000"," billion"]},1000000000000:{one:["-","0"," trillion"],other:["-","0"," trillion"]},10000000000000:{one:["-","00"," trillion"],other:["-","00"," trillion"]},100000000000000:{one:["-","000"," trillion"],other:["-","000"," trillion"]}}},short_decimal:{positive:{1000:{one:["","0","K"],other:["","0","K"]},10000:{one:["","00","K"],other:["","00","K"]},100000:{one:["","000","K"],other:["","000","K"]},1000000:{one:["","0","M"],other:["","0","M"]},10000000:{one:["","00","M"],other:["","00","M"]},100000000:{one:["","000","M"],other:["","000","M"]},1000000000:{one:["","0","B"],other:["","0","B"]},10000000000:{one:["","00","B"],other:["","00","B"]},100000000000:{one:["","000","B"],other:["","000","B"]},1000000000000:{one:["","0","T"],other:["","0","T"]},10000000000000:{one:["","00","T"],other:["","00","T"]},100000000000000:{one:["","000","T"],other:["","000","T"]}},negative:{1000:{one:["-","0","K"],other:["-","0","K"]},10000:{one:["-","00","K"],other:["-","00","K"]},100000:{one:["-","000","K"],other:["-","000","K"]},1000000:{one:["-","0","M"],other:["-","0","M"]},10000000:{one:["-","00","M"],other:["-","00","M"]},100000000:{one:["-","000","M"],other:["-","000","M"]},1000000000:{one:["-","0","B"],
other:["-","0","B"]},10000000000:{one:["-","00","B"],other:["-","00","B"]},100000000000:{one:["-","000","B"],other:["-","000","B"]},1000000000000:{one:["-","0","T"],other:["-","0","T"]},10000000000000:{one:["-","00","T"],other:["-","00","T"]},100000000000000:{one:["-","000","T"],other:["-","000","T"]}}},currency:{positive:["¤","#,##0.00"],negative:["-¤","#,##0.00"]},percent:{positive:["","#,##0","%"],negative:["-","#,##0","%"]}},e.symbols={alias:"",decimal:".",exponential:"E",group:",",infinity:"∞",list:";",minus_sign:"-",nan:"NaN",per_mille:"‰",percent_sign:"%",plus_sign:"+",superscripting_exponent:"×",time_separator:":"},e.prototype.all_tokens=function(){return t.NumberFormatter.all_tokens},e.prototype.symbols=function(){return t.NumberFormatter.symbols},e.prototype.format=function(e,i){var s,n,o,a,r,l,c,d,u,h,f,p,m,g,v,b;null==i&&(i={}),l=this.default_format_options_for(e);for(r in i)g=i[r],l[r]=null!=i[r]?i[r]:l[r];return f=this.get_tokens(e,l),null!=f?(f instanceof Array||(p=f[Object.keys(f)[0]],m=this.truncate_number(e,p[1].length),0===l.precision&&(m=Math.floor(m)),f=f[t.PluralRules.rule_for(m)]),v=this.partition_tokens(f),c=v[0],h=v[1],o=v[2],n=v[3],e=this.truncate_number(e,o.format.length),b=this.parse_number(e,l),a=b[0],s=b[1],d=o.apply(parseFloat(a),l),s&&(d+=n.apply(s,l)),u=e<0&&"-"!==c?this.symbols().minus_sign||this.default_symbols.minus_sign:"",""+c+d+h):e.toString()},e.prototype.truncate_number=function(t,e){return t},e.prototype.partition_tokens=function(e){return[e[0]||"",e[2]||"",new t.NumberFormatter.IntegerHelper(e[1],this.symbols()),new t.NumberFormatter.FractionHelper(e[1],this.symbols())]},e.prototype.parse_number=function(t,e){var i;return null==e&&(e={}),i=null!=e.precision?e.precision:this.precision_from(t),t=this.round_to(t,i),Math.abs(t).toFixed(i).split(".")},e.prototype.precision_from=function(t){var e;return e=t.toString().split("."),2===e.length?e[1].length:0},e.prototype.round_to=function(t,e){var i;return i=Math.pow(10,e),Math.round(t*i)/i},e.prototype.get_tokens=function(){throw"get_tokens() not implemented - use a derived class like PercentFormatter."},e}(),t.PercentFormatter=function(t){function e(t){null==t&&(t={}),this.default_percent_sign="%",e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.format=function(t,i){return null==i&&(i={}),e.__super__.format.call(this,t,i).replace("¤",this.symbols().percent_sign||this.default_percent_sign)},e.prototype.default_format_options_for=function(t){return{precision:0}},e.prototype.get_tokens=function(t,e){return t<0?this.all_tokens().percent.negative:this.all_tokens().percent.positive},e}(t.NumberFormatter),t.DecimalFormatter=function(e){function i(t){this.data_reader=t,i.__super__.constructor.apply(this,arguments)}return a(i,e),i.prototype.format=function(e,s){var n,o,a;null==s&&(s={});try{return o=i.__super__.format.call(this,e,s),null!=this.data_reader&&null!=s.type&&(a=t.NumberingSystems.for_name(this.data_reader.number_system_for(s.type)),null!=a&&(o=a.transliterate(o))),o}catch(r){return n=r,e}},i.prototype.default_format_options_for=function(t){return{precision:this.precision_from(t)}},i.prototype.get_tokens=function(t,e){return null==e&&(e={}),t<0?this.all_tokens().decimal.negative:this.all_tokens().decimal.positive},i}(t.NumberFormatter),t.CurrencyFormatter=function(e){function i(t){null==t&&(t={}),this.currencies_data={ADP:{digits:0,rounding:0},AFN:{digits:0,rounding:0},ALL:{digits:0,rounding:0},AMD:{digits:0,rounding:0},BHD:{digits:3,rounding:0},BIF:{digits:0,rounding:0},BYR:{digits:0,rounding:0},CAD:{digits:2,rounding:0},CHF:{digits:2,rounding:0},CLF:{digits:4,rounding:0},CLP:{digits:0,rounding:0},COP:{digits:0,rounding:0},CRC:{digits:0,rounding:0},CZK:{digits:2,rounding:0},DEFAULT:{digits:2,rounding:0},DJF:{digits:0,rounding:0},ESP:{digits:0,rounding:0},GNF:{digits:0,rounding:0},GYD:{digits:0,rounding:0},HUF:{digits:2,rounding:0},IDR:{digits:0,rounding:0},IQD:{digits:0,rounding:0},IRR:{digits:0,rounding:0},ISK:{digits:0,rounding:0},ITL:{digits:0,rounding:0},JOD:{digits:3,rounding:0},JPY:{digits:0,rounding:0},KMF:{digits:0,rounding:0},KPW:{digits:0,rounding:0},KRW:{digits:0,rounding:0},KWD:{digits:3,rounding:0},LAK:{digits:0,rounding:0},LBP:{digits:0,rounding:0},LUF:{digits:0,rounding:0},LYD:{digits:3,rounding:0},MGA:{digits:0,rounding:0},MGF:{digits:0,rounding:0},MMK:{digits:0,rounding:0},MNT:{digits:0,rounding:0},MRO:{digits:0,rounding:0},MUR:{digits:0,rounding:0},OMR:{digits:3,rounding:0},PKR:{digits:0,rounding:0},PYG:{digits:0,rounding:0},RSD:{digits:0,rounding:0},RWF:{digits:0,rounding:0},SLL:{digits:0,rounding:0},SOS:{digits:0,rounding:0},STD:{digits:0,rounding:0},SYP:{digits:0,rounding:0},TMM:{digits:0,rounding:0},TND:{digits:3,rounding:0},TRL:{digits:0,rounding:0},TWD:{digits:2,rounding:0},TZS:{digits:0,rounding:0},UGX:{digits:0,rounding:0},UYI:{digits:0,rounding:0},UZS:{digits:0,rounding:0},VND:{digits:0,rounding:0},VUV:{digits:0,rounding:0},XAF:{digits:0,rounding:0},XOF:{digits:0,rounding:0},XPF:{digits:0,rounding:0},YER:{digits:0,rounding:0},ZMK:{digits:0,rounding:0},ZWD:{digits:0,rounding:0}},this.default_currency_symbol="$",this.default_precision=this.currencies_data.DEFAULT.digits,i.__super__.constructor.apply(this,arguments)}return a(i,e),i.prototype.format=function(e,s){var n,o;return null==s&&(s={}),s.currency?(null!=t.Currencies?(n=t.Currencies.for_code(s.currency),n||(n={symbol:s.currency})):n={symbol:s.currency},null==s.precision&&(s.precision=this.defaults_for_currency(s.currency).digits)):n={symbol:this.default_currency_symbol},o=s.use_cldr_symbol?n.cldr_symbol:n.symbol,i.__super__.format.call(this,e,s).replace("¤",o)},i.prototype.default_format_options_for=function(t){var e;return e=this.precision_from(t),0===e&&(e=this.default_precision),{precision:e}},i.prototype.get_tokens=function(t,e){return null==e&&(e={}),t<0?this.all_tokens().currency.negative:this.all_tokens().currency.positive},i.prototype.defaults_for_currency=function(t){return this.currencies_data[t]||this.currencies_data.DEFAULT},i}(t.NumberFormatter),t.AbbreviatedNumberFormatter=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.NUMBER_MAX=Math.pow(10,15),e.prototype.NUMBER_MIN=1e3,e.prototype.default_format_options_for=function(t){return{precision:this.precision_from(t)}},e.prototype.get_type=function(){return"decimal"},e.prototype.get_key=function(t){var e,i;return i=function(){var i,s,n;for(n=[],e=i=0,s=Math.floor(t).toString().length-1;0<=s?i<s:i>s;e=0<=s?++i:--i)n.push("0");return n}().join(""),"1"+i},e.prototype.get_tokens=function(t,e){var i,s,n;return null==e&&(e={}),n=t<this.NUMBER_MAX&&t>=this.NUMBER_MIN?this.get_type():"decimal",i=n===this.get_type()?this.get_key(t):null,s=this.all_tokens()[n],s=t<0?s.negative:s.positive,null!=i&&(s=s[i]),s},e.prototype.truncate_number=function(t,e){var i;return this.NUMBER_MIN<=t&&t<this.NUMBER_MAX?(i=Math.max(0,Math.floor(t).toString().length-e),t/Math.pow(10,i)):t},e}(t.NumberFormatter),t.ShortDecimalFormatter=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.get_type=function(){return"short_decimal"},e}(t.AbbreviatedNumberFormatter),t.LongDecimalFormatter=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.get_type=function(){return"long_decimal"},e}(t.AbbreviatedNumberFormatter),t.NumberFormatter.BaseHelper=function(){function t(){}return t.prototype.interpolate=function(t,e,i){var s,n,o;return null==i&&(i="right"),e=e.toString(),n=e.length,o="left"===i?0:-n,t.length<n&&(t=(function(){var t,e;for(e=[],s=t=0;0<=n?t<n:t>n;s=0<=n?++t:--t)e.push("#");return e}().join("")+t).slice(-n)),t=o<0?t.slice(0,o+t.length)+e:t.slice(0,o)+e+t.slice(n),t.replace(/#/g,"")},t}(),t.NumberFormatter.IntegerHelper=function(t){function e(t,e){var i;null==e&&(e={}),i=t.split(".")[0],this.format=this.prepare_format(i,e),this.groups=this.parse_groups(i),this.separator=e.group||","}return a(e,t),e.prototype.apply=function(t,e){return null==e&&(e={}),this.format_groups(this.interpolate(this.format,parseInt(t)))},e.prototype.format_groups=function(t){var e,i,s,n,o,a;if(0===this.groups.length)return t;for(n=[],e=this.groups[this.groups.length-1],i=this.groups[0],o=this.chop_group(t,i),t=o[0],s=o[1],n.push(s);t.length;)a=this.chop_group(t,e),t=a[0],s=a[1],n.push(s);return function(){var t,e,i;for(i=[],t=0,e=n.length;t<e;t++)s=n[t],null!==s&&i.push(s);return i}().reverse().join(this.separator)},e.prototype.parse_groups=function(t){var e,i,s,n;return e=t.lastIndexOf(","),e>0?(i=t.slice(0,e),n=[t.length-e-1],i.lastIndexOf(",")>-1&&n.push(i.length-i.lastIndexOf(",")-1),n=function(){var t,e,i;for(i=[],t=0,e=n.length;t<e;t++)s=n[t],null!==s&&i.push(s);return i}(),n.reverse(),function(){var t,i,s;for(s=[],e=t=0,i=n.length;0<=i?t<i:t>i;e=0<=i?++t:--t)n.indexOf(n[e],e+1)===-1&&s.push(n[e]);return s}().reverse()):[]},e.prototype.chop_group=function(t,e){var i;return i=Math.max(t.length-e,0),[t.slice(0,i),t.slice(i)]},e.prototype.prepare_format=function(t,e){return t.replace(/[,+-]/g,function(t){switch(t){case",":return"";case"+":return e.plus_sign;case"-":return e.minus_sign}})},e}(t.NumberFormatter.BaseHelper),t.NumberFormatter.FractionHelper=function(t){function e(t,e){null==e&&(e={}),this.format=t?t.split(".").pop():"",this.decimal=e.decimal||".",this.precision=this.format.length}return a(e,t),e.prototype.apply=function(t,e){var i;return null==e&&(e={}),i=null!=e.precision?e.precision:this.precision,i>0?this.decimal+this.interpolate(this.format_for(e),t,"left"):""},e.prototype.format_for=function(t){var e,i;return i=null!=t.precision?t.precision:this.precision,i?function(){var t,s;for(s=[],e=t=0;0<=i?t<i:t>i;e=0<=i?++t:--t)s.push("0");return s}().join(""):this.format},e}(t.NumberFormatter.BaseHelper),t.PluralRules=function(){function t(){}return t.rules={cardinal:function(t,e){var i=(e.n(t),e.i(t)),s=e.v(t);e.w(t),e.f(t),e.t(t);return 1==i&&0==s?"one":"other"},ordinal:function(t,e){var i=e.n(t);e.i(t),e.v(t),e.w(t),e.f(t),e.t(t);return i%10==3&&i%100!=13?"few":i%10==1&&i%100!=11?"one":i%10==2&&i%100!=12?"two":"other"}},t.runtime=function(t){return this.buildArgsFor=function(t){return[this.n(t),this.i(t),this.f(t),this.t(t),this.v(t),this.w(t)]},this.n=function(t){return t.indexOf(".")>-1?this.toNum(this._n(t).replace(/([0]+\.$)/,"")):this.toNum(this._n(t))},this.i=function(t){return this.toNum(this._i(t))},this.f=function(t){return this.toNum(this._f(t))},this.t=function(t){return this.toNum(this._t(t))},this.v=function(t){return this.toNum(this._v(t))},this.w=function(t){return this.toNum(this._w(t))},this.toNum=function(t){return 0==t.length?0:t.indexOf(".")>-1?parseFloat(t):parseInt(t)},this._n=function(t){return/(-)?(.*)/.exec(t)[2]},this._i=function(t){return/([\d]+)(\..*)?/.exec(this._n(t))[1]},this._f=function(t){return/([\d]+\.?)(.*)/.exec(this._n(t))[2]},this._t=function(t){return this._f(t).replace(/([0]+$)/,"")},this._v=function(t){return this._f(t).length.toString()},this._w=function(t){return this._t(t).length.toString()},this}.call({}),t.names={cardinal:["one","other"],ordinal:["few","one","other","two"]},t.all=function(t){return null==t&&(t="cardinal"),this.names[t]},t.rule_for=function(t,e){var i;null==e&&(e="cardinal");try{return this.rules[e](t.toString(),this.runtime)}catch(s){return i=s,"other"}},t}(),t.ListFormatter=function(){function e(t){null==t&&(t={}),this.formats={2:"{0} and {1}",end:"{0}, and {1}",middle:"{0}, {1}",start:"{0}, {1}"}}return e.prototype.format=function(t){return null!=this.formats[t.length.toString()]?this.compose(this.formats[t.length.toString()],t):this.compose_list(t)},e.prototype.compose_list=function(t){var e,i,s,n,o;if(s=this.compose(this.formats.end||this.formats.middle||"",[t[t.length-2],t[t.length-1]]),t.length>2)for(i=n=3,o=t.length;3<=o?n<=o:n>=o;i=3<=o?++n:--n)e=i===t.length?"start":"middle",null==this.formats[e]&&(e="middle"),s=this.compose(this.formats[e]||"",[t[t.length-i],s]);return s},e.prototype.compose=function(e,i){var s,n;return i=function(){var t,e,n;for(n=[],t=0,e=i.length;t<e;t++)s=i[t],null!=s&&n.push(s);return n}(),i.length>1?(n=e.replace(/\{(\d+)\}/g,"$1"),t.is_rtl&&(n=t.Bidi.from_string(n,{direction:"RTL"}).reorder_visually().toString()),n.replace(/(\d+)/g,function(t){return i[parseInt(t)]})):i[0]||""},e}(),n="undefined"!=typeof e&&null!==e?e:(this.TwitterCldr={},this.TwitterCldr);for(i in t)s=t[i],n[i]=s}).call(this)},function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<div class="DMConversation-lastReadMarker">\n  <div class="DMLastReadMarker">\n    <div class="DMDivider">\n      <span class="DMDivider-text">\n        \n          '),s.s(s.f("unread_count_one",t,e,1),t,e,0,181,197,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b("1 unread message")}),t.pop()),s.b("\n"+i),s.b("          "),s.s(s.f("unread_count_other",t,e,1),t,e,0,252,284,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(i.v(i.f("unread_count",t,e,0))),i.b(" unread messages")}),t.pop()),s.b("\n"+i),s.b("        \n      </span>\n    </div>\n  </div>\n</div>"),s.fl()},partials:{},subs:{}})}).call(e,i(1))},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.viewportHelpers=l.default,this.utils=d.default,this.defaultAttrs({playableMediaContainerSelector:".PlayableMedia",playableMediaLoadThreshold:500,scrollThrottle:100,watchedClass:"watched",watchedSelector:".watched",watchDocumentScroll:!0,liveVideoContinuePlayingBehindModals:!1,preventUnloadClass:"playable-media-no-unload"}),this.updateWatchedMedia=function(){this.$media=this.select("playableMediaContainerSelector");var t=this.$media.not(this.attr.watchedSelector);h.default.attachTo(t,{liveVideoContinuePlayingBehindModalsEnabled:this.attr.liveVideoContinuePlayingBehindModalsEnabled}),t.addClass(this.attr.watchedClass),this.throttledProcessWatchedMedia()},this.processWatchedMedia=function(){var e=this;this.isInFullscreen()||this.$media.each(function(i,s){var n=t(s);if(!n.hasClass(e.attr.preventUnloadClass)){var o=l.default.isWithinBounds(e.$container,n,e.attr.playableMediaLoadThreshold),a=n.hasClass("playable-media-loaded");!a&&o?n.trigger("uiLoadPlayableMedia"):a&&!o&&n.trigger("uiUnloadPlayableMedia")}})},this.isInFullscreen=function(){return document.webkitFullscreenElement||document.msFullscreenElement||document.fullscreenElement||document.mozFullScreenElement},this.fullscreenChange=function(){clearInterval(this.fullscreenTimeout),this.isInFullscreen()?this.stopListeningOnProcessEvents():this.fullscreenTimeout=setTimeout(this.listenOnProcessEvents.bind(this),2e3)},this.listenOnProcessEvents=function(){this.on(this.$container,"resize",this.throttledProcessWatchedMedia),this.attr.watchDocumentScroll?this.on(document,"scroll",this.throttledProcessWatchedMedia):this.on("scroll",this.throttledProcessWatchedMedia)},this.stopListeningOnProcessEvents=function(){this.off(this.$container,"resize",this.throttledProcessWatchedMedia),this.attr.watchDocumentScroll?this.off(document,"scroll",this.throttledProcessWatchedMedia):this.off("scroll",this.throttledProcessWatchedMedia)},this.beforeTeardown=function(){this.$media.removeClass(this.attr.watchedClass)},this.preventPlayerToUnload=function(e,i){t(e.target).toggleClass(this.attr.preventUnloadClass,i.preventUnload)},this.before("teardown",this.beforeTeardown),this.after("initialize",function(){this.$container=t(window),this.throttledProcessWatchedMedia=d.default.throttle(this.processWatchedMedia.bind(this),this.attr.scrollThrottle),this.on(document,"uiPageChanged uiWatchPlayableMedia",this.updateWatchedMedia),this.on(document,"uiPreventPlayerUnloading",this.preventPlayerToUnload),this.listenOnProcessEvents(),this.on(document,"fullscreenchange webkitfullscreenchange msfullscreenchange mozfullscreenchange",this.fullscreenChange),this.updateWatchedMedia()})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(177),l=s(r),c=i(126),d=s(c),u=i(486),h=s(u);e.default=(0,a.default)(n)}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({playerSelector:".PlayableMedia-player",autoplayOnHover:!1,playerLoadedClass:"playable-media-loaded",liveVideoContinuePlayingBehindModalsEnabled:!1}),this.autoplay=function(){this.player?this.player.playPreview():this.autoplayOnInit=!0},this.autoplayStop=function(){this.player?this.player.pausePreview():this.autoplayOnInit=!1},this.loadMedia=function(){var t=this;this.$node.addClass(this.attr.playerLoadedClass);var e=this.select("playerSelector"),s=void 0;"undefined"!=typeof this.tweetId&&(s=this.requestDynamicVideoAd.bind(this));var n={scribeContext:this.getScribeContext(),promotedContext:this.getPromotedContext(),hideControls:e.hasClass("hide-controls"),adRequestCallback:s,borderRadius:this.getBorderRadius(e),ignoreFineGrainGeoblocking:this.getIgnoreFineGrainGeoblocking(e)},o=e.get(0);if(o.hasAttribute("data-use-react-player"))i.e(5,function(s){var n=i(493).default;t.player=n(t,o,t.requestDynamicVideoAd.bind(t)),t.registerPlayerListeners(e),t.onPlayerReady(e)});else{var a=this.getPlayerConstructor(o);this.player=a(n),this.registerPlayerListeners(e)}},this.registerPlayerListeners=function(t){this.player.on("playbackComplete",this.trigger.bind(this,"uiPlayableMediaPlaybackComplete")).on("mute",this.trigger.bind(this,"uiPlayableMediaMute")).on("unmute",this.trigger.bind(this,"uiPlayableMediaUnmute")).on("play",this.trigger.bind(this,"uiPlayableMediaPlay")).on("pause",this.trigger.bind(this,"uiPlayableMediaPause")).on("ready",this.onPlayerReady.bind(this,t)).on("noCookiesError",this.trigger.bind(this,"uiPlayableMediaNoCookiesError")).on("geoblockError",this.trigger.bind(this,"uiPlayableMediaGeoblockError"))},this.getBorderRadius=function(t){var e=parseInt(t.attr("data-border-top-left-radius")),i=parseInt(t.attr("data-border-top-right-radius")),s=parseInt(t.attr("data-border-bottom-left-radius")),n=parseInt(t.attr("data-border-bottom-right-radius"));return{topLeft:isNaN(e)?void 0:e,topRight:isNaN(i)?void 0:i,bottomLeft:isNaN(s)?void 0:s,bottomRight:isNaN(n)?void 0:n}},this.getIgnoreFineGrainGeoblocking=function(t){return t.attr("data-ignore-fine-grain-geoblocking")},this.getVideoId=function(t){return"undefined"!=typeof this.liveVideoId?t.forLiveEvent(this.liveVideoId):"undefined"!=typeof this.broadcastId?t.forBroadcast(this.broadcastId):"undefined"!=typeof this.dmId?t.forDm(this.dmId):t.forTweet(this.tweetId)},this.createAnalyticsInstance=function(t,e){var i=this;return new t({log:function(t){i.trigger(document,"scribe",{scribeEvent:t.namespace,scribeData:o({_category_:t.category},t.data)})}},{log:function(t){i.trigger(document,"uiLogPromotedEvent",t)}},e)},this.getPlayerConstructor=function(t){return"undefined"!=typeof this.liveVideoId?v.default.createPlayerForLiveVideo.bind(this,t,this.liveVideoId):"undefined"!=typeof this.dmId?v.default.createPlayerForDm.bind(this,t,this.dmId):v.default.createPlayerForTweet.bind(this,t,this.tweetId)},this.getPromotedContext=function(){if(this.impressionId)return{impressionId:this.impressionId,disclosureType:this.$node.closest("[data-disclosure-type]").attr("data-disclosure-type")}},this.getScribeContext=function(){var t=void 0;return"undefined"!=typeof this.tweetId&&(t="tweet"),o({client:"web"},u.default.scribeContext,{component:this.$node.closest("[data-component-context]").attr("data-component-context")||t})},this.onPlayerReady=function(t){this.playOnInit||t.hasClass("play-on-init")?(this.player.play(),this.muteOnInit&&this.player.mute()):(this.autoplayOnInit||this.$node.closest("[data-autoplaying-media=true]").length>0)&&this.player.playPreview(),this.trigger("uiPlayableMediaReady"),this.liveVideoId&&this.player.updateLayoutBreakpoint({breakpoint:this.getBreakpoint()})},this.pauseMedia=function(){this.player?this.player.pause():(this.autoplayOnInit=!1,this.playOnInit=!1)},this.playMedia=function(){this.player?this.player.play():(this.autoplayOnInit=!1,this.playOnInit=!0)},this.muteMedia=function(){this.muteOnInit=!0,this.player&&this.player.mute()},this.unmuteMedia=function(){this.muteOnInit=!1,this.player&&this.player.unmute()},this.requestDynamicVideoAd=function(){return this.getDynamicVideoAd({id:this.tweetId,promoted_id:this.impressionId})},this.removePlayer=function(){this.$node.removeClass(this.attr.playerLoadedClass),this.player&&(this.player.teardown(),this.player=void 0,this.playerWrapper&&this.ReactDOM&&(this.ReactDOM.unmountComponentAtNode(this.playerWrapper),this.playerWrapper.remove(),this.playerWrapper=void 0))},this.before("teardown",function(){this.removePlayer()}),this.teardownIfPresent=function(){0===this.$node.closest("body").length&&this.teardown()},this.updatePosition=function(t,e){!this.player||e.tweetId!==this.tweetId&&e.tweetId!==this.tweetNonce||this.player.updatePosition(e.positionData)},this.updateLayoutBreakpoint=function(t,e){this.liveVideoId&&this.player&&this.player.updateLayoutBreakpoint(e)},this.onPauseAllMedia=function(){this.liveVideoId&&this.attr.liveVideoContinuePlayingBehindModalsEnabled||this.pauseMedia()},this.exitFullScreen=function(){this.liveVideoId&&this.player.exitFullScreen()},this.after("initialize",function(){var t=this.$node.closest("[data-tweet-id]");this.tweetId=t.attr("data-tweet-id"),this.tweetNonce=t.attr("data-tweet-nonce"),this.dmId=this.$node.closest("[data-message-id]").attr("data-message-id"),this.liveVideoId=this.$node.closest("[data-live-video-id]").attr("data-live-video-id"),this.impressionId=this.$node.closest("[data-impression-id]").attr("data-impression-id"),this.broadcastId=this.$node.closest("[data-broadcast-id]").attr("data-broadcast-id"),this.attr.autoplayOnHover&&(this.on("mouseenter",this.autoplay),this.on("mouseleave",this.autoplayStop)),this.on("uiLoadPlayableMedia",this.loadMedia),this.on("uiUnloadPlayableMedia",this.removePlayer),this.on("uiUnmuteMedia",this.unmuteMedia),this.on("uiMuteMedia",this.muteMedia),this.on("uiPlayMedia",this.playMedia),this.on("uiPauseMedia",this.pauseMedia),this.on("uiAutoplayMedia",this.autoplay),this.on("uiStopAutoplayingMedia",this.autoplayStop),this.on(document,"uiPauseAllMedia",this.onPauseAllMedia),this.on(document,"uiPlayableMediaPositionChange",this.updatePosition),this.on(document,"uiWatchPlayableMedia uiOverlayClosed",this.teardownIfPresent),this.on(document,"uiLiveVideoBreakpointUpdate",this.updateLayoutBreakpoint),this.on(document,"uiLiveVideoExitFullScreen",this.exitFullScreen)})}Object.defineProperty(e,"__esModule",{value:!0});var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},a=i(111),r=s(a),l=i(139),c=s(l),d=i(134),u=s(d),h=i(487),f=s(h),p=i(488),m=s(p),g=i(492),v=s(g);e.default=(0,r.default)(n,c.default,f.default,m.default)},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){this.matchMedia=function(t){return window.matchMedia&&window.matchMedia(t)},this.getBreakpoint=function(){var t=this.matchMedia("(min-width: 1271px)").matches;if(t)return"wide";var e=this.matchMedia("(min-height: 901px)").matches;return e?"narrow_tall":"narrow_short"}}},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){a.default.mixin(this,[l.default,d.default]),this.getDynamicVideoAd=function(t){var e=this.adCacheKey({id:t.id,promoted_id:t.promoted_id}),i=this.getDynamicVideoAdFromCache(e);return this.trigger("uiRefreshVideoAdCache",{tweet:t,triggerAd:i}),i||{}}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(121),a=s(o),r=i(489),l=s(r),c=i(490),d=s(c);e.default=n},function(t,e){"use strict";function i(){this.adCacheKey=function(t){var e="t"+t.id;return t.promoted_id&&(e+="i"+t.promoted_id),e}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.getDynamicVideoAdFromCache=function(t){return a.default.get(t)},this.updateDynamicVideoAdCache=function(t){a.default.update(t)},this.clearDynamicVideoAdCache=function(){a.default.clear()}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(491),a=s(o);e.default=n},function(t,e,i){(function(t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={},s={get:function(t){return i[t]},update:function(e){t.extend(i,e)},clear:function(){i={}}};e.default=s}).call(e,i(10))},function(t,e,i){var s;!function(n,o){s=function(){return n.TwitterVideoPlayer=o()}.call(e,i,e,t),!(void 0!==s&&(t.exports=s))}(this,function(){function t(t){if(t&&t.data&&t.data.params&&t.data.params[0]){var e=t.data.params[0],i=t.data.id;if(e&&e.context&&"TwitterVideoPlayer"===e.context){var s=e.playerId;delete e.playerId,delete e.context;var n=r[s];n&&n.processMessage(t.data.method,e,i)}}}function e(t,e,i){var s=Object.keys(i).filter(function(t){return null!=i[t]}).map(function(t){var e=i[t];return encodeURIComponent(t)+"="+encodeURIComponent(e)}).join("&");return s&&(s="?"+s),t+e+s}function i(i,n,o,l,c){var d=i.ownerDocument,u=d.defaultView;u.addEventListener("message",t),this.playerId=a++;var h={embed_source:"clientlib",player_id:this.playerId,rpc_init:1};if(this.scribeParams={},this.scribeParams.suppressScribing=l&&l.suppressScribing,!this.scribeParams.suppressScribing){if(!l.scribeContext)throw"video_player: Missing scribe context";if(!l.scribeContext.client)throw"video_player: Scribe context missing client property";this.scribeParams.client=l.scribeContext.client,this.scribeParams.page=l.scribeContext.page,this.scribeParams.section=l.scribeContext.section,this.scribeParams.component=l.scribeContext.component}this.scribeParams.debugScribe=l&&l.scribeContext&&l.scribeContext.debugScribing,this.scribeParams.scribeUrl=l&&l.scribeContext&&l.scribeContext.scribeUrl,this.promotedLogParams=l.promotedContext,this.adRequestCallback=l.adRequestCallback,l.languageCode&&(h.language_code=l.languageCode);var f=e(s,n,h);return this.videoIframe=document.createElement("iframe"),this.videoIframe.setAttribute("src",f),this.videoIframe.setAttribute("allowfullscreen",""),this.videoIframe.setAttribute("id",o),this.videoIframe.setAttribute("style","width: 100%; height: 100%; position: absolute; top: 0; left: 0;"),this.domElement=i,this.domElement.appendChild(this.videoIframe),r[this.playerId]=this,this.eventCallbacks={},this.emitEvent=function(t,e){var i=this.eventCallbacks[t];"undefined"!=typeof i&&i.forEach(function(t){t.apply(this.playerInterface,[e])}.bind(this))},this.jsonRpc=function(t){var e=this.videoIframe.contentWindow;t.jsonrpc="2.0",e&&e.postMessage&&e.postMessage(JSON.stringify(t),"*")},this.jsonRpcCall=function(t,e){this.jsonRpc({method:t,params:e})},this.jsonRpcResult=function(t,e){this.jsonRpc({result:t,id:e})},this.processMessage=function(t,e,i){switch(t){case"requestPlayerConfig":this.jsonRpcResult({scribeParams:this.scribeParams,promotedLogParams:this.promotedLogParams,squareCorners:l.squareCorners,borderRadius:l.borderRadius,hideControls:l.hideControls,embedded:l.addTwitterBranding,ignoreFineGrainGeoblocking:l.ignoreFineGrainGeoblocking},i);break;case"videoPlayerAdStart":this.emitEvent("adStart",e);break;case"videoPlayerAdEnd":this.emitEvent("adEnd",e);break;case"videoPlayerPlay":this.emitEvent("play",e);break;case"videoPlayerPause":this.emitEvent("pause",e);break;case"videoPlayerMute":this.emitEvent("mute",e);break;case"videoPlayerUnmute":this.emitEvent("unmute",e);break;case"videoPlayerPlaybackComplete":this.emitEvent("playbackComplete",e);break;case"videoPlayerReady":this.emitEvent("ready",e);break;case"videoView":this.emitEvent("view",e);break;case"debugLoggingEvent":this.emitEvent("logged",e);break;case"requestDynamicAd":"function"==typeof this.adRequestCallback?this.jsonRpcResult(this.adRequestCallback(),i):this.jsonRpcResult({},i);break;case"videoPlayerError":e&&"NO_COOKIES_ERROR"===e.error_category?this.emitEvent("noCookiesError",e):e&&"GEOBLOCK_ERROR"===e.error_category&&this.emitEvent("geoblockError",e)}},this.playerInterface={on:function(t,e){return"undefined"==typeof this.eventCallbacks[t]&&(this.eventCallbacks[t]=[]),this.eventCallbacks[t].push(e),this.playerInterface}.bind(this),off:function(t,e){if("undefined"==typeof e)delete this.eventCallbacks[t];else{var i=this.eventCallbacks[t];if("undefined"!=typeof i){var s=i.indexOf(e);s>-1&&i.splice(s,1)}}return this.playerInterface}.bind(this),play:function(){return this.jsonRpcCall("play"),this.playerInterface}.bind(this),pause:function(){return this.jsonRpcCall("pause"),this.playerInterface}.bind(this),mute:function(){return this.jsonRpcCall("mute"),this.playerInterface}.bind(this),unmute:function(){return this.jsonRpcCall("unmute"),this.playerInterface}.bind(this),playPreview:function(){return this.jsonRpcCall("autoPlayPreview"),this.playerInterface}.bind(this),pausePreview:function(){return this.jsonRpcCall("autoPlayPreviewStop"),this.playerInterface}.bind(this),updatePosition:function(t){return this.jsonRpcCall("updatePosition",[t]),this.playerInterface}.bind(this),updateLayoutBreakpoint:function(t){return this.jsonRpcCall("updateLayoutBreakpoint",[t]),this.playerInterface}.bind(this),enterFullScreen:function(){return this.jsonRpcCall("enterFullScreen"),this.playerInterface}.bind(this),exitFullScreen:function(){return this.jsonRpcCall("exitFullScreen"),this.playerInterface}.bind(this),teardown:function(){this.eventCallbacks={},i.removeChild(this.videoIframe),this.videoIframe=void 0,delete r[this.playerId]}.bind(this)},this.playerInterface}var s="https://twitter.com",n=/^https?:\/\/([a-zA-Z0-9]+\.)*twitter.com(:\d+)?$/,o={suppressScribing:!1,squareCorners:!1,hideControls:!1,addTwitterBranding:!1},a=0,r={};return{setBaseUrl:function(t){n.test(t)?s=t:window.console.error("newBaseUrl "+t+" not allowed")},createPlayerForTweet:function(t,e,s){var n="/i/videos/tweet/"+e,a="player_tweet_"+e;return new i(t,n,a,s||o)},createPlayerForDm:function(t,e,s){var n="/i/videos/dm/"+e,a="player_dm_"+e;return new i(t,n,a,s||o)},createPlayerForLiveVideo:function(t,e,s){var n="/i/videos/live_video/"+e,a="player_live_video_"+e;return new i(t,n,a,s||o)},findPlayerForElement:function(t){for(var e in r)if(r.hasOwnProperty(e)){var i=r[e];if(i&&i.domElement===t)return i.playerInterface}return null}}})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.viewportHelpers=d.default,this.staticCardsTypes=p.default,this.defaultAttrs({containerSelector:"body",cardContainerSelector:".tweet",scrollThrottle:100,viewportThreshold:800,fullscreenResetHeight:100,iframeContainerSelector:".js-macaw-cards-iframe-container",unloadedCardsSelector:'.js-macaw-cards-iframe-container[data-watched!="true"]',unloadedCardsFilter:".cards-forward .js-macaw-cards-iframe-container"}),this.shouldUnloadCard=function(t){return this.staticCardsTypes.indexOf(t.data("card-name"))===-1},this.watchUnloadedCards=function(){var t=this.$container.find(this.attr.unloadedCardsFilter).filter(function(){return 0===this.children.length});t.attr("data-watched",!0),this.watchedCards=this.watchedCards.concat(t.toArray()),this.throttledProcessWatchedCards()},this.processWatchedCards=function(){if(!this.isInFullscreen()){for(var e=void 0,i=0;i<this.watchedCards.length;)e=this.watchedCards[i],d.default.isWithinBounds(this.$viewport,t(e),this.attr.viewportThreshold)?(this.loadCard(e),this.loadedCards.push(e),
this.watchedCards.splice(i,1)):i+=1;for(i=0;i<this.loadedCards.length;)if(e=this.loadedCards[i],d.default.isWithinBounds(this.$viewport,t(e),this.attr.viewportThreshold))i+=1;else{var s=t(e),n=s.find("iframe").attr("height");n&&s.css("min-height",n+"px"),this.shouldUnloadCard(s)&&(this.unloadCard(e),this.watchedCards.push(e)),this.loadedCards.splice(i,1)}}},this._getCardContainer=function(e){return t(e).closest(this.attr.cardContainerSelector)},this.loadCard=function(t){this.createCard(this._getCardContainer(t)),this.trigger("uiDynamicCardLoaded")},this.unloadCard=function(t){this.destroyCard(this._getCardContainer(t)),this.trigger("uiDynamicCardUnloaded")},this.handleUnloadCards=function(t){t.stopPropagation(),this.destroyAllCards(),this.watchedCards=[],this.loadedCards=[],this.$container.find(this.attr.iframeContainerSelector).removeAttr("data-watched")},this.resetWatchedCards=function(){this.watchedCards=[],this.$container.find(this.attr.iframeContainerSelector).removeAttr("data-watched"),this.watchUnloadedCards()},this.isInFullscreen=function(){return document.webkitFullscreenElement||document.msFullscreenElement||document.fullscreenElement||document.mozFullScreenElement},this.fullScreenChange=function(e){var i=this;this.isInFullscreen()?(this.bindingTimeout&&(clearTimeout(this.bindingTimeout),this.bindingTimeout=void 0),this.$fullscreenTweet=t(e.target).closest(this.attr.cardContainerSelector),this.off("scroll",this.throttledProcessWatchedCards),this.off(this.$viewport,"resize",this.throttledProcessWatchedCards)):(this.$fullscreenTweet&&1===this.$fullscreenTweet.length&&(window.scrollTo(0,this.$fullscreenTweet.offset().top-this.attr.fullscreenResetHeight),this.$fullscreenTweet=void 0),this.bindingTimeout=setTimeout(function(){i.on("scroll",i.throttledProcessWatchedCards),i.on(i.$viewport,"resize",i.throttledProcessWatchedCards)},1e3))},this.cleanup=function(){this.watchedCards.forEach(this.unloadCard.bind(this)),this.loadedCards.forEach(this.unloadCard.bind(this)),this.$container=null,this.off(document,"uiPageChanged"),this.off("scroll"),this.off(this.$viewport,"resize")},this.before("teardown",function(){this.cleanup()}),this.after("initialize",function(){this.$container=this.node===window?t(this.attr.containerSelector):this.select("containerSelector"),this.$container.length||(this.$container=this.$node),this.watchedCards=[],this.loadedCards=[],this.on(document,"uiPageChanged",this.resetWatchedCards),this.on(this.$container,"uiUnloadAllCards",this.handleUnloadCards),this.throttledProcessWatchedCards=h.default.throttle(this.processWatchedCards.bind(this),this.attr.scrollThrottle),this.on("scroll",this.throttledProcessWatchedCards),this.$viewport=this.node===document?t(window):this.$node,this.on(this.$viewport,"resize",this.throttledProcessWatchedCards),this.on(document,"uiWatchUnloadedCards",this.watchUnloadedCards),this.on(document,"webkitfullscreenchange mozfullscreenchange fullscreenchange MSFullscreenChange",this.fullScreenChange),this.watchUnloadedCards()})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(834),l=s(r),c=i(177),d=s(c),u=i(126),h=s(u),f=i(838),p=s(f);e.default=(0,a.default)(l.default,n)}).call(e,i(10))},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){f.default.mixin(this,[y.default,M.default,T.default]),this.defaultAttrs({cardWrapperClass:".js-macaw-cards-iframe-container",tweetIdData:"tweet-id",tweetNonceIdData:"tweet-nonce",itemIdData:"item-id",dmIdData:"message-id",advertiserIdData:"advertiser-id",itemType:"tweet",fullCardIframeUrl:"data-full-card-iframe-url",srcAttr:"data-src",cardUrl:"data-card-url",publisherId:"data-publisher-id",creatorId:"data-creator-id",srcDataAttr:"src",cardUrlDataAttr:"card-url",publisherIdDataAttr:"publisher-id",creatorIdDataAttr:"creator-id",cardName:"data-card-name",card2TypeAttr:"card2-type",macawCardsUserStyles:"macaw-cards-user-styles"}),this.DEFAULT_SCRIBE_ELEMENT="platform_card",this.DEFAULT_SCRIBE_COMPONENT="tweet",this.DEFAULT_SCRIBE_ACTION="undefined",this.CARDS_REQUIRING_USER_DEFINED_STYLES=["2586390716:message_me"],this.CARDS_LOADING_VIDEO_PLAYER=["745291183405076480:live_event"],this.createCard=function(e){var i=this,s=void 0,n=this._getCardWrapper(e),a=this._getUniqueIdForCard(e),r=this._getTweetId(e),l=this._getAdvertiserId(e),d=void 0,h=void 0,f=e.closest("[data-card-component]").attr("data-card-component"),p={element:this.DEFAULT_SCRIBE_ELEMENT,component:f||this.DEFAULT_SCRIBE_COMPONENT},g=o({},u.default.scribeContext,{component:p.component}),v={impressionId:e.data("impression-id"),disclosureType:e.data("disclosure-type")};if(n&&n.length&&n[0].childNodes.length<2&&(!this.channels[a]||n.context&&0===n.context.clientHeight)){d=n.data("src");var b=this._getCard2Type(e);this.CARDS_LOADING_VIDEO_PLAYER.indexOf(b)!==-1&&this._attachLiveEventCardPlayer(e),this.CARDS_REQUIRING_USER_DEFINED_STYLES.indexOf(b)!==-1&&(d=this._addUserColorToUrl(e,d)),e.hasClass("DirectMessage")&&(d=this._addDmInfoToUrl(e,d)),d=this._addHeightToUrl(n,d),d=this._addScribeContextToUrl(g,d),d=this._addBearerTokenToUrl(c.default,d),s=new P.default.Rpc({remote:d,container:n[0],props:{height:"0",style:{display:"block"}},onReady:function(){e.trigger("uiCardLoaded")}},{local:h=this.localMethods={localMethodNames:function(){return{callMethodByName:!0,cancelFollowUser:!0,emojifyText:!0,favoriteStatus:!0,followAdvertiser:!0,followUser:!0,initPlayerForLiveEventCard:!0,logPromotedContentEvent:!0,logPromotedInfo:!0,openAuthWebView:!0,openLeadGenConfirmDialog:!0,openLink:!0,openLinkNoScribe:!0,openMessageMeDialog:!0,openProfile:!0,rawPromotedLoggerInterface:!0,rawScribeInterface:!0,requestDynamicAd:!0,requestPlayerConfig:!0,resizeCard:!0,retweetStatus:!0,scribe:!0,shareStatus:!0,statusComposeTweet:!0,subscribeToEvent:!0,teardownPlayerForLiveEventCard:!0,unblockUser:!0,unfollowAdvertiser:!0,unfollowUser:!0,unsubscribeFromEvent:!0,videoView:!0}},callMethodByName:function(){var t=arguments[0],e=Array.prototype.slice.call(arguments,1);return h[t].method.apply(this,e)},openAuthWebView:function(t){return i.trigger("uiOpenAuthWebViewDialog",{impressionId:t.impressionId,webviewUrl:t.webviewUrl,webviewTitle:t.webviewTitle,tweetId:t.tweetId})},openLeadGenConfirmDialog:function(t){t=o({},t,v,{tweetId:e.data(i.attr.tweetIdData),cardUrl:n.attr(i.attr.cardUrl),fullCardIframeUrl:n.attr(i.attr.fullCardIframeUrl),publisherId:n.attr(i.attr.publisherId),creatorId:n.attr(i.attr.creatorId)}),i.trigger(document,"uiOpenLeadGenConfirmDialog",t)},openLink:function(t){var e=v;t.hasOwnProperty("cardEvent")&&(e.cardEvent=t.cardEvent),i.trigger("uiCardUrlClick",e),i.scribeCardInteraction("open_link",i._getCardDataWithScribeContext(n,p))},openLinkNoScribe:function(t){var e=v;t.hasOwnProperty("cardEvent")&&(e.cardEvent=t.cardEvent),t.skipEventUiCardUrlClick||i.trigger("uiCardUrlClick",e)},openMessageMeDialog:function(t){return i.trigger("uiComposeNewDMWithOptions",{tweetId:t.tweetId,recipientId:t.recipientId,defaultComposerText:t.defaultComposerText,welcomeMessageId:t.welcomeMessageId,messageMeCardData:{cardName:n.attr(i.attr.cardName),cardUri:n.attr(i.attr.cardUrl),userId:w.default.user.id}})},openProfile:function(t){t=o({userId:t.userId,userScreenName:t.userScreenName,profileClickTarget:t.profileClickTarget,scribeContext:p},i.getCardDataFromContainer(n),v),e.trigger("uiShowProfileNewWindow",t),e.trigger("uiNavigate",{href:"/"+t.userScreenName})},requestDynamicAd:function(){var t=i.getCard2Item(i._getCardDataWithScribeContext(n,p));return i.getDynamicVideoAd(t)},requestPlayerConfig:function(){return{autoPlayPreview:e.find('[data-autoplaying-media="true"]').length>0,autoPlayPreviewPreroll:w.default.getDecider("autoplayPreviewPreroll"),useVmapVariants:w.default.getDecider("useVmapVariants")}},resizeCard:function(t){s.iframe.height=parseInt(t.height,10),n.removeClass("initial-card-height")},statusComposeTweet:function(e){e=o({},e,{defaultText:e.tweetText,canTweetDefaultText:!0,disclosureType:i._getDisclosureType(e.earned)}),t(document).trigger("uiOpenTweetDialog",e)},retweetStatus:function(t){return i._triggerTweetAction(e,"uiOpenRetweetDialog",{id:t.tweetId||r,tweetId:t.tweetId||r})},favoriteStatus:function(t){return i._triggerTweetAction(e,"uiDidFavoriteTweet",{id:t.tweetId||r})},shareStatus:function(t){return i._triggerTweetAction(e,"uiNeedsShareViaEmailDialog",{id:t.tweetId||r})},followAdvertiser:function(t){l&&i._triggerTweetAction(e,"uiFollowAction",{userId:l})},unfollowAdvertiser:function(t){l&&i._triggerTweetAction(e,"uiFollowAction",{userId:l})},rawScribeInterface:function(t){return i.trigger(document,"scribe",{scribeEvent:o({},u.default.scribeContext,p,t.namespace),scribeData:t.data})},rawPromotedLoggerInterface:function(t){return i.trigger(document,"uiLogPromotedEvent",t)},scribe:function(t){var e=i.DEFAULT_SCRIBE_ELEMENT,s=i.DEFAULT_SCRIBE_ACTION,o=void 0;t.hasOwnProperty("customScribe")&&(t.customScribe.hasOwnProperty("element")&&(e=t.customScribe.element),t.customScribe.hasOwnProperty("action")&&(s=t.customScribe.action),t.customScribe.hasOwnProperty("itemData")&&(o=t.customScribe.itemData),i.scribeCardInteraction(s,i._getCardDataWithScribeContext(n,p),e,o))},logPromotedInfo:function(t){return i.trigger(document,"uiMacawCardClicked",{event:t.event,impressionId:t.impressionId,earned:t.earned,sync:t.sync})},logPromotedContentEvent:function(s){return i._triggerTweetAction(e,"uiPlayableMediaEvent",t.extend(i.interactionData(e,s),s))},followUser:function(t){t.userId&&i._triggerTweetAction(e,"uiFollowAction",{userId:t.userId})},unfollowUser:function(t){t.userId&&i._triggerTweetAction(e,"uiUnfollowAction",{userId:t.userId})},unblockUser:function(t){t.userId&&i._triggerTweetAction(e,"uiUnblockAction",{userId:t.userId})},cancelFollowUser:function(t){t.userId&&i._triggerTweetAction(e,"uiCancelFollowRequestAction",{userId:t.userId})},subscribeToEvent:function(t){t&&t.subscribeTo&&(a in i.activeSubscriptions?i.activeSubscriptions[a].push(t.subscribeTo):i.activeSubscriptions[a]=[t.subscribeTo],i._addSubscription(a,t.subscribeTo))},unsubscribeFromEvent:function(t){t&&t.unsubscribeFrom&&i._removeSubscription(a,t.unsubscribeFrom)},emojifyText:function(t){for(var e in t)t[e]=m.default.emojifyText(t[e]);s.transmitEmojifiedText(t)},initPlayerForLiveEventCard:function(t){i._triggerTweetAction(e,"uiLoadPlayerForLiveEventCard",{broadcast_id:t.broadcast_id})},teardownPlayerForLiveEventCard:function(){i._triggerTweetAction(e,"uiTeardownPlayerForLiveEventCard",{})}},remote:{localMethodNames:{},callVideoPlayerMethod:{},transmitEmojifiedText:{},transmitEvent:{}}}),t(s.iframe).attr("allowfullscreen",""),this.channels[a]=s;var S=e.data(this.attr.dmIdData);if(S&&e.is(":visible")){var y=this.getCard2Item(this.getCardDataFromContainer(n));this.trigger("uiNewDMCardLoaded",{cardItem:y})}}return v},this.destroyCard=function(t){var e=this._getUniqueIdForCard(t);if(this.channels[e]){this.channels[e].destroy(),delete this.channels[e];var i=this.activeSubscriptions[e];delete this.activeSubscriptions[e];for(var s in i)this._subscriptionExistsFor(event)||this.off(document,s)}},this.destroyAllCards=function(){var t=this.channels;Object.keys(this.channels).forEach(function(e){return t[e].destroy()}),this.channels={}},this.handleStreamItemRemoval=function(e){var i=this,s=e.target;s&&t(s).find(".tweet").each(function(e,s){return i.destroyCard(t(s))})},this._getCardWrapper=function(t){return t.find(this.attr.cardWrapperClass)},this._getTweetId=function(t){return t.data(this.attr.tweetIdData)},this._getUniqueIdForCard=function(t){return t.data(this.attr.tweetNonceIdData)||t.data(this.attr.tweetIdData)||t.data(this.attr.dmIdData)},this._getAdvertiserId=function(t){return t.data(this.attr.advertiserIdData)},this._getUserColor=function(e){var i=t("<a/>").css("display","none").appendTo(e),s=i.css("color");return i.remove(),s},this._getCard2Type=function(t){return t.data(this.attr.card2TypeAttr)},this._addUserColorToUrl=function(t,e){var i=this._getUserColor(t);return i?v.default.addToUrl(e,{user_color:i}):e},this._addScribeContextToUrl=function(t,e){return t?v.default.addToUrl(e,{scribe_context:JSON.stringify(t)}):e},this._addBearerTokenToUrl=function(t,e){return t?v.default.addToUrl(e,{bearer_token:t}):e},this._addDmInfoToUrl=function(t,e){var i=t.find(".card2"),s=parseInt(i.css("border-top-left-radius"),10),n=parseInt(i.css("border-top-right-radius"),10),o=parseInt(i.css("border-bottom-right-radius"),10),a=parseInt(i.css("border-bottom-left-radius"),10),r=e;if(!(isNaN(s)||isNaN(n)||isNaN(o)||isNaN(a))){var l=[s,n,o,a].map(function(t){return t>0}),c={client:"dm",border_radius:l.toString()},d=w.default.getDecider("edge_design");d&&(c.edge=d),r=v.default.addToUrl(e,c)}return r},this._addHeightToUrl=function(t,e){var i=t.height();return i?v.default.addToUrl(e,{card_height:i}):e},this._getCardDataWithScribeContext=function(t,e){return o({},this.getCardDataFromContainer(t),{scribeContext:e})},this._getDisclosureType=function(t){return t===!0?"earned":"_"},this._triggerTweetAction=function(t,e,i){t.trigger(e,i)},this._addSubscription=function(t,e){var i=this;this.on(document,e,function(s,n){var o=i.channels[t];o&&i.activeSubscriptions[t]&&i.activeSubscriptions[t].indexOf(e)>-1&&o.transmitEvent(e,{type:s.type,timestamp:s.timeStamp,data:s.data},n)})},this._removeSubscription=function(t,e){var i=this.activeSubscriptions[t];if(this.channels[t]&&Array.isArray(i)){var s=i.indexOf(e);s>-1&&(i.splice(s,1),i.length>0?this.activeSubscriptions[t]=i:delete this.activeSubscriptions[t],this._subscriptionExistsFor(e)||this.off(document,e))}},this._getAllSubscriptions=function(){return Object.keys(this.activeSubscriptions).map(function(t){return this.activeSubscriptions[t]},this).filter(function(t){return!!t})},this._subscriptionExistsFor=function(t){return this._getAllSubscriptions().map(function(t){return t.subscribedTo}).some(function(e){return e.subscribedTo.indexOf(t)>-1})},this.autoplayMedia=function(e){var i=this._getUniqueIdForCard(t(e.target).closest(".tweet[data-tweet-id]")),s=this.channels[i];s&&s.callVideoPlayerMethod("autoPlayPreview")},this.loadVideoCards=function(t,e){var i=this;e&&e.tweets&&e.tweets.forEach(function(t){var e=i.$node.find(".tweet[data-tweet-id="+t.tweetId+"]");e.find('[data-card-name=__entity_video][data-has-autoplayable-media="true"]:empty').length&&i.createCard(e)})},this.stopAutoplayingMedia=function(e,i){var s=this._getUniqueIdForCard(t(e.target).closest(".tweet[data-tweet-id]")),n=this.channels[s];n&&n.callVideoPlayerMethod("autoPlayPreviewStop")},this.pauseMedia=function(e){var i=this._getUniqueIdForCard(t(e.target).closest(".tweet[data-tweet-id]")),s=this.channels[i];s&&(s.callVideoPlayerMethod("pause"),s.callVideoPlayerMethod("autoPlayPreviewStop"))},this.pauseAllMedia=function(t,e){var i=this.channels;Object.keys(i).forEach(function(t){i[t].callVideoPlayerMethod("pause"),i[t].callVideoPlayerMethod("autoPlayPreviewStop")})},this.updatePosition=function(t,e){var i=e&&e.tweetId&&this.channels[e.tweetId];i&&i.callVideoPlayerMethod("updatePosition",e.positionData)},this._attachLiveEventCardPlayer=function(t){r.default.attachTo(t,{})},this.after("initialize",function(){this.channels={},this.activeSubscriptions={},this.before("teardown",this.destroyAllCards),this.on(document,"uiAutoplayMedia",this.autoplayMedia),this.on(document,"uiStopAutoplayingMedia",this.stopAutoplayingMedia),this.on(document,"uiPauseAllMedia",this.pauseAllMedia),this.on(document,"uiPauseMedia",this.pauseMedia),this.on(document,"uiPlayableMediaPositionChange",this.updatePosition),this.on(document,"uiHasInjectedNewTimeline uiHasInjectedOldTimelineItems uiHasInjectedRangeTimelineItems",this.loadVideoCards),this.on(document,"uiWillRemoveStreamItem",this.handleStreamItemRemoval)})}Object.defineProperty(e,"__esModule",{value:!0});var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t};e.default=n;var a=i(835),r=s(a),l=i(246),c=s(l),d=i(134),u=s(d),h=i(121),f=s(h),p=i(361),m=s(p),g=i(252),v=s(g),b=i(136),w=s(b),S=i(139),y=s(S),C=i(488),T=s(C),D=i(138),M=s(D),I=i(837),P=s(I)}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var n=i(836),o=s(n),a=i(111),r=s(a);e.default=(0,r.default)(function(){this.attributes({cardContainerSelector:".card2.js-media-container",cardIframeContainerSelector:".js-macaw-cards-iframe-container",playableMediaSelector:".PlayableMedia"}),this.loadPlayer=function(t,e){if(!this.isPlayerLoaded){var i=o.default.render();this.select("cardContainerSelector").attr("data-broadcast-id",e.broadcast_id),this.select("cardContainerSelector").prepend(i),this.trigger("uiWatchPlayableMedia"),this.isPlayerLoaded=!0}},this.teardownPlayer=function(){if(this.isPlayerLoaded){var t=this.select("playableMediaSelector");t.trigger("uiUnloadPlayableMedia").remove(),this.isPlayerLoaded=!1}},this.before("teardown",function(){this.teardownPlayer(),this.select("cardIframeContainerSelector").addClass("initial-card-height")}),this.after("initialize",function(){this.isPlayerLoaded=!1,this.on("uiLoadPlayerForLiveEventCard",this.loadPlayer),this.on("uiTeardownPlayerForLiveEventCard",this.teardownPlayer)})})},function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<div class="PlayableMedia LiveEventCard-playerContainer">\n  <div class="PlayableMedia-player LiveEventCard-player" data-use-react-player></div>\n</div>\n'),s.fl()},partials:{},subs:{}})}).call(e,i(1))},function(t,e,i){/*!
	 * xdm.js – Nicolas Gallagher – MIT License
	 * easyXDM – Copyright(c) 2009-2011, Øyvind Sean Kinsey, oyvind@kinsey.no – MIT License
	 */
!function(e){"use strict";function i(t){return"[object Array]"===Object.prototype.toString.call(t)}function s(t){return"undefined"==typeof t}function n(t){if(!t)throw new Error("url is undefined or empty");if(/^file/.test(t))throw new Error("The file:// protocol is not supported");var e=t.toLowerCase().match(S);if(e){var i=e[2],s=e[3],n=e[4]||"";return("http:"===i&&":80"===n||"https:"===i&&":443"===n)&&(n=""),i+"//"+s+n}return t}function o(t){if(!t)throw new Error("url is undefined or empty");if(t=t.replace(C,"$1/"),!t.match(/^(http||https):\/\//)){var e="/"===t.substring(0,1)?"":location.pathname;"/"!==e.substring(e.length-1)&&(e=e.substring(0,e.lastIndexOf("/")+1)),t=location.protocol+"//"+location.host+e+t}for(;y.test(t);)t=t.replace(y,"");return t}function a(t,e,i){var s;for(var n in e)e.hasOwnProperty(n)&&(n in t?(s=e[n],"object"==typeof s?a(t[n],s,i):i||(t[n]=e[n])):t[n]=e[n]);return t}function r(t,e){"string"==typeof t&&(t=[t]);for(var i,s=t.length;s--;)if(i=t[s],i=new RegExp("^"===i.substr(0,1)?i:"^"+i.replace(/(\*)/g,".$1").replace(/\?/g,".")+"$"),i.test(e))return!0;return!1}function l(t,e){if(!e)throw new Error("parameters is undefined or null");var i=t.indexOf("#"),s=[];for(var n in e)e.hasOwnProperty(n)&&s.push(n+"="+encodeURIComponent(e[n]));return t+(i===-1?"#":"&")+s.join("&")}function c(t){var e=v.cloneNode(!1);if(a(t.props,{frameBorder:0,allowTransparency:!0,scrolling:"no",width:"100%",src:l(t.remote,{xdm_e:n(location.href),xdm_c:t.channel,xdm_p:1}),name:g+t.channel+"_provider",style:{margin:0,padding:0,border:0}}),e.id=t.props.name,delete t.props.name,!t.container)throw new Error('xdm.Rpc() configuration object missing a DOM "container" property');return a(e,t.props),t.container.appendChild(e),t.onLoad&&T(e,"load",t.onLoad),t.html&&(e.contentWindow.document.open(),e.contentWindow.document.write(t.html),e.contentWindow.document.close()),t.iframe=e,e}function d(t){var e;if(t.isHost=t.isHost||s(M.xdm_p),t.props=t.props||{},t.isHost)t.remote=o(t.remote),t.channel=t.channel||"default"+b++;else if(t.channel=M.xdm_c.replace(/["'<>\\]/g,""),t.remote=M.xdm_e.replace(/["'<>\\]/g,""),t.acl&&!r(t.acl,t.remote))throw new Error("Access denied for "+t.remote);return e=[new p.stack.PostMessageTransport(t)],e.push(new p.stack.QueueBehavior((!0))),e}function u(t){var e,i,s=t.length,n={incoming:function(t,e){this.up.incoming(t,e)},outgoing:function(t,e){this.down.outgoing(t,e)},callback:function(t){this.up.callback(t)},init:function(){this.down.init()},destroy:function(){this.down.destroy()}};for(i=0;i<s;i++)e=t[i],a(e,n,!0),0!==i&&(e.down=t[i-1]),i!==s-1&&(e.up=t[i+1]);return e}function h(t){t.up.down=t.down,t.down.up=t.up,t.up=t.down=null}if(e.postMessage){var f="",p={},m=e.xdm,g="xdm_",v=document.createElement("IFRAME"),b=Math.floor(1e4*Math.random()),w=Function.prototype,S=/^((http.?:)\/\/([^:\/\s]+)(:\d+)*)/,y=/[\-\w]+\/\.\.\//,C=/([^:])\/\//g,T=function(){return e.addEventListener?function(t,e,i){t.addEventListener(e,i,!1)}:function(t,e,i){t.attachEvent("on"+e,i)}}(),D=function(){return e.removeEventListener?function(t,e,i){t.removeEventListener(e,i,!1)}:function(t,e,i){t.detachEvent("on"+e,i)}}(),M=function(t){t=t.substring(1,t.length).split("&");for(var e,i={},s=t.length;s--;)e=t[s].split("="),i[e[0]]=decodeURIComponent(e[1]);return i}(location.hash);p.version="1.0.1",p.stack={},p.query=M,p.checkAcl=r,p.noConflict=function(t){return e.xdm=m,f=t,f&&(g="xdm_"+f.replace(".","_")+"_"),p},p.Rpc=function(t,e){var i;if(e.local)for(var s in e.local)e.local.hasOwnProperty(s)&&(i=e.local[s],i instanceof Function&&(e.local[s]={method:i}));var o=u(d(t).concat([new p.stack.RpcBehavior(this,e),{callback:function(e){t.onReady&&t.onReady(e)}}]));this.origin=n(t.remote),this.destroy=function(){o.destroy()},o.init(),this.iframe=t.iframe},p.stack.PostMessageTransport=function(t){function i(e){var i=n(e.origin),s="string"==typeof e.data;i===l&&s&&e.data.substring(0,t.channel.length+1)===t.channel+" "&&o.up.incoming(e.data.substring(t.channel.length+1),i)}function s(n){n.data===t.channel+"-ready"&&(r="postMessage"in a.contentWindow?a.contentWindow:a.contentWindow.document,D(e,"message",s),T(e,"message",i),setTimeout(function(){o.up.callback(!0)},0))}var o,a,r,l;return o={outgoing:function(e,i,s){r.postMessage(t.channel+" "+e,i||l),s&&s()},destroy:function(){D(e,"message",s),D(e,"message",i),a&&(r=null,a.parentNode.removeChild(a),a=null)},init:function(){l=n(t.remote),t.isHost?(T(e,"message",s),a=c(t)):(T(e,"message",i),r="postMessage"in e.parent?e.parent:e.parent.document,r.postMessage(t.channel+"-ready",l),setTimeout(function(){o.up.callback(!0)},0))}}},p.stack.QueueBehavior=function(t){function e(){var a;return t===!0&&0===n.length?void h(i):void(o||0===n.length||s||(o=!0,a=n.shift(),i.down.outgoing(a.data,a.origin,function(t){o=!1,a.callback&&setTimeout(function(){a.callback(t)},0),e()})))}var i,s,n=[],o=!0;return i={init:function(){i.down.init()},callback:function(t){o=!1;var s=i.up;e(),s.callback(t)},incoming:function(t,e){i.up.incoming(t,e)},outgoing:function(t,i,s){n.push({data:t,origin:i,callback:s}),e()},destroy:function(){s=!0,i.down.destroy()}}},p.stack.RpcBehavior=function(t,e){function n(t){t.jsonrpc="2.0",r.down.outgoing(JSON.stringify(t))}function o(t,e){var i=Array.prototype.slice;return function(){var s,o=arguments.length,a={method:e};o>0&&arguments[o-1]instanceof Function?(o>1&&arguments[o-2]instanceof Function?(s={success:arguments[o-2],error:arguments[o-1]},a.params=i.call(arguments,0,o-2)):(s={success:arguments[o-1]},a.params=i.call(arguments,0,o-1)),c[""+ ++l]=s,a.id=l):a.params=i.call(arguments,0),t.namedParams&&1===a.params.length&&(a.params=a.params[0]),n(a)}}function a(t,e,o,a){if(!o)return void(e&&n({id:e,error:{code:-32601,message:"Procedure not found."}}));var r,l;e?(r=function(t){r=w,n({id:e,result:t})},l=function(t,i){l=w;var s={id:e,error:{code:-32099,message:t}};i&&(s.error.data=i),n(s)}):r=l=w,i(a)||(a=[a]);try{var c=o.method.apply(o.scope,a.concat([r,l]));s(c)||r(c)}catch(d){l(d.message)}}var r,l=0,c={};return r={incoming:function(t,i){var s,o=JSON.parse(t);o.method?e.handle?e.handle(o,n):a(o.method,o.id,e.local[o.method],o.params):(s=c[o.id],o.error&&s.error?s.error(o.error):s.success&&s.success(o.result),delete c[o.id])},init:function(){if(e.remote)for(var i in e.remote)e.remote.hasOwnProperty(i)&&(t[i]=o(e.remote[i],i));r.down.init()},destroy:function(){for(var i in e.remote)e.remote.hasOwnProperty(i)&&t.hasOwnProperty(i)&&delete t[i];r.down.destroy()}}},t.exports=p}}(window)},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=["2586390716:authenticated_web_view","3260518932:moment","3691233323:periscope_broadcast","app","direct_store_link_app","poll2choice_image","poll3choice_image","poll4choice_image","poll2choice_text_only","poll3choice_text_only","poll4choice_text_only","promo_website","summary","summary_large_image"];e.default=i},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.attributes({quickReplySelector:".DMQuickReply",optionSelector:".DMQuickReply-optionItem",unSelectedOptionSelector:".DMQuickReply:not(.is-selected) .DMQuickReply-optionItem",optionTextSelector:".DMQuickReply-optionText",selectedClass:"is-selected"}),this.handleClick=function(e){var i=t(e.target),s=i.closest(this.attr.quickReplySelector),n=i.closest(this.attr.optionSelector),o=i.closest(this.attr.optionTextSelector),a=n.data();s.addClass(this.attr.selectedClass),o.addClass(this.attr.selectedClass),this.trigger("uiQROptionClicked",a)},this.handleShowQRPanel=function(t,e){var i=l.default.render(e);this.$node.html(i)},this.handleEmptyQRPanel=function(){this.$node.empty()},this.after("initialize",function(){this.on(document,"uiShowQuickReplyOptionPanel",this.handleShowQRPanel),this.on(document,"uiQuickReplyRemoved",this.handleEmptyQRPanel),this.on("click",{unSelectedOptionSelector:this.handleClick})})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(840),l=s(r),c=(0,a.default)(n);e.default=c}).call(e,i(10))},function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<div class="DMQuickReply" data-quick-reply-id="'),s.b(s.v(s.f("id",t,e,0))),s.b('">\n  <div class="DMQuickReply-options">\n'),s.s(s.f("options",t,e,1),t,e,0,109,709,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b('      <div class="DMQuickReply-optionItem" data-option-id="'),i.b(i.v(i.f("id",t,e,0))),i.b('" data-option-text="'),i.b(i.v(i.f("label",t,e,0))),i.b('">\n        <a\n          class="DMQuickReply-optionText list-link js-nav '),i.s(i.d("description.length",t,e,1),t,e,0,299,311,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b("is-multiline")}),t.pop()),i.b('"\n          title="'),i.b(i.v(i.f("label",t,e,0))),i.s(i.f("description",t,e,1),t,e,0,378,386,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b(" - "),i.b(i.v(i.d(".",t,e,0)))}),t.pop()),i.b('"\n        >\n          <div class="DMQuickReply-labelText">'),i.b(i.v(i.f("label",t,e,0))),i.b('</div>\n          <div class="DMQuickReply-optionDescriptionContainer">\n'),i.s(i.f("description",t,e,1),t,e,0,566,645,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('            <div class="DMQuickReply-optionDescription">'),i.b(i.v(i.d(".",t,e,0))),i.b("</div>\n")}),t.pop()),i.b("          </div>\n        </a>\n      </div>\n")}),t.pop()),s.b("  </div>\n</div>\n"),s.fl()},partials:{},subs:{}})}).call(e,i(1))},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.attributes({checkSelector:".DMReadReceipt-check",statusSelector:".DMReadReceipt-statusView",readRecieptSelector:".DMReadReceipt",seenClass:"is-seen",seenAnimatedClass:"is-seenAnimated",receiptExpandedClass:"is-expanded",userListContainerSelector:".DMReadReceiptUserList",userListExpandedSelector:".DMReadReceiptUserList-expanded",userListTruncatedSelector:".DMReadReceiptUserList-truncated",userListExpandSeenSelector:".DMReadReceiptUserList-expandSeen",seenByAllClass:"is-seenByAll",userListExpandedClass:"is-expanded",conversationContentSelector:".DMConversation-content",sentMessageSelector:".DirectMessage--sent:not(.is-rapidFire)"}),this.resetState=function(t){this.conversationId=t.conversation_id,this.isOtoConversation=t.is_oto,this.participants=t.participants&&t.participants.filter(function(t){return t.id_str!==h.default.user.id})},this.localizeUserList=function(t,e){var i=e?t.slice(0,10):t,s=t.length-i.length;if(s>0){var n={user_count:s};n["user_count_"+l.default.PluralRules.rule_for(s)]=!0;var o=m.default.render(n);i.push(o)}var a=new l.default.ListFormatter;return a.format(i)},this.getSeenByData=function(t,e){var i=t.filter(function(t){var i=t.join_conversation_event_id;return!i||1!==a.default.compare(i,e)}),s=i.filter(function(t){return t.last_read_event_id&&1!==a.default.compare(e,t.last_read_event_id)});return{seenByAll:s.length===i.length,seenByUsers:s}},this.setMessageToSeenState=function(t){var e=this.isOtoConversation?"Seen":"Seen by everyone";t.find(this.attr.statusSelector).text(e),t.find(this.attr.checkSelector).addClass(this.attr.seenClass),t.find(this.attr.userListContainerSelector).addClass(this.attr.seenByAllClass)},this.setMessageToCollapsedState=function(t){t.data("has-expanded-read-receipt",!1),t.find(this.attr.readRecieptSelector).removeClass(this.attr.receiptExpandedClass),t.find(this.attr.userListContainerSelector).addClass("u-hidden")},this.setMessageToExpandedState=function(e){var i=this;this.select("sentMessageSelector").each(function(s,n){var o=t(n),a=o.data("message-id")===e.data("message-id"),r=i.isMessageExpanded(o);!a&&r&&i.setMessageToCollapsedState(o)}),e.data("has-expanded-read-receipt",!0),e.find(this.attr.readRecieptSelector).addClass(this.attr.receiptExpandedClass),e.find(this.attr.userListContainerSelector).removeClass("u-hidden")},this.populateDetails=function(t,e){var i=e.seenByUsers;if(e.seenByAll)this.setMessageToSeenState(t);else if(!this.isOtoConversation&&i.length>0){var s={user_count:i.length};s["user_count_"+l.default.PluralRules.rule_for(i.length)]=!0;var n=v.default.render(s);t.find(this.attr.statusSelector).text(n);var o=i.map(function(t){return t.name}),a=this.localizeUserList(o,!0),r=this.localizeUserList(o,!1);t.find(this.attr.userListTruncatedSelector).html(a,!0),t.find(this.attr.userListExpandedSelector).html(r,!1)}},this.handleConversationUpdate=function(e,i){var s=this;if(this.resetState(i),this.participants){var n=this.$content.find(this.attr.sentMessageSelector);n.each(function(e,i){var n=t(i),o=n.data("message-id"),a=s.getSeenByData(s.participants,o);if(a.seenByAll){var r=n.find(s.attr.checkSelector),l=n.data("is-read-receipt-set"),c=l?s.attr.seenAnimatedClass:s.attr.seenClass;r.addClass(c)}s.isMessageExpanded(n)&&s.populateDetails(n,a),n.data("is-read-receipt-set",!0)})}},this.isMessageExpanded=function(t){return t.data("has-expanded-read-receipt")===!0},this.expandReadReceipt=function(t){if(this.participants){var e=t.data("message-id"),i=this.getSeenByData(this.participants,e);this.populateDetails(t,i),this.setMessageToExpandedState(t)}},this.handleReadReceiptClick=function(e,i){var s=t(e.target).closest(this.attr.sentMessageSelector);this.isMessageExpanded(s)?this.setMessageToCollapsedState(s):this.expandReadReceipt(s)},this.expandSeenList=function(e,i){var s=t(e.target).closest(this.attr.sentMessageSelector);s.find(this.attr.userListContainerSelector).addClass(this.attr.userListExpandedClass)},this.after("initialize",function(){this.$content=this.select("conversationContentSelector"),this.on("uiDMConversationUpdated",this.handleConversationUpdate),this.on("click",{readRecieptSelector:this.handleReadReceiptClick,userListExpandSeenSelector:this.expandSeenList})})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(357),a=s(o),r=i(483),l=s(r),c=i(111),d=s(c),u=i(136),h=s(u),f=i(123),p=(s(f),i(842)),m=s(p),g=i(843),v=s(g);e.default=(0,d.default)(n)}).call(e,i(10))},function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<a href="#" class="DMReadReceiptUserList-expandSeen">\n  \n    '),s.s(s.f("user_count_one",t,e,1),t,e,0,80,100,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(i.v(i.f("user_count",t,e,0))),i.b(" other")}),t.pop()),s.b("\n"+i),s.b("    "),s.s(s.f("user_count_other",t,e,1),t,e,0,145,166,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(i.v(i.f("user_count",t,e,0))),i.b(" others")}),t.pop()),s.b("\n"+i),s.b("  \n</a>"),s.fl()},partials:{},subs:{}})}).call(e,i(1))},function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b("\n"+i),s.b("  "),s.s(s.f("user_count_one",t,e,1),t,e,0,22,51,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b("Seen by "),i.b(i.v(i.f("user_count",t,e,0))),i.b(" person")}),t.pop()),s.b("\n"+i),s.b("  "),s.s(s.f("user_count_other",t,e,1),t,e,0,94,123,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b("Seen by "),i.b(i.v(i.f("user_count",t,e,0))),i.b(" people")}),t.pop()),s.b("\n"),s.fl()},partials:{},subs:{}})}).call(e,i(1))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.attributes({acceptSelector:".DMTrustRequest-confirm",deleteSelector:".DMTrustRequest-cancel",reportSelector:".DMTrustRequest-report",trustContainerSelector:".DMConversation-trustRequest",untrustedMediaSelector:".Sensitive--untrusted"}),this.shouldUpdate=function(t,e){return this.conversationId!==e.conversation_id||this.isTrusted!==e.is_trusted||this.isReadonly!==e.is_readonly},this.storeConvoData=function(t){this.conversationId=t.conversation_id,this.isTrusted=t.is_trusted,this.isOto=t.is_oto,this.isReadonly=t.is_readonly},this.handleConversationUpdate=function(t,e){this.storeConvoData(e);var i=this.isTrusted===!1&&!this.isReadonly;if(i){var s=e.conversation.title.raw,n=u.default.render({conversation_title:s,is_oto:e.is_oto});this.select("trustContainerSelector").html(n)}this.select("trustContainerSelector").toggleClass("u-hidden",!i);var o=i?"uiDMHideComposeSection":"uiDMShowComposeSection";this.trigger(o)},this.handleAccept=function(t,e){this.select("trustContainerSelector").addClass("u-hidden"),this.select("untrustedMediaSelector").trigger("uiShowAllMedia"),this.trigger("uiDMShowComposeSection"),this.trigger("uiDMTrustRequestAccept",{conversation_id:this.conversationId})},this.handleDelete=function(t,e){this.trigger("uiOpenConfirmDialog",{titleText:"Are you sure?",bodyText:"This conversation history will be deleted from your inbox",cancelText:"Cancel",submitText:this.is_oto?"Delete":"Leave",modalSize:"small",action:"DMTrustRequestDelete"})},this.handleReport=function(t,e){t.preventDefault(),this.trigger("uiShowDMReportConversationConfirmation",{conversation_id:this.conversationId})},this.confirmDelete=function(t,e){this.trigger("uiDeleteConversation",{conversation_id:this.conversationId})},this.after("initialize",function(){this.on("uiDMUpdateTrustRequest uiOpenConversationView uiOpenNewConversationView",(0,l.default)(this.handleConversationUpdate,this.shouldUpdate,this)),this.on("click",{acceptSelector:this.handleAccept,deleteSelector:this.handleDelete,reportSelector:this.handleReport}),this.on(document,"uiDMTrustRequestDeleteConfirm",this.confirmDelete)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(358),l=s(r),c=i(123),d=(s(c),i(845)),u=s(d);e.default=(0,a.default)(n)},function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<div class="DMTrustRequest">\n  <div class="DMTrustRequest-message">\n'),s.s(s.f("is_oto",t,e,1),t,e,0,83,289,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b("      Do you want to allow "),i.b(i.v(i.f("conversation_title",t,e,0))),i.b(" to message you? They won't know you've seen their request until you choose to accept. <button class=\"DMTrustRequest-report\">Flag conversation</button>\n")}),t.pop()),s.b("\n"+i),s.s(s.f("is_oto",t,e,1),t,e,1,0,0,"")||s.b("      Do you want to participate in this group? They won't know you've seen the request until you choose to accept. <button class=\"DMTrustRequest-report\">Flag conversation</button>\n"),s.b('  </div>\n  <div class="DMTrustRequest-actions">\n    <button class="DMTrustRequest-cancel btn">Delete</button>\n    <button class="DMTrustRequest-confirm btn primary-btn">Accept</button>\n  </div>\n</div>'),s.fl()},partials:{},subs:{}})}).call(e,i(1))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.attributes({dialogContentSelector:".DMViewParticipants-content",doneButtonSelector:".DMViewParticipants-done",spinnerSelector:".DMViewParticipants-spinner"}),this.prepareViewParticipants=function(){this.select("dialogContentSelector").hide(),this.select("spinnerSelector").show()},this.updateViewParticipants=function(t,e){t&&t.preventDefault(),this.select("dialogContentSelector").html(e.html).show(),this.select("spinnerSelector").hide(),this.trigger("uiDMDialogOpenedViewParticipants")},this.after("initialize",function(){this.on("uiViewParticipants",this.prepareViewParticipants),this.on("dataConversationParticipantsResult",this.updateViewParticipants),this.on("click",{doneButtonSelector:"uiDMViewParticipantsDone"})})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o);e.default=(0,a.default)(n)},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.attributes({dropdownSelector:".DMConversationSettings-dropdown",conversationIdSelector:"[data-thread-id]",notificationCheckboxSelector:'.DMConversationSettings-notifications input[name="dm[toggle_notifications]"]',participantsSelector:".DMConversationSettings-participants",participantsContentSelector:".DMConversationSettings-participants--content",participantsSpinnerSelector:".DMConversationSettings-participants--spinner",participantsHeaderSelector:".DMConversationSettings-participants--members",reportConversationSelector:".js-actionReportConversation",deleteConversationSelector:".js-actionDeleteConversation",enableNotificationsSelector:'input[name="dm[toggle_notifications]"]:not(:checked)',disableNotificationsConfirmSelector:'input[name="dm[toggle_notifications]"]:checked'}),this.prepareConvoSettingsView=function(t,e){e=e||{};var i=e.is_oto||e.screen_names&&1===e.screen_names.length;this.isGroup=!i,i?(this.$report.text("Report account"),this.$delete.text("Delete conversation")):(this.$report.text("Report conversation"),this.$delete.text("Leave conversation")),this.select("dropdownSelector").toggleClass("u-hidden",!this.isGroup),this.select("participantsSelector").toggleClass("u-hidden",!this.isGroup),this.select("participantsContentSelector").empty(),this.select("participantsHeaderSelector").empty()},this.handleActions=function(t,e){var i={conversation_id:this.conversationId};switch(t){case"uiDMLaunchConversationReportWebView":case"uiShowDMReportConversationConfirmation":case"uiShowDMDeleteConversationConfirmation":this.isGroup||(i.report_screen_name=this.screenName,i.reported_user_id=this.otherParticipantId),i.is_group=this.isGroup;break;case"uiToggleNotifications":this.$notificationsCheckbox.prop("checked",e.mute),i.enable_notifications=!e.mute}this.trigger(t,i)},this.updateConvoSettings=function(t,e){switch(e=e||{},t&&t.type){case"uiDMConversationUpdated":this.screenName=e.conversation_actions&&e.conversation_actions.screen_name,this.otherParticipantId=e.conversation_actions&&e.conversation_actions.other_participant_id,e.conversation_actions&&this.$notificationsCheckbox.prop("checked",!e.conversation_actions.notifications);break;case"dataNotificationsEnabled":case"dataNotificationsDisableFailed":e.sourceEventData&&this.conversationId===e.sourceEventData.conversation_id&&this.$notificationsCheckbox.prop("checked",!1);break;case"dataNotificationsDisabled":case"dataNotificationsEnableFailed":e.sourceEventData&&this.conversationId===e.sourceEventData.conversation_id&&this.$notificationsCheckbox.prop("checked",!0)}},this.renderParticipants=function(t,e){if(e&&e.conversation_id===this.conversationId){var i=(0,l.default)("Members ({{participants_number}})",{participants_number:e.participants_number});this.select("participantsHeaderSelector").text(i),this.select("participantsContentSelector").html(e.html).show(),this.select("participantsSpinnerSelector").hide()}},this.initConversationSettings=function(t,e){e&&"convoSettings"===e.activity&&(this.conversationId=this.select("conversationIdSelector").attr("data-thread-id"),this.isGroup&&this.conversationId&&(this.select("participantsContentSelector").hide(),this.select("participantsSpinnerSelector").show(),this.trigger("uiNeedsConversationParticipants",{conversation_id:this.conversationId})))},this.showNotificationsConfirmation=function(t,e){t&&t.preventDefault(),this.$notificationsCheckbox.prop("checked",!1),this.trigger("uiShowDMMuteNotificationsConfirmation")},this.after("initialize",function(){this.$delete=this.select("deleteConversationSelector"),this.$report=this.select("reportConversationSelector"),this.$notificationsCheckbox=this.select("notificationCheckboxSelector");var t=void 0;t=d.default.getDecider("dm_report_webview_macaw_swift_enabled")?"uiDMLaunchConversationReportWebView":"uiShowDMReportConversationConfirmation",this.on("click",{reportConversationSelector:this.handleActions.bind(this,t),deleteConversationSelector:this.handleActions.bind(this,"uiShowDMDeleteConversationConfirmation")}),this.on("change",{enableNotificationsSelector:this.handleActions.bind(this,"uiToggleNotifications",{mute:!1}),disableNotificationsConfirmSelector:this.showNotificationsConfirmation}),this.on("uiOpenConversationView uiOpenNewConversationView",this.prepareConvoSettingsView),this.on(document,"uiDMActivityOpened",this.initConversationSettings),this.on("uiDMConversationUpdated dataNotificationsEnabled dataNotificationsDisabled dataNotificationsEnableFailed dataNotificationsDisableFailed",this.updateConvoSettings),this.on("dataConversationParticipantsResult",this.renderParticipants)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(123),l=s(r),c=i(136),d=s(c);e.default=(0,a.default)(n)},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.attributes({avatarSelector:".DMTypingIndicator-avatar",avatarsContainerSelector:".DMTypingIndicator-avatarsContainer",containerSelector:".DMConversation-typingIndicator",messageBubbleSelector:".TypingIndicatorMessageBubble",overflowAvatarSelector:".DMTypingIndicator-avatar.is-overflowAvatar",overflowAvatarClass:"is-overflowAvatar",overflowCountSelector:".DMTypingIndicator-overflowCount",typingIndicatorSelector:".DMTypingIndicator",showHideDuration:300,avatarDisplayDuration:4e3,maxNumAvatars:5}),this.reset=function(t,e){this.$container.addClass("u-hidden").css({height:""}),this.$avatarsContainerSelector.empty(),this.$messageBubble.addClass("is-hidden"),this.activeAvatarList().forEach(function(t){return clearTimeout(t.timer)}),this.activeAvatars={}},this.show=function(){this.$container.stop().clearQueue().css({height:""}).removeClass("u-hidden"),this.$messageBubble.removeClass("is-hidden"),this.trigger("uiDMTypingIndicatorShown")},this.hideAnimation=function(){return this.$messageBubble.addClass("is-hidden"),this.$container.delay(250).animate({height:0},this.attr.showHideDuration).promise()},this.hide=function(e){var i=this,s=e?this.hideAnimation():t.Deferred().resolve().promise();s.then(function(){i.activeAvatarList().length?i.show():(i.$avatarsContainerSelector.empty(),i.$container.addClass("u-hidden"))})},this.updateOverflow=function(){var e=this.activeAvatarList().length,i=t(p.default.render({count:e-this.attr.maxNumAvatars+1}));this.$avatarsContainerSelector.find(this.attr.overflowCountSelector).remove();var s=e-this.attr.maxNumAvatars>0;s&&this.$avatarsContainerSelector.append(i);var n=this.select("avatarSelector").not(".is-hidden").not(this.attr.overflowAvatarSelector);n.css("visibility","");var o=this.attr.maxNumAvatars-n.length;if(o>0){var a=this.select("overflowAvatarSelector").slice(0,o);a.removeClass(this.attr.overflowAvatarClass),s&&a.last().css("visibility","hidden")}},this.addAvatar=function(e){var i=this.profileImageData[e].image_url,s=this.profileImageData[e].name;if(i){var n=t(h.default.render({alt:s,image_count:1,images:[{src:i}],overflow:this.activeAvatarList().length>=this.attr.maxNumAvatars})),o=!this.activeAvatarList().length;o&&this.$avatarsContainerSelector.empty(),this.$avatarsContainerSelector.append(n),this.activeAvatars[e]={timer:this.setRemoveTimeout(e),node:n},this.updateOverflow(),this.$container.hasClass("u-hidden")&&this.show()}},this.setRemoveTimeout=function(t){return setTimeout(this.removeAvatar.bind(this,t,!0),this.attr.avatarDisplayDuration)},this.refreshTimer=function(t){var e=this.activeAvatars[t];e&&(clearTimeout(e.timer),e.timer=this.setRemoveTimeout(t))},this.isEventForCurrentConvo=function(t,e){return this.conversationId&&this.conversationId===e.conversation_id},this.removeAvatar=function(t,e){var i=this.activeAvatars[t];if(i){clearTimeout(i.timer);var s=1===this.activeAvatarList().length;!s&&i.node.addClass("is-hidden"),delete this.activeAvatars[t],this.updateOverflow(),s&&this.hide(e)}},this.activeAvatarList=function(){return Object.keys(this.activeAvatars)},this.handleUserUpdate=function(t,e){var i=this;if(!e.should_request_inbox&&!e.is_empty){var s=(e.conversations||[]).filter(function(t){return t.conversation_id===i.conversationId})[0];s&&!s.is_empty&&(this.avatarsToClear.forEach(function(t){return i.removeAvatar(t,!1)}),this.avatarsToClear=[])}},this.handleConversationUpdate=function(t,e){e.conversation_id!==this.conversationId&&(this.reset(),this.conversationId=e.conversation_id);var i=e.participants||[];this.profileImageData=i.reduce(function(t,e){return t[e.id]={image_url:e.profile_image_url,name:e.name},t},{})},this.handleUpdateEvent=function(t,e){e.user_id&&this.avatarsToClear.push(e.user_id)},this.handleTypingEvent=function(t,e){var i=e.user_id;if(l.default.user.id!==i){var s=this.activeAvatars[i];s?this.refreshTimer(i):this.addAvatar(i)}},this.after("addAvatar",function(){this.trigger("uiDMTypingIndicatorAvatarAdded",{num_avatars:this.activeAvatarList().length})}),this.after("refreshTimer",function(){this.trigger("uiDMTypingIndicatorAvatarRefreshed",{num_avatars:this.activeAvatarList().length})}),this.after("initialize",function(){this.activeAvatars={},this.profileImageData={},this.avatarsToClear=[],this.$container=this.select("containerSelector"),this.$avatarsContainerSelector=this.select("avatarsContainerSelector"),this.$messageBubble=this.select("messageBubbleSelector"),this.on(document,"dataDMUserUpdates",this.handleUserUpdate),this.on(document,"uiDMConversationUpdated",this.handleConversationUpdate),this.on(document,"dataDMTyping",(0,d.default)(this.handleTypingEvent,this.isEventForCurrentConvo)),this.on(document,"dataDMUpdate",(0,d.default)(this.handleUpdateEvent,this.isEventForCurrentConvo))})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(136),l=s(r),c=i(358),d=s(c),u=i(849),h=s(u),f=i(850),p=s(f);e.default=(0,a.default)(n)}).call(e,i(10))},function(t,e,i){(function(e){function s(t,e,i){e=e||{};for(var s in a)e[s]||(e[s]=a[s]);return r.render(t,e,i)}var n=i(220).default,o={"dm/dm_avatar":i(374)},a=n(o),r=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<div class="DMTypingIndicator-avatar'),s.s(s.f("overflow",t,e,1),t,e,0,49,67,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(" is-overflowAvatar")}),t.pop()),s.b('">\n'),s.b(s.rp("<dm/dm_avatar0",t,e,"  ")),s.b("</div>"),s.fl()},partials:{"<dm/dm_avatar0":{name:"dm/dm_avatar",partials:{},subs:{}}},subs:{}});t.exports={template:r,partials:a,render:s}}).call(e,i(1))},function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<div class="DMTypingIndicator-overflowCount">\n  <span>+'),s.b(s.v(s.f("count",t,e,0))),s.b("</span>\n</div>"),s.fl()},partials:{},subs:{}})}).call(e,i(1))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({noShowError:!0}),this.conversation=function(t,e){e=e||{},this.get({url:"/messages/with/conversation",data:{id:e.conversation_id,max_entry_id:e.max_entry_id},eventData:e,success:u(t.target,"dataDMConversationResult"),error:h(u(t.target,"dataDMInvalidConversation",e),u(t.target,"dataDMError"))})},this.after("initialize",function(){this.on("uiNeedsDMConversation",this.conversation)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(352),l=s(r),c=i(244),d=s(c),u=l.default.triggerFn,h=l.default.chain;e.default=(0,a.default)(n,d.default)},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({noShowError:!0}),this.addWelcomeMessage=function(t,e){if(e=e||{},!e.has_tweet_attachment&&e.is_oto!==!1){var i={};"undefined"!=typeof e.welcome_message_id&&(i.welcome_message_id=e.welcome_message_id),this.post({url:"/messages/add_welcome_message_to_conversation/"+e.conversation_id,data:i,eventData:e,success:u(t.target,"dataDMConversationResult")})}},this.after("initialize",function(){this.on("uiRenderConversationView",this.addWelcomeMessage)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(352),l=s(r),c=i(244),d=s(c),u=l.default.triggerFn;e.default=(0,a.default)(n,d.default)},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({noShowError:!0}),this.deleteConversation=function(t,e){e=e||{};var i=p(f(t.target,"dataConversationDeleted",{conversation_id:e.conversation_id}),f(t.target,"dataDMUserUpdates")),s=p(f(t.target,"dataConversationDeleteFailed",{conversation_id:e.conversation_id}),f(t.target,"dataDMError"));this.destroy({url:"/messages/with/conversation",data:{id:e.conversation_id,cursor:this.dmCursor},eventData:e,success:i,error:s})},this.after("initialize",function(){
this.on("uiDeleteConversation",this.deleteConversation)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(244),l=s(r),c=i(854),d=s(c),u=i(352),h=s(u),f=h.default.triggerFn,p=h.default.chain,m=(0,a.default)(n,l.default,d.default);e.default=m},function(t,e){"use strict";function i(){this.storeDmCursor=function(t,e){e&&e.cursor&&(this.dmCursor=e.cursor,this.trigger("dataDMCursorUpdated",{cursor:this.dmCursor}))},this.storeDmCursorFromUpdates=function(t,e){e&&e.inbox_updates&&e.inbox_updates.cursor&&(this.dmCursor=e.inbox_updates.cursor,this.trigger("dataDMCursorUpdated",{cursor:this.dmCursor}))},this.after("initialize",function(){this.on(document,"dataDMCursor",this.storeDmCursor),this.on(document,"dataDMUserUpdates",this.storeDmCursorFromUpdates)})}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({noShowError:!0}),this.deleteMessage=function(t,e){e=e||{},this.post({url:"/i/direct_messages/destroy",eventData:e,data:{id:e.id,conversation_id:e.conversation_id,cursor:this.dmCursor},success:f(t.target,["dataDMDeleteSuccess","dataDMUserUpdates"]),error:p(f(t.target,"dataDMDeleteFailed",e),f(t.target,"dataDMError"))})},this.after("initialize",function(){this.on("uiDMDialogDeleteMessage",this.deleteMessage)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(352),l=s(r),c=i(244),d=s(c),u=i(854),h=s(u),f=l.default.triggerFn,p=l.default.chain;e.default=(0,a.default)(n,d.default,h.default)},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.attributes({darkTraffic:!1}),this.processDMTypingEvent=function(t){!this.attr.darkTraffic&&this.trigger("dataDMTyping",t)},this.processDMUpdate=function(t){!this.attr.darkTraffic&&this.trigger("dataDMUpdate",t)},this.processLPMessage=function(t,e){e.payload.dm_typing?this.processDMTypingEvent(e.payload.dm_typing):e.payload.dm_update&&this.processDMUpdate(e.payload.dm_update)},this.updateSubscriptions=function(t,e){if(e&&t){var i="subscribe"===t?"dataLPSubscribe":"dataLPUnsubscribe";this.trigger(i,{consumer_id:this.consumerId,topic:this.getTopicsForConversation(e)})}},this.handleConversationUpdate=function(t,e){e.conversation_id!==this.conversationId&&this.updateSubscriptions("unsubscribe",this.conversationId),this.updateSubscriptions("subscribe",e.conversation_id),this.conversationId=e.conversation_id},this.handleConversationViewChange=function(t){var e="uiDMConversationActivityHidden"===t.type?"unsubscribe":"subscribe";this.updateSubscriptions(e,this.conversationId)},this.getTopicsForConversation=function(t){return["/dm_typing/"+t,"/dm_update/"+t]},this.after("initialize",function(){this.consumerId=parseInt(Math.random()*Number.MAX_SAFE_INTEGER,10),this.on("dataLPMessage",this.processLPMessage),this.on("uiDMConversationUpdated",this.handleConversationUpdate),this.on("uiDMConversationActivityHidden uiDMConversationActivityVisible",this.handleConversationViewChange)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o);e.default=(0,a.default)(n)},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({noShowError:!0}),this.reportConversation=function(t,e){e=e||{};var i=p(f(t.target,"dataDMUserUpdates"),f(t.target,"dataConversationReported",{conversation_id:e.conversation_id})),s=p(f(t.target,"dataDMError"),f(t.target,"dataConversationReportFailed",{conversation_id:e.conversation_id}));this.post({url:"/i/direct_messages/report_conversation",data:{conversation_id:e.conversation_id,report_as:e.report_as,cursor:this.dmCursor},success:i,error:s})},this.after("initialize",function(){this.on("uiReportConversation",this.reportConversation)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(244),l=s(r),c=i(854),d=s(c),u=i(352),h=s(u),f=h.default.triggerFn,p=h.default.chain,m=(0,a.default)(n,l.default,d.default);e.default=m},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({noShowError:!0}),this.reportMessage=function(t,e){e=e||{},this.post({url:"/i/direct_messages/report",data:{id:e.id,conversation_id:e.conversation_id,report_as:e.report_as},eventData:e,success:u(t.target,["dataDMReportSuccess","dataDMConversationResult"]),error:h(u(t.target,"dataDMReportFailed",e),u(t.target,"dataDMError"))})},this.after("initialize",function(){this.on("uiDMDialogReportDM",this.reportMessage)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(352),l=s(r),c=i(244),d=s(c),u=l.default.triggerFn,h=l.default.chain;e.default=(0,a.default)(n,d.default)},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({noShowError:!0}),this.mergeErrorParams=function(t,e,i,s){return o({},t,{error:{type:e,code:i,message:s}})},this.sendImage=function(t,e){var i=this,s=e.media_data||{},n=function(t){return i.trigger("dataMediaSruComplete",s),o({},e,{media_id:t})},a=b(t.target,"dataDMSendFailed",function(t){return i.trigger("dataMediaSruCancel",s),i.mergeErrorParams(e,"media_upload",t.code,t.message)});return s.uploadId?this.mediaSruFinalize(s).then(n,a):Promise.resolve(e)},this._sendMessagePromise=function(t,e,i){var s=this;return new Promise(function(n,o){var a=function(t){e(t),n()},r=function(t){i(t),o()};s.post({url:"/i/direct_messages/new",data:t,eventData:t,success:a,error:r})})},this.sendMessage=function(t,e){var i=this,s=function(i,s){var n=this;return s&&s.retry&&"dataDMDialogSendMessageRetry"!==t.type?setTimeout(function(){return n.trigger(i,"dataDMDialogSendMessageRetry",e)},s.delay):this.trigger(i,"dataDMSendSuccess",s),s},n=b(t.target,"dataDMSendFailed",function(t){return i.mergeErrorParams(e,"message_send",t.xhr.status,t.message)}).bind(this);return this._sendMessagePromise(e,s.bind(this,t.target),n)},this.getConversationQueue=function(t){if(t)return this.conversationQueues[t]=this.conversationQueues[t]||(0,m.default)(),this.conversationQueues[t]},this.updateInFlight=function(t){var e=this,i=Object.keys(this.conversationQueues).reduce(function(t,i){return t[i]=e.conversationQueues[i].length(),t},{});return this.trigger("dataDMMessagesInFlight",i),t},this.enqueueMessage=function(t,e){var i=this.updateInFlight.bind(this),s=this.getConversationQueue(t).enqueue(e).then(i,i);return this.updateInFlight(),s},this.handleSend=function(t,e){var i=this;e.resend_id=e.resend_id||v.default.add({event:t,sendParams:e});var s=function(){return i.sendImage(t,e).then(i.sendMessage.bind(i,t))},n=e.conversation_id;return n?this.enqueueMessage(n,s):s()},this.discardDraftData=function(t,e){e.resend_id&&v.default.remove(e.resend_id)},this.handleResend=function(t,e){var i=v.default.get(e.resend_id);i&&this.handleSend(i.event,i.sendParams)},this.after("initialize",function(){this.on("uiDMSendMessage dataDMDialogSendMessageRetry",this.handleSend),this.on("uiDMResendConfirm",this.handleResend),this.conversationQueues={},this.on("uiDMConversationNeedsInFlightState",this.updateInFlight),this.on("dataDMSendSuccess uiDMResendDiscard",this.discardDraftData)})}Object.defineProperty(e,"__esModule",{value:!0});var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},a=i(111),r=s(a),l=i(352),c=s(l),d=i(244),u=s(d),h=i(860),f=s(h),p=i(866),m=s(p),g=i(224),v=s(g),b=c.default.triggerFn;e.default=(0,r.default)(n,u.default,f.default)},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.mediaSruFinalize=function(t){var e=this,i=t.uploadId,s=this.sruDeferreds,n={uploadId:i,trimRange:t.trimRange,tweetboxId:t.tweetboxId,mediaCategory:t.mediaCategory,sourceUrl:t.sourceUrl,mediaType:t.mediaType},a=function(e){var i=(0,r.default)(e.code,t.fileType);throw o({},e,{message:i})},l=new Promise(function(t,o){var a={resolve:t,reject:o};s[i]=a,e.trigger("uiMediaSruFinalize",n)});return l.catch(a)},this.uploadMediaSruResult=function(t,e){var i=e.uploadId,s=this.sruDeferreds[i];if(s){switch(t.type){case"dataMediaSruSuccess":s.resolve(e.mediaId);break;case"dataMediaSruCancel":s.reject({cancelled:!0});break;default:s.reject(e.error)}delete this.sruDeferreds[i]}},this.after("initialize",function(){this.sruDeferreds={},this.on("dataMediaSruSuccess dataMediaSruError dataMediaSruCancel dataMediaSruComplete",this.uploadMediaSruResult)})}Object.defineProperty(e,"__esModule",{value:!0});var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},a=i(861),r=s(a);e.default=n},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e,i,s){return s=s||t.noop,s(i,e)||g(i,e)||m(e)};var n=i(123),o=(s(n),i(398)),a=s(o),r=i(473),l=s(r),c=i(862),d=s(c),u=i(864),h=s(u),f=i(865),p=s(f),m=function(t){switch(t){case l.default.FILE_TOO_LARGE:return"The selected media is too large.";case l.default.INVALID_MEDIA:return"Your media file could not be processed.";case l.default.TIMEOUT:return"The upload session has timed out.";case l.default.UNSUPPORTED_MEDIA:return"Your media file is not compatible.";case l.default.ZERO_FILE_LENGTH:return"File has zero length.";default:return"Uploading media failed! Please try again later."}},g=function(t,e){switch(e){case a.default.VIDEO:return(0,d.default)(t);case a.default.IMAGE:return(0,h.default)(t);case a.default.GIF:return(0,p.default)(t)}}}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=u.default.render({article_number:"20172128"});switch(t){case r.default.INVALID_MEDIA:return(0,o.default)("Your video file could not be processed. Please see tips for uploading video files. {{learnMoreLink}}",{learnMoreLink:e});case r.default.FILE_TOO_LARGE:return(0,o.default)("Your video file is too large. Videos should be less than {{maxSize}} MB. {{learnMoreLink}}.",{maxSize:c.default.getDeciderValue("upload_video_size"),learnMoreLink:e});case r.default.UNSUPPORTED_MEDIA:return(0,o.default)("Your video file is not compatible. Please see tips for uploading video files. {{learnMoreLink}}",{learnMoreLink:e})}};var n=i(123),o=s(n),a=i(473),r=s(a),l=i(136),c=s(l),d=i(863),u=s(d)},function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<a href="https://support.twitter.com/articles/'),s.b(s.v(s.f("article_number",t,e,0))),s.b('#import-web" target="_blank" rel="noopener">Learn more</a>'),s.fl()},partials:{},subs:{}})}).call(e,i(1))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=c.default.render({article_number:"20156423"});switch(t){case r.default.INVALID_MEDIA:return(0,o.default)("Your image file could not be processed. Please see tips for uploading images. {{learnMoreLink}}",{learnMoreLink:e});case r.default.FILE_TOO_LARGE:return(0,o.default)("Your image file is too large. Images should be less than 5 MB. {{learnMoreLink}}.",{learnMoreLink:e});case r.default.UNSUPPORTED_MEDIA:return(0,o.default)("Your image file is not compatible. Please see tips for uploading images. {{learnMoreLink}}",{learnMoreLink:e})}};var n=i(123),o=s(n),a=i(473),r=s(a),l=i(863),c=s(l)},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=c.default.render({article_number:"20156423"});switch(t){case r.default.INVALID_MEDIA:return(0,o.default)("Your GIF file could not be processed. Please see tips for uploading GIFs. {{learnMoreLink}}",{learnMoreLink:e});case r.default.FILE_TOO_LARGE:return(0,o.default)("Your GIF file is too large. GIFs should be less than 3 MB. {{learnMoreLink}}.",{learnMoreLink:e});case r.default.UNSUPPORTED_MEDIA:return(0,o.default)("Your GIF file is not compatible. Please see tips for uploading GIFs. {{learnMoreLink}}",{learnMoreLink:e})}};var n=i(123),o=s(n),a=i(473),r=s(a),l=i(863),c=s(l)},function(t,e){"use strict";function i(){function t(){if("running"!==i&&e.length>0){var s=e.shift();i="running";var n=function(e,s){if(i="idle",t(),e)return s;throw s},o=s();o.queuedPromise().then(n.bind(null,!0),n.bind(null,!1)).then(o.resolve,o.reject)}}var e=[],i="idle";return{enqueue:function(i){var s=new Promise(function(s,n){var o=function(){return{queuedPromise:i,resolve:s,reject:n}};e.push(o),t()});return s},numPending:function(){return e.length},numInProgress:function(){return"running"===i?1:0},length:function(){return this.numPending()+this.numInProgress()}}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.after("initialize",function(){this.scribeOnEvent("uiRevealSuspiciousDM",{component:"rtf_message",action:"open"}),this.scribeOnEvent("uiReportDMAsSpam",{component:"rtf_message",action:"report_as_spam"}),this.scribeOnEvent("uiReportDMAsSafe",{component:"rtf_message",action:"report_as_ok"})})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(142),l=s(r),c=(0,a.default)(n,l.default);e.default=c},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({noShowError:!0}),this.toggleNotifications=function(t,e){e=e||{};var i=h(u(t.target,"dataDMConversationResult"),u(t.target,e.enable_notifications?"dataNotificationsEnabled":"dataNotificationsDisabled")),s=u(t.target,e.enable_notifications?"dataNotificationsEnableFailed":"dataNotificationsDisableFailed");this.post({url:"/i/direct_messages/notifications",data:{id:e.conversation_id,enable_notifications:e.enable_notifications,mute_duration:e.mute_duration},eventData:e,success:i,error:s})},this.after("initialize",function(){this.on("uiToggleNotifications",this.toggleNotifications)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(244),l=s(r),c=i(352),d=s(c),u=d.default.triggerFn,h=d.default.chain,f=(0,a.default)(n,l.default);e.default=f},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.accept=function(t,e){var i="https://api.twitter.com/1.1/dm/conversation/"+e.conversation_id+"/accept.json";this.post({url:i,useOAuthSessionAuth:!0})},this.after("initialize",function(){this.on("uiDMTrustRequestAccept",this.accept)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(244),l=s(r),c=(0,a.default)(n,l.default);e.default=c},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.after("initialize",function(){this.scribeOnEvent("uiDMDialogSharedTweetClick",{element:"shared_tweet_dm",action:"click"})})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(142),l=s(r),c=(0,a.default)(n,l.default);e.default=c},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({noShowError:!0}),this.update=function(t,e){var i=this;e=e||{};var s=t.target,n=l.default.get(e.fileId);n&&this.mediaSruFinalize(n).then(function(t){return i.post({url:"/i/direct_messages/update_avatar",data:{conversation_id:e.conversation_id,media_id:t},success:m(s,"dataDMUpdateConversationAvatarSuccess"),error:m(s,"dataDMUpdateConversationAvatarFailed")})})},this.remove=function(t,e){e=e||{},this.post({url:"/i/direct_messages/update_avatar",data:{conversation_id:e.conversation_id},success:m(t.target,"dataDMRemoveConversationAvatarSuccess"),error:m(t.target,"dataDMRemoveConversationAvatarFailed")})},this.after("initialize",function(){this.on("uiDMUpdateConversationAvatar",this.update),this.on("uiDMRemoveConversationAvatar",this.remove)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(224),l=s(r),c=i(352),d=s(c),u=i(244),h=s(u),f=i(860),p=s(f),m=d.default.triggerFn;e.default=(0,a.default)(n,h.default,p.default)},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({noShowError:!0}),this.updateName=function(t,e){e=e||{},this.post({url:"/i/direct_messages/update_name",data:{id:e.conversation_id,name:e.name},success:u(t.target,["dataDMConversationResult","dataUpdateConversationNameSuccess"]),error:u(t.target,"dataUpdateConversationNameFailure")})},this.after("initialize",function(){this.on("uiUpdateConversationName",this.updateName)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(244),l=s(r),c=i(352),d=s(c),u=d.default.triggerFn;e.default=(0,a.default)(n,l.default)},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.attributes({inboxSelector:".DMInbox-content",inboxItemSelector:".DMInboxItem",conversationListSelector:".DMInbox-conversations",eventData:{scribeContext:{component:"dm_conversation_list_dialog"}},markAllReadSelector:".mark-all-read",noMessagesSelector:".dm-no-messages",spinnerSelector:".DMInbox-spinner",loadNextPageRange:150,notifications:!1,usePushNotifications:!1}),this.removeStaleInboxItems=function(t,e){var i=(e||[]).map(function(t){return this.generateInboxItemWithIdSelector(t)},this).join(", ");t.find(i).parent("li").remove()},this.sortInboxClone=function(e){var i=e.children().get();i.sort(function(e,i){var s=t(e).children().first().attr("data-sort-event-id"),n=t(i).children().first().attr("data-sort-event-id");return-1*a.default.compare(s,n)});var s=(i||[]).reduce(function(t,e){return t+e.outerHTML},"");e.html(s)},this.getDeletedConversationIDs=function(t){var e=(t||[]).filter(function(t){return"conversation_delete"===t.type}).map(function(t){return t.conversation_id});return e},this.applyUserUpdates=function(t,e){if(e.should_request_inbox)this.trigger("uiNeedsDMConversationList");else if(!e.is_empty){var i=e.inbox_updates,s=e.update_events,n=this.select("conversationListSelector").clone(),o=i&&i.updated_conversation_ids,a=this.getDeletedConversationIDs(s),r=(o||[]).concat(a);this.removeStaleInboxItems(n,r),n.prepend(i&&i.html),this.sortInboxClone(n),this.select("conversationListSelector").replaceWith(n),this.$node.data({markAllReadId:e.mark_all_read_id,maxEntryId:e.max_entry_id})}},this.applyInboxResult=function(t,e){var i=this.$node.data(),s=e.sourceEventData;if(s&&s.max_entry_id){if(this.isNextPage(i.minEntryId,e.max_entry_id)){var n=this.select("conversationListSelector").clone();this.removeStaleInboxItems(n,e.threads),n.append(e.html),this.select("conversationListSelector").replaceWith(n),this.$node.data({minEntryId:e.min_entry_id,hasMore:e.has_more})}}else this.select("conversationListSelector").html(e.html||""),this.trigger("dataDMCursor",{cursor:e.cursor}),this.$node.removeData(),this.$node.data({markAllReadId:e.mark_all_read_id,minEntryId:e.min_entry_id,maxEntryId:e.max_entry_id,hasMore:e.has_more});this.trigger("uiResetDMPoll")},this.isNextPage=function(t,e){return!(!t||!e)&&a.default.compare(t,e)>=0},this.updateSpinner=function(){this.select("spinnerSelector").toggleClass("u-hidden",!this.$node.data("hasMore"))},this.handleInboxScroll=function(e,i){var s=t(e.currentTarget);s[0].scrollHeight-s.scrollTop()-this.attr.loadNextPageRange<=s.outerHeight()&&this.requestNextPageThrottled()},this.requestNextPage=function(){var t=this.$node.data().hasMore;("undefined"==typeof t||t)&&this.trigger("uiNeedsDMConversationList",{max_entry_id:this.$node.data("minEntryId")})},this.requestNextPageThrottled=d.default.throttle(this.requestNextPage,1e3),this.markAllMessages=function(){this.trigger("dataMarkDMsAsRead",{last_message_id:this.$node.data("markAllReadId")||-1}),this.trigger("uiDMDialogMarkMessage"),this.select("inboxItemSelector").removeClass("is-unread"),this.trigger("uiReadStateChanged",{msgCount:0})},this.generateInboxItemWithIdSelector=function(t){return this.attr.inboxItemSelector+'[data-thread-id="'+t+'"]'},this.markConversationRead=function(t,e){e.recipient_id&&this.$node.find(this.generateInboxItemWithIdSelector(e.recipient_id)+".is-unread").removeClass("is-unread")},this.markConversationUnread=function(t,e){e.sourceEventData&&e.sourceEventData.recipient_id&&this.$node.find(this.generateInboxItemWithIdSelector(e.sourceEventData.recipient_id)).addClass("is-unread")},this.inboxNeedsRefresh=function(t,e){this.$node.addClass("needs-refresh")},this.removeConversation=function(t,e){this.$node.find(this.generateInboxItemWithIdSelector(e.conversation_id)).parent("li").remove(),this.trigger("uiRenderConversationListView")},this.initiateKnownConversation=function(e,i){if(e){var s=t(e.target);if(this.isProfileLink(s))return;if(s.hasClass("DMInboxItem-media"))return}e&&e.preventDefault();var n=t(i.el),o=n.attr("data-thread-id"),a=new RegExp("^([1-9][0-9]*)-([1-9][0-9]*)$","g");this.trigger("uiRenderConversationView",{conversation_id:o,is_oto:a.test(o),name:n.find(".fullname").html(),most_recent_event_id:n.attr("data-last-message-id")})},this.isProfileLink=function(t){return!!t.closest("a.js-user-profile-link").length},this.setEmptyState=function(t,e){switch(t.type){case"dataDMConversationEmptyState":this.$node.toggleClass("is-empty",!0),this.$node.data("hasMore",!1);break;case"dataDMConversationListResult":this.$node.toggleClass("is-empty",!1);break;case"dataDMUserUpdates":e&&e.conversations&&e.conversations.length&&this.$node.toggleClass("is-empty",!1)}},this.after("setEmptyState",this.updateSpinner),this.after("applyInboxResult",this.updateSpinner),this.after("initialize",function(){this.attr.notifications&&this.attachChild(p.default,this.$node.find(".DMNotificationsPermissionRequest"),{useNativePush:this.attr.usePushNotifications}),this.on(document,"dataDMConversationListResult",this.applyInboxResult),this.on(document,"dataDMUserUpdates",this.applyUserUpdates),this.on(document,"uiDMInboxWantsRefreshed",this.inboxNeedsRefresh),this.on(this.select("inboxSelector"),"scroll",this.handleInboxScroll),this.on(document,"uiDeleteConversation uiReportConversation",this.removeConversation),this.on(document,"dataConversationDeleteFailed dataConversationReportFailed","uiNeedsDMConversationList"),this.on(document,"dataDMConversationEmptyState dataDMConversationListResult dataDMUserUpdates",this.setEmptyState),this.on(document,"dataMarkDMsAsRead",this.markConversationRead),this.on(document,"dataDMReadError",this.markConversationUnread),this.on(document,"uiCloseDMConversation","uiRenderConversationListView"),this.on("click",{inboxItemSelector:this.initiateKnownConversation,markAllReadSelector:this.markAllMessages})})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(357),a=s(o),r=i(111),l=s(r),c=i(126),d=s(c),u=i(231),h=s(u),f=i(874),p=s(f),m=(0,l.default)(n,h.default);e.default=m}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({acceptSelector:".js-prompt-accept",dismissSelector:".js-prompt-later",daysToWaitOnDismiss:30,useNativePush:!1}),this.shouldDisplayRequest=function(){var t="Notification"in window;if(!t)return!1;var e="default"===Notification.permission,i=this.storage.getItem("last_dismissed_timestamp")||0,s=this.now()-i>24*this.attr.daysToWaitOnDismiss*60*60*1e3;return e&&s},this.now=function(){return Date.now()},this.handleAccept=function(){this.trigger("uiABImpression",{experiment:"web_native_push_notifications_4335"}),this.attr.useNativePush&&this.pushSupported?this.trigger("uiPushSubscriptionChangeRequested",{subscribe:!0}):this.trigger("uiRequestNativeNotificationPermission"),this.trigger("uiDismissDMNotice"),this.scribeAction("success")},this.handleDismiss=function(){this.storage.setItem("last_dismissed_timestamp",this.now()),this.trigger("uiDismissDMNotice"),this.scribeAction("dismiss")},this.scribeAction=function(t){this.scribe({component:"dm_conversation_list_dialog",element:"native_notifications_permission_request",action:t})},this.showNotice=function(){this.trigger("uiShowDMNotice")},this.updatePushSupport=function(t,e){e.supported&&(this.pushSupported=!0),e.subscribed&&this.trigger("uiDismissDMNotice")},this.after("initialize",function(){this.pushSupported=!1,this.storage=new h.default("dm_notifications"),this.shouldDisplayRequest()&&(this.on("click",{acceptSelector:this.handleAccept,dismissSelector:this.handleDismiss}),this.on(document,"dataPushSubscriptionState",this.updatePushSupport),this.trigger("uiWantsPushSubscriptionState"),this.on(document,"uiSwiftLoaded",d.default.once(this.showNotice).bind(this)))})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(142),l=s(r),c=i(126),d=s(c),u=i(202),h=s(u),f=(0,a.default)(n,l.default);e.default=f},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({noShowError:!0}),this.inbox=function(t,e){e=e||{},this.get({url:"/messages",data:{min_entry_id:e.min_entry_id,max_entry_id:e.max_entry_id},eventData:e,success:u(t.target,function(t){return t.is_empty_state?"dataDMConversationEmptyState":"dataDMConversationListResult"}),error:u(t.target,"dataDMError")})},this.after("initialize",function(){this.on("uiNeedsDMConversationList",this.inbox)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(352),l=s(r),c=i(244),d=s(c),u=l.default.triggerFn;e.default=(0,a.default)(n,d.default)},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({noShowError:!0}),this.viewParticipants=function(t,e){e=e||{},this.get({url:"/i/direct_messages/participants",data:{conversation_id:e.conversation_id},eventData:e,success:u(t.target,"dataConversationParticipantsResult"),error:u(t.target,"dataDMError")})},this.after("initialize",function(){this.on("uiNeedsConversationParticipants",this.viewParticipants)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(244),l=s(r),c=i(352),d=s(c),u=d.default.triggerFn;e.default=(0,a.default)(n,l.default)},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.attributes({notice:".DMNotice",dismiss:".DMNotice-dismiss, .DMNotice-cancel",needsExplicitDismiss:".DMNotice--explicitDismiss",toast:".DMNotice--toast",toastMessage:".DMNotice--toast .DMNotice-message"}),this.findNotice=function(t){return this.select("notice").filter(t)},this.show=function(e,i){this.dismissAll(!0);var s=i&&i.notice?this.findNotice(i.notice):t(e.target).closest(this.attr.notice);s.slideDown()},this.dismiss=function(e,i){var s=i&&i.notice?this.findNotice(i.notice):t(e.target).closest(this.attr.notice);s.slideUp()},this.dismissAll=function(t){var e=this.select("notice").not(this.attr.needsExplicitDismiss);t?e.slideUp():e.hide()},this.showToast=function(t,e){var i=e.message,s=e.timeout||3e3;this.select("toastMessage").text(i),this.dismissAll(!0);var n=this.select("toast");n.slideDown(),clearTimeout(this.toastTimeout),this.toastTimeout=setTimeout(function(){return n.slideUp()},s)},this.after("initialize",function(){this.on("uiShowDMNotice",this.show),this.on("uiDismissDMNotice",this.dismiss),this.on(document,"uiDismissAllDMNotices",this.dismissAll.bind(this,!1)),this.on(document,"uiDMShowToast",this.showToast),this.on("click",{dismiss:"uiDismissDMNotice"})})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o);e.default=(0,a.default)(n)}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.attributes({conversationContentSelector:".DMConversation-content",notificationDisplayDuration:7e3,mostRecentNotifiedMessageKey:"most_recent_notified_message_id",rollingTagPrefix:"twitterDM",maxSimultaneousNotifications:2,notificationType:"direct_message"}),this.handleUserUpdates=function(t,e){e&&e.notifications&&e.notifications.length&&!this.hasPushSubscription&&this.processNotifications(e.notifications)},this.handleDMPush=function(t,e){this.processNotifications([e])},this.processNotifications=function(t){var e=this.$conversationContainer.attr("data-thread-id"),i=this.isPageFocused()&&this.$conversationContainer.is(":visible"),s=this.storage.getItem(this.attr.mostRecentNotifiedMessageKey)||0,n=t.length?t[t.length-1].id||0:0;this.storage.setItem(this.attr.mostRecentNotifiedMessageKey,l.default.max(n,s));var o=t.filter(function(t){var n=t.id&&l.default.compare(s,t.id)>=0,o=i&&t.conversation_id.toString()===e;return!n&&!o});o.forEach(function(t){this.trigger("uiDisplayNativeNotification",{title:t.title,body:t.body,icon:t.icon,tag:this.getRollingTag(),type:this.attr.notificationType,click:{eventName:"uiDMNotificationClicked",eventData:{conversation_id:t.conversation_id}},displayDuration:this.attr.notificationDisplayDuration})},this)},this.dmNotificationClicked=function(t,e){window.focus(),this.trigger("uiNeedsDMDialog",{conversation_id:e.conversation_id})},this.isPageFocused=function(){return document.hasFocus()},this.getRollingTag=function(){return this.lastTagNumber=this.lastTagNumber||0,this.lastTagNumber=this.lastTagNumber>=this.attr.maxSimultaneousNotifications?1:this.lastTagNumber+1,this.attr.rollingTagPrefix+this.lastTagNumber},this.updatePushSupport=function(t,e){this.hasPushSubscription=!!e.subscribed},this.after("initialize",function(){this.$conversationContainer=this.select("conversationContentSelector"),this.hasPushSubscription=!1,this.on(document,"dataPushSubscriptionState",this.updatePushSupport),this.trigger("uiWantsPushSubscriptionState"),this.on(document,"dataDMUserUpdates",this.handleUserUpdates),this.on(document,"uiDMNotificationClicked",this.dmNotificationClicked),this.on(document,"dataDMPushReceived",this.handleDMPush),this.on(document,"dataDMPushReceived","uiDMRequestUserUpdates"),this.storage=new d.default("dm_notifications")})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(357),l=s(r),c=i(202),d=s(c),u=(0,a.default)(n);e.default=u},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.attributes({scrollContainerSelector:".DMConversation-scrollContainer",videoSelector:".DirectMessage-media video, .dm-media-gallery-overlay video",autoplayVideoSelector:"video[data-autoplay=true]",mediaContainerSelector:".Media",autoPlayThreshold:150}),this.rAF=window.requestAnimationFrame.bind(window),this.getBoundingClientRect=function(t){return t.getBoundingClientRect()},this.handleScroll=function(){var t=this;this.rAF(function(){var e=t.getBoundingClientRect(t.$scrollContainer[0]),i=t.$autoplayVideos.filter(function(i,s){var n=t.getBoundingClientRect(s);return l.default.isPartiallyContainedInViewport({topThreshold:-1*t.attr.autoPlayThreshold,bottomThreshold:t.attr.autoPlayThreshold,fractionInViewport:.01,containerRect:e,elementRect:n})});t.$currentlyPlaying.not(i).each(function(){this.pause()}),i.not(t.$currentlyPlaying).each(function(){this.play()}),t.$currentlyPlaying=i})},this.updateMediaList=function(){this.$videos=this.select("videoSelector"),this.$videos.off("pause play playing ended").on("pause play playing ended",this.updatePlayingState.bind(this)),this.$autoplayVideos=this.$videos.filter(this.attr.autoplayVideoSelector)},this.togglePlayback=function(e){var i=t(e.target).closest(this.attr.mediaContainerSelector).find("video")[0];i&&(i.paused?i.play():i.pause())},this.updatePlayingState=function(e){t(e.target).closest(this.attr.mediaContainerSelector).toggleClass("is-playing",!e.target.paused)},this.handleViewChange=function(t,e){"uiDMDialogClosed"!==t.type&&"conversation"===e.activity||this.$videos.each(function(){this.pause()})},this.after("initialize",function(){this.$videos=t(),this.$autoplayVideos=t(),this.$scrollContainer=this.select("scrollContainerSelector"),this.$currentlyPlaying=t(),
this.on("uiDMConversationUpdated uiSwiftLoaded",this.updateMediaList),this.select("scrollContainerSelector").scroll(d.default.throttle(this.handleScroll.bind(this),500)),this.on("click",{videoSelector:this.togglePlayback}),this.on("uiDMDialogClosed uiDMActivityOpened",this.handleViewChange)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(177),l=s(r),c=i(126),d=s(c);e.default=(0,a.default)(n)}).call(e,i(10))},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.attributes({popover:".DMPopover",popoverButton:".DMPopover-button",enabledPopoverButton:".DMPopover-button:not(:disabled)",popoverContent:".DMPopover-content",openClass:"is-open",openSelector:".is-open",focusOnOpen:".js-focus-on-open"}),this.getClosestOpenPopover=function(t){return this.getClosestPopover(t).filter(this.attr.openSelector)},this.getClosestPopover=function(e){return t(e).closest(this.attr.popover)},this.toggle=function(t){var e=this.getClosestPopover(t.target);e.hasClass(this.attr.openClass)?this.close(e):(this.closeAll(),e.addClass(this.attr.openClass).find(this.attr.focusOnOpen).focus())},this.closeAll=function(t){this.select("popover").removeClass(this.attr.openClass)},this.close=function(t){t.removeClass(this.attr.openClass).find(this.attr.enabledPopoverButton).focus()},this.disable=function(t){this.getClosestPopover(t.target).find(this.attr.popoverButton).prop("disabled",!0)},this.enable=function(t){this.getClosestPopover(t.target).find(this.attr.popoverButton).prop("disabled",!1)},this.handleEscape=function(t){var e=this.getClosestOpenPopover(t.target);e.length&&(t.stopImmediatePropagation(),this.close(e))},this.handleBlur=function(t){var e=this.getClosestOpenPopover(t.target);e.length||this.closeAll()},this.after("initialize",function(){this.on(l.default.GLOBAL_FORCE_CLOSE_EVENTS,this.closeAll),this.on(l.default.GLOBAL_REQUEST_CLOSE_EVENTS,this.closeAll),this.on("uiShortcutEsc",this.handleEscape),this.on("click",this.handleBlur),this.on("click",{enabledPopoverButton:this.toggle}),this.on("uiDisableDMPopover",this.disable),this.on("uiEnableDMPopover",this.enable)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(445),l=s(r);e.default=(0,a.default)(n)}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.composeNewDMWithTweet=function(t,e){this.trigger("uiOpenNewDM",{has_tweet_attachment:!0}),this.trigger("uiComposeWithTweet",e)},this.composeNewDMWithOptions=function(t,e){e.tweetId&&this.trigger("uiComposeWithTweet",{id:e.tweetId}),this.trigger("uiNeedsDMDialog",{id:e.recipientId,default_composer_text:e.defaultComposerText,welcome_message_id:e.welcomeMessageId,has_tweet_attachment:void 0!==e.tweetId,retain_tweet_attachment:void 0!==e.tweetId}),e.messageMeCardData&&this.trigger("uiAddMessageMeCardData",e.messageMeCardData)},this.after("initialize",function(){this.on("uiComposeNewDMWithTweet",this.composeNewDMWithTweet),this.on(window,"uiComposeNewDMWithOptions",this.composeNewDMWithOptions)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=(0,a.default)(n);e.default=r},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({itemType:"user",dialogSelector:"#dm_dialog",noReposition:!0,disableKeyboardShortcuts:!0,openActivity:".DMActivity--open",openActivityClass:"DMActivity--open",addParticipants:".DMAddParticipants",compose:".DMCompose",conversation:".DMConversation",convoSettings:".DMConversationSettings",emptyState:".DMEmptyState",inbox:".DMInbox",viewParticipants:".DMViewParticipants",linksForInbox:".DMActivity-back[to-inbox]",linksForConvo:".DMActivity-back[to-convo]",linksForCompose:".dm-new-button",linksForConvoSettings:".dm-to-convoSettings",toFieldSelector:".dm-to-input",errorBar:".DMErrorBar",errorText:".DMErrorBar-text",mediaPreviewSelector:".DMInboxItem-media, .dm-attached-media"}),this.openDialog=function(t,e){e&&e.fromInitData&&this.on("uiDialogClosed",function(){this.isDialogNavigation||this.isOverlayNavigation||this.trigger("uiNavigate",{href:"/"}),this.isOverlayNavigation=!1}),this.trigger("uiNeedsDMConversationList"),e&&e.id?this.trigger("uiRenderConversationView",{conversation_id:l.default.generateConversationId(this.attr.userId,e.id),name:e.name,is_oto:!0,default_composer_text:e.default_composer_text,welcome_message_id:e.welcome_message_id,has_tweet_attachment:e.has_tweet_attachment,retain_tweet_attachment:e.retain_tweet_attachment}):e&&e.conversation_id?this.trigger("uiRenderConversationView",e):e&&e.default_composer_text?this.trigger("uiOpenNewDM",{default_composer_text:e.default_composer_text}):this.renderInbox(),this.open()},this.closeDialog=function(){this.isDialogNavigation=!1,this.close()},this.renderInbox=function(t,e){t&&t.preventDefault(),this.renderView("inbox");var i=this.select("inbox");return this.trigger("uiReadStateChanged",{msgCount:0}),i.hasClass("needs-refresh")?(i.removeClass("needs-refresh"),void this.trigger("uiNeedsDMConversationList")):void this.trigger("uiDMDialogOpenedConversationList")},this.handleProfileLinkClick=function(){this.isDialogNavigation||(this.isDialogNavigation=this.$dialog.is(":visible"),this.closeImmediately())},this.renderConversationView=function(t,e){this.renderView("conversation"),this.trigger("uiDMDialogOpenedConversation",{recipient:e.conversation_id||e.screen_names})},this.renderCompose=function(t,e){t&&t.preventDefault(),this.renderView("compose"),this.trigger("uiDMDialogOpenedNewConversation"),this.isOpen()||(this.trigger("uiNeedsDMConversationList"),this.open())},this.renderAddParticipants=function(t,e){this.renderView("addParticipants")},this.renderViewParticipants=function(t,e){t&&t.preventDefault(),this.trigger(t.target,"uiNeedsConversationParticipants",{conversation_id:e.conversation_id}),this.renderView("viewParticipants")},this.renderView=function(t){this.trigger("uiDismissAllDMNotices"),this.select("openActivity").removeClass(this.attr.openActivityClass),this.select(t).addClass(this.attr.openActivityClass),this.trigger("uiDMActivityOpened",{activity:t}),this.trigger(this.$dialog,"uiDialogContentChanged"),this.setScribeComponent(t)},this.setScribeComponent=function(t){this.attr.eventData||(this.attr.eventData={});var e=void 0;switch(t){case"compose":e="dm_new_conversation_dialog";break;case"conversation":e="dm_existing_conversation_dialog";break;case"inbox":e="dm_conversation_list_dialog";break;case"addParticipants":e="dm_add_participants_dialog";break;case"viewParticipants":e="dm_view_participants_dialog"}e&&(this.attr.eventData.scribeContext={component:e})},this.showError=function(t,e){this.select("errorText").html(e.message||e.error),this.select("errorBar").show(),this.trigger(this.select("toFieldSelector"),"uiTypeaheadIgnoreNextFocus"),this.trigger(this.$dialog,"uiDialogContentChanged")},this.previewMedia=function(e,i){e.preventDefault();var s=t(e.target);this.trigger("uiDMDialogMediaPreview",{imgUrl:s.attr("data-full-img"),dmId:s.closest(".dm").attr("data-message-id")||s.closest(".DMInboxItem").attr("data-last-message-id")})},this.hideDMDialog=function(){this.$dialogContainer.hide(),this.openState=!1},this.showDMDialog=function(t,e){this.$dialogContainer.show(),this.openState=!0},this.restoreDialog=function(){this.isDialogNavigation&&(this.isDialogNavigation=!1,this.open())},this.dismissErrors=function(){this.trigger("uiHideMessage"),this.select("errorBar").trigger("uiDismissDMNotice")},this.setOverlayNavigation=function(){this.isOverlayNavigation=!0},this.after("initialize",function(){this.$dialogContainer=this.select("dialogSelector"),this.on(document,"uiShowProfilePopup",this.handleProfileLinkClick),this.on(document,"uiCloseProfilePopup",this.restoreDialog),this.on(document,"uiNeedsDMDialog",this.openDialog),this.on(document,"uiCloseDMDialog",this.closeDialog),this.on(document,"uiOpenNewDM",this.renderCompose),this.on(document,"uiAddParticipants",this.renderAddParticipants),this.on(document,"uiViewParticipants",this.renderViewParticipants),this.on(document,"uiNavigate","uiCloseDMDialog"),this.on(document,"uiOverlayNavigate",this.setOverlayNavigation),this.on("uiRenderConversationListView",this.renderInbox),this.on("uiRenderConversationView uiRenderNewConversationView",this.renderConversationView),this.on("uiDMViewParticipantsDone uiDMAddParticipantsDone",this.renderView.bind(this,"conversation")),this.on(document,"dataDMSendSuccess dataDMDeleteSuccess","dataDMSuccess"),this.on(document,"dataDMError",this.showError),this.on(document,"uiDMDialogMediaPreview",this.hideDMDialog),this.on(document,"uiDMDialogMediaPreviewClosed",this.showDMDialog),this.on("uiDialogClosed uiDMHideError",this.dismissErrors),this.on("uiDialogClosed","uiDMDialogClosed"),this.on("click",{linksForInbox:this.renderInbox,linksForConvo:this.renderView.bind(this,"conversation"),linksForConvoSettings:this.renderView.bind(this,"convoSettings"),linksForCompose:"uiOpenNewDM",mediaPreviewSelector:this.previewMedia})})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(356),l=s(r),c=i(163),d=s(c),u=i(883),h=s(u),f=i(884),p=s(f),m=i(885),g=s(m),v=i(886),b=s(v),w=(0,a.default)(n,d.default,p.default,h.default,g.default,b.default);e.default=w}).call(e,i(10))},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){r.default.mixin(this,[u.default,c.default]),this.defaultAttrs({pageContainer:"#doc",nestedContainerSelector:".js-stream-item .in-reply-to",showWithScreenNameSelector:".twitter-atreply",showWithIdSelector:".show-popup-with-id, .js-user-profile-link",searchtagSelector:".twitter-hashtag, .twitter-cashtag",cashtagSelector:".twitter-cashtag",geoPivotSelector:".js-geo-pivot-link",itemLinkSelector:".twitter-timeline-link,.js-adaptive-photo",mediaForwardSelector:".js-adaptive-photo",cardExternalLinkSelector:".js-card2-external-link",viewMoreItemSelector:".view-more-container",inSnapbackExperiment:!1,snapbackSkipProfilePopup:!1,dismissedTweetSelector:".js-dismissed-tweet",dismissedTweetClass:"js-dismissed-tweet",dismissibleContainerSelector:".dismissible-container",threadedConversationTweetSelector:".ThreadedConversation-tweet"}),this.showProfilePopupWithScreenName=function(e,i){var s=t(e.target).closest(this.attr.showWithScreenNameSelector).text();"@"===s[0]&&(s=s.substring(1));var n={screenName:s},a=this.getCardDataFromContainer(t(e.target));i=o({},this.interactionData(e,n),a),this.showProfile(e,i)},this.showProfilePopupWithId=function(e,i){var s=this.getCardDataFromContainer(t(e.target));i=o({},this.interactionDataWithCard(e),s),this.showProfile(e,i)},this.showProfile=function(e,i){"mouseover"===e.type?(e.preventDefault(),e.stopImmediatePropagation(),this.trigger(e.target,"uiShowProfileHover",i)):(i.user_id=t(e.target).closest(".twitter-atreply").attr("data-mentioned-user-id")||i.userId,this.trigger(e.target,"uiShowProfileNewWindow",i))},this.hideHover=function(e,i){var s=this.getCardDataFromContainer(t(e.target));i=o({},this.interactionData(e),s),this.trigger("uiHideProfileHover",i)},this.searchtagClick=function(e,i){var s=t(e.target),n=s.closest(this.attr.searchtagSelector),o=n.is(this.attr.cashtagSelector)?"uiCashtagClick":"uiHashtagClick",a={query:n.text()};this.trigger(o,this.interactionData(e,a))},this.isCardUrl=function(t){var e=/^(https?:\/\/)?cards(-staging|-beta)?.twitter.com/;return e.test(t)},this.geoPivotClick=function(e,i){var s={placeId:t(i.el).data("place-id")};this.trigger("uiGeoPivotClick",this.interactionData(e,s))},this.itemLinkClick=function(e,i){var s=t(e.target),n=s.closest(this.attr.itemLinkSelector),a=n.closest(".tweet").data("permalink-path"),r=!!s.parents(".permalink").length,l=void 0,c=n.is(this.attr.mediaForwardSelector)?a:"",d=o({url:n.attr("data-expanded-url")||n.attr("href")||c,tcoUrl:n.attr("href")||c,text:n.text()},this.getCardDataFromContainer(s));if(("promotion"===d.cardName||"promotions"===d.cardType)&&this.isCardUrl(d.url)&&!r){e.preventDefault(),l=n.parents(".stream-item").find(".tweet");var u=l.data("permalink-path"),h=l.data("conversation-id");u&&t(document).trigger("uiNavigate",o({},i,{href:u,conversation_id:h}))}this.trigger("uiItemLinkClick",this.interactionData(e,d))},this.cardLinkClick=function(e,i,s){var n=this.getCardDataFromContainer(t(i.target));this.trigger(e,this.interactionDataWithCard(i,n))},this.getUserIdFromElement=function(t){return t.length?t.data("user-id"):null},this.itemSelected=function(e,i){var s=this.getCardDataFromContainer(t(e.target));i.organicExpansion&&this.trigger("uiItemSelected",o({},this.interactionData(e),s))},this.isNested=function(){return this.$node.closest(this.attr.nestedContainerSelector).length},this.modifierKey=function(t){if(t.shiftKey||t.ctrlKey||t.metaKey||t.which>1)return!0},this.removeTweetsFromUser=function(e,i){var s=this,n=this.$node.find("[data-user-id="+i.userId+"].js-stream-tweet"),o=this;t.each(n,function(e,i){var n=t(i),a=n.attr("data-tweet-id"),r=n.closest(s.attr.threadedConversationTweetSelector);r.length||(r=n.parent()),o.removeEngagementsOnTweet(a),r.remove()}),this.trigger("uiRemovedSomeTweets")},this.navigateToViewMoreURL=function(e){var i=t(e.target),s=void 0;i.find(this.attr.viewMoreItemSelector).length&&(s=i.find(".view-more-link"),this.trigger(s,"uiNavigate",{href:s.attr("href")}))},this.removeEngagementsOnTweet=function(t){var e=this.$node.find("[data-item-id="+t+"]");e.remove()},this.dismissTweet=function(e,i){var s=t(e.target),n=s.closest(this.attr.tweetContainerSelector),o=n.closest(this.attr.dismissibleContainerSelector);n.addClass(this.attr.dismissedTweetClass).fadeOut(200,function(){n.remove(),o&&o.remove()}),this.trigger("uiTweetDismissed",i)},this.removeAllDismissedTweets=function(){this.select("dismissedTweetSelector").stop().remove()},this.after("initialize",function(){this.isNested()||(this.on("click",{showWithScreenNameSelector:this.showProfilePopupWithScreenName,showWithIdSelector:this.showProfilePopupWithId,searchtagSelector:this.searchtagClick,geoPivotSelector:this.geoPivotClick,itemLinkSelector:this.itemLinkClick,cardExternalLinkSelector:this.cardLinkClick.bind(this,"uiCardExternalLinkClick")}),this.on("uiItemLinkClick",{itemLinkSelector:this.itemLinkClick}),this.on("mouseover",{showWithScreenNameSelector:this.showProfilePopupWithScreenName,showWithIdSelector:this.showProfilePopupWithId}),this.on("mouseout",{showWithScreenNameSelector:this.hideHover,showWithIdSelector:this.hideHover}),this.on("uiHasClickedTweet",this.itemSelected),this.on("uiRemoveTweetsFromUser",this.removeTweetsFromUser),this.on("uiShortcutEnter",this.navigateToViewMoreURL),this.on("uiDismissTweet",this.dismissTweet),this.on(document,"uiBeforePageChanged",this.removeAllDismissedTweets))})}Object.defineProperty(e,"__esModule",{value:!0});var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},a=i(121),r=s(a),l=i(139),c=s(l),d=i(138),u=s(d);e.default=n}).call(e,i(10))},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({timestampSelector:".tweet-timestamp",relativeTimestampSelector:".js-relative-timestamp",relativeTimestampClass:"js-relative-timestamp"}),this.currentTimeSecs=function(){return new Date/1e3},this.updateAccessibleShortTimestamp=function(e,i){var s=this.currentTimeSecs(),n=Math.floor(s-i);if(!(n<3)){var o=l.format(i-s),a=e.closest(this.attr.timestampSelector),r=a.find(".u-hiddenVisually");r.length||(a.find(this.attr.relativeTimestampSelector).removeAttr("data-aria-label-part").attr("aria-hidden","true"),r=t(d),a.append(r)),r.text(o)}},this.updateTimestamps=function(){var e=this;this.select("relativeTimestampSelector").each(function(i,s){var n=t(s),o=n.data("time"),a=e.formatTimestamp(o);a.relative||n.removeClass(e.attr.relativeTimestampClass),n.text(a.text),e.updateAccessibleShortTimestamp(n,o)})},this.formatTimestamp=function(t){var e=this,i=this.currentTimeSecs(),s=Math.floor(i-t),n=void 0;return s<3?n=c:(n=l.format(s,{direction:"none",type:this.timespanType}),this.localizedDigits&&(n=n.replace(/\d/g,function(t){return e.localizedDigits.charAt(t.charCodeAt(0)-"0".charCodeAt(0))}))),{text:n,relative:!0}},this.after("initialize",function(){var e=t("html").attr("lang");this.timespanType="en"===e||"en-gb"===e?"abbreviated":"short",this.localizedDigits={ar:"٠١٢٣٤٥٦٧٨٩",fa:"۰۱۲۳۴۵۶۷۸۹"}[e],this.on(document,"uiWantsToRefreshTimestamps uiPageChanged",this.updateTimestamps)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(123),a=(s(o),i(483)),r=s(a),l=new r.default.TimespanFormatter,c="now",d='<span class="u-hiddenVisually" data-aria-label-part="last"></span>';e.default=n}).call(e,i(10))},function(t,e){"use strict";function i(){this.defaultAttrs({tweetFormSelector:".tweet-form"}),this.initTweetbox=function(t){var e=this.select("tweetFormSelector"),i=this.attr.preexpandTweetbox||!1;this.trigger(e,"uiInitTweetbox",s({draftTweetId:this.attr.draftTweetId,condensable:!i,preexpandTweetbox:i,suppressSuccessMessage:this.attr.suppressSuccessMessage,eventData:this.attr.eventData},t))}}Object.defineProperty(e,"__esModule",{value:!0});var s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t};e.default=i},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){r.default.mixin(this,[u.default,w.default]),this.defaultAttrs({followButtonSelector:".follow-button, .follow-link, .ProfileTweet-follow-button",topicLinkSelector:".user-topic-link",userInfoSelector:".user-actions",dropdownSelector:".user-actions .dropdown",dropdownItemSelector:".user-actions .dropdown.open .dropdown-menu li",blockOrReportButtonSelector:".block-or-report-text",tweetItemSelector:".tweet",reportButtonSelector:".blocked-report-text",unmuteButtonSelector:".unmute-button",muteButtonSelector:".mute-button",followStates:["not-following","following","blocked","pending"],userActionClassesToEvents:{"mention-text":["uiMentionAction","mentionUser"],"dm-text":["uiDmAction","dmUser"],"list-text":["uiListAction"],"block-text":["uiNeedsBlockDialog","attachUserData"],"report-text":["uiNeedsReportDialog","attachUserData"],"unblock-text":["uiUnblockAction"],"hide-suggestion-text":["uiHideSuggestionAction"],"retweet-on-text":["uiRetweetOnAction"],"retweet-off-text":["uiRetweetOffAction"],"device-notifications-on-text":["uiDeviceNotificationsOnAction","deviceNotificationsOn"],"device-notifications-off-text":["uiDeviceNotificationsOffAction"],"embed-profile":["uiEmbedProfileAction","redirectToEmbedProfile"]}}),this.getClassNameFromList=function(t,e){var i=e.filter(function(e){return t.hasClass(e)});return i[0]},this.getUserActionEventNameAndMethod=function(t){var e=this.getClassNameFromList(t.closest("li"),Object.keys(this.attr.userActionClassesToEvents));return this.attr.userActionClassesToEvents[e]},this.getFollowState=function(t){return this.getClassNameFromList(t,this.attr.followStates)},this.getInfoElementFromEvent=function(e){var i=t(e.target);return i.closest(this.attr.userInfoSelector)},this.findInfoElementForUser=function(t){var e=this.attr.userInfoSelector+"[data-user-id="+m.default.parseBigInt(t)+"]";return this.$node.find(e)},this.getEventName=function(t){var e={"not-following":"uiFollowAction",following:"uiUnfollowAction",blocked:"uiUnblockAction",pending:"uiCancelFollowRequestAction"};return e[t]},this.addCancelHoverStyleClass=function(t){t.addClass("cancel-hover-style"),t.one("mouseleave",function(){return t.removeClass("cancel-hover-style")});var e=t.closest(this.attr.userInfoSelector);e.addClass("show-more-actions-button"),t.one("mouseleave",function(){return e.removeClass("show-more-actions-button")})},this.handleFollowButtonClick=function(e){e.stopPropagation(),this.trigger(t(e.target),"uiCloseDropdowns");var i=this.getInfoElementFromEvent(e),s=t(e.target).closest(this.attr.followButtonSelector),n=this.getTweetForEvent(e,"closest");this.addCancelHoverStyleClass(s);var o=this.getFollowState(i),a=!s.closest(".stream").length;"not-following"===o&&i.data("protected")&&this.trigger("uiShowMessage",{message:(0,c.default)("A follow request has been sent to @{{screen_name}} and is pending their approval.",{screen_name:i.data("screen-name")})});var r=this.getEventName(o),l={originalFollowState:o,shouldRefreshTimeline:a,mediaType:this.getMediaType(n),screenName:i.data("screen-name")};this.trigger(r,this.interactionDataWithCard(e,l))},this.handleTopicLinkClick=function(t){var e=this.interactionData(t);this.trigger("uiUserTopicClickAction",e)},this.blockFollowWithSignupDialog=function(e){e.stopPropagation(),this.trigger(t(e.target),"uiCloseDropdowns"),this.trigger("uiOpenSignupDialog",{signUpOnly:!0,screenName:this.getInfoElementFromEvent(e).data("screen-name")}),this.trigger("uiLoggedOutFollowAttempt",this.interactionData(e))},this.handleBlockOrReportClick=function(t){var e=this.getInfoElementFromEvent(t),i=e.data("screen-name"),s=e.data("user-id").toString(),n=this.getFollowState(e),a=o({},this.interactionData(t),{screenName:i,userId:s,target:"user",viewerFollowsAuthor:"following"===n,viewerBlocksAuthor:"blocked"===n});this.trigger("uiNeedsBlockOrReportDialog",a)},this.handleUserAction=function(e){var i=t(e.target),s=this.getUserActionEventNameAndMethod(i);if(s){e.stopPropagation();var n=this.getInfoElementFromEvent(e),o=s[0],a=s[1],r=this.getFollowState(n),l={originalFollowState:r};a&&(l=this[a](n,o,l)),l&&this.trigger(o,this.interactionData(e,l)),this.trigger(i,"uiCloseDropdowns")}},this.deviceNotificationsOn=function(t,e,i){return this.attr.deviceEnabled?i:(this.attr.smsDeviceVerified||this.attr.hasPushDevice?this.trigger("uiOpenConfirmDialog",{titleText:"Enable mobile notifications for Tweets",bodyText:(0,c.default)("Before you can receive mobile notifications for @{{screenName}}'s Tweets, you need to enable the Tweet notification setting.",{screenName:t.data("screen-name")}),cancelText:"Close",submitText:"Enable Tweet notifications",action:this.attr.hasPushDevice?"ShowPushTweetsNotifications":"ShowMobileNotifications",top:this.attr.top}):this.trigger("uiOpenConfirmDialog",{titleText:"Setup mobile notifications",bodyText:(0,c.default)("Before you can receive mobile notifications for @{{screenName}}'s Tweets, you need to set up your phone.",{screenName:t.data("screen-name")}),cancelText:"Cancel",submitText:"Set up phone",action:"ShowMobileNotifications",top:this.attr.top}),!1)},this.redirectToMobileNotifications=function(){window.location="/settings/devices"},this.redirectToPushNotificationsHelp=function(){window.location="//support.twitter.com/articles/20169887"},this.redirectToEmbedProfile=function(t,e,i){return this.trigger("uiNavigate",{href:"/settings/widgets/new/user?screen_name="+t.data("screen-name")}),!0},this.mentionUser=function(t,e,i){this.trigger("uiOpenTweetDialog",{screenName:t.data("screen-name"),title:(0,c.default)("Tweet to {{name}}",{name:t.data("name")})})},this.attachUserData=function(t,e,i){var s=o({},this.interactionData(i),{screenName:v.default.getScreenName(t),userId:v.default.getId(t),target:"user"});return s},this.dmUser=function(t,e,i){return this.trigger("uiNeedsDMDialog",{id:v.default.getId(t),screen_name:v.default.getScreenName(t),name:v.default.getName(t),oto_only:!0}),i},this.hideSuggestion=function(t,e,i){return o({},i,{feedbackToken:t.data("feedback-token")})},this.followStateChange=function(t,e){this.updateFollowState(e.userId,e.newState),e.fromShortcut&&("not-following"===e.newState?this.trigger("uiShowMessage",{message:(0,c.default)("You have unblocked {{username}}",{username:e.username})}):"blocked"===e.newState&&this.trigger("uiUpdateAfterBlock",{userId:e.userId}))},this.updateFollowState=function(t,e){var i=this.findInfoElementForUser(t),s=this.getFollowState(i);s&&i.removeClass(s),i.addClass(e),"blocked"===e?this.trigger("uiUpdateAfterBlock",{userId:t}):"not-following"===e&&this.trigger("uiShowProfileTweets")},this.follow=function(t,e){var i=this.findInfoElementForUser(e.userId),s=i.data("protected")?"pending":"following";this.updateFollowState(e.userId,s),i.addClass("including")},this.unfollow=function(t,e){var i=this.findInfoElementForUser(e.userId);this.updateFollowState(e.userId,"not-following"),i.removeClass("including notifying")},this.cancel=function(t,e){this.updateFollowState(e.userId,"not-following")},this.block=function(t,e){var i=this.findInfoElementForUser(e.userId);this.trigger("jsClearReinjectionCookiesForUser",{userId:e.userId}),this.updateFollowState(e.userId,"blocked"),i.removeClass("including notifying")},this.unblock=function(t,e){this.updateFollowState(e.userId,"not-following")},this.retweetsOn=function(t,e){var i=this.findInfoElementForUser(e.userId);i.addClass("including")},this.retweetsOff=function(t,e){var i=this.findInfoElementForUser(e.userId);i.removeClass("including")},this.notificationsOn=function(t,e){var i=this.findInfoElementForUser(e.userId),s=i.find(this.attr.deviceFollowCheckboxSelector);i.addClass("notifying"),s.prop("checked",!0)},this.notificationsOff=function(t,e){var i=this.findInfoElementForUser(e.userId),s=i.find(this.attr.deviceFollowCheckboxSelector);i.removeClass("notifying"),s.prop("checked",!1)},this.blockUserConfirmed=function(t,e){t.stopImmediatePropagation(),this.trigger("uiBlockAction",e.sourceEventData)},this.preventFocus=function(t,e){t.preventDefault()},this.handleMuteButtonClick=function(t){return function(e,i){i=this.interactionData(e),i.scribeContext={element:"muted_button"},this.trigger(e.target,t,i)}},this.updateMuteButtonState=function(t,e){var i=this.$node.find(this.attr.userInfoSelector+"[data-user-id="+e.userId+"]"),s=i.find(this.attr.unmuteButtonSelector),n=i.find(this.attr.muteButtonSelector),o=s.is(":focus"),a=n.is(":focus");i[e.modOp](e.modClass),n.removeClass("first-load"),o?n.focus():a&&s.focus()},this.isHomePage=function(){return"/"===window.location.pathname},this.after("initialize",function(){return f.default.attachTo(this.$node),this.attr.loggedIn?(this.on(document,"uiFollowStateChange dataFollowStateChange dataBulkFollowStateChange",this.followStateChange),this.on(document,"uiFollowAction",this.follow),this.on("click",{followButtonSelector:this.handleFollowButtonClick}),void(this.attr.loggedIn&&(this.on("click",{topicLinkSelector:this.handleTopicLinkClick,dropdownItemSelector:this.handleUserAction,unmuteButtonSelector:this.handleMuteButtonClick("uiDidUnmuteUser"),muteButtonSelector:this.handleMuteButtonClick("uiDidMuteUser"),blockOrReportButtonSelector:this.handleBlockOrReportClick,reportButtonSelector:this.handleBlockOrReportClick}),this.on("mousedown",{unmuteButtonSelector:this.preventFocus,muteButtonSelector:this.preventFocus}),this.on(document,"uiUnfollowAction",this.unfollow),this.on(document,"uiCancelFollowRequestAction",this.cancel),this.on(document,"uiUnblockAction",this.unblock),this.on(document,"uiRetweetOnAction dataRetweetOnAction",this.retweetsOn),this.on(document,"uiRetweetOffAction dataRetweetOffAction",this.retweetsOff),this.on(document,"uiDeviceNotificationsOnAction dataDeviceNotificationsOnAction",this.notificationsOn),this.on(document,"uiDeviceNotificationsOffAction dataDeviceNotificationsOffAction",this.notificationsOff),this.on(document,"uiShowMobileNotificationsConfirm",this.redirectToMobileNotifications),this.on(document,"uiShowPushTweetsNotificationsConfirm",this.redirectToPushNotificationsHelp),this.on(document,"uiUpdateMuteButtonState",this.updateMuteButtonState),this.on(document,"uiBlockAction",this.block),this.on(document,"uiDidBlockUser",this.blockUserConfirmed),this.on(document,"uiDidTriggerBlockingAction",this.block)))):void this.on("click",{followButtonSelector:this.blockFollowWithSignupDialog})})}Object.defineProperty(e,"__esModule",{value:!0});var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},a=i(121),r=s(a),l=i(123),c=s(l),d=i(138),u=s(d),h=i(887),f=s(h),p=i(357),m=s(p),g=i(889),v=s(g),b=i(890),w=s(b);e.default=n}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({dropdownThresholdSelector:".dropdown-threshold"}),this.scrollIntoView=function(){var t=this.$node.closest(this.attr.dropdownThresholdSelector),e=void 0,i=void 0;t.length&&(e=this.$node.find(this.attr.dropDownSelector),i=e.offset().top+e.outerHeight()-(t.offset().top+t.height()),i>0&&t.animate({scrollTop:t.scrollTop()+i}))},this.after("initialize",function(){this.on("uiDropdownOpened",this.scrollIntoView),this.on(document,"uiHasInjectedNewTimeline uiHasInjectedOldTimelineItems uiHasInjectedRangeTimelineItems",this.applyARIAAttrs)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(888),l=s(r),c=(0,a.default)(l.default,n);e.default=c},,function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={getId:function(t){return t.attr("data-user-id")},getName:function(t){return t.data("name")},getScreenName:function(t){return t.data("screen-name")}};e.default=i},function(t,e,i){(function(t){"use strict";function i(){this.preventDefault=function(t,e,i){t.preventDefault()},this.composeHandler=function(){var t=arguments,e={};return function(i,s){for(var n=0,o=t.length;n<o&&t[n].call(this,i,s,e)!==!1;n++);}},this.getTweetForEvent=function(e,i){var s=t(e.target),n=void 0;return s.is(this.attr.tweetItemSelector)&&(n=s),n||(n=s[i](this.attr.tweetItemSelector)),n},this.getClosestTweet=function(t,e,i){var s=this.getTweetForEvent(t,"closest"),n=!!s.length;return n&&(i.$tweet=s),n},this.getDataForTweet=function(t){return{id:t.attr("data-tweet-id"),screenName:t.attr("data-screen-name"),isTweetProof:"true"===t.attr("data-is-tweet-proof"),viewerFollowsAuthor:"true"===t.attr("data-you-follow"),viewerBlocksAuthor:"true"===t.attr("data-you-block"),featureContext:t.attr("data-feature-context"),mediaType:this.getMediaType(t),photoCount:t.find(".animated-gif, .js-adaptive-photo, .AdaptiveStreamGridImage").length,momentId:t.attr("data-moment-id")}},this.getMediaType=function(t){var e="";return 0!==t.find(".js-adaptive-photo").length?e="image":"player"===t.attr("data-card2-type")?e="video":(t.attr("data-has-cards")||t.hasClass("has-content"))&&(e="media"),e},this.mkTweetDataCollector=function(){var t=this,e=arguments;return function(i){for(var n={},o=0,a=e.length;o<a;o++)n=s({},n,e[o].call(t,i));n=s({},n,t.getDataForTweet(i));for(var r in n)void 0===n[r]&&delete n[r];return n}},this.mkTweetDataCollectorForAction=function(){var t=this.mkTweetDataCollector.apply(this,arguments);return function(e,i,s){return s.tweetData=t(s.$tweet),!0}},this.triggerTweetAction=function(t){return function(e,i,s){var n="function"==typeof t?t.call(this,e,i,s):t;this.trigger(s.$tweet,n,s.tweetData)}}}Object.defineProperty(e,"__esModule",{value:!0});var s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t};e.default=i}).call(e,i(10))},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({dmLinkSelector:".js-dm-dialog, .dm-button, .global-dm-nav"}),this.openDialog=function(e,i){e.preventDefault();var s=t(i.el);i={id:l.default.getId(s),screen_name:l.default.getScreenName(s),name:l.default.getName(s),oto_only:!0},this.trigger("uiNeedsDMDialog",i)},this.after("initialize",function(){this.on(document,"click",{dmLinkSelector:this.openDialog})})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(889),l=s(r);e.default=(0,a.default)(n)}).call(e,i(10))},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){
this.defaultAttrs({dmImagePreviewSelector:".dm-media-preview",dmPreviewSelector:".dm-media"}),this.loadImage=function(e,i){var s=this,n=t('<img class="dm-media-image"/>'),o=this.select("dmImagePreviewSelector");o.empty(),n.on("load",function(t){o.empty().append(n),n.attr({"data-height":n[0].height,"data-width":n[0].width}),h.default.resizeMedia(n,s.select("dmPreviewSelector")),s.position();var e=parseFloat(n.css("margin-top"));e&&n.css("margin-bottom",e),s.trigger("uiDMMediaLoaded",{url:n.attr("src"),id:i})}),n.on("error",function(t){return s.trigger("uiDMMediaFailed",{url:n.attr("src"),id:i})}),n.attr("src",e)},this.openDialog=function(t,e){this.calculateScrollbarWidth(),h.default.resetMinSize(this.select("dmPreviewSelector")),this.loadImage(e.imgUrl,e.dmId),this.open()},this.renderConversation=function(t,e){this.trigger("uiDMDialogMediaPreviewClosed")},this.after("initialize",function(){this.on(document,"uiDMDialogMediaPreview",this.openDialog),this.on("uiDialogCloseRequested",this.renderConversation)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(163),l=s(r),c=i(165),d=s(c),u=i(893),h=s(u);e.default=(0,a.default)(n,l.default,d.default)}).call(e,i(10))},function(t,e,i){(function(t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){var e=300,i=592,s=12,n=58;return{galleryWidth:function(e,i){var s=t(window).width()-2*n,o=Math.min(s,e.width());return Math.max(i.width(),o)},resetMinSize:function(t){this.galW=i,this.galH=e,t.width(this.galW),t.css("min-height",this.galH)},resizeMedia:function(e,i,o,a,r){var l=i.find(a).add(i.find(".modal-header")).map(function(){return t(this).outerHeight()}).get().reduce(function(t,e){return t+e}),c=t(window).height()-2*s,d=t(window).width()-2*n,u=c-l,h=d,f=e[0].getBoundingClientRect(),p=f.bottom-f.top,m=f.right-f.left,g=m/p;o&&(m+=130,p+=100),p>u&&(m=Math.ceil(m*(u/p)),p=u,e.width(m).height(p)),m>h&&(m=h,p=Math.ceil(m/g),e.width(m).height(p));var v=i.find(".GalleryNav").hasClass("enabled");(!v||m>this.galW)&&(this.galW=m,i.width(this.galW)),p+l>this.galH?(this.galH=p+l,i.css("min-height",this.galH),e.css("margin-top",0)):r?i.css("min-height",0):(e.css("margin-top",(this.galH-l-p)/2),e.css("margin-bottom",(this.galH-l-p)/2))}}}();e.default=i}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.scribeSendDM=function(t,e){var i=e.conversation_id?"dm_existing_conversation_dialog":"dm_new_conversation_dialog",s=this.buildScribeData(e);if(this.scribe({component:i,action:"send_dm"},e,s),e.tweet_id&&this.scribe({component:i,action:"send_tweet_dm"},{conversation_id:e.conversation_id||e.recipient_ids,status_id:e.tweet_id},s),e.media_data&&e.media_data.fileType===l.default.GIF){var n=!!e.media_data.foundMediaInfo;this.scribe({component:i,element:n?"remote":"local",action:"send_gif_dm"})}},this.buildScribeData=function(t){var e={};if(t.message_me_scribe_data){if(t.message_me_scribe_data.userId){var i={item_type:h.default.user,id:t.message_me_scribe_data.userId};e.items=[i]}t.message_me_scribe_data.cardName&&(e.context=t.message_me_scribe_data.cardName),t.message_me_scribe_data.cardUri&&(e.message=t.message_me_scribe_data.cardUri)}return e},this.scribeCardInDmImpression=function(t,e){var i=e&&{items:[e.cardItem]};this.scribe({component:"dm_existing_conversation_dialog",element:"platform_card",action:"show"},i)},this.scribeTypingIndicator=function(t,e){var i="uiDMTypingIndicatorAvatarAdded"===t.type?"impression":"refresh";this.scribe({component:"dm_existing_conversation_dialog",element:"typing_indicator",action:i},e)},this.muteDurationScribeAction={0:"mute_dm_thread_forever",1:"mute_dm_thread_1h",2:"mute_dm_thread_8h",3:"mute_dm_thread_1w"},this.scribeNotificationsMute=function(t,e){var i=this.muteDurationScribeAction[e.mute_duration];e.enable_notifications===!1&&i&&this.scribe({component:"dm_existing_conversation_dialog",action:i})},this.after("initialize",function(){this.scribeOnEvent("uiComposeNewDMWithTweet","share_via_dm"),this.scribeOnEvent("uiDMDialogOpenedNewConversation","open"),this.scribeOnEvent("uiDMDialogOpenedConversation","open"),this.scribeOnEvent("uiDMDialogOpenedConversationList","open"),this.scribeOnEvent("uiDMDialogDeleteMessage",{component:"dm_existing_conversation_dialog",action:"delete_dm"}),this.scribeOnEvent("uiDMDialogMarkSpam",{component:"dm_existing_conversation_dialog",action:"report_as_spam"}),this.scribeOnEvent("uiDMDialogMarkMessage",{element:"mark_all_as_read",action:"click"}),this.scribeOnEvent("uiDMMediaLoaded","media_preview"),this.scribeOnEvent("uiDMMediaFailed","media_preview"),this.scribeOnEvent("uiDMResendConfirm",{component:"dm_existing_conversation_dialog",element:"error",action:"retry"}),this.scribeOnEvent("dataDMTypingPublished",{component:"dm_existing_conversation_dialog",action:"publish_typing"}),this.on("uiDMSendMessage",this.scribeSendDM),this.on("uiNewDMCardLoaded",this.scribeCardInDmImpression),this.on("uiDMTypingIndicatorAvatarAdded uiDMTypingIndicatorAvatarRefreshed",this.scribeTypingIndicator),this.on("uiToggleNotifications",this.scribeNotificationsMute)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(398),l=s(r),c=i(142),d=s(c),u=i(144),h=s(u),f=(0,a.default)(n,d.default);e.default=f},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({noShowError:!0}),this.markDMsAsRead=function(e,i){i=i||{},i.retry=i.retry||void 0===i.retry;var s=t.noop,n=t.noop;i.from_notification?s=u(e.target,function(t){return"msgCount"in t?"uiReadStateChanged":null}):(s=function(t){"success"!==t.text?n.call(this,t):this.trigger(e.target,"dataDMReadSuccess",t)},n=function(t){i.retry?(i.retry=!1,this.trigger(e.target,"dataMarkDMsAsRead",i)):this.trigger(e.target,"dataDMReadError",t)}),this.post({url:"/i/messages/mark_read",data:{last_message_id:i.last_message_id,recipient_id:i.recipient_id,recipient_name:i.recipient_name,get_count:i.from_notification},eventData:i,success:s.bind(this),error:n.bind(this)})},this.after("initialize",function(){this.on("dataMarkDMsAsRead",this.markDMsAsRead)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(244),l=s(r),c=i(352),d=s(c),u=d.default.triggerFn;e.default=(0,a.default)(n,l.default)}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.attributes({open:!1,text:"",welcomeMessageId:void 0,conversation:{id:null},compose:{id:null,screenName:null,name:null,avatar:null}}),this.openDMDialog=function(t,e){this.attr.open&&((this.attr.conversation||{}).id?this.openConversation():this.openCompose())},this.openConversation=function(){var t=this.attr.conversation||{};this.trigger("uiNeedsDMDialog",{conversation_id:t.id,default_composer_text:this.attr.text,fromInitData:!0})},this.openCompose=function(){var t=this.attr.compose||{};this.trigger("uiNeedsDMDialog",{id:t.id,screen_name:t.screenName,name:t.name,profile_image_url_https:t.avatar,default_composer_text:this.attr.text,welcome_message_id:this.attr.welcomeMessageId,fromInitData:!0})},this.after("initialize",function(){this.on("uiSwiftLoaded uiPopStateNavigate",this.openDMDialog)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o);e.default=(0,a.default)(n)},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){var t=0;this.triggerUnreadCount=function(e,i){i=i||{},t=i.msgCount,t>0?this.trigger(e.target,"dataUserHasUnreadDMsWithCount",{msgCount:t}):this.trigger(e.target,"dataUserHasNoUnreadDMsWithCount")},this.dispatchUnreadNotification=function(t,e){var i=e&&e.d||{};"ok"===i.status&&null!=i.response&&this.triggerUnreadCount(t,{msgCount:i.response})},this.checkForEnvelope=function(e,i){i&&"profile"===i.section&&this.triggerUnreadCount(e,{msgCount:t})},this.after("initialize",function(){this.on("uiReadStateChanged",this.triggerUnreadCount),this.on("dataNotificationsReceived",this.dispatchUnreadNotification),this.on("uiPageChanged",this.checkForEnvelope)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o);e.default=(0,a.default)(n)},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.dismiss=function(t,e){this.post({url:["/i/feedback/dismiss/",e.feedbackId,".json"].join(""),success:"dataB2CFeedbackDismissed",error:"dataB2CFeedbackDismissedFailed"}),this.trigger("uiDMHideError")},this.after("initialize",function(){this.on(document,"uiB2CFeedbackDismiss",this.dismiss)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(244),l=s(r),c=(0,a.default)(n,l.default);e.default=c},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.getFeedbackItem=function(t){return{id:t,item_type:h.default.feedbackRequest}},this.scribeFeedbackDismiss=function(t,e){e&&this.scribe({component:this.getFeedbackComponent[e.cardName],element:e.currentView,action:"dismiss"},{items:[this.getFeedbackItem(e.feedbackId)]})},this.after("initialize",function(){this.getFeedbackComponent={},this.getFeedbackComponent[p.default.feedbackNpsCardName]=p.default.feedbackNpsScribeComponentName,this.getFeedbackComponent[p.default.feedbackCsatCardName]=p.default.feedbackCsatScribeComponentName,this.on(document,"uiB2CFeedbackDismiss",this.scribeFeedbackDismiss)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(142),l=s(r),c=i(139),d=s(c),u=i(144),h=s(u),f=i(900),p=s(f);e.default=(0,a.default)(n,l.default,d.default)},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i="2586390716:feedback_nps",s="2586390716:feedback_csat",n="nps_feedback_survey",o="csat_feedback_survey",a={feedbackNpsCardName:i,feedbackCsatCardName:s,feedbackNpsScribeComponentName:n,feedbackCsatScribeComponentName:o};e.default=a},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({noShowError:!0,dmDialogSelector:"#dm_dialog",throttleInterval:3e3,foregroundPollInterval:3e3,burstPollInterval:3e3,burstPollDuration:3e5,maxPollInterval:6e4}),this.dispatch=function(t){t&&(p.default.updateNotificationState(t.note),this.trigger("dataNotificationsReceived",t.note))},this.makeToastRequest=function(t,e,i){this.get({url:"/i/toast_poll",data:i,eventData:e,success:this.dispatch.bind(this),headers:{"X-Twitter-Polling":!0},returnNotificationData:!0})},this.requestUserUpdates=function(){this.get({url:"/i/direct_messages/user_updates",data:{cursor:this.dmCursor,active_conversation:this.activeConversationVisible?this.activeConversation:void 0},success:"dataDMUserUpdates"})},this.requestConversationList=function(t,e){var i={};p.default.addDMData(i),this.makeToastRequest(t,e,i)},this.attachBackgroundPoller=g.default.once(function(){this.attachChild(a.default,document,{burstPollInterval:this.attr.burstPollInterval,burstDuration:this.attr.burstPollDuration,maxPollInterval:this.attr.maxPollInterval})}),this.updateActiveConversation=function(t,e){this.activeConversation=e.conversation_id},this.updateActiveConversationVisibility=function(t,e){this.activeConversationVisible="uiDMConversationActivityVisible"===t.type},this.after("initialize",function(){this.attachChild(d.default,document,{dmDialogSelector:this.attr.dmDialogSelector,pollingInterval:this.attr.foregroundPollInterval}),l.default.get("notifications")&&"Notification"in window&&"granted"===Notification.permission&&this.attachBackgroundPoller(),this.on("uiNativeNotificationPermissionGranted",this.attachBackgroundPoller),this.on("uiDMPoll",this.requestConversationList),this.on("uiDMRequestUserUpdates",g.default.throttle(this.requestUserUpdates,this.attr.throttleInterval)),this.on("dataDMUpdate",this.requestUserUpdates),this.on("uiDMConversationUpdated",this.updateActiveConversation),this.on("uiDMConversationActivityHidden uiDMConversationActivityVisible",this.updateActiveConversationVisibility)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(902),a=s(o),r=i(461),l=s(r),c=i(903),d=s(c),u=i(111),h=s(u),f=i(251),p=s(f),m=i(126),g=s(m),v=i(351),b=s(v),w=i(244),S=s(w),y=i(854),C=s(y),T=i(231),D=s(T),M=(0,h.default)(n,S.default,b.default,C.default,D.default);e.default=M},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.attributes({burstDuration:5,burstPollInterval:3e3,dmToastType:"direct_message",maxPollInterval:6e4,noTeardown:!0}),this.possiblyStartBurstPolling=function(t,e){e.should_request_inbox||e.is_empty||(clearTimeout(this.stopTimeout),this.timer.resume(),this.stopTimeout=setTimeout(this.timer.pause.bind(this.timer),this.attr.burstDuration))},this.after("initialize",function(){this.timer=a.default.setIntervalEvent("uiDMRequestUserUpdates",this.attr.burstPollInterval,{},this.attr.noTeardown),this.timer.pause(),a.default.setIntervalEvent("uiDMRequestUserUpdates",this.attr.maxPollInterval,{},this.attr.noTeardown),this.on("uiSwiftLoaded","uiDMRequestUserUpdates"),this.on("dataDMUserUpdates",this.possiblyStartBurstPolling)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(110),a=s(o),r=i(111),l=s(r),c=(0,l.default)(n);e.default=c},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.attributes({dmDialogSelector:"#dm_dialog",pollingInterval:3e3,noTeardown:!0}),this.pollIfForeground=function(){this.isDocumentVisible()&&this.isDialogVisible()&&this.trigger("uiDMRequestUserUpdates")},this.isDialogVisible=function(){return this.$dmDialog.is(":visible")},this.isDocumentVisible=function(){return"visible"===document.visibilityState},this.after("initialize",function(){this.$dmDialog=this.select("dmDialogSelector"),this.timer=a.default.setIntervalEvent("uiDMForegroundPoll",this.attr.pollingInterval,{},!0),this.on("uiDMForegroundPoll",this.pollIfForeground)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(110),a=s(o),r=i(111),l=s(r),c=(0,l.default)(n);e.default=c},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({draggingClass:"currently-dragging",supportsDraggingClass:"supports-drag-and-drop"}),this.dragEnter=function(){this.$node.addClass(this.attr.draggingClass)},this.dragLeave=function(){this.$node.removeClass(this.attr.draggingClass)},this.addSupportsDraggingClass=function(){this.$node.addClass(this.attr.supportsDraggingClass)},this.hasSupport=function(){return"draggable"in document.createElement("span")&&!(0,a.default)().msie},this.after("initialize",function(){this.hasSupport()&&(this.addSupportsDraggingClass(),this.on("uiDragEnter",this.dragEnter),this.on("uiDragLeave uiDrop",this.dragLeave))})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(156),a=s(o),r=i(111),l=s(r),c=i(905),d=s(c);e.default=(0,l.default)(n,d.default)},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({fileTypeRegExp:!1}),this.childHover=function(e){t.contains(this.$node.get(0),e.target)&&(e.stopImmediatePropagation(),this.inChild="dragenter"===e.type)},this.hover=function(t){if(t.preventDefault(),this.inChild)return!1;var e=this.prepareData(t);this.trigger("dragenter"===t.type?"uiDragEnter":"uiDragLeave",e)},this.finish=function(t){t.stopImmediatePropagation(),this.inChild=!1,this.trigger("uiDragLeave")},this.preventDefault=function(t){return t.preventDefault(),!1},this.detectDragEnd=function(e){this.detectingEnd||(this.detectingEnd=!0,t(document.body).one("mousemove",this.dragEnd.bind(this)))},this.dragEnd=function(){this.detectingEnd=!1,this.trigger("uiDragEnd")},this.outOfBounds=function(t){var e=t.originalEvent.pageX,i=t.originalEvent.pageY,s=document.body.clientWidth,n=document.body.clientHeight;(e<=0||i<=0||i>=n||e>=s)&&this.dragEnd()},this.prepareData=function(t){var e=(t.originalEvent||t).dataTransfer,i={};i.types=Array.prototype.slice.call(e.types,0);var s=e.items||e.files;if(s){i.items=[];for(var n=0;n<s.length;++n){var o=s[n];i.items.push({type:o.type})}}else i.items=null;return{dataTransfer:i}},this.after("initialize",function(){this.inChild=!1,this.on(document.body,"dragenter dragover",this.detectDragEnd),this.on(document.body,"dragleave",this.outOfBounds),this.on("dragenter dragleave",a.default.onlyHandleEventsWithFiles(this.hover,this.attr.fileTypeRegExp)),this.on("dragover drop",a.default.onlyHandleEventsWithFiles(this.preventDefault,this.attr.fileTypeRegExp)),this.on("dragenter dragleave",a.default.onlyHandleEventsWithFiles(this.childHover,this.attr.fileTypeRegExp)),this.on(document,"uiDragEnd drop",this.finish)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(405),a=s(o);e.default=n}).call(e,i(10))},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({itemSelector:".tweet[data-dynamic-preroll=true]",maxAdRequest:10,tweetIdAttr:"data-tweet-id",impressionIdAttr:"data-impression-id",includeLongVideos:!1}),this.initialAdFetch=function(t,e){var i=this.getTweetInfo(this.select("itemSelector"));this.fetchAdsAndCache(i)},this.timelineAdFetch=function(e,i){var s=this.getTweetInfo(t(i.items_html).find(this.attr.itemSelector));this.fetchAdsAndCache(s)},this.getTweetInfo=function(e){var i=this;return e.map(function(e,s){var n=t(s);return{id:n.attr(i.attr.tweetIdAttr),promoted_id:n.attr(i.attr.impressionIdAttr)}}).get()},this.isMarketplaceTweet=function(t){return!t.promoted_id},this.fetchAdsAndCache=function(t){var e=this;this.tweetRefreshCache=this.tweetRefreshCache.concat(t.filter(this.isMarketplaceTweet)),t.forEach(function(t){e.isMarketplaceTweet(t)||(e.amplifyTweets[e.adCacheKey(t)]=t)}),this.fetchAds(t)},this.fetchAds=function(t,e){var i=this;if(t&&0!==t.length){var s=void 0;for(s=0;s<t.length;s+=this.attr.maxAdRequest){var n=t.slice(s,s+this.attr.maxAdRequest),o=n.map(function(t){return i.requestsInFlight[i.adCacheKey(t)]=!0,{tweet_id:t.id,impression_id:t.promoted_id}}),a=void 0;e&&e.adId&&e.dynamicPrerollType&&(a={preroll_id:e.adId,dynamic_preroll_type:e.dynamicPrerollType}),this.post({url:"/i/videoads/v2/prerolls.json",data:{tweets:JSON.stringify({tweets:o,trigger_preroll:a,include_long_videos:this.attr.includeLongVideos})},success:this.handleSuccess.bind(this,n),error:this.handleError.bind(this,n)})}}},this.handleSuccess=function(t,e){var i=this,s={},n=e.autoplay_blacklist;this.removeInFlightRequests(t),e.video_analytics_scribe.forEach(function(t){var o=e.prerolls.find(function(e){return e.tweet_id===t.tweet_id&&e.impression_id===t.impression_id&&e.live_event_id===t.live_event_id})||{},a={adId:o.preroll_id,dynamicPrerollType:o.dynamic_preroll_type,autoplayBlacklist:n,videoAnalyticsScribePassthrough:t.video_analytics_scribe_passthrough};o.promoted_content&&(a.promotedContent={impressionId:o.promoted_content.impression_id,disclosureType:o.promoted_content.disclosure_type}),o.media_info&&(a.mediaInfo=o.media_info);var r=i.adCacheKey({id:t.tweet_id,promoted_id:t.impression_id});i.amplifyTweets[r]&&(i.amplifyTweets[r].adId=o.preroll_id,i.amplifyTweets[r].dynamicPrerollType=o.dynamic_preroll_type),s[r]=a}),this.updateDynamicVideoAdCache(s)},this.handleError=function(t,e){this.removeInFlightRequests(t);var i=t.map(function(t){return o({error_message:e.message},t)});this.scribe({element:"dynamic_video_ads",action:"dynamic_preroll_request_error"},{items:i})},this.removeInFlightRequests=function(t){var e=this;t.forEach(function(t){return delete e.requestsInFlight[e.adCacheKey(t)]})},this.refreshCache=function(t,e){var i=this;if(this.clearDynamicVideoAdCache(),e.tweet&&e.tweet.id){var s=this.adCacheKey({id:e.tweet.id,promoted_id:e.tweet.promoted_id});this.requestsInFlight[s]&&this.scribe({element:"dynamic_video_ads",action:"dynamic_preroll_request_late"},{items:[e.tweet]})}Object.keys(this.amplifyTweets).length>0&&setTimeout(function(){return i.updateDynamicVideoAdCache(i.amplifyTweets)},0),this.fetchAds(this.tweetRefreshCache,e.triggerAd)},this.after("initialize",function(){this.tweetRefreshCache=[],this.amplifyTweets={},this.requestsInFlight={},this.on(document,"uiRefreshVideoAdCache",this.refreshCache),this.on(document,"dataGotMoreTimelineItems",this.timelineAdFetch),this.initialAdFetch()})}Object.defineProperty(e,"__esModule",{value:!0});var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},a=i(111),r=s(a),l=i(244),c=s(l),d=i(142),u=s(d),h=i(489),f=s(h),p=i(490),m=s(p),g=(0,r.default)(n,c.default,u.default,f.default,m.default);e.default=g}).call(e,i(10))},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({emailSettingsLinkSelector:".email-settings-link",phoneSettingsLinkSelector:".phone-settings-link",resendConfirmationEmailLinkSelector:".resend-confirmation-email-link",resetBounceLinkSelector:".reset-bounce-link"}),this.emailSettingsLink=function(){this.trigger("uiClickEmailSettingsLink")},this.phoneSettingsLink=function(){this.trigger("uiClickPhoneSettingsLink")},this.resendConfirmationEmail=function(e,i){this.trigger("uiResendConfirmationEmail",{unsuspend:t(e.target).hasClass("unsuspend-confirmation")})},this.resetBounceLink=function(){this.trigger("uiResetBounceLink")},this.after("initialize",function(){this.on("click",{emailSettingsLinkSelector:this.emailSettingsLink,phoneSettingsLinkSelector:this.phoneSettingsLink,resendConfirmationEmailLinkSelector:this.resendConfirmationEmail,resetBounceLinkSelector:this.resetBounceLink})})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o);e.default=(0,a.default)(n)}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.resendConfirmationEmail=function(t,e){var i=function(t){this.trigger("uiShowMessage",{message:t.messageForFlash})},s=function(){this.trigger("uiShowMessage",{message:"Oops!  There was an error sending the confirmation email."})};this.post({url:"/account/resend_confirmation_email",eventData:null,data:e&&e.unsuspend?{unsuspend:!0}:{},success:i.bind(this),error:s.bind(this)})},this.resetBounceScore=function(){var t=function(){this.trigger("uiShowMessage",{message:"Your email notifications should resume shortly."})},e=function(){this.trigger("uiShowMessage",{message:"Oops! There was an error sending email notifications."})};this.post({url:"/bouncers/reset",eventData:null,data:null,dataType:this.DATA_TYPES.TEXT,success:t.bind(this),error:e.bind(this)})},this.after("initialize",function(){this.on("uiResendConfirmationEmail",this.resendConfirmationEmail),this.on("uiResetBounceLink",this.resetBounceScore)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(244),l=s(r),c=i(123);s(c);e.default=(0,a.default)(n,l.default)},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.scribeEmailSettingsClick=function(t,e){this.scribe({page:"self_unsuspend",section:"banner",component:"email_verification",element:"settings",action:"click"})},this.scribePhoneSettingsClick=function(t,e){this.scribe({page:"self_unsuspend",section:"banner",component:"phone_verification",action:"click"})},this.scribeResendConfirmationEmailClick=function(t,e){this.scribe({page:"self_unsuspend",section:"banner",component:"email_verification",element:"resend_confirmation_email",action:"click"})},this.after("initialize",function(){this.on("uiClickEmailSettingsLink",this.scribeEmailSettingsClick),this.on("uiClickPhoneSettingsLink",this.scribePhoneSettingsClick),this.on("uiResendConfirmationEmail",this.scribeResendConfirmationEmailClick)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(142),l=s(r);e.default=(0,a.default)(n,l.default)},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.scribeOpen=function(t,e){this.scribeEmbedAction("open",e)},this.scribeOembedError=function(t,e){this.scribeEmbedAction("request_failed",e)},this.scribeEmbedCopy=function(t,e){this.scribeEmbedAction("copy",e)},this.scribeEmbedError=function(t,e){this.scribeEmbedAction("embed_request_failed")},this.scribeEmbedAction=function(t,e){this.scribeInteraction(t,o({},e,{scribeContext:{component:"embed_tweet_dialog"}}))},this.after("initialize",function(){this.on("uiEmbedRequestFailed",this.scribeEmbedError),this.on("uiNeedsEmbedTweetDialog uiNeedsEmbedVideoDialog",this.scribeOpen),this.on("uiOembedError",this.scribeOembedError),this.on("uiUserCopiedEmbedCode",this.scribeEmbedCopy)})}Object.defineProperty(e,"__esModule",{value:!0});var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},a=i(111),r=s(a),l=i(142),c=s(l),d=i(141),u=s(d);e.default=(0,r.default)(n,c.default,u.default)},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({dialogSelector:"#embed-tweet-dialog",dialogContentSelector:"#embed-tweet-dialog .modal-content",previewContainerSelector:".embed-preview",embedCodeDestinationSelector:".embed-destination",triggerSelector:".js-embed-tweet",overlaySelector:".embed-overlay",spinnerOverlaySelector:".embed-overlay-spinner",errorOverlaySelector:".embed-overlay-error",tryAgainSelector:".embed-overlay-error .retry-embed",includeParentTweetContainerSelector:".embed-include-parent-tweet",includeParentTweetSelector:".include-parent-tweet",includeCardContainerSelector:".embed-include-card",includeCardSelector:".include-card",embedTweetTitleSelector:".embed-tweet-title",embedVideoTitleSelector:".embed-video-title",embedTweetInstructionsSelector:".embed-tweet-instructions",embedVideoInstructionsSelector:".embed-video-instructions",embedWidth:"469px",top:"90px"}),this.didReceiveEmbedCode=function(t,e){this.select("overlaySelector").hide(),this.$embedCodeDestination.val(e.data.html),this.trigger(this.$dialog,"uiDialogContentChanged"),this.selectEmbedCode()},this.retryEmbedCode=function(t,e){this.select("overlaySelector").hide(),this.select("spinnerOverlaySelector").show(),this.trigger("uiOembedError",this.tweetData)},this.failedToReceiveEmbedCode=function(t,e){this.select("overlaySelector").hide(),this.select("embedCodeDestinationSelector").hide(),this.select("errorOverlaySelector").show(),this.clearOembed(),this.trigger(this.$dialog,"uiDialogContentChanged")},this.updateEmbedCode=function(){this.select("embedCodeDestinationSelector").show(),this.select("overlaySelector").hide(),this.trigger("uiNeedsOembed",this.getOptions()),this.trigger(this.$dialog,"uiDialogContentChanged")},this.requestTweetEmbed=function(){if(this.widgetsAreLoaded()){var t=this.getOptions();"tweet"===this.widgetType?this.widgets.widgets.createTweet(this.tweetId(),this.$previewContainer[0],this.receivedTweetEmbed.bind(this),{width:this.attr.embedWidth,conversation:t.data.hide_thread?"none":"all",cards:t.data.hide_media?"hidden":"shown",lang:t.data.lang}):"video"===this.widgetType&&this.widgets.widgets.createVideo(this.tweetId(),this.$previewContainer[0],this.receivedTweetEmbed.bind(this),{width:this.attr.embedWidth,status:"shown"})}},this.clearTweetEmbed=function(){this.$previewContainer.empty()},this.clearOembed=function(){this.$embedCodeDestination.val("")},this.tearDown=function(){this.clearTweetEmbed(),this.clearOembed()},this.embedCodeCopied=function(){this.trigger("uiUserCopiedEmbedCode")},this.receivedTweetEmbed=function(t){t||this.trigger("uiEmbedRequestFailed")},this.includeParentTweet=function(){return this.$includeParentTweet.prop("checked")},this.showCard=function(){return this.$includeCard.prop("checked")},this.getOptions=function(){var t={lang:this.lang};return"tweet"===this.widgetType?(t.hide_thread=!this.includeParentTweet(),t.hide_media=!this.showCard()):"video"===this.widgetType&&(t.widget_type="video"),{data:t,retry:!0,tweetId:this.tweetId(),screenName:this.screenName()}},this.selectEmbedCode=function(){this.$embedCode.select()},this.setUpDialog=function(t,e){this.position(),this.eventData=t,this.tweetData=e,this.toggleIncludeParent(),this.toggleShowCard(),this.toggleTitle(),this.toggleInstructions(),this.resetIncludeParent(),this.resetShowCard(),this.updateEmbedCode(),this.requestTweetEmbed(),this.open(),this.fixPosition(),this.widgetsAreLoaded()||this.getWidgets()},this.setUpDialogForTweet=function(){this.widgetType="tweet",this.setUpDialog.apply(this,arguments)},this.setUpDialogForVideo=function(){this.widgetType="video",this.setUpDialog.apply(this,arguments)},this.fixPosition=function(){this.$dialog.css({position:"relative",top:this.attr.top})},this.resetIncludeParent=function(){this.$includeParentTweet.prop("checked",!0)},this.resetShowCard=function(){this.$includeCard.prop("checked",!0)},this.toggleIncludeParent=function(){this.$includeParentCheckboxContainer.toggle("tweet"===this.widgetType&&!!this.tweetHasParent())},this.toggleShowCard=function(){this.$includeCardCheckboxContainer.toggle("tweet"===this.widgetType&&!!this.hasCard())},this.toggleTitle=function(){this.$embedTweetTitle.toggle("tweet"===this.widgetType),this.$embedVideoTitle.toggle("video"===this.widgetType)},this.toggleInstructions=function(){this.$embedTweetInstructions.toggle("tweet"===this.widgetType),this.$embedVideoInstructions.toggle("video"===this.widgetType)},this.tweetId=function(){return this.tweetData.tweetId},this.tweetHasParent=function(){return this.tweetData.hasParentTweet},this.hasCard=function(){return this.getCardDataFromContainer(t(this.eventData.target)).hasCard},this.screenName=function(){return this.tweetData.screenName},this.widgetsReady=function(){this.$dialogContainer&&this.isOpen()&&this.requestTweetEmbed()},this.onOptionChange=function(){this.trigger("uiNeedsOembed",this.getOptions()),this.requestTweetEmbed()},this.restoreFocusToTweet=function(e){t(e.target).is(this.$dialog)&&this.activeEl&&this.trigger(t(this.activeEl).closest(".tweet"),"uiShouldAddFocusStyle")},this.after("initialize",function(){this.$previewContainer=this.select("previewContainerSelector"),this.$includeParentTweet=this.select("includeParentTweetSelector"),this.$embedCodeDestination=this.select("embedCodeDestinationSelector"),this.$includeParentCheckboxContainer=this.select("includeParentTweetContainerSelector"),this.$includeCard=this.select("includeCardSelector"),this.$includeCardCheckboxContainer=this.select("includeCardContainerSelector"),this.$embedCode=this.select("embedCodeDestinationSelector"),this.$embedTweetTitle=this.select("embedTweetTitleSelector"),this.$embedVideoTitle=this.select("embedVideoTitleSelector"),this.$embedTweetInstructions=this.select("embedTweetInstructionsSelector"),this.$embedVideoInstructions=this.select("embedVideoInstructionsSelector"),this.on(document,"uiNeedsEmbedTweetDialog",this.setUpDialogForTweet),this.on(document,"uiNeedsEmbedVideoDialog",this.setUpDialogForVideo),this.on("uiDialogCloseRequested",this.tearDown),this.on(document,"uiBeforePageChanged",this.tearDown),this.on(document,"uiDialogRestorePreviousFocus",this.restoreFocusToTweet),this.on(document,"dataOembedSuccess",this.didReceiveEmbedCode),this.on(document,"dataOembedError",this.failedToReceiveEmbedCode),this.on(document,"dataOembedRetry",this.retryEmbedCode),this.on(this.$embedCodeDestination,"copy cut",this.embedCodeCopied),this.on(this.$embedCode,"click",this.selectEmbedCode),this.on("click",{tryAgainSelector:this.updateEmbedCode}),this.on("change",{includeParentTweetSelector:this.onOptionChange,includeCardSelector:this.onOptionChange}),this.widgetType="tweet",this.lang=document.documentElement.getAttribute("lang")})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(163),l=s(r),c=i(139),d=s(c),u=i(912),h=s(u),f=(0,a.default)(n,l.default,d.default,h.default);e.default=f}).call(e,i(10))},function(t,e){"use strict";function i(){this.widgetsAreLoaded=function(){
return!(!this.widgets||!this.widgets.init)},this.getWidgets=function(){window.twttr||this.asyncWidgetsLoader(),this.widgets=window.twttr,window.twttr.ready(this._widgetsReady.bind(this))},this._widgetsReady=function(_){this.widgetsReady&&this.widgetsReady()},this.asyncWidgetsLoader=function(){window.twttr=function(t,e,i){var s=t.getElementsByTagName(e)[0];if(!t.getElementById(i)){var n=t.createElement(e);n.id=i,n.src="//platform.twitter.com/widgets.js",s.parentNode.insertBefore(n,s);var o={_e:[],ready:function(t){o._e.push(t)}};return window.twttr||o}}(document,"script","twitter-wjs")}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({feedbackCookie:"debug_data",data:{}}),this.getFeedbackData=function(t,e){this.trigger("dataFeedback",this.attr.data)},this.toggleFeedbackCookie=function(t,e){var i=!!e.enabled||null;(0,l.default)(this.attr.feedbackCookie,i),this.refreshPage(),this.checkDebugEnabled()},this.refreshPage=function(){document.location.reload(!0)},this.checkDebugEnabled=function(){this.trigger("dataDebugFeedbackChanged",{enabled:!!(0,l.default)(this.attr.feedbackCookie)})},this.addFeedbackData=function(t,e){var i=this.attr.data;for(var s in e)i[s]?i[s]=[].concat.apply(i[s],e[s]):i[s]=e[s]},this.logNavigation=function(t,e){this.addFeedbackData(t,{pushState:[{data:{href:e.href,module:e.module,title:e.title}}]}),e.init_data&&e.init_data.debugData&&this.addFeedbackData(t,e.init_data.debugData.data||{})},this.after("initialize",function(){this.data=this.attr.data||{},this.on("uiNeedsFeedbackData",this.getFeedbackData),this.on("uiToggleDebugFeedback",this.toggleFeedbackCookie),this.on("dataSetDebugData",this.addFeedbackData),this.on("uiPageChanged",this.logNavigation),this.checkDebugEnabled()})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(154),l=s(r),c=i(244),d=s(c);e.default=(0,a.default)(n,d.default)},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({pastedContentSelector:".feedback-json-output",debugKeySelectorSelector:"select[name=debug-key]",debugDataText:"",dialogToggleSelector:".feedback-dialog .feedback-data-toggle"}),this.toggleDebugEnabled=function(e,i){this.trigger("uiToggleDebugFeedback",{enabled:t(i.el).is(".off")})},this.prepareDialog=function(t,e){this.trigger("uiNeedsFeedbackData")},this.openDialog=function(t,e){this.debugData=e,this.refreshAvailableDataKeys(),this.open()},this.refreshAvailableDataKeys=function(){var e=this.select("debugKeySelectorSelector");e.empty(),Object.keys(this.debugData).forEach(function(i){var s=t("<option>"+i+"</option>");e.append(s)}),this.refreshDebugJSON()},this.refreshDebugJSON=function(t){var e=this.select("debugKeySelectorSelector").val();if(e&&this.debugData[e]){var i=this.debugData[e].map(function(t){return t.data});this.select("pastedContentSelector").html(JSON.stringify(i,void 0,2))}},this.after("initialize",function(){this.on(document,"dataFeedback",this.openDialog),this.on(document,"uiPrepareFeedbackDialog",this.prepareDialog),this.on("change",{debugKeySelectorSelector:this.refreshDebugJSON}),this.on("click",{dialogToggleSelector:this.toggleDebugEnabled})})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(163),l=s(r);e.default=(0,a.default)(n,l.default)}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.getFollowSearchFollowStatus=function(t,e){var i=function(t){var e=void 0;try{e=t.timeline.instructions[0].addEntries.entries.length>0}catch(i){e=!1}this.trigger("dataGotFollowSearchState",{isFollowing:e})};this.getFollowedQueries(e,i)},this.getFollowedSearchesList=function(t,e){var i=function(t){try{var e=t.timeline.instructions[0].addEntries.entries;e.length>0&&this.trigger("dataFollowSearchGetListSuccess",{entries:e})}catch(i){}};this.getFollowedQueries(e,i)},this.getFollowedQueries=function(t,e){this.get({url:"https://api.twitter.com/2/follow_search/show.json",data:t,useOAuthSessionAuth:!0,success:e.bind(this),retryIfUnavailable:!0})},this.followSearch=function(t,e){function i(){this.trigger("dataUpdateFollowSearchButtonState",{isFollowing:!0})}function s(){this.trigger("dataUpdateFollowSearchButtonState",{isFollowing:!1})}this.post({url:"https://api.twitter.com/2/follow_search/create.json",data:e,useOAuthSessionAuth:!0,success:i.bind(this),error:s.bind(this)})},this.unfollowSearch=function(t,e){function i(){this.trigger("dataUpdateFollowSearchButtonState",{isFollowing:!1})}function s(){this.trigger("dataUpdateFollowSearchButtonState",{isFollowing:!0})}this.post({url:"https://api.twitter.com/2/follow_search/destroy.json",acceptEmptyStringAsJsonResponse:!0,data:e,useOAuthSessionAuth:!0,success:i.bind(this),error:s.bind(this)})},this.after("initialize",function(){this.on("dataFollowedSearchesListGet",this.getFollowedSearchesList),this.on("uiFollowSearchGetFollowStatus",this.getFollowSearchFollowStatus),this.on("uiFollowSearchQuery",this.followSearch),this.on("uiUnfollowSearchQuery",this.unfollowSearch)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(244),l=s(r);e.default=(0,a.default)(n,l.default)},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var n=i(111),o=s(n),a=i(142),r=s(a);e.default=(0,o.default)(r.default,function(){this.defaultAttrs({theme:"normal"}),this.scribeForeground=function(){this.scribe({element:this.attr.theme,action:"foreground"})},this.after("initialize",function(t){this.on("uiPageVisible",this.scribeForeground)})})},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.tweetHtml={},this.tweetPromotedBadgesHtml={},this.defaultAttrs({mediaSelector:".js-adaptive-photo,.tweet-media-img-placeholder,.AdaptiveStreamGridImage,.ProfileAvatar-container,.ProfileCardMini-avatar,.MomentMediaItem-entity--image,.ProfileStreamGridImage",galleryParentSelector:".Gallery",galleryMediaSelector:".Gallery-media",galleryTweetSelector:".GalleryTweet",closeSelector:".js-close, .Gallery-closeTarget",gallerySelector:".Gallery-content",imageSelector:".media-image",navSelector:".GalleryNav",prevSelector:".GalleryNav--prev",nextSelector:".GalleryNav--next",itemType:"tweet",tweetlessGalleryClass:"is-tweetless",hasStickersClass:"is-stickers"}),this.isOpen=function(){return this.$node.is(":visible")},this.open=function(e,i){this.calculateScrollbarWidth();var s=t(e.target).closest(this.attr.mediaSelector);!this.isOpen()&&s.length&&(i&&i.timelineSelector?this.$timeline=s.closest(i.timelineSelector):this.$timeline=s.parent(),this.clearTweet(),this.setDominantColorForMedia(s),d.default.resetMinSize(this.select("gallerySelector")),this.render(s),t("body").addClass("gallery-enabled"),this.select("gallerySelector").addClass("show-controls"),this.trigger("uiGalleryOpened",i))},this.handleClose=function(t){this.isOpen()&&(t.stopPropagation(),this.closeGallery())},this.closeGallery=function(){t("body").hasClass("gallery-enabled")&&(t("body").removeClass("gallery-enabled"),this.clearDominantColor(),this.select("galleryMediaSelector").empty(),this.resetStickers(),this.hideNav(),this.enableNav(!1,!1),this.off(window,"resize",this.debouncedResize),delete this.$timeline,delete this.$current,this.trigger("uiGalleryClosed"),this.trigger("uiDialogClosed"))},this.render=function(t){this.resetStickers(),this.$current=t,this.renderNav(),this.trigger(t,"uiGalleryMediaLoad"),this.renderMedia(t)},this.renderNav=function(){if(this.$current){var t=this.$timeline.find(this.attr.mediaSelector),e=t.index(this.$current),i=t.slice(0,e),s=t.slice(e+1),n=s.length>0,o=i.length>0;this.enableNav(n,o),n||o?this.showNav():this.hideNav()}},this.preloadNeighbors=function(t){this.preloadRecursive(t,"next",2),this.preloadRecursive(t,"prev",2)},this.clearTweet=function(){this.select("galleryTweetSelector").empty()},this.flushTweet=function(e){var i=this.getTweetId(t(e.target));i&&delete this.tweetHtml[i]},this.getTweet=function(t){if(t)if(this.tweetHtml[t])this.renderTweet(t,this.tweetHtml[t].tweetHtml,this.tweetHtml[t].tweetStickers);else{this.$current&&this.getTweetId(this.$current)===t&&this.select("galleryMediaSelector").find(".media-image,iframe").hide();var e={id:t,modal:"gallery",hasStickers:h.default.getDeciderValue("stickersExperience")};this.trigger("uiGetTweet",e)}},this.gotTweet=function(t,e){"id"in e&&"tweet_html"in e&&"sourceEventData"in e&&"gallery"===e.sourceEventData.modal&&(this.tweetHtml[e.id]={tweetHtml:e.tweet_html,tweetStickers:e.tweet_stickers},e.sourceEventData.promotedBadgeHtml&&(this.tweetPromotedBadgesHtml[e.id]=e.sourceEventData.promotedBadgeHtml),this.renderTweet(e.id,e.tweet_html,e.tweet_stickers))},this.moveDropdownToActionList=function(t){var e=t.find(".ProfileTweet-action--more"),i=t.find(".stream-item-footer .ProfileTweet-actionList");e.appendTo(i)},this.renderTweet=function(e,i,s){if(this.$current&&this.getTweetId(this.$current)===e.toString()){var n=this.select("galleryTweetSelector"),o=this.select("gallerySelector"),a=this.select("galleryMediaSelector").find(".media-image,iframe");n.html(i);var r=this.tweetPromotedBadgesHtml[e];if(r&&n.find(".stream-item-footer").prepend(t(r)),this.moveDropdownToActionList(n),a.length&&(a.show(),d.default.resizeMedia(a,o,!1,this.attr.galleryTweetSelector)),s){var l=this.$timeline.find(this.attr.mediaSelector),c=l.filter('[data-tweet-id="'+e+'"]');c.length||(c=l.not("[data-tweet-id]"));var u=c.index(this.$current);u>=0&&s[u]&&(this.select("gallerySelector").addClass(this.attr.hasStickersClass),this.replaceMediaWithImageAndStickers(s[u]))}this.trigger("uiNeedUpdateInjectedTweetStats")}},this.getTweetId=function(t){return t.attr("data-status-id")?t.attr("data-status-id"):t.closest("[data-tweet-id]").attr("data-tweet-id")},this.getAllInDir=function(e,i){var s=void 0,n="prev"===i?-1:1,o=this.$timeline.find(this.attr.mediaSelector),a=o.index(e)+n;return a>-1&&(s=o.slice(a)),s||t()},this.getInDir=function(t,e){return this.getAllInDir(t,e).first()},this.preloadRecursive=function(t,e,i){var s=this;if(i&&1!==this.$timeline.find(this.attr.mediaSelector).length){if("next"===e&&this.getAllInDir(t,e).length<i&&!this.$timeline.hasClass("dashboard"))return void this.trigger("uiNearTheBottom");var n=this.getInDir(t,e);if(n&&n.length){n.attr("data-preloading",!0);var o=function(t){n.attr("data-preloaded",!0),s.getTweet(s.getTweetId(n)),s.preloadRecursive(n,e,--i)},a=function(){n.remove(),s.preloadRecursive(n,e,i)};l.default.load(this.getLargeMediaUrl(n),o,a)}}},this.renderMedia=function(t){t.attr("data-source-url")?this.loadVideo(t):this.loadImage(t),this.preloadNeighbors(t)},this.mediaLoaded=function(t){var e=this.getTweetId(t),i=this.select("gallerySelector");this.setDominantColorForMedia(t),e?(this.getTweet(e),i.closest(this.attr.galleryParentSelector).removeClass(this.attr.tweetlessGalleryClass)):(this.clearTweet(),i.closest(this.attr.galleryParentSelector).addClass(this.attr.tweetlessGalleryClass)),this.trigger("uiGalleryMediaLoaded",{url:this.getLargeMediaUrl(t),id:t.attr("data-status-id")})},this.mediaFailed=function(t){this.trigger("uiGalleryMediaFailed",{url:this.getLargeMediaUrl(t),id:t.attr("data-status-id")}),t.remove(),this.next()},this.loadImage=function(e){var i=this;this.select("gallerySelector").removeClass(["video","is-hitTesting",this.attr.hasStickersClass].join(" "));var s=e.find("img").attr("alt"),n=t("<img>",{alt:s,addClass:"media-image"});n.on("load",function(t){var s=i.select("gallerySelector");e.attr("loaded",!0),i.select("galleryMediaSelector").html(n),n.attr({"data-height":n[0].height,"data-width":n[0].width}),d.default.resizeMedia(n,s,!1,i.attr.galleryTweetSelector,!0),i.$current=e,i.mediaLoaded(e)}),n.on("error",function(){return i.mediaFailed(e)}),n.attr("src",this.getLargeMediaUrl(e))},this.fixSnappyUrl=function(t){var e=t.attr("data-source-url"),i=/https:\/\/www.snappytv.com\/tc\/(\d+)\?autoplay=true&h=(\d+)&w=(\d+)/;if(i.test(e)){var s=2*t.attr("data-height"),n=2*t.attr("data-width");e=e.replace(i,"https://www.snappytv.com/tc/$1?autoplay=true&h="+s+"&w="+n),t.attr("data-source-url",e)}},this.loadVideo=function(e){var i=t("<iframe>");this.fixSnappyUrl(e),i.height(2*e.attr("data-height")).width(2*e.attr("data-width")).attr("data-height",2*e.attr("data-height")).attr("data-width",2*e.attr("data-width")).attr("src",e.attr("data-source-url")),e.attr("loaded",!0),this.select("galleryMediaSelector").empty().append(i),this.$current=e,this.getTweet(e.attr("data-status-id")),this.select("gallerySelector").addClass("video").removeClass(this.attr.hasStickersClass)},this.prev=function(){this.gotoMedia("prev"),this.trigger("uiGalleryNavigatePrev")},this.next=function(){this.gotoMedia("next"),this.trigger("uiGalleryNavigateNext")},this.gotoMedia=function(t){if(this.$current){var e=this.getInDir(this.$current,t);e.length&&this.render(e)}},this.showNav=function(){this.select("navSelector").show()},this.hideNav=function(){this.select("navSelector").hide()},this.enableNav=function(t,e){t?this.select("nextSelector").addClass("enabled"):this.select("nextSelector").removeClass("enabled"),e?this.select("prevSelector").addClass("enabled"):this.select("prevSelector").removeClass("enabled")},this.setDominantColorForMedia=function(t){var e=t?t.attr("data-dominant-color"):"";e?this.setDominantColor(e):this.clearDominantColor()},this.clearDominantColor=function(){this.setDominantColor("")},this.setDominantColor=function(t){"string"==typeof t&&(this.select("galleryMediaSelector").css("background-color",t),this.select("galleryTweetSelector").css("background-color",t),this.select("gallerySelector").css("background-color",t))},this.getLargeMediaUrl=function(t){var e=t.attr("data-image-url");return t.attr("data-resolved-url-large")||e&&e+":large"},this.throttle=function(t,e,i){var s=!1;return function(){s||(t.apply(i,arguments),s=!0,setTimeout(function(){return s=!1},e))}},this.hideControls=function(){this.select("gallerySelector").removeClass("show-controls")},this.after("initialize",function(){this.on("uiReplyToTweet","uiOpenReplyDialog"),this.on("mousemove",this.hideControls),this.on(document,"dataDidDeleteTweet",this.closeGallery),this.on(document,"dataGotMoreMediaTimelineItems",this.renderNav),this.on(document,"uiOpenGallery",this.open),this.on(document,"uiOverlayNavigate uiCloseGallery",this.closeGallery),this.on(document,"uiShortcutEsc",this.handleClose),this.on(window,"popstate",this.closeGallery),this.on(document,"uiShortcutLeft",this.throttle(this.prev,200,this)),this.on(document,"uiShortcutRight",this.throttle(this.next,200,this)),this.on(document,"dataGotTweet",this.gotTweet),this.on(document,"dataFailedToGetTweet",this.clearTweet),this.on("click",{prevSelector:this.prev,nextSelector:this.next,closeSelector:this.handleClose}),this.on(document,"uiDidRetweet uiDidUnretweet uiDidFavoriteTweet uiDidUnfavoriteTweet",this.flushTweet)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(918),l=s(r),c=i(893),d=s(c),u=i(136),h=s(u),f=i(883),p=s(f),m=i(919),g=s(m),v=i(165),b=s(v),w=i(920),S=s(w),y=i(922),C=s(y),T=(0,a.default)(n,p.default,b.default,S.default,g.default,C.default);e.default=T}).call(e,i(10))},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var n=i(362),o=s(n),a={load:function(e,i,s){function n(t){a=!0,o.unbind("load"),s()}var o=t("<img/>"),a=!1;o.on("load",function(t){a||"error"===t.type||i(o)}),o.on("error",n),o.on("abort",n),o.attr("src",e)},loadMultiple:function(e){var i=o.default.unique(e),s=i.map(function(e){var i=t("<img>");return new Promise(function(t,s){return i.on("load",function(e){return t({width:i[0].width,height:i[0].height})}).on("error",function(){return s()}).attr("src",e)})});return Promise.all(s).then(function(t){var e={};return t.forEach(function(t,s){return e[i[s]]=t}),e})}};e.default=a}).call(e,i(10))},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){a.default.mixin(this,[l.default]),this.defaultAttrs({tweetSelector:".tweet",tweetTranslationSelector:".tweet-translation",tweetTranslationTextSelector:".tweet-translation-text",translateTweetSelector:".js-translate-tweet",needsTranslationClass:"needs-translation",permalinkContainerSelector:".permalink-tweet-container",permalinkClass:".permalink-tweet",languageSelector:".tweet-language",galleryTranslateButtonSelector:".Gallery .GalleryTweet .tweet .translate-button",translateButtonSelector:".translate-button",translationFeedbackButtonSelector:".js-translation-feedback-button",translationsLoadingSelector:".tweet-translation-loading"}),this.translateTweet=function(t){var e=this.tweetFromEvent(t);if(e.find(this.attr.tweetTranslationSelector).hasClass(this.attr.needsTranslationClass)){var i=this.interactionData(e);i.dest=e.find(this.attr.tweetTranslationSelector).data("destLang"),e.find(this.attr.translationsLoadingSelector).show(),this.trigger(e,"uiNeedsTweetTranslation",i)}},this.showTranslationFeedbackDialog=function(t){var e=this.tweetFromEvent(t),i=e.find(this.attr.tweetTranslationSelector);this.trigger(e,"uiNeedsTranslationFeedbackDialog",{tweetId:e.data("tweetId"),translation:i.data("translationText"),sourceLang:i.data("sourceLang"),destLang:i.data("destLang")})},this.tweetFromEvent=function(e){return t(e.target).closest(this.attr.tweetSelector)},this.showTweetTranslation=function(e,i){if(this.select("translationsLoadingSelector").hide(),i.item_html){var s=this.findTweetById(t(e.target),i.id_str);s.find(this.attr.translateButtonSelector).hide();var n=s.find(this.attr.tweetTranslationSelector);if(!i.translated_lang)return void s.find(this.attr.translateTweetSelector).hide();n.find(this.attr.languageSelector).html(i.translated_lang),n.data({translationText:i.text,sourceLang:i.source_lang}).removeClass(this.attr.needsTranslationClass).find(this.attr.tweetTranslationTextSelector).html(i.item_html),s.find(this.attr.translateTweetSelector).toArray().forEach(function(e){var i=t(e);i.is(this.attr.galleryTranslateButtonSelector)&&i.hide()},this)}},this.findTweetById=function(t,e){var i=this.tweetSelectorById(e);return t.is(i)?t:t.find(i)},this.tweetSelectorById=function(t){return this.attr.tweetSelector+"[data-tweet-id="+t.replace(/\D/g,"")+"]"},this.showError=function(t,e){this.select("translationsLoadingSelector").hide(),this.trigger("uiShowMessage",{message:"Unable to translate this Tweet. Please try again later."})},this.after("initialize",function(){this.on("dataTweetTranslationSuccess",this.showTweetTranslation),this.on("dataTweetTranslationError",this.showError),this.on("click",{translationFeedbackButtonSelector:this.showTranslationFeedbackDialog,translateTweetSelector:this.translateTweet})})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(121),a=s(o),r=i(138),l=s(r),c=i(123);s(c);e.default=n}).call(e,i(10))},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({stickerSelector:".StickersMediaImage-stickerImage",stickerLinkSelector:".StickersMediaImage-stickerLink",stickerMediaImageSelector:".StickersMediaImage",hitTestingEnabledClass:"is-hitTesting"}),this.animateSticker=function(e){var i=t(e.target),s="stickerAnimation-"+i.data("animationRefIndex"),n=i.data("currentAnimationPattern");n="a"===n?"b":"a",i.data("currentAnimationPattern",n),s=s+"-"+n,i.css("-webkit-animation-name",s),i.css("animation-name",s)},this.transformSticker=function(t,e){return"matrix("+t.matrix.join(",")+")scale("+e+")"},this.generateStickerDataArray=function(t){var e=this.select("imageSelector").width();this.stickerData=t.map(function(t,i){var s=e*t.aspectRatio;return o({width:e,height:s,halfWidth:e/2,halfHeight:s/2,animationRefIndex:i,matrix:[t.transformA,t.transformB,t.transformC,t.transformD,t.transformTx*e,t.transformTy*s]},t)},this)},this.generateTemplateVariables=function(t,e,i,s){var n=Math.ceil((e.width()-i.width())/2);return{image:t.src,width:t.width,height:t.height,bgWidth:i.width(),bgHeight:i.height(),blackBarWidth:n,stickers:this.stickerData.map(function(t){return o({},t,{link:s?"/i/stickers/"+t.id:"",transform:this.transformSticker(t,1)})},this)}},this.renderMainImageAndStickerPlaceholders=function(t,e){this.generateStickerDataArray(e);var i=f.default.getDeciderValue("stickersInteractivity"),s=this.generateTemplateVariables(t,this.select("galleryMediaSelector"),this.select("imageSelector"),i),n=m.default.render(s);this.$current.attr("loaded",!0),this.stickersFirstVisibleTime=Date.now(),this.select("galleryMediaSelector").html(n),this.$stickersContainer=this.select("stickerMediaImageSelector"),f.default.getDeciderValue("stickersInteractivityDuringLoading")||this.enableHitTesting()},this.detectedBrowser=function(){return(0,r.default)().name},this.isNotFirefoxOrIE=function(){var t=this.detectedBrowser();return!("mozilla"===t||"msie"===t)},this.isValidBrowserForSVG=function(){return!(document.implementation&&!document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1"))&&this.isNotFirefoxOrIE()},this.hypot=function(t,e){return Math.sqrt(t*t+e*e)},this.getBiggestRasterSticker=function(t){var e=t.images.raster;return e[e.length-1].url},this.findBestsizedRasterSticker=function(t){for(var e=!1,i=t.width*this.hypot(t.matrix[0],t.matrix[2]),s=t.height*this.hypot(t.matrix[1],t.matrix[3]),n=t.images.raster,o=0;o<n.length-1;o++)if(n[o].w>i&&n[o].h>s){e=n[o].url;break}return e?e:this.getBiggestRasterSticker(t)},this.determineStickerUrl=function(t){return this.isValidBrowserForSVG()&&t.images.vector?t.images.vector.url:this.findBestsizedRasterSticker(t)},this.loadStickersAsBlobUrls=function(t,e,i){var s=this;this.renderMainImageAndStickerPlaceholders(t,e);var n=this.stickerData.map(function(t){return t.url=s.determineStickerUrl(t),t.url}),o=this.$stickersContainer.width(),a=this.$stickersContainer.height();i===this.currentStickerKey&&c.default.createMapOfBlobUrls(n).then(function(t){i===s.currentStickerKey&&(s.urlToBlobUrlMap=t,Promise.all(s.stickerData.map(function(t){return this.generateHitTestPixels(t,o,a,i)},s)).then(function(){return s.beginHitTesting()}))})},this.loadMainImageAndStickers=function(t,e,i){var s=this;u.default.load(t,function(t){var n=t[0];s.loadStickersAsBlobUrls(n,e,i)})},this.replaceMediaWithImageAndStickers=function(t){var e=this.getLargeMediaUrl(this.$current),i=e+JSON.stringify(t);this.currentStickerKey!==i&&(this.currentStickerKey=i,this.loadMainImageAndStickers(e,t,i))},this.resetStickers=function(){this.lastHitIndex=-1,this.$stickersContainer=null,this.isHitTesting=!1,this.stickerData=[],this.currentStickerKey=null,this.urlToBlobUrlMap&&c.default.revokeMapOfBlobUrls(this.urlToBlobUrlMap),this.urlToBlobUrlMap=null},this.generateHitTestPixels=function(t,e,i,s){var n=this,o=document.createElement("canvas");o.width=e,o.height=i;var a=new Image,r=this.getBlobUrlForSticker(t);return new Promise(function(l,c){return a.onload=function(){var s=o.getContext("2d");s.transform.apply(s,t.matrix),s.drawImage(a,-t.halfWidth,-t.halfHeight,t.width,t.height),t.hitTestPixels=s.getImageData(0,0,e,i),l(t)},a.onerror=c,s===n.currentStickerKey&&r?void(a.src=n.urlToBlobUrlMap[t.url]):c()})},this.enableHitTesting=function(){this.select("gallerySelector").addClass(this.attr.hitTestingEnabledClass),this.isHitTesting=!0},this.getBlobUrlForSticker=function(t){return this.urlToBlobUrlMap&&this.urlToBlobUrlMap[t.url]},this.replaceTempImagesWithRealImages=function(){var e=this,i=this.select("stickerSelector");i.each(function(i,s){var n=e.stickerData[i],o=e.getBlobUrlForSticker(n);o&&t(s).css("background-image","url("+o+")")})},this.beginHitTesting=function(){this.enableHitTesting(),this.replaceTempImagesWithRealImages();var t=this.select("stickerSelector"),e=Math.max(0,g-(Date.now()-this.stickersFirstVisibleTime));setTimeout(function(){return t.trigger("uiAnimateSticker")},e)},this.getStickerHitIndex=function(t){if(!this.$stickersContainer)return-1;var e=this.$stickersContainer[0].getBoundingClientRect(),i=e.bottom-e.top,s=e.right-e.left;if(!s||!i)return-1;var n=this.$stickersContainer.offset(),o=(t.pageX-n.left)/s,a=(t.pageY-n.top)/i;return o<0||o>=1||a<0||a>=1?-1:this.stickerData.reduce(function(t,e,i){var s=e.hitTestPixels;return s&&s.data[4*(Math.floor(o*s.width)+Math.floor(a*s.height)*s.width)+3]?i:t},-1)},this.animateIfHitTestChanged=function(t){if(this.isHitTesting){var e=this.getStickerHitIndex(t);e!==this.lastHitIndex&&(this.lastHitIndex=e,this.select("stickerLinkSelector").css("cursor",e>=0?"pointer":"default"),e>=0&&this.select("stickerSelector").eq(e).trigger("uiAnimateSticker"))}},this.navigateIfHitTestSucceeds=function(t){if(this.isHitTesting){var e=this.getStickerHitIndex(t);e>=0&&this.select("stickerSelector").eq(e).trigger("click")}},this.preventWhenHitTesting=function(t){this.isHitTesting&&t.originalEvent&&(t.stopPropagation(),t.preventDefault())},this.after("initialize",function(){this.resetStickers(),this.on("uiAnimateSticker",{stickerSelector:this.animateSticker}),this.on("mousemove",{stickerMediaImageSelector:this.animateIfHitTestChanged}),this.on("click",{stickerLinkSelector:this.preventWhenHitTesting}),this.on("mouseup",{stickerLinkSelector:this.navigateIfHitTestSucceeds})}),this.before("teardown",this.resetStickers)}Object.defineProperty(e,"__esModule",{value:!0});var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t};e.default=n;var a=i(156),r=s(a),l=i(393),c=s(l),d=i(918),u=s(d),h=i(136),f=s(h),p=i(921),m=s(p),g=500}).call(e,i(10))},function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b("<style>\n\n.StickersMediaImage.media-image {\n  background-image: url('"),s.b(s.v(s.f("image",t,e,0))),s.b("');\n\n  width: "),s.b(s.v(s.f("bgWidth",t,e,0))),s.b("px;\n  height: "),s.b(s.v(s.f("bgHeight",t,e,0))),s.b("px;\n}\n\n.StickersMediaImage-blackBar {\n  width: "),s.b(s.v(s.f("blackBarWidth",t,e,0))),s.b("px;\n  height: "),s.b(s.v(s.f("bgHeight",t,e,0))),s.b("px;\n}\n\n"),s.s(s.f("stickers",t,e,1),t,e,0,238,1859,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b("@-webkit-keyframes stickerAnimation-"),i.b(i.v(i.f("animationRefIndex",t,e,0))),i.b("-a {\n  0%   {transform: matrix("),i.b(i.v(i.f("matrix",t,e,0))),i.b(") scale(1); animation-timing-function: ease-in;}\n  13%  {transform: matrix("),i.b(i.v(i.f("matrix",t,e,0))),i.b(") scale(1); animation-timing-function: ease-in;}\n  53%  {transform: matrix("),i.b(i.v(i.f("matrix",t,e,0))),i.b(") scale(1.025); animation-timing-function: ease-in;}\n  100% {transform: matrix("),i.b(i.v(i.f("matrix",t,e,0))),i.b(") scale(1); animation-timing-function: ease-out;}\n}\n@keyframes stickerAnimation-"),i.b(i.v(i.f("animationRefIndex",t,e,0))),i.b("-a {\n  0%   {transform: matrix("),i.b(i.v(i.f("matrix",t,e,0))),i.b(") scale(1); animation-timing-function: ease-in;}\n  13%  {transform: matrix("),i.b(i.v(i.f("matrix",t,e,0))),i.b(") scale(1); animation-timing-function: ease-in;}\n  53%  {transform: matrix("),i.b(i.v(i.f("matrix",t,e,0))),i.b(") scale(1.025); animation-timing-function: ease-in;}\n  100% {transform: matrix("),i.b(i.v(i.f("matrix",t,e,0))),i.b(") scale(1); animation-timing-function: ease-out;}\n}\n@-webkit-keyframes stickerAnimation-"),i.b(i.v(i.f("animationRefIndex",t,e,0))),i.b("-b {\n  0%   {transform: matrix("),i.b(i.v(i.f("matrix",t,e,0))),i.b(") scale(1); animation-timing-function: ease-in;}\n  13%  {transform: matrix("),i.b(i.v(i.f("matrix",t,e,0))),i.b(") scale(1); animation-timing-function: ease-in;}\n  53%  {transform: matrix("),i.b(i.v(i.f("matrix",t,e,0))),i.b(") scale(1.025); animation-timing-function: ease-in;}\n  100% {transform: matrix("),i.b(i.v(i.f("matrix",t,e,0))),i.b(") scale(1); animation-timing-function: ease-out;}\n}\n@keyframes stickerAnimation-"),i.b(i.v(i.f("animationRefIndex",t,e,0))),i.b("-b {\n  0%   {transform: matrix("),i.b(i.v(i.f("matrix",t,e,0))),i.b(") scale(1); animation-timing-function: ease-in;}\n  13%  {transform: matrix("),i.b(i.v(i.f("matrix",t,e,0))),i.b(") scale(1); animation-timing-function: ease-in;}\n  53%  {transform: matrix("),i.b(i.v(i.f("matrix",t,e,0))),i.b(") scale(1.025); animation-timing-function: ease-in;}\n  100% {transform: matrix("),i.b(i.v(i.f("matrix",t,e,0))),i.b(") scale(1); animation-timing-function: ease-out;}\n}\n")}),t.pop()),s.b("\n"+i),s.b('</style>\n\n<div class="StickersMediaImage media-image">\n  <img src="'),s.b(s.v(s.f("image",t,e,0))),s.b('" class="StickersMediaImage-passthroughImage" />\n\n'),s.s(s.f("stickers",t,e,1),t,e,0,2015,2702,"{{ }}")&&(s.rs(t,e,function(t,e,s){s.s(s.f("link",t,e,1),t,e,0,2029,2106,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b('      <a class="StickersMediaImage-stickerLink js-nav" href="'),i.b(i.v(i.f("link",t,e,0))),i.b('">\n')}),t.pop()),s.b("\n"+i),s.b('      <div\n          class="StickersMediaImage-stickerImage js-tooltip"\n          data-original-title="'),s.b(s.v(s.f("tooltip",t,e,0))),s.b('"\n          data-animation-ref-index="'),s.b(s.v(s.f("animationRefIndex",t,e,0))),s.b('"\n\n          style="\n            width: '),s.b(s.v(s.f("width",t,e,0))),s.b("px;\n            height: "),s.b(s.v(s.f("height",t,e,0))),s.b("px;\n            left: -"),s.b(s.v(s.f("halfWidth",t,e,0))),s.b("px;\n            top: -"),s.b(s.v(s.f("halfHeight",t,e,0))),s.b("px;\n\n            -moz-transform:    "),s.b(s.v(s.f("transform",t,e,0))),s.b(";\n            -webkit-transform: "),s.b(s.v(s.f("transform",t,e,0))),s.b(";\n            -o-transform:      "),s.b(s.v(s.f("transform",t,e,0))),s.b(";\n            transform:         "),s.b(s.v(s.f("transform",t,e,0))),s.b(';\n          ">\n      </div>\n\n'),s.s(s.f("link",t,e,1),t,e,0,2674,2690,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b("      </a>\n")}),t.pop())}),t.pop()),s.b("</div>\n"),s.fl()},partials:{},subs:{}})}).call(e,i(1))},function(t,e,i){(function(t){"use strict";function i(){this.defaultAttrs({requestReplyActivitySelector:"",requestRetweetedActivitySelector:".request-retweeted-popup",requestFavoritedActivitySelector:".request-favorited-popup",requestActivitySelectors:".request-retweeted-popup, .request-favorited-popup",requestTaggingActivitySelector:".request-tagging-popup",targetTweetSelector:".tweet",targetTaggedUsersListSelector:".popup-tagged-users-list",targetTitleSelector:"[data-activity-popup-title]",tweetPivotLinkSelector:".tweet-pivot-link",hiddenClass:"hidden"}),this.requestReplyActivity=function(t){this.trigger("uiRequestReplyActivity")},this.requestRetweetedActivity=function(t){this.requestActivityPopup(t),this.trigger("uiRequestRetweetedActivity")},this.requestFavoritedActivity=function(t){this.requestActivityPopup(t),this.trigger("uiRequestFavoritedActivity")},this.requestTaggingActivity=function(t){this.requestActivityPopup(t),this.trigger("uiRequestTaggingActivity")},this.requestActivityPopup=function(e,i){var s=t(e.target),n=s.closest(this.attr.targetTitleSelector).attr("data-activity-popup-title"),o=s.closest(this.attr.targetTweetSelector).attr("data-tweet-id"),a=i?i.usersHtml:null,r=void 0;e.preventDefault(),e.stopPropagation(),r=s.closest(this.attr.requestRetweetedActivitySelector).length?"retweeted_popup":s.closest(this.attr.requestTaggingActivitySelector).length?"media_tagged_popup":"favorited_popup",this.trigger("uiRequestActivityPopup",{titleHtml:n,contentId:o,usersHtml:a,component:r})},this.handleLoggedOutRetweetedActivityClick=function(t,e){this.trigger("uiLoggedOutActionAttempt",{action:"retweeted_activity_attempt"})},this.handleLoggedOutFavoritedActivityClick=function(t,e){this.trigger("uiLoggedOutActionAttempt",{action:"favorited_activity_attempt"})},this.uiOpenSignupDialog=function(t,e,i){this.trigger("uiOpenSignupDialog")},this.uiTweetPivotClick=function(e){
var i=t(e.target),s={item_details:{item_type:"0",id:i.attr("data-item-id")},component_details:{id:i.attr("data-entity-id"),name:i.attr("data-name"),description:i.attr("data-id")}};this.trigger("uiTweetPivotClick",s)},this.after("initialize",function(){return this.attr.loggedIn?void this.on("click",{requestReplyActivitySelector:this.requestReplyActivity,requestRetweetedActivitySelector:this.requestRetweetedActivity,requestFavoritedActivitySelector:this.requestFavoritedActivity,requestTaggingActivitySelector:this.requestTaggingActivity,tweetPivotLinkSelector:this.uiTweetPivotClick}):void this.on("click",{requestActivitySelectors:this.uiOpenSignupDialog,requestRetweetedActivitySelector:this.handleLoggedOutRetweetedActivityClick,requestFavoritedActivitySelector:this.handleLoggedOutFavoritedActivityClick,requestTaggingActivitySelector:this.requestTaggingActivity})})}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.scribeGalleryOpened=function(t,e){this.scribe({element:"gallery",action:"open"},e)},this.scribeGalleryClosed=function(t,e){this.scribe({element:"gallery",action:"close"},e)},this.scribeGalleryMediaLoaded=function(t,e){var i={url:e.url,item_ids:[e.id]};this.scribe({element:"photo",action:"impression"},e,i)},this.scribeGalleryMediaFailed=function(t,e){var i={url:e.url,item_ids:[e.id]};this.scribe({element:"photo",action:"error"},e,i)},this.scribeGalleryNavigateNext=function(t,e){this.scribe({element:"next",action:"click"},e)},this.scribeGalleryNavigatePrev=function(t,e){this.scribe({element:"prev",action:"click"},e)},this.scribeGridPaged=function(t,e){this.scribe({element:"grid",action:"page"},e)},this.scribeGridOpened=function(t,e){this.scribe({element:"grid",action:"impression"},e)},this.after("initialize",function(){this.on(document,"uiGalleryOpened",this.scribeGalleryOpened),this.on(document,"uiGalleryClosed",this.scribeGalleryClosed),this.on(document,"uiGalleryMediaLoaded",this.scribeGalleryMediaLoaded),this.on(document,"uiGalleryMediaFailed",this.scribeGalleryMediaFailed),this.on(document,"uiGalleryNavigateNext",this.scribeGalleryNavigateNext),this.on(document,"uiGalleryNavigatePrev",this.scribeGalleryNavigatePrev),this.on(document,"uiGridPaged",this.scribeGridPaged),this.on(document,"uiGridOpened",this.scribeGridOpened)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(142),l=s(r);e.default=(0,a.default)(n,l.default)},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({birdSelector:"h1.bird-topbar-etched",spinnerContainer:"body",globalHeadingSelector:".global-nav h1",spinnerClass:"pushing-state",spinnerSelector:".pushstate-spinner"}),this.showSpinner=function(t,e){this.select("birdSelector").removeAttr("style"),this.select("spinnerContainer").addClass(this.attr.spinnerClass)},this.hideSpinner=function(t,e){this.select("spinnerContainer").removeClass(this.attr.spinnerClass)},this.addSpinner=function(){this.select("spinnerSelector").length||t('<div class="pushstate-spinner"></div>').insertAfter(this.select("globalHeadingSelector"))},this.after("initialize",function(){this.on("uiSwiftLoaded",this.addSpinner),this.on("uiShowGlobalLoadingIndicator",this.showSpinner),this.on("uiHideGlobalLoadingIndicator",this.hideSpinner)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=(0,a.default)(n);e.default=r}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({dropdownId:"swift_autocomplete_dropdown_goto_user",inputSelector:"input.username-input",usernameFormSelector:"form.goto-user-form"}),this.focus=function(){this.select("inputSelector").focus()},this.gotoUser=function(t,e){if(!e||!e.dropdownId||e.dropdownId===this.attr.dropdownId){if(t.preventDefault(),e&&e.item)return this.select("inputSelector").val(e.item.screen_name),void this.trigger("uiNavigate",{href:e.href});var i=this.select("inputSelector").val().trim();"@"===i.substr(0,1)&&(i=i.substr(1)),this.trigger("uiNavigate",{href:"/"+i})}},this.reset=function(){this.select("inputSelector").val(""),this.select("inputSelector").blur(),this.trigger(this.select("inputSelector"),"uiHideAutocomplete")},this.after("initialize",function(){this.on(document,"uiShortcutShowGotoUser",this.open),this.on("uiDialogOpened",this.focus),this.on("uiDialogClosed",this.reset),this.on(this.select("usernameFormSelector"),"submit",this.gotoUser),this.on("uiTypeaheadItemSelected uiTypeaheadSubmitQuery",this.gotoUser),d.default.attachTo(this.$node,{inputSelector:this.attr.inputSelector}),l.default.attachTo(this.$node,{inputSelector:this.attr.inputSelector,autocompleteAccounts:!1,datasourceRenders:[["accounts",["accounts"]]],deciders:this.attr.typeaheadData,eventData:{scribeContext:{component:"goto_user_dialog"}}})})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(414),l=s(r),c=i(429),d=s(c),u=i(163),h=s(u),f=(0,a.default)(n,h.default);e.default=f},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({showShortcutsBtnSelector:"#show-shortcuts-btn",dismissShortcutsBtnSelector:"#dismiss-shortcuts-btn",suppressSRMsgCookie:"suppress_sr_shortcuts_msg",loggedIn:!1,closeOnOtherDialogOpened:!0,keyboardShortcuts:[]}),this.renderSRMessage=function(){if(!t("#kb-shortcuts-msg").length){var e=p.default.render({});t(e).insertBefore(document.body.firstChild)}},this.addMessage=function(){(0,d.default)(this.attr.suppressSRMsgCookie)||this.renderSRMessage()},this.removeMessage=function(){t("#kb-shortcuts-msg").remove(),(0,d.default)(this.attr.suppressSRMsgCookie,"1",{expires:1/0})},this.renderShortcutsDialog=function(){if(!t("#keyboard-shortcut-dialog").length){var e={keyboard_shortcuts:this.attr.keyboardShortcuts};t("body").append(h.default.render(e)),this.$dialogContainer=t("#keyboard-shortcut-dialog"),this.$dialog=this.$dialogContainer.find(this.attr.modalSelector)}},this.showShortcutsDialog=function(){this.renderShortcutsDialog(),this.open()},this.after("initialize",function(){this.on(document,"click",{showShortcutsBtnSelector:this.showShortcutsDialog,dismissShortcutsBtnSelector:this.removeMessage}),this.on(document,"uiSwiftLoaded",this.addMessage),this.on(document,"uiOpenKeyboardShortcutsDialog",this.showShortcutsDialog)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(163),l=s(r),c=i(154),d=s(c),u=i(927),h=s(u),f=i(928),p=s(f),m=(0,a.default)(n,l.default);e.default=m}).call(e,i(10))},function(t,e,i){(function(e){function s(t,e,i){e=e||{};for(var s in a)e[s]||(e[s]=a[s]);return r.render(t,e,i)}var n=i(220).default,o={"dialogs/close_button":i(221)},a=n(o),r=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<div id="keyboard-shortcut-dialog" class="modal-container">\n  <div class="modal modal-large draggable">\n    <div class="modal-content">\n'),s.b(s.rp("<dialogs/close_button0",t,e,"      ")),s.b("\n"+i),s.b('      <div class="modal-header">\n        <h3 class="modal-title">Keyboard shortcuts</h3>\n      </div>\n\n'),s.b('      <div class="modal-body">\n\n        <div class="keyboard-shortcuts clearfix" id="keyboard-shortcut-menu">\n          <p class="visuallyhidden">\n            Note: To use these shortcuts, users of screen readers may need to toggle off the virtual navigation.\n          </p>\n'),s.s(s.f("keyboard_shortcuts",t,e,1),t,e,0,644,1342,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b('            <table class="modal-table" summary="'),i.b(i.v(i.f("description",t,e,0))),i.b('">\n'),i.s(i.f("name",t,e,1),t,e,0,734,895,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('                <thead>\n                  <tr>\n                    <th colspan="2">'),i.b(i.v(i.f("name",t,e,0))),i.b("</th>\n                  </tr>\n                </thead>\n")}),t.pop()),i.b("              <tbody>\n"),i.s(i.f("shortcuts",t,e,1),t,e,0,957,1273,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('                  <tr>\n                    <td class="shortcut">\n'),i.s(i.f("keys",t,e,1),t,e,0,1054,1129,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('                        <b class="sc-key">'),i.b(i.v(i.d(".",t,e,0))),i.b("</b>\n")}),t.pop()),i.b('                    </td>\n                    <td class="shortcut-label">'),i.b(i.v(i.f("description",t,e,0))),i.b("</td>\n                  </tr>\n")}),t.pop()),i.b("              </tbody>\n            </table>\n")}),t.pop()),s.b("        </div>\n      </div>\n    </div>\n  </div>\n</div>\n\n\n"),s.fl()},partials:{"<dialogs/close_button0":{name:"dialogs/close_button",partials:{},subs:{}}},subs:{}});t.exports={template:r,partials:a,render:s}}).call(e,i(1))},function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<div id="kb-shortcuts-msg" class="visuallyhidden">\n  <h2>Keyboard Shortcuts</h2>\n  <p>\n    Keyboard shortcuts are available for common actions and site navigation.\n'),s.b('    <button id="show-shortcuts-btn" type="button" tabindex="-1">View Keyboard Shortcuts</button>\n    <button id="dismiss-shortcuts-btn" type="button" tabindex="-1">Dismiss this message</button>\n  </p>\n</div>'),s.fl()},partials:{},subs:{}})}).call(e,i(1))},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({promoCTASelector:".stream-items .leadgen-card-forward .promotion-cta",leadgenDialogIframeSelector:".cards2-promotion-iframe",tweetSelector:".leadgen-card-forward",macawCardsIframeContainerSelector:".js-macaw-cards-iframe-container"});var e={OPEN_DIALOG:"uiOpenLeadGenConfirmDialog",DIALOG_CLOSED:"uiDialogClosed"};this.setUpDialogWithElement=function(e,i){this.$tweet=t(i.el).closest(this.attr.tweetSelector);var s=this.$tweet.closest("[data-impression-id]").attr("data-impression-id"),n=this.$tweet.closest("[data-impression-id]").attr("data-disclosure-type"),o=t(i.el).data("card-url");this.leadgenDialogIframe.attr("src",o),this.setUpDialog(e,this.$tweet,s,n)},this.setUpDialogWithData=function(e,i){this.$tweet=t(this.attr.tweetSelector+"[data-tweet-id="+i.tweetId+"]"),this.macawCardsIframeContainer.attr(this.attr.srcAttr,i.fullCardIframeUrl),this.macawCardsIframeContainer.attr(this.attr.cardUrl,i.cardUrl),this.macawCardsIframeContainer.attr(this.attr.publisherId,i.publisherId),this.macawCardsIframeContainer.attr(this.attr.creatorId,i.creatorId),this.leadgenDialogIframe.hide(),this.macawCardsIframeContainer.length&&(this.createCard(t(this.macawCardsIframeContainer[0].parentElement)||this.$tweet),this.setUpDialog(e,this.$tweet,i.impressionId,i.disclosureType))},this.cleanUpDialog=function(t,e){this.macawCardsIframeContainer.removeData(this.attr.srcDataAttr),this.macawCardsIframeContainer.removeData(this.attr.cardUrlDataAttr),this.macawCardsIframeContainer.removeData(this.attr.publisherIdDataAttr),this.macawCardsIframeContainer.removeData(this.attr.creatorIdDataAttr),this.destroyCard(this.$tweet)},this.after("initialize",function(){this.leadgenDialogIframe=this.select("leadgenDialogIframeSelector"),this.macawCardsIframeContainer=this.select("macawCardsIframeContainerSelector"),this.on(document,"click",{promoCTASelector:this.setUpDialogWithElement}),this.on(document,e.OPEN_DIALOG,this.setUpDialogWithData),this.on(e.DIALOG_CLOSED,this.cleanUpDialog)}),this.setUpDialog=function(t,e,i,s){t.preventDefault(),this.open()}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(163),l=s(r),c=i(834),d=s(c),u=(0,a.default)(n,l.default,d.default);e.default=u}).call(e,i(10))},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({top:90,contentSelector:".list-membership-content",createListSelector:".create-a-list",membershipSelector:".list-membership-container li"}),this.openListMembershipDialog=function(t,e){this.userId=e.userId,this.userId&&this.trigger("uiNeedsListMembershipContent",{userId:this.userId}),this.$content.empty(),this.$node.removeClass("has-content"),this.open()},this.addListMembershipContent=function(t,e){this.$node.addClass("has-content"),this.$content.html(e.html)},this.handleNoListMembershipContent=function(t,e){this.close(),this.trigger("uiShowError",e)},this.toggleListMembership=function(e,i){var s=t(e.target),n={userId:s.closest("[data-user-id]").attr("data-user-id"),listId:s.closest("[data-list-id]").attr("data-list-id")},o=t("#list_"+n.listId);o.is(":visible")&&(o.closest(this.attr.membershipSelector).addClass("pending"),o.data("is-checked")?this.trigger("uiRemoveUserFromList",n):this.trigger("uiAddUserToList",n))},this.updateMembershipState=function(e){var i=this;return function(s,n){var o=t("#list_"+n.sourceEventData.listId);o.closest(i.attr.membershipSelector).removeClass("pending"),o.prop("checked",e),o.data("is-checked",e),o.attr("data-is-checked",e)}},this.openListCreateDialog=function(){this.close(),this.trigger("uiOpenCreateListDialog",{userId:this.userId})},this.after("initialize",function(){this.$content=this.select("contentSelector"),this.on("click",{createListSelector:this.openListCreateDialog,membershipSelector:this.toggleListMembership}),this.on(document,"uiListAction uiOpenListMembershipDialog",this.openListMembershipDialog),this.on(document,"dataGotListMembershipContent",this.addListMembershipContent),this.on(document,"dataFailedToGetListMembershipContent",this.handleNoListMembershipContent),this.on(document,"dataDidAddUserToList dataFailedToRemoveUserFromList",this.updateMembershipState(!0)),this.on(document,"dataDidRemoveUserFromList dataFailedToAddUserToList",this.updateMembershipState(!1))})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(163),l=s(r),c=(0,a.default)(n,l.default);e.default=c}).call(e,i(10))},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({top:90,win:window,saveListSelector:".update-list-button",editorSelector:".list-editor",currentNameSelector:".js-list-details .js-list-name",currentDescSelector:".js-list-details .js-list-desc",nameInputSelector:".list-editor input[name='name']",descriptionSelector:".list-editor textarea[name='description']",privacySelector:".list-editor input[name='mode']"}),this.openListOperationsDialog=function(t,e){e=e||{},this.userId=e.userId,"uiOpenUpdateListDialog"===t.type&&this.modifyDialog(),this.open(),this.$nameInput.focus()},this.modifyDialog=function(){this.$modalTitle=this.select("modalTitleSelector"),this.originalTitle=this.originalTitle||this.$modalTitle.text(),this.$modalTitle.text("Edit list details");var e=t(this.attr.currentNameSelector).attr("data-raw-text").trim(),i=t(this.attr.currentDescSelector).attr("data-raw-text").trim();this.$nameInput.val(e),this.$descriptionInput.val(i),this.isPublic||(this.$privacyInput[1].checked=!0),this.$saveButton.attr("data-list-id",this.listId).attr("data-operation","update"),this.toggleSaveButtonDisabled(),this.modified=!0,this.$descriptionInput.on("keyup",this.toggleSaveButtonDisabled.bind(this)),this.$privacyInput.on("change",this.toggleSaveButtonDisabled.bind(this))},this.revertModifications=function(){this.modified&&(this.revertDialog(),this.$editor.find("input,textarea").val(""),this.$descriptionInput.off("keyup"),this.$privacyInput.off("change"),this.modified=!1)},this.revertDialog=function(){this.$modalTitle.text(this.originalTitle),this.$saveButton.removeAttr("data-list-id").removeAttr("data-operation"),this.isPublic||(this.$privacyInput[0].checked=!0)},this.saveList=function(e,i){if(!this.requestInProgress){this.requestInProgress=!0;var s=t(i.el),n="update"===s.attr("data-operation")?"uiUpdateList":"uiCreateList",a={name:this.formValue("name"),description:this.formValue("description",{type:"textarea"}),mode:this.formValue("mode",{conditions:":checked"})};"update"===s.attr("data-operation")&&(a=o({},a,{list_id:s.attr("data-list-id")})),this.trigger(n,a),this.$saveButton.prop("disabled",!0)}},this.saveListSuccess=function(t,e){this.close();var i="List saved!";"dataDidCreateList"===t.type?(i="List created!",this.userId?this.trigger("uiOpenListMembershipDialog",{userId:this.userId}):e&&e.slug&&(this.attr.win.location="/"+this.attr.screenName+"/lists/"+e.slug)):this.revertDialog(),this.$editor.find("input:text,textarea").val(""),this.trigger("uiShowMessage",{message:i})},this.saveListComplete=function(t,e){this.requestInProgress=!1,this.toggleSaveButtonDisabled()},this.toggleSaveButtonDisabled=function(t,e){this.$saveButton.prop("disabled",""===this.$nameInput.val())},this.formValue=function(t,e){return e=e||{},e.type=e.type||"input",e.conditions=e.conditions||"",this.$editor.find(e.type+"[name='"+t+"']"+e.conditions).val()},this.disableSaveButton=function(){this.$saveButton.prop("disabled",!0)},this.updateState=function(t,e){this.listId=e.init_data.list_id,this.isPublic=e.init_data.is_public},this.after("initialize",function(){this.listId=this.attr.list_id,this.isPublic=this.attr.is_public,this.$editor=this.select("editorSelector"),this.$nameInput=this.select("nameInputSelector"),this.$descriptionInput=this.select("descriptionSelector"),this.$privacyInput=this.select("privacySelector"),this.$saveButton=this.select("saveListSelector"),this.on("click",{saveListSelector:this.saveList}),this.on("focus blur keyup",{nameInputSelector:this.toggleSaveButtonDisabled}),this.on("uiDialogOpened",this.disableSaveButton),this.on("uiDialogClosed",this.revertModifications),this.on(document,"uiOpenCreateListDialog uiOpenUpdateListDialog",this.openListOperationsDialog),this.on(document,"dataDidCreateList dataDidUpdateList",this.saveListSuccess),this.on(document,"dataDidCreateList dataDidUpdateList dataFailedToCreateList dataFailedToUpdateList",this.saveListComplete),this.on(document,"uiPageChanged",this.updateState)})}Object.defineProperty(e,"__esModule",{value:!0});var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},a=i(111),r=s(a),l=i(163),c=s(l),d=i(123),u=(s(d),(0,r.default)(n,c.default));e.default=u}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.subscribe=function(t,e){var i=this.consumers[e]||[];i.indexOf(t)===-1&&i.push(t),this.consumers[e]=i,this.lpClient.subscribe(e)},this.unsubscribe=function(t,e){var i=this.consumers[e]||[];i=i.filter(function(e){return e!==t}),this.consumers[e]=i,i.length||(this.lpClient.unsubscribe(e),delete this.consumers[e])},this.subUnsubHandler=function(t,e){var i=e.consumer_id,s=e.topic;if(i&&s){var n="dataLPSubscribe"===t.type?this.subscribe:this.unsubscribe,o=Array.isArray(s)?s:[s];o.forEach(n.bind(this,i))}},this.handleVisibilityChange=function(t){"uiPageVisible"===t.type?Object.keys(this.consumers).length&&this.lpClient.reconnect():this.lpClient.close()},this.after("initialize",function(){this.consumers={},this.lpClient=new a.default,this.lpClient.onMessage(this.trigger.bind(this,"dataLPMessage")),this.on("dataLPSubscribe dataLPUnsubscribe",this.subUnsubHandler),this.on("uiPageVisible uiPageHidden",this.handleVisibilityChange)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(933),a=s(o),r=i(111),l=s(r);e.default=(0,l.default)(n)},function(t,e,i){(function(t){"use strict";function i(e){e=e||{};var n={urls:{events:e.urls&&e.urls.events||s.urls.events,subscribe:e.urls&&e.urls.subscribe||s.urls.subscribe,unsubscribe:e.urls&&e.urls.unsubscribe||s.urls.unsubscribe},retry:{enabled:void 0===(e.retry&&e.retry.enabled)?s.retry.enabled:e.retry.enabled,backoffFactor:void 0===(e.retry&&e.retry.backoffFactor)?s.retry.backoffFactor:e.retry.backoffFactor,maxDelay:void 0===(e.retry&&e.retry.maxDelay)?s.retry.maxDelay:e.retry.maxDelay},resubPreemptDuration:e.resubPreemptDuration||s.resubPreemptDuration};this.onMessageCallback=n.message,this.onErrorCallback=n.error;var o=void 0,a=[],r={},l=void 0,c=void 0,d=void 0,u=!1;this.updateSessionData=function(t){r.sessionId=t.session_id,r.ttl=t.subscription_ttl_millis},this.newEventSource=function(t,e){return new EventSource(t,e)},this.hasSubscribedTopics=function(){return!!a.length},this.openConnection=function(){if(this.hasSubscribedTopics()){var t="?topic="+a.map(encodeURIComponent).join(",");this.close(),o=this.newEventSource(n.urls.events+t,{withCredentials:!0}),o.onmessage=this.messageHandler.bind(this),o.onerror=this.errorHandler.bind(this)}},this.messageHandler=function(t){var e=this.tryParseJSON(t.data);if(e)switch(e.topic){case"/system/config":this.updateSessionData(e.payload.config),u&&this.refreshSubscriptions(),this.resetRetryCount();break;default:this.onMessageCallback&&this.onMessageCallback(e)}},this.errorHandler=function(t){this.close(),this.onErrorCallback&&this.onErrorCallback(t),this.retry()},this.tryParseJSON=function(t){try{return JSON.parse(t)}catch(e){return}},this.subUnsubErrorHandler=function(t){if(400===t.status){var e=this.tryParseJSON(t.responseText),s=e&&e.errors&&e.errors[0];s&&s.code===i.API_ERROR_CODES.SESSION_NOT_FOUND&&this.retry()}},this.resetRetryCount=function(){l=void 0},this.retry=function(){if(n.retry.enabled){l=void 0===l?0:l+1;var t=Math.random()*(Math.pow(2,l)-1)*n.retry.backoffFactor,e=Math.min(t,n.retry.maxDelay);c=setTimeout(this.openConnection.bind(this),e)}},this.refreshSubscriptions=function(){var e=this;return this.connectionStatus()===i.CONNECTING?void(u=!0):r.sessionId&&this.connectionStatus()!==i.CLOSED?void(a.length&&(u=!1,t.ajax({method:"POST",url:n.urls.subscribe,data:{session_id:r.sessionId,topic:a.join(",")},headers:{"LivePipeline-Session":r.sessionId},xhrFields:{withCredentials:!0},success:function(){e.resetRetryCount(),clearTimeout(d),d=setTimeout(e.refreshSubscriptions.bind(e),Math.max(0,r.ttl-n.resubPreemptDuration))},error:this.subUnsubErrorHandler.bind(this)}))):void this.openConnection()},this.subscribe=function(t){var e=a.indexOf(t)===-1,s=e||this.connectionStatus()===i.CLOSED;e&&a.push(t),s&&this.refreshSubscriptions()},this.unsubscribe=function(e){a.indexOf(e)!==-1&&(a=a.filter(function(t){return e!==t}),r.sessionId&&(t.ajax({method:"POST",url:n.urls.unsubscribe,data:{session_id:r.sessionId,topic:e},xhrFields:{withCredentials:!0}}),a.length||this.close()))},this.onMessage=function(t){this.onMessageCallback=t},this.onError=function(t){this.onErrorCallback=t},this.connectionStatus=function(){return o?o.readyState:i.CLOSED},this.reconnect=this.openConnection.bind(this),this.close=function(){o&&o.close(),r={},o=void 0,clearTimeout(c),clearTimeout(d)}}Object.defineProperty(e,"__esModule",{value:!0});var s={urls:{events:"https://api.twitter.com/live_pipeline/events",subscribe:"/i/live_pipeline/subscribe",unsubscribe:"/i/live_pipeline/unsubscribe"},retry:{enabled:!0,backoffFactor:500,maxDelay:12e4},resubPreemptDuration:25e3};i.isSupported=function(){return"EventSource"in window},i.OPEN=i.isSupported()&&EventSource.OPEN,i.CLOSED=i.isSupported()&&EventSource.CLOSED,i.CONNECTING=i.isSupported()&&EventSource.CONNECTING,i.API_ERROR_CODES={SESSION_NOT_FOUND:392};var n=function(t){var e=new i(t);this.subscribe=e.subscribe.bind(e),this.unsubscribe=e.unsubscribe.bind(e),this.connectionStatus=e.connectionStatus.bind(e),this.reconnect=e.reconnect.bind(e),this.close=e.close.bind(e),this.onMessage=e.onMessage.bind(e),this.onError=e.onError.bind(e),this.__privateInstance=e};n.isSupported=i.isSupported,n.OPEN=i.OPEN,n.CLOSED=i.CLOSED,n.CONNECTING=i.CONNECTING,n.API_ERROR_CODES=i.API_ERROR_CODES,n.__privateObject=i,e.default=n}).call(e,i(10))},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({locationPickerIframeSelector:".LocationPickerDialog-iframe",suggestedLocationSelector:".LocationPickerDialog-suggestedLocation",mainAddressLineSelector:".LocationPickerDialog-mainAddressLine",secondaryAddressLineSelector:".LocationPickerDialog-secondaryAddressLine",titleSelector:".LocationPickerDialog-title",submitButtonSelector:"#location-picker-submit-button",footerSelector:".LocationPickerDialog-footer",foursquareVendorInfoSelector:".LocationPickerDialog-foursquareVendorInfo",yelpVendorInfoSelector:".LocationPickerDialog-yelpVendorInfo",isShowingAttributionClass:"is-ShowingAttribution"}),this.openDialog=function(e,i){var s=t("html").attr("lang"),n="/i/locations/share?lang="+s;i=i||{},e=e||{};var o=i&&i.src||n;this.attr.loggedIn?(this.select("locationPickerIframeSelector").attr("src",o),this.on(window,"message",this.proxyIframeEvents),this.open(),this.$button=this.select("submitButtonSelector"),this.$button.addClass("disabled").prop("disabled",!0),this.state={type:"uiLocationAttachmentClicked"===e.type?"location_attachment":"location_picker"},"location_picker"===this.state.type?(this.state.qrId=i.qr_id,this.state.conversationId=i.conversation_id,this.$button.addClass("primary-btn").text("Send"),this.select("titleSelector").text("Share Location")):(this.handlePickerTextUpdate(null,i),this.$button.removeClass("primary-btn").text("View related Tweets"),this.updateDialogTitle(i))):this.trigger(document,"uiOpenSignupDialog")},this.updateDialogTitle=function(t){var e=t.blackLine,i=e||"Shared Location";this.select("titleSelector").text(i)},this.resetDialog=function(t,e){this.off(window,"message",this.proxyIframeEvents),this.select("locationPickerIframeSelector").attr("src","about:blank"),this.select("titleSelector").empty(),this.select("mainAddressLineSelector").empty(),this.select("secondaryAddressLineSelector").empty(),this.select("footerSelector").removeClass(this.attr.isShowingAttributionClass),this.select("foursquareVendorInfoSelector").addClass("u-hidden"),this.select("yelpVendorInfoSelector").addClass("u-hidden")},this.handlePickerTextUpdate=function(t,e){e=e||{};var i=this.select("suggestedLocationSelector"),s=i.find(".LocationPickerDialog-mainAddressLine"),n=i.find(".LocationPickerDialog-secondaryAddressLine"),o=!e.blackLine&&!e.grayLine,a=o?"":e.blackLine||e.grayLine,r=!e.blackLine||!e.grayLine,l=r?"":e.grayLine;s.toggleClass("u-hidden",o).text(a),n.toggleClass("u-hidden",r).text(l)},this.handleLocationUpdate=function(t,e){this.state.locationData=e||{},this.$button.removeClass("disabled").prop("disabled",!1),e.attribution&&this.updateAttribution(e.attribution)},this.updateAttribution=function(t){var e=this.select("footerSelector"),i=this.select("foursquareVendorInfoSelector"),s=this.select("yelpVendorInfoSelector"),n="foursquare"===t,o="yelp"===t,a=n||o;e.toggleClass(this.attr.isShowingAttributionClass,a),i.toggleClass("u-hidden",!n),s.toggleClass("u-hidden",!o)},this.canSend=function(){return this.state.locationData},this.handleClick=function(){"location_picker"===this.state.type?(this.sendLocation(),this.close()):this.viewRelatedTweets(),this.trigger("uiScribeLocationDialogButtonClick",this.state)},this.viewRelatedTweets=function(){var t=this.state.locationData.bestPlaceId||"",e="place:"+t,i="/search?"+y.default.encode({q:e});window.open(i,"_blank")},this.sendLocation=function(){var t=this.state.locationData,e={conversation_id:this.state.conversationId,"quick_reply_response[location][id]":this.state.qrId};"Coord"===t.type?m.default.push(e,{"location[shared_coordinate][lat]":t.lat,"location[shared_coordinate][lon]":t.lon}):m.default.push(e,{"location[shared_place][place][id]":t.placeId}),this.trigger("uiDMSendMessage",e)},this.after("initialize",function(){this.on(document,"uiLocationQRCtaClicked uiShareLocation uiLocationAttachmentClicked",this.openDialog),this.on("uiDialogClosed",this.resetDialog),this.on("uiB2CLocationPickerTextUpdate",this.handlePickerTextUpdate),this.on("uiB2CLocationPickerUpdateSelectedLocation uiB2CLocationAttachmentInit",this.handleLocationUpdate),this.on("click",{submitButtonSelector:(0,v.default)(this.handleClick,this.canSend)})})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(123),a=(s(o),i(111)),r=s(a),l=i(163),c=s(l),d=i(172),u=s(d),h=i(142),f=s(h),p=i(126),m=s(p),g=i(358),v=s(g),b=i(175),w=s(b),S=i(253),y=s(S),C=(0,r.default)(n,c.default,u.default,f.default,w.default);e.default=C}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.scribeLocationDialogButtonClick=function(t,e){e=e||{};var i=e.type,s=e.locationData,n=void 0;switch(i){case"location_picker":"Coord"===s.type?n=c:"Place"===s.type&&s.isSearched?n=u:"Place"!==s.type||s.isSearched||(n=d);break;case"location_attachment":n=h}"undefined"!=typeof n&&this.scribe(n)},this.after("initialize",function(){this.scribeOnEvent("uiLocationQRCtaClicked",{page:"messages",section:"thread",element:"location_request_dm",action:"click"}),this.scribeOnEvent("uiLocationAttachmentClicked",{page:"messages",section:"thread",element:"shared_location_dm",action:"click"}),this.on(document,"uiScribeLocationDialogButtonClick",this.scribeLocationDialogButtonClick)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(142),l=s(r),c={page:"map_place_picker",element:"pinned_location",action:"share"},d={page:"map_place_picker",element:"poi_suggestion",action:"share"},u={page:"map_place_picker",element:"poi_searched",action:"share"},h={page:"map_place_viewer",element:"related_tweets",action:"click"};e.default=(0,a.default)(n,l.default)},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({applyButtonSelector:".MediaEditDialog-applyAltTextButton",altTextTextareaSelector:".MediaEditDialog-altTextTextarea",doneTargetSelector:".js-done",closeTargetSelector:".js-close",photoContainerSelector:".MediaEditDialog-photoContainer",videoTrimSelector:".VideoTrim",videoTitleSelector:".MediaEditForm-title",videoDescriptionSelector:".MediaEditForm-description",videoCtaSelectSelector:".MediaEditForm-ctaSelect",videoCtaUrlSelector:".MediaEditForm-ctaUrl",videoEmbeddableSelector:".MediaEditForm-embeddable",videoTitleCharCounterSelector:".MediaEditForm-titleCharCounter",videoDescriptionCharCounterSelector:".MediaEditForm-descriptionCharCounter",videoTitleMaxLength:70,videoDescriptionMaxLength:200}),this.fileId=0,this.renderMediaEditDialog=function(t){var e=this.advancedVideoFeatures,i=t.advanced||{},s={alt_text:t.altText,can_compose_alt_text:this.canComposeAltText(),has_cta:""!==i.ctaType,is_cta_visit_site:"visit_site"===i.ctaType,is_cta_watch_now:"watch_now"===i.ctaType,is_gif:this.isGif,is_photo:this.isPhoto,is_video:this.isVideo,is_video_embeddable:i.embeddable||"undefined"==typeof i.embeddable,title:this.getTitle(),video_ctl_url:i.ctaUrl,video_title:i.title,video_description:i.description,whitelisted_video_user:e},n=I.default.render(s);this.$node.html(n),this.$dialog=this.$dialogContainer.find(this.attr.modalSelector),this.isVideo&&(this.attachChild(w.default,this.select("videoTrimSelector"),{maxSelectionDuration:j,maxVisibleDuration:1.2*j,defaultSelectionDuration:U}),e&&(this.attachChild(r.default,this.select("videoTitleCharCounterSelector"),{maxLength:this.attr.videoTitleMaxLength}),this.attachChild(r.default,this.select("videoDescriptionCharCounterSelector"),{maxLength:this.attr.videoDescriptionMaxLength})))},this.openMediaEditDialog=function(t,e){var i=e.fileId,s=m.default.get(i);if(s&&(this.fileId=i,this.isVideo=s.isVideo,this.isGif=s.isGif,this.isImage=s.isImage,this.composeAltText=e.composeAltText,this.advancedVideoFeatures=v.default.getDeciderValue("web_upload_video_advanced"),this.renderMediaEditDialog(s),this.open(),this.loadMedia(s),this.canComposeAltText())){var n=this.select("altTextTextareaSelector")[0],o=n.value;this.initialAltText=o,this.resizeAltTextInput(),n.selectionStart=n.selectionEnd=o.length}},this.loadMedia=function(t){this.isVideo?(this.loadVideo(t),this.trigger(this.select("videoTitleCharCounterSelector"),"uiCharacterCounterUpdate"),this.trigger(this.select("videoDescriptionCharCounterSelector"),"uiCharacterCounterUpdate")):this.loadPhoto(t.thumbnail.src);
},this.loadVideo=function(e){this.mediaObjectUrl=u.default.getObjectUrl(e.fileHandle),this.trigger(this.select("videoTrimSelector"),"uiLoadVideo",{videoSrc:this.mediaObjectUrl,initialTrimRange:e.trimRange}),t(document).trigger("uiPauseAllMedia")},this.sizeAndPosition=function(){var t=this.select("photoContainerSelector").find("img");f.default.resetMinSize(this.$dialog),f.default.resizeMedia(t,this.$dialog,!1,".modal-footer",!1),this.position()},this.loadPhoto=function(e){var i=t("<img>",{"class":"MediaEditDialog-photo",src:e,on:{load:this.sizeAndPosition.bind(this)}});this.select("photoContainerSelector").html(i)},this.expandVideoDescription=function(){var t=3,e=parseInt(this.select("videoDescriptionSelector").css("line-height"))*t;this.off(this.select("videoDescriptionSelector"),"focus",this.expandVideoDescription),this.select("videoDescriptionSelector").height(e)},this.canComposeAltText=function(){return!this.isVideo&&!this.isGif&&this.composeAltText},this.getTitle=function(){var t=void 0;return this.isVideo?t=this.advancedVideoFeatures?A:E:this.isGif?t=O:this.isImage&&(t=this.canComposeAltText()?F:R),t},this.displayVideoCtaUrl=function(){var t=""===this.select("videoCtaSelectSelector").val();this.select("videoCtaSelectSelector").toggleClass("u-inactive",t),this.select("videoCtaUrlSelector").toggleClass("u-hidden",t),t?this.select("videoCtaUrlSelector").removeAttr("data-valid"):(this.validateVideoCtaUrl(),this.select("videoCtaUrlSelector").focus()),this.trigger("uiValidateForm")},this.validateForm=function(){var t=this.isValidInput("videoCtaUrlSelector"),e=this.isValidInput("videoTitleSelector")&&this.isValidInput("videoDescriptionSelector")&&t;return e?this.select("doneTargetSelector").prop("disabled",!1):(this.select("doneTargetSelector").prop("disabled",!0),!t&&this.select("videoCtaUrlSelector").val().length&&(this.trigger(document,"uiShowMessage",{message:k}),this.select("videoCtaUrlSelector").focus())),e},this.isValidInput=function(t){return"false"!==this.select(t).attr("data-valid")},this.validateVideoCtaUrl=function(){var t=this.select("videoCtaUrlSelector").val(),e=this.isValidUrl(t);return this.select("videoCtaUrlSelector").attr("data-valid",e),this.trigger("uiValidateForm"),e},this.isValidUrl=function(t){return x.test(t.trim())},this.notifyEditDone=function(){this.trigger("uiMediaEditDialogDone",{fileId:this.fileId})},this.updateVideoInfo=function(t,e){var i=o({},e,{duration:t.trimEnd-t.trimStart});return m.default.update(t.fileId,i)},this.editDone=function(){var t=this.isVideo,e=t?{trimStart:this.trimStart,trimEnd:this.trimEnd,trimRange:this.trimRange}:{},i=t&&this.advancedVideoFeatures?{advanced:{title:this.select("videoTitleSelector").val(),description:this.select("videoDescriptionSelector").val(),ctaType:this.select("videoCtaSelectSelector").val(),ctaUrl:this.select("videoCtaUrlSelector").val(),embeddable:this.select("videoEmbeddableSelector").is(":checked")}}:{},s=this.canComposeAltText()?{altText:(this.select("altTextTextareaSelector").val()||"").trim()}:{},n=o({},e,i,s),a=m.default.update(this.fileId,n);t?u.default.getVideoInfo(a.fileHandle,this.trimStart).then(this.updateVideoInfo.bind(this,a)).then(this.notifyEditDone.bind(this)):this.notifyEditDone()},this.closeMediaEditDialog=function(e,i){this.isVideo&&(this.trigger(this.select("videoTrimSelector"),"uiUnloadVideo"),this.mediaObjectUrl&&(u.default.revokeObjectUrl(this.mediaObjectUrl),this.mediaObjectUrl=null)),this.canComposeAltText()&&this.select("altTextTextareaSelector").val(""),this.close(),this.activeEl?t(this.activeEl).closest(".tweet-form, .modal").find(".tweet-box").focus():this.restorePreviousFocus()},this.updateTrimRange=function(t,e){this.trimStart=e.trimStart,this.trimEnd=e.trimEnd,this.trimRange=e.trimRange},this.resizeAltTextInput=function(t){var e=this.select("altTextTextareaSelector"),i=e[0],s=e.innerHeight()-e.height(),n=this.select("applyButtonSelector"),o=n.outerHeight()-4;e.height(1);var a=Math.max(i.scrollHeight,o);e.height(Math.min(a-s,N)),i.style.display="none",i.offsetHeight,i.style.display=""},this.toggleApplyButtonState=function(e){var i=t(e.target).val();this.select("applyButtonSelector").prop("disabled",!(this.initialAltText!==i))},this.after("initialize",function(){this.on(document,"uiOpenMediaEditDialog",this.openMediaEditDialog),this.on("uiShortcutEsc uiDialogClosed uiMediaEditDialogDone",this.closeMediaEditDialog),this.on("uiTrimRangeChanged",this.updateTrimRange),this.on("click",{doneTargetSelector:this.editDone,closeTargetSelector:this.closeMediaEditDialog}),this.on("uiShortcutCmdEnter",this.editDone),this.on("change",{videoTitleSelector:this.validateForm,videoDescriptionSelector:this.validateForm,videoCtaSelectSelector:this.displayVideoCtaUrl,videoCtaUrlSelector:this.validateVideoCtaUrl}),this.on("input",{altTextTextareaSelector:this.toggleApplyButtonState}),this.on("uiValidateForm",this.validateForm),this.on("focusin",{videoDescriptionSelector:this.expandVideoDescription}),this.on("input",{altTextTextareaSelector:this.resizeAltTextInput})})}Object.defineProperty(e,"__esModule",{value:!0});var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},a=i(937),r=s(a),l=i(111),c=s(l),d=i(393),u=s(d),h=i(893),f=s(h),p=i(224),m=s(p),g=i(136),v=s(g),b=i(938),w=s(b),S=i(163),y=s(S),C=i(231),T=s(C),D=i(123),M=(s(D),i(940)),I=s(M),P=(0,c.default)(n,y.default,T.default,r.default),x=/^(https?:\/\/)?[a-z0-9-.]+\.[a-z]+\/?([^\s<>#%",{}\\|\\^[\]`]+)?$/,k="URL is not valid",A="Edit",E="Trim",O="GIF",R="Image",F="Image description",N=60,U=45,j=140;e.default=P}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.attributes({maxLength:null}),this.render=function(){var t=!this.maxLengthExceeded();this.$node.toggleClass("is-maxExceeded",!t),this.$input.attr("data-valid",t),this.$counter.text(this.getRemainingLength())},this.maxLengthExceeded=function(){return this.getRemainingLength()<0},this.getRemainingLength=function(){var t=this.getLength(this.$input.val());return this.attr.maxLength-t},this.getLength=function(t){return t.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x").length},this.after("initialize",function(){this.$input=this.$node.find(".CharCounter-target"),this.$counter=this.$node.find(".CharCounter-counter"),this.render(),this.on(this.$input,"input",this.render),this.on("uiCharacterCounterUpdate",this.render)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=(0,a.default)(n);e.default=r},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){var e=0,i=1,s=2,n=3,o=4;this.defaultAttrs({timeBubbleSelector:".VideoTrim-timeBubble",timelineSelector:".VideoTrim-timeline",timelineCursorSelector:".VideoTrim-timelineCursor",scrubberSelector:".VideoTrim-scrubber",unplayedScrubberSelector:".VideoTrim-unplayedScrubber",timeSelector:".VideoTrim-time",widestTimeSelector:".VideoTrim-widestTime",selectionSelector:" .VideoTrim-selection",ticksSelector:".VideoTrim-ticks",innerSelectionSelector:".VideoTrim-innerSelection",leftHandleSelector:".VideoTrim-leftHandle",midHandleSelector:".VideoTrim-midHandle",midHandleCursorSelector:".VideoTrim-midHandleCursor",rightHandleSelector:".VideoTrim-rightHandle",shroudSelector:".VideoTrim-shroud",minSelectionDuration:1,maxSelectionDuration:30,maxVisibleDuration:36,defaultSelectionDuration:20,scrollPixels:20,timeToFadeOutBubble:1e3,pixelsBeforeWarningLength:50,maxPixelsPerSecond:30,widthForHandles:42,minWidthForMidHandle:18,dragScrollRepeatInterval:30}),this.setInitialTrimRange=function(t,e){this.initialTrimRange=e.initialTrimRange},this.initAfterVideoLoads=function(){if(""===this.initialTrimRange)this.startTime=0,this.endTime=this.videoDuration;else if(this.initialTrimRange){var t=this.initialTrimRange.split("-");this.startTime=+t[0],this.endTime=+t[1]}else this.startTime=(this.videoDuration-this.attr.defaultSelectionDuration)/2,this.endTime=this.startTime+this.attr.defaultSelectionDuration;this.startTime=this.clamp(this.startTime,0,this.videoDuration),this.endTime=this.clamp(this.endTime,0,this.videoDuration),this.visibleWidth=this.$node.width()-this.attr.widthForHandles,this.defaultPixelsPerSecond=this.visibleWidth/Math.min(this.videoDuration,this.attr.maxVisibleDuration),this.timelinePixelsPerSecond=this.$timeline.width()/this.videoDuration,this.generateTicks(),this.zoomToDefault(),this.showSelectionBubble(),this.playVideo(this.startTime),this.notifyTrimRange()},this.generateTicks=function(){for(var t="",e=0;e<this.videoDuration;e+=1){var i=(100*e/this.videoDuration).toFixed(4),s=e%60?"":h.default.formatDuration(e);t+='<div style="left:'+i+'%">'+s+"</div>"}this.$ticks.html(t)},this.calculateScale=function(){this.offset=-this.$selection.position().left,this.pixelsPerSecond=this.$innerSelection.width()/this.videoDuration,this.percentPerSecond=100/this.videoDuration,this.minTimeForScrolling=(this.offset-this.attr.scrollPixels)/this.pixelsPerSecond,this.maxTimeForScrolling=(this.offset+this.attr.scrollPixels+this.visibleWidth)/this.pixelsPerSecond},this.formatTimeProgress=function(t){return h.default.formatDuration(t)+" / "+h.default.formatDuration(this.videoDuration)},this.updatePositions=function(){if(this.$mid.toggle(!!this.videoDuration),this.videoDuration){this.calculateScale(),this.$mid.css({left:this.startTime*this.percentPerSecond+"%",width:(this.endTime-this.startTime)*this.percentPerSecond+"%"});var t=Math.min(-1,((this.endTime-this.startTime)*this.pixelsPerSecond-this.attr.minWidthForMidHandle)/2);this.$midHandleCursor.css({left:t,right:t});var e=this.isProgressVisible?Math.max(100*(this.getVideoCurrentTime()-this.startTime)/(this.endTime-this.startTime),0):0;this.$unplayedScrubber.css("left",e+"%"),this.$scrubber.css({left:this.startTime*this.percentPerSecond+"%",right:100-this.endTime*this.percentPerSecond+"%"}),this.$widestTime.text(this.formatTimeProgress(this.videoDuration)),this.$time.text(this.formatTimeProgress(this.getVideoCurrentTime())),this.select("timelineSelector"),this.updateBubblePos()}},this.showSelectionBubble=function(){var t=Math.max(this.selectionDuration(),this.attr.minSelectionDuration);this.setBubble(this.formatTimeForSelection(t),"mid")},this.setEndBubbleWhileDragging=function(){this.dragMode===n?this.setBubble(h.default.formatDuration(this.endTime),"right"):this.setBubble(h.default.formatDuration(this.startTime),"left")},this.selectionDuration=function(){return this.endTime-this.startTime},this.isMaxSelected=function(){return this.selectionDuration()>=this.attr.maxSelectionDuration},this.isMinSelected=function(){return this.selectionDuration()<=this.attr.minSelectionDuration},this.formatTimeForSelection=function(t){var e=Math.floor(t/60),i=Math.floor(t%60),s="abbreviated";this.timespanFormatter.patterns.none.minute.abbreviated||(s="short");var n={minutesWithAbbreviation:this.timespanFormatter.format(60*e,{direction:"none",type:s,unit:"minute"}),secondsWithAbbreviation:this.timespanFormatter.format(i,{direction:"none",type:s,unit:"second"})};return this.isMaxSelected()?e?(0,a.default)("{{minutesWithAbbreviation}} {{secondsWithAbbreviation}} max selected",n):(0,a.default)("{{secondsWithAbbreviation}} max selected",n):this.isMinSelected()?(0,a.default)("{{secondsWithAbbreviation}} min selected",n):e?(0,a.default)("{{minutesWithAbbreviation}} {{secondsWithAbbreviation}} selected",n):(0,a.default)("{{secondsWithAbbreviation}} selected",n)},this.setBubble=function(t,e){this.bubbleMode=e,this.bubbleWidth=this.$timeBubble.attr("data-mode",e||"").text(t||"").css("opacity",0).show().outerWidth(),this.updateBubblePos(),this.$timeBubble.css("opacity",1).delay(this.attr.timeToFadeOutBubble).fadeOut(500)},this.updateBubblePos=function(){var t=null,e=void 0,i=void 0;switch(this.bubbleMode){case"left":e=0,i=0;break;case"right":e=100,i=-this.bubbleWidth;break;case"mid":e=50;var s=(this.startTime+this.endTime)*this.timelinePixelsPerSecond/2;s<this.bubbleWidth/2?(i=-15,t="left"):s>this.videoDuration*this.timelinePixelsPerSecond-this.bubbleWidth/2?(i=23-this.bubbleWidth,t="right"):i=-this.bubbleWidth/2;break;default:return}this.$timeBubble.css({left:e+"%","margin-left":i}),t?this.$timeBubble.attr("data-clip",t):this.$timeBubble.removeAttr("data-clip")},this.setSelectionView=function(t,e){e?this.$selection.width(e+this.attr.widthForHandles):e=this.$innerSelection.width(),this.$selection.css("left",-this.clamp(t,0,e-this.visibleWidth)),this.updatePositions()},this.zoomToDefault=function(){var t=this.defaultPixelsPerSecond*this.videoDuration,e=(this.defaultPixelsPerSecond*(this.startTime+this.endTime)-this.visibleWidth)/2;e=this.clamp(e,0,t-this.visibleWidth),this.setSelectionView(e,t)},this.playLastFewSeconds=function(t){this.playVideo(t?Math.max(this.endTime-3,this.startTime):this.startTime),this.updatePositions()},this.beginDrag=function(t,e){if(this.$shroud.toggleClass("is-sideways",t===i||t===n),this.dragMode=t,this.dragStartX=e.clientX,this.dragDirty=!1,this.dragStartOffset=this.offset,this.dragHandlesInView=[t===i||t===o,t===n||t===o],t===o){var s=(e.clientX-this.$timeline.offset().left)/this.timelinePixelsPerSecond;if(s<this.startTime||s>this.endTime){var a=this.endTime-this.startTime;this.startTime=this.clamp(s,0,this.videoDuration-a),this.endTime=this.startTime+a}this.$shroud.show(),this.zoomToDefault()}this.$mid.addClass("is-active"),this.isVideoPlaying()||this.setDragPause(),this.updatePositions(),this.setEndBubbleWhileDragging()},this.drag=function(t){if(this.dragMode!==e){var i=window.getSelection();i&&i.removeAllRanges(),clearTimeout(this.dragTimeoutId);var n=!1;this.$shroud.show(),this.calculateScale(),this.dragMode===s&&(this.dragHandlesInView=this.dragHandlesInView.map(function(t,e){return t||0===this.scrollShiftForHandle(e)},this));var a=t.clientX-this.dragStartX,r=void 0;this.dragMode===o?r=this.timelinePixelsPerSecond:(r=this.pixelsPerSecond,a+=this.offset-this.dragStartOffset);var l=this.applyDrag(a/r)*r;l?(this.dragDirty=!0,this.updatePositions(),this.dragStartX+=l,this.setDragPause(),this.setEndBubbleWhileDragging()):Math.abs(a)>this.attr.pixelsBeforeWarningLength&&(this.isMaxSelected()||this.isMinSelected())&&this.showSelectionBubble(),this.dragMode===o?this.zoomToDefault():this.dragHandlesInView.forEach(function(t,e){if(t){var i=this.scrollShiftForHandle(e);i&&(this.setSelectionView(this.offset+i),n=!0)}},this),n&&(this.dragTimeoutId=setTimeout(this.drag.bind(this,t),this.attr.dragScrollRepeatInterval))}},this.endDrag=function(){var t=this;if(this.dragMode){this.$shroud.hide(),this.updatePositions();var i=this.dragMode===n;this.dragDirty&&this.showSelectionBubble(),this.isVideoPlaying()?this.doubleClickTimeoutId||(this.doubleClickTimeoutId=setTimeout(function(){t.doubleClickTimeoutId=null,t.playLastFewSeconds(i)},300)):this.playLastFewSeconds(i),this.$mid.removeClass("is-active"),this.dragMode=e,clearTimeout(this.dragTimeoutId),this.notifyTrimRange()}},this.setDragPause=function(t){this.pauseVideo(this.dragMode===n?this.endTime:this.startTime)},this.calculateDrag=function(t,e,s){return t=this.clamp(t+e,0,this.videoDuration),this.dragMode===i?t=this.clamp(t,this.endTime-this.attr.maxSelectionDuration,this.endTime-this.attr.minSelectionDuration):this.dragMode===n&&(t=this.clamp(t,this.startTime+this.attr.minSelectionDuration,this.startTime+this.attr.maxSelectionDuration)),this.dragMode!==o&&this.dragHandlesInView[s]&&(t=this.clamp(t,this.minTimeForScrolling,this.maxTimeForScrolling)),t},this.applyDragLeft=function(t){var e=this.startTime;return this.startTime=this.calculateDrag(this.startTime,t,0),this.startTime-e},this.applyDragRight=function(t){var e=this.endTime;return this.endTime=this.calculateDrag(this.endTime,t,1),this.endTime-e},this.applyDrag=function(t){return this.dragMode===i?this.applyDragLeft(t):this.dragMode===n?this.applyDragRight(t):t<0?this.applyDragRight(this.applyDragLeft(t)):this.applyDragLeft(this.applyDragRight(t))},this.scrollShiftForHandle=function(t){var e=(t?this.endTime:this.startTime)*this.pixelsPerSecond;return this.clamp(this.offset,e-this.visibleWidth,e)-this.offset},this.hoverSideHandle=function(i){this.dragMode===e&&t(i.target).toggleClass("is-hover","mouseenter"===i.type)},this.hoverMidHandle=function(t){this.dragMode===e&&this.$left.add(this.$right).toggleClass("is-hover","mouseenter"===t.type)},this.hoverSelectionBubble=function(){this.dragMode===e&&this.showSelectionBubble()},this.notifyTrimRange=function(){var t=this.endTime-this.startTime>this.videoDuration-.01;this.trigger("uiTrimRangeChanged",{trimStart:this.startTime,trimEnd:this.endTime,trimRange:t?"":this.startTime.toFixed(3)+"-"+this.endTime.toFixed(3)})},this.clamp=function(t,e,i){return Math.max(e,Math.min(i,t))},this.after("initialize",function(){this.timespanFormatter=new p.default.TimespanFormatter,this.dragMode=e,this.$timeBubble=this.select("timeBubbleSelector"),this.$timeline=this.select("timelineSelector"),this.$scrubber=this.select("scrubberSelector"),this.$unplayedScrubber=this.select("unplayedScrubberSelector"),this.$time=this.select("timeSelector"),this.$widestTime=this.select("widestTimeSelector"),this.$selection=this.select("selectionSelector"),this.$ticks=this.select("ticksSelector"),this.$innerSelection=this.select("innerSelectionSelector"),this.$left=this.select("leftHandleSelector"),this.$mid=this.select("midHandleSelector"),this.$midHandleCursor=this.select("midHandleCursorSelector"),this.$right=this.select("rightHandleSelector"),this.$shroud=this.select("shroudSelector"),this.on("uiLoadVideo",this.setInitialTrimRange),this.on("uiVideoLoaded uiVideoUnloaded",this.initAfterVideoLoads),this.on("uiVideoStateChanged",this.updatePositions),this.on("mousedown",{leftHandleSelector:this.beginDrag.bind(this,i),rightHandleSelector:this.beginDrag.bind(this,n),midHandleCursorSelector:this.beginDrag.bind(this,s),timelineSelector:this.beginDrag.bind(this,o)}),this.on(window,"mousemove",this.drag),this.on(window,"mouseup",this.endDrag),this.on(this.$midHandleCursor,"mouseenter mouseleave",this.hoverMidHandle),this.on(this.$right.add(this.$left),"mouseenter mouseleave",this.hoverSideHandle),this.on(this.select("timelineCursorSelector").add(this.$mid),"mouseenter",this.hoverSelectionBubble)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(123),a=s(o),r=i(111),l=s(r),c=i(939),d=s(c),u=i(400),h=s(u),f=i(483),p=s(f);e.default=(0,l.default)(n,d.default)}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({videoSelector:".VideoTrim-video",playStateSelector:".VideoTrim-playState",audioStateSelector:".VideoTrim-audioState",isPlayingClass:"is-playing",isMutedClass:"is-muted",playVideoPollFreq:30}),this.loadVideo=function(t,e){this.videoDuration=0,this.video.pause(),this.video.src=e.videoSrc,this.video.load()},this.unloadVideo=function(){this.loadVideo(null,{videoSrc:""})},this.playVideo=function(t){var e=this;void 0!==t&&this.setVideoCurrentTime(t),this.isVideoPlaying()||(clearInterval(this.playbackIntervalId),this.playbackIntervalId=setInterval(function(){e.video.paused?e.pauseVideo():e.isVideoAtEnd()&&e.pauseVideo(e.endTime),e.updateVideoState()},1e3/this.attr.playVideoPollFreq),this.video.play(),this.isProgressVisible=!0)},this.pauseVideo=function(t){this.video.pause(),clearInterval(this.playbackIntervalId),void 0!==t&&(this.isProgressVisible=!1,this.setVideoCurrentTime(t)),this.updateVideoState()},this.isVideoPlaying=function(){return!this.video.paused&&this.video.currentTime>0},this.setVideoMuted=function(t){this.video.muted=t},this.isVideoMuted=function(){return this.video.muted},this.isVideoAtEnd=function(){var t=1/this.attr.playVideoPollFreq;return this.getVideoCurrentTime()>this.endTime-t||this.video.ended},this.getVideoCurrentTime=function(){return this.video.currentTime},this.setVideoCurrentTime=function(t){this.video.currentTime=t},this.updateVideoState=function(){this.$node.toggleClass(this.attr.isPlayingClass,this.isVideoPlaying()).toggleClass(this.attr.isMutedClass,this.isVideoMuted()),this.trigger("uiVideoStateChanged")},this.readVideoMetadata=function(){this.videoDuration=this.video.duration,this.startTime=0,this.endTime=this.videoDuration,this.trigger("uiVideoLoaded"),this.updateVideoState()},this.videoError=function(t){this.trigger("uiVideoError",{message:"Video is not playable."})},this.videoUnloaded=function(t){this.videoDuration=0,this.startTime=0,this.endTime=0,this.trigger("uiVideoUnloaded")},this.toggleVideoPlayback=function(){this.videoDuration&&(this.isVideoPlaying()?this.pauseVideo():this.isVideoAtEnd()?this.playVideo(this.startTime):this.playVideo())},this.toggleAudioState=function(){this.setVideoMuted(!this.isVideoMuted()),this.updateVideoState()},this.after("initialize",function(){this.video=this.select("videoSelector")[0],this.on("uiLoadVideo",this.loadVideo),this.on("uiUnloadVideo",this.unloadVideo),this.on(this.video,"loadedmetadata",this.readVideoMetadata),this.on(this.video,"error",this.videoError),this.on(this.video,"emptied",this.videoUnloaded),this.on("click",{videoSelector:this.toggleVideoPlayback,playStateSelector:this.toggleVideoPlayback,audioStateSelector:this.toggleAudioState})}),this.before("teardown",function(){this.unloadVideo()})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(123);s(o);e.default=n},function(t,e,i){(function(e){function s(t,e,i){e=e||{};for(var s in a)e[s]||(e[s]=a[s]);return r.render(t,e,i)}var n=i(220).default,o={"dialogs/close_button":i(221),"media/video_trim":i(941)},a=n(o),r=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<div class="modal draggable MediaEditDialog'),s.s(s.f("is_video",t,e,1),t,e,1,0,0,"")||s.b(" MediaEditDialog--photo"),s.b('">\n  <div class="modal-content">\n'),s.b(s.rp("<dialogs/close_button0",t,e,"    ")),s.b('    <div class="modal-header">\n      <h3 class="modal-title">'),s.b(s.v(s.f("title",t,e,0))),s.b("</h3>\n    </div>\n"),s.s(s.f("is_video",t,e,1),t,e,0,259,2741,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b('      <div class="MediaEditDialog-videoSection">\n        <div class="modal-body">\n'),i.b(i.rp("<media/video_trim1",t,e,"          ")),i.s(i.f("whitelisted_video_user",t,e,1),t,e,0,411,2503,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('            <form class="MediaEditForm form-horizontal">\n              <div class="control-group">\n                <div class="MediaEditForm-titleCharCounter CharCounter">\n                  <input class="MediaEditForm-title CharCounter-target js-initial-focus" type="text" name="video_metadata[title]" value="'),i.b(i.v(i.f("video_title",t,e,0))),i.b('" placeholder="Type the title of your video here" />\n                  <div class="CharCounter-counter"></div>\n                </div>\n              </div>\n              <div class="control-group">\n                <div class="MediaEditForm-descriptionCharCounter CharCounter">\n                  <textarea class="MediaEditForm-description CharCounter-target" name="video_metadata[description]" placeholder="Type a brief description here.">'),i.b(i.v(i.f("video_description",t,e,0))),i.b('</textarea>\n                  <div class="CharCounter-counter"></div>\n                </div>\n              </div>\n              <div class="control-group MediaEditForm-ctaContainer">\n                <select class="MediaEditForm-ctaSelect'),i.s(i.f("has_cta",t,e,1),t,e,1,0,0,"")||i.b(" u-inactive"),i.b(' t1-select" name="video_metadata[cta]">\n                  <option value="" '),i.s(i.f("has_cta",t,e,1),t,e,1,0,0,"")||i.b(" selected"),i.b('>Choose a call to action</option>\n                  <option value="visit_site"'),i.s(i.f("is_cta_visit_site",t,e,1),t,e,0,1674,1683,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b(" selected")}),t.pop()),i.b('>Visit site:</option>\n                  <option value="watch_now"'),i.s(i.f("is_cta_watch_now",t,e,1),t,e,0,1791,1800,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b(" selected")}),t.pop()),i.b('>Watch now:</option>\n                </select>\n                <input class="MediaEditForm-ctaUrl'),i.s(i.f("has_cta",t,e,1),t,e,1,0,0,"")||i.b(" u-hidden"),i.b('" type="text" name="video_metadata[cta_url]" value="'),i.b(i.v(i.f("video_ctl_url",t,e,0))),i.b('" placeholder="Website" />\n              </div>\n              <div class="control-group">\n                <div class="checkbox">\n                  <label>\n                    <input class="MediaEditForm-embeddable" type="checkbox" name="video_metadata[embeddable]" value="true" '),i.s(i.f("is_video_embeddable",t,e,1),t,e,0,2322,2329,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b("checked")}),t.pop()),i.b(">\n                    Allow video to be embedded\n                  </label>\n                </div>\n              </div>\n            </form>\n")}),t.pop()),i.b('        </div>\n        <div class="modal-footer text-right">\n          <button type="button" class="EdgeButton EdgeButton--primary js-done">\n            Done\n          </button>\n        </div>\n      </div>\n')}),t.pop()),s.s(s.f("is_video",t,e,1),t,e,1,0,0,"")||(s.b('      <div class="MediaEditDialog-photoSection">\n        <div class="modal-body"><div class="MediaEditDialog-photoContainer"></div></div>\n'),s.s(s.f("can_compose_alt_text",t,e,1),t,e,0,2944,3380,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b('          <div class="MediaEditDialog-footer modal-footer">\n            <textarea aria-label="Image description" class="MediaEditDialog-altTextTextarea js-initial-focus" placeholder="Describe this photo for the visually impaired" maxlength="420">'),i.b(i.v(i.f("alt_text",t,e,0))),i.b('</textarea>\n            <button type="button" class="EdgeButton EdgeButton--primary js-done MediaEditDialog-applyAltTextButton" disabled>Apply</button>\n          </div>\n')}),t.pop()),s.b("      </div>\n")),s.b("  </div>\n</div>\n"),s.fl()},partials:{"<dialogs/close_button0":{name:"dialogs/close_button",partials:{},subs:{}},"<media/video_trim1":{name:"media/video_trim",partials:{},subs:{}}},subs:{}});t.exports={template:r,partials:a,render:s}}).call(e,i(1))},function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<div class="VideoTrim">\n  <div class="VideoTrim-shroud"></div>\n  <div class="VideoTrim-videoContainer">\n    <video class="VideoTrim-video" preload="auto"></video>\n    <div class="VideoTrim-controls">\n      <span class="VideoTrim-playState">\n        <span class="Icon Icon--play"></span>\n        <span class="Icon Icon--pause"></span>\n      </span>\n      <div class="VideoTrim-timeline">\n        <div class="VideoTrim-timelineCursor"></div>\n        <div class="VideoTrim-scrubber">\n          <div class="VideoTrim-timeBubble"></div>\n          <div class="VideoTrim-unplayedScrubber"></div>\n        </div>\n      </div>\n      <span class="VideoTrim-timeContainer">\n        <span class="VideoTrim-time"></span>\n        <span class="VideoTrim-widestTime" aria-hidden="true"></span>\n      </span>\n      <span class="VideoTrim-audioState">\n        <span class="Icon Icon--soundOn"></span>\n        <span class="Icon Icon--soundOff"></span>\n      </span>\n    </div>\n  </div>\n  <div class="VideoTrim-selection">\n    <div class="VideoTrim-ticks"></div>\n    <div class="VideoTrim-innerSelection">\n      <div class="VideoTrim-midHandle">\n        <div class="VideoTrim-hideTicks"></div>\n        <div class="VideoTrim-leftHandle"></div>\n        <div class="VideoTrim-midHandleCursor"></div>\n        <div class="VideoTrim-midHandleInner">\n          <div class="VideoTrim-midHandleGrip"></div>\n        </div>\n        <div class="VideoTrim-rightHandle"></div>\n      </div>\n    </div>\n  </div>\n</div>\n\n\n'),s.fl()},partials:{},subs:{}})}).call(e,i(1))},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.viewportHelpers=l.default,this.defaultAttrs({scrollThrottleMs:200,mediaSelectors:".PlayableMedia-player, .js-macaw-cards-iframe-container.card-type-promo_video_convo, .js-macaw-cards-iframe-container.card-type-audio, .js-macaw-cards-iframe-container.card-type-live_video, .js-macaw-cards-iframe-container.card-type-periscope_broadcast, .js-macaw-cards-iframe-container.card-type-player",tweetIdDataAttr:"data-tweet-id",tweetsSelector:".tweet",permalinkOverlaySelector:".PermalinkOverlay",openDropdownSelector:".dropdown.open .dropdown-menu",tweetNonceId:"data-tweet-nonce"}),this.notifyViewportPositionChange=function(){var t=this,e=l.default.getVisibleViewport(),i=this.getDropdownBoundingRect();this.watchedMedia.filter(function(t){return 0!==t.mediaElement.children.length}).filter(function(e){return t.permalinkOpen===e.inPermalink}).map(function(s){var n=s.mediaElement.getBoundingClientRect(),o=!1;return i&&(o=0!==t.generatePercentVisible(n,i)),{tweetId:s.tweetId,parentViewportSize:e,positionInParent:(0,h.default)(n),videoHidden:t.pageHidden||t.modalWithinPermalinkOpen||t.modalOpen&&!s.inPermalink||o}}).forEach(function(e){return t.notifyViewportPositionChangeForElement(e.tweetId,e.parentViewportSize,e.positionInParent,e.videoHidden)})},this.notifyViewportPositionChangeForElement=function(t,e,i,s){var n={parentViewportSize:e,positionInParent:(0,h.default)(i),videoHidden:s,percentVisible:s?0:this.generatePercentVisible(e,i)};this.trigger("uiPlayableMediaPositionChange",{tweetId:t,positionData:n})},this.generatePercentVisible=function(t,e){var i=e.bottom-e.top,s=e.right-e.left,n=s*i,o={top:Math.max(e.top,t.top),left:Math.max(e.left,t.left),bottom:Math.min(e.bottom,t.bottom),right:Math.min(e.right,t.right)},a=Math.max(0,o.bottom-o.top),r=Math.max(0,o.right-o.left),l=a*r;return 0===n?0:l/n},this.isMediaElementWithinPermalink=function(t){var e=t.closest(this.attr.permalinkOverlaySelector);return e.length>0},this.updateTweetList=function(){var e=this;this.watchedMedia=this.select("mediaSelectors").map(function(i,s){var n=t(s),o=e.modalOpen&&e.isMediaElementWithinPermalink(n),a=n.closest(e.attr.tweetsSelector);return{mediaElement:s,tweetId:a.attr(e.attr.tweetNonceId)||a.attr(e.attr.tweetIdDataAttr),inPermalink:o}}).get(),this.updatePermalinkVisibility(),this.throttledNotifyViewportPositionChange()},this.updatePermalinkVisibility=function(){this.permalinkOpen=this.$permalink.is(":visible")},this.updatePageVisibility=function(){var t=!document.hasFocus()||document.hidden;t!==this.pageHidden&&(this.pageHidden=t,this.throttledNotifyViewportPositionChange())},this.setModalOpen=function(){this.permalinkOpen?this.modalWithinPermalinkOpen=!0:this.modalOpen=!0,this.throttledNotifyViewportPositionChange()},this.setModalClosed=function(){this.modalWithinPermalinkOpen?this.modalWithinPermalinkOpen=!1:this.modalOpen=!1,this.updateTweetList()},this.getDropdownBoundingRect=function(){return this.dropdownOpen?this.dropdownOpen.getBoundingClientRect():null},this.setDropdownOpen=function(){this.dropdownOpen=this.select("openDropdownSelector")[0],this.throttledNotifyViewportPositionChange()},this.setDropdownClosed=function(){this.dropdownOpen=null,this.throttledNotifyViewportPositionChange()},this.after("initialize",function(){this.watchedMedia=[],this.pageHidden=!1,this.modalOpen=!1,this.permalinkOpen=!1,this.modalWithinPermalinkOpen=!1,this.dropdownOpen=null,this.throttledNotifyViewportPositionChange=d.default.throttle(this.notifyViewportPositionChange.bind(this),this.attr.scrollThrottleMs),this.on(document,"scroll uiDynamicCardLoaded uiDynamicCardUnloaded uiPlayableMediaReady",this.throttledNotifyViewportPositionChange),this.on(window,"resize",this.throttledNotifyViewportPositionChange),this.on(document,"uiPageHidden uiPageVisible",this.updatePageVisibility),this.on(window,"focus focusin blur focusout",this.updatePageVisibility),this.$permalink=this.select("permalinkOverlaySelector"),this.$permalink.on("scroll",this.throttledNotifyViewportPositionChange),this.on(document,"uiDialogOpened",this.setModalOpen),this.on(document,"uiDialogClosed",this.setModalClosed),
this.on(document,"uiDropdownOpened",this.setDropdownOpen),this.on(document,"uiDropdownClosed",this.setDropdownClosed),this.on(document,"uiWatchPlayableMedia",this.updateTweetList),this.updateTweetList()})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(177),l=s(r),c=i(126),d=s(c),u=i(943),h=s(u);e.default=(0,a.default)(n)}).call(e,i(10))},function(t,e){"use strict";function i(t){return{top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width,height:t.height}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({top:80,closeOnOtherDialogOpened:!0,topMargin:60,bottomMargin:60,containerSelector:".MomentCapsuleSummaryListDialog-listContainer",itemsSelector:".MomentCapsuleSummaryListDialog-items",capsuleSelector:".MomentCapsuleSummary",createMomentSelector:".MomentCapsuleSummaryListDialog-button--newMoment",spinnerSelector:".spinner"}),this.around("open",function(t,e,i){this.tweetId=i.tweet_id,0===this.$items.children().length&&this.trigger("uiMomentsGetDialogUserMoments"),t()}),this.renderDialogContents=function(t,e){this.select("spinnerSelector").hide(),this.$items.append(e.html),this.$items.trigger("uiMomentsHasInjectedNewItems"),this.trigger("uiTriggerEllipsis"),this.updatePaginationValues(e),this.resizeDialog()},this.getOlderMoments=function(){this.hasMoreItems&&(this.select("spinnerSelector").show(),this.trigger("uiMomentsGetDialogUserMoments",{before:this.oldestMomentId}))},this.updatePaginationValues=function(t){this.oldestMomentId=t.oldest_moment_id,this.hasMoreItems=t.has_more_items},this.windowHeight=function(){return t(window).height()},this.resizeDialog=function(){var t=this.$dialog.height()+this.attr.topMargin+this.attr.bottomMargin-this.windowHeight();this.$container.css("max-height",this.$container.height()-t)},this.handleCapsuleClick=function(e,i){e.preventDefault(),e.stopPropagation();var s=t(e.target).closest(this.attr.capsuleSelector).attr("data-moment-id");this.trigger("uiMomentMakerAddTweet",{moment_id:s,tweet_id:this.tweetId,scribeContext:{component:"add_to_moment_dialog"}}),this.close()},this.handleCreateMoment=function(t,e){this.trigger("uiMomentMakerCreateMoment",{tweet_id:this.tweetId,scribeContext:{component:"add_to_moment_dialog"}}),this.close()},this.after("initialize",function(){this.tweetId=void 0,this.$container=this.select("containerSelector"),this.$items=this.select("itemsSelector"),this.attachChild(l.default,this.attr.containerSelector),this.attachChild(d.default,this.select("containerSelector"),{contentSelector:this.attr.itemsSelector}),this.on(document,"uiOpenAddToMomentDialog",this.open),this.on(document,"dataMomentsGetDialogUserMomentsSuccess",this.renderDialogContents),this.on("click",{capsuleSelector:this.handleCapsuleClick,createMomentSelector:this.handleCreateMoment}),this.on("uiNearTheBottom",this.getOlderMoments)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(945),l=s(r),c=i(456),d=s(c),u=i(163),h=s(u),f=i(231),p=s(f);e.default=(0,a.default)(h.default,p.default,n)}).call(e,i(10))},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({mediaItemSelector:".MomentMediaItem",mediaEntitySelector:".MomentMediaItem-entity",dataShowableSelector:'[data-showable="true"]',dataShowableAttr:"data-showable",dataCropAspectRatio:"data-crop-aspect-ratio",cropSquare:"square",cropPortrait3x4:"portrait-three-by-four"}),this.loadAllMedia=function(){var t=this.select("mediaItemSelector").not(this.attr.dataShowableSelector);t.each(this.loadMedia.bind(this))},this.loadMedia=function(e,i){var s=t(i),n=s.find(this.attr.mediaEntitySelector);n.length&&s.length&&n.css(this.getCssForLoading(s,n)),s.attr(this.attr.dataShowableAttr,!0)},this.getCssForLoading=function(t,e){var i=this.getMediaDimensions(e),s=this.getTargetDimensions(t),n=t.attr(this.attr.dataCropAspectRatio),o=n===this.attr.cropSquare,a=n===this.attr.cropPortrait3x4;if(o||a){var r=this.getCropData(e,n)||l.default.getDefaultCropRect(i,s);return l.default.calculateCrop(i,s,r)}return this.calculateScalingCss(s,i)},this.getCropData=function(t,e){var i={x:parseInt(t.data(e+"-crop-x"),10),y:parseInt(t.data(e+"-crop-y"),10),width:parseInt(t.data(e+"-crop-width"),10),height:parseInt(t.data(e+"-crop-height"),10)};if(this.validateCropData(i))return i},this.validateCropData=function(t){return Object.keys(t).every(function(e){return!isNaN(t[e])})},this.getMediaDimensions=function(t){var e="img"===t.get(0).nodeName.toLowerCase();return e?this.getImageDimensions(t):this.getIframeDimensions(t)},this.getImageDimensions=function(t){var e=t.get(0);return{width:t.data("width")||e.naturalWidth,height:t.data("height")||e.naturalHeight}},this.getIframeDimensions=function(t){return{width:t.data("width"),height:t.data("height")}},this.getTargetDimensions=function(t){return{width:t.width(),height:t.height()}},this.calculateScalingCss=function(t,e){var i=t.width/e.width*e.height;return{width:"100%",height:i+"px"}},this.after("initialize",function(){this.loadAllMedia(),this.on("uiMomentsHasInjectedNewItems uiActivityPopupRendered uiMomentAnalyticsRendered",this.loadAllMedia)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(946),l=s(r);e.default=(0,a.default)(n)}).call(e,i(10))},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={cropRatioThreshold:.05,calculateCrop:function(t,e,i){var s=e.width/e.height,n=i.width/i.height,o=(s-n)/s;Math.abs(o)>this.cropRatioThreshold&&(i=this.getDefaultCropRect(t,s),n=i.width/i.height);var a=t.width/i.width*100,r=t.height/i.height*100,l=i.x/i.width*100,c=i.y/i.width*100;return{width:a+"%",height:r+"%",marginLeft:-1*l+"%",marginTop:-1*c+"%"}},getDefaultCropRect:function(t,e){var i=e.width/e.height,s=i<1,n=i>1,o=void 0;if(s){var a=t.height*i;o={width:a,height:t.height}}else if(n){var r=t.width/i;o={width:t.width,height:r}}else{var l=Math.min(t.width,t.height);o={width:l,height:l}}var c=1;return o.width>t.width?c=t.width/o.width:o.height>t.height&&(c=t.height/o.height),o.width=o.width*c,o.height=o.height*c,o.x=.5*(t.width-o.width),o.y=.5*(t.height-o.height),["width","height","x","y"].forEach(function(t){return o[t]=Math.round(o[t])}),o}};e.default=i},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({tweetItemSelector:".tweet",deleteSelector:".js-actionDelete",shareViaDMSelector:".js-actionShareViaDM",copyLinkToTweetSelector:".js-actionCopyLinkToTweet",embedTweetSelector:".js-actionEmbedTweet",embedVideoSelector:".js-actionEmbedVideo",openAdsInfoLinkSelector:".js-actionOpenAdsInfoPage",openWhyThisAdModalSelector:".js-actionWhyThisAd",blockOrReportTweetSelector:".js-actionBlockOrReport",blockTweetSelector:".js-actionBlock",reportTweetSelector:".js-actionReport",unblockTweetSelector:".js-actionUnblock",userTogglePinTweetSelector:".js-actionPinTweet",curateTweetSelector:".js-actionCurateTweet",curateToOtherSelector:".js-actionCurateTweetOther",curateToNewTimelineSelector:".js-actionCurateTweetNewTimeline",removeMediaTagSelector:".js-actionRemoveTag",tweetContainerSelector:".js-stream-item",mediaTagContainerSelector:".media-tags-container",pinnedTweetClass:"user-pinned",hasTimelinesClass:"has-timelines"}),this.renderCustomTimelinesList=function(t,e){var i=this.select("curateToOtherSelector");this.select("curateTweetSelector").remove(),i.before(e.html),this.select("curateTweetSelector").length>0&&i.addClass(this.attr.hasTimelinesClass)},this.curateTweet=function(e,i,s){var n=t(i.el),o=n.attr("data-timeline-id"),a=n.data("is-member"),r=s.tweetData;r.timelineId=o,a?this.trigger("uiCurateRemoveTweet",r):this.trigger("uiCurateAddTweet",r),this.trigger("uiCloseDropdowns")},this.getCustomTimelines=function(t,e,i){var s=i.$tweet.attr("data-tweet-id");this.trigger("uiNeedsCustomTimelines",{tweetId:s})},this.confirmRemoveMediaTag=function(t){this.trigger(t.target,"uiOpenConfirmDialog",{titleText:"Remove photo tag from Tweet?",bodyText:"Are you sure you want to remove your photo tag from this Tweet?",cancelText:"Cancel",submitText:"OK",action:"MediaTagRemove"})},this.removeMediaTag=function(t,e,i){this.trigger(document,"uiDidRemoveMediaTag",i.tweetData)},this.handleRemoveMediaTagSuccess=function(t,e){var i=(0,c.default)(this.$node,this.attr.tweetItemSelector,e.id_str);i.find(this.attr.mediaTagContainerSelector).html(e.item_html),this.trigger("uiShowMessage",{message:"Photo tag removed"})},this.handleRemoveMediaTagFailure=function(t){this.trigger("uiShowMessage",{message:"Cannot delete the tag. Please try again later."})},this.showConfirmPinDialog=function(t){t.stopImmediatePropagation(),this.trigger(t.target,"uiOpenConfirmDialog",{titleText:"Pin this Tweet to the top of your profile",bodyText:"This will replace any previously pinned Tweet. Are you sure?",cancelText:"Cancel",submitText:"Pin",action:"UserPinTweetToggle"})},this.showConfirmUnPinDialog=function(t){t.stopImmediatePropagation(),this.trigger(t.target,"uiOpenConfirmDialog",{titleText:"Unpin from your profile",bodyText:"Are you sure?",cancelText:"Cancel",submitText:"Unpin",action:"UserPinTweetToggle"})},this.showUserPinToggledMessage=function(t,e){this.trigger("uiShowStickyMessage",e)},this.unpinOtherTweets=function(t,e){this.select("tweetItemSelector").removeClass(this.attr.pinnedTweetClass),this.handleTransition("addClass",this.attr.pinnedTweetClass).call(this,t,e)},this.handleTransition=function(t,e){return function(i,s){var n=s.id||s.sourceEventData.id,o=(0,c.default)(this.$node,this.attr.tweetItemSelector,n);o[t](e)}},this.confirmPinToggle=function(t,e,i){var s=i.$tweet.hasClass(this.attr.pinnedTweetClass)?"uiNeedUserUnpinTweetConfirm":"uiNeedUserPinTweetConfirm";this.trigger(i.$tweet,s)},this.togglePinnedTweet=function(t,e,i){return i.$tweet.hasClass(this.attr.pinnedTweetClass)?"uiDidUserUnpinTweet":"uiDidUserPinTweet"},this.unblockFromTweetAction=function(t,e){this.trigger("uiCloseDropdowns"),this.trigger("uiUnblockAction",e)},this.openAdsInfoLink=function(t,e){var i="https://business.twitter.com/help/how-twitter-ads-work";window.open(i,"_blank"),this.trigger("uiCloseDropdowns")},this.after("initialize",function(){var t=this.mkTweetDataCollectorForAction(this.interactionDataWithCard);this.on("click",{embedTweetSelector:this.composeHandler(this.getClosestTweet,t,this.triggerTweetAction("uiNeedsEmbedTweetDialog")),embedVideoSelector:this.composeHandler(this.getClosestTweet,t,this.triggerTweetAction("uiNeedsEmbedVideoDialog")),copyLinkToTweetSelector:this.composeHandler(this.getClosestTweet,t,this.triggerTweetAction("uiNeedsCopyLinkToTweetDialog")),openWhyThisAdModalSelector:this.composeHandler(this.getClosestTweet,t,this.triggerTweetAction("uiNeedsWhyThisAdDialog")),openAdsInfoLinkSelector:this.openAdsInfoLink}),this.attr.loggedIn&&(this.on("click",{deleteSelector:this.composeHandler(this.getClosestTweet,t,this.triggerTweetAction("uiOpenDeleteDialog")),userTogglePinTweetSelector:this.composeHandler(this.getClosestTweet,this.confirmPinToggle),shareViaDMSelector:this.composeHandler(this.getClosestTweet,t,this.triggerTweetAction("uiComposeNewDMWithTweet")),curateTweetSelector:this.composeHandler(this.getClosestTweet,t,this.curateTweet),curateToOtherSelector:this.composeHandler(this.getClosestTweet,t,this.triggerTweetAction("uiOpenCurateDialog")),curateToNewTimelineSelector:this.composeHandler(this.getClosestTweet,t,this.triggerTweetAction("uiOpenCreateCustomTimelineDialog")),removeMediaTagSelector:this.confirmRemoveMediaTag,blockOrReportTweetSelector:this.composeHandler(this.getClosestTweet,t,this.triggerTweetAction("uiNeedsBlockOrReportDialog")),blockTweetSelector:this.composeHandler(this.getClosestTweet,t,this.triggerTweetAction("uiNeedsBlockDialog")),unblockTweetSelector:this.composeHandler(this.getClosestTweet,t,this.triggerTweetAction("uiDidUnblockFromTweet")),reportTweetSelector:this.composeHandler(this.getClosestTweet,t,this.triggerTweetAction("uiNeedsReportDialog"))}),this.on("uiDropdownOpened",this.composeHandler(this.getClosestTweet,this.getCustomTimelines)),this.on("uiUserPinTweetToggleConfirm",this.composeHandler(this.getClosestTweet,t,this.triggerTweetAction(this.togglePinnedTweet.bind(this)))),this.on("uiMediaTagRemoveConfirm",this.composeHandler(this.getClosestTweet,t,this.removeMediaTag)),this.on(document,"uiHasInjectedNewTimeline uiHasInjectedOldTimelineItems uiHasInjectedRangeTimelineItems",this.applyARIAAttrs),this.on(document,"dataGotCustomTimelines",this.renderCustomTimelinesList),this.on(document,"uiNeedUserPinTweetConfirm",this.showConfirmPinDialog),this.on(document,"uiNeedUserUnpinTweetConfirm",this.showConfirmUnPinDialog),this.on(document,"uiDidUnblockFromTweet",this.unblockFromTweetAction),this.on(document,"dataDidUserPinTweet dataDidUserUnpinTweet",this.showUserPinToggledMessage),this.on(document,"dataDidUserPinTweet",this.unpinOtherTweets),this.on(document,"uiDidUserPinTweet dataFailedToUserUnpinTweet",this.handleTransition("addClass",this.attr.pinnedTweetClass)),this.on(document,"uiDidUserUnpinTweet dataFailedToUserPinTweet",this.handleTransition("removeClass",this.attr.pinnedTweetClass)),this.on(document,"dataMediaTagRemoveSuccess",this.handleRemoveMediaTagSuccess),this.on(document,"dataMediaTagRemoveFailure",this.handleRemoveMediaTagFailure))})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(123),a=(s(o),i(111)),r=s(a),l=i(948),c=s(l),d=i(888),u=s(d),h=i(138),f=s(h),p=i(949),m=s(p),g=i(890),v=s(g),b=i(950),w=s(b),S=(0,r.default)(n,u.default,v.default,f.default,m.default,w.default);e.default=S}).call(e,i(10))},function(t,e){"use strict";function i(t,e,i){var s=e.split(",").map(function(t){return t+"[data-tweet-id="+i+"]"}).join();return t.find(s)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i},,function(t,e,i){(function(t){"use strict";function i(){this.defaultAttrs({momentItemSelector:".MomentCurationMenuItem",addTweetFromMomentSelector:".MomentCurationMenuItem:not(.is-member)",removeTweetFromMomentSelector:".MomentCurationMenuItem.is-member",addTweetToOtherMomentSelector:".js-actionMomentMakerAddTweetToOtherMoment",addTweetToNewMomentSelector:".js-actionMomentMakerCreateMoment",momentMemberClass:"is-member"}),this.renderUserMomentsList=function(t,e){this.select("momentItemSelector").remove(),this.select("addTweetToOtherMomentSelector").toggle(e.html.length>0).before(e.html)},this.setCurationClassValue=function(t){var e=this;return function(i,s){return e.select("momentItemSelector").filter("[data-moment-id="+s.moment_id+"]").toggleClass(e.attr.momentMemberClass,t)}},this.triggerMomentCurationEvent=function(e){return function(i,s,n){var o=t(s.el),a=o.attr("data-moment-id"),r=n.$tweet.attr("data-tweet-id");this.trigger(e,{moment_id:a,tweet_id:r,scribeContext:{component:"tweet_actions_dropdown"}}),this.trigger("uiCloseDropdowns")}},this.getMomentsWithEvent=function(t){return function(e,i,s){var n=s.$tweet.attr("data-tweet-id");this.trigger(t,{tweet_id:n})}},this.after("initialize",function(){this.attr.loggedIn&&(this.on("click",{addTweetFromMomentSelector:this.composeHandler(this.getClosestTweet,this.triggerMomentCurationEvent("uiMomentMakerAddTweet")),removeTweetFromMomentSelector:this.composeHandler(this.getClosestTweet,this.triggerMomentCurationEvent("uiMomentMakerRemoveTweet")),addTweetToOtherMomentSelector:this.composeHandler(this.getClosestTweet,this.getMomentsWithEvent("uiOpenAddToMomentDialog")),addTweetToNewMomentSelector:this.composeHandler(this.getClosestTweet,this.triggerMomentCurationEvent("uiMomentMakerCreateMoment"))}),this.on("uiDropdownOpened",this.composeHandler(this.getClosestTweet,this.getMomentsWithEvent("uiMomentsGetDropdownUserMoments"))),this.on(document,"dataMomentMakerAddTweetSuccess",this.setCurationClassValue(!0)),this.on(document,"dataMomentMakerRemoveTweetSuccess",this.setCurationClassValue(!1)),this.on(document,"dataMomentsGetDropdownUserMomentsSuccess",this.renderUserMomentsList))})}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i}).call(e,i(10))},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({unEllipsifiedTextClass:"js-ellipsis",unEllipsifiedTextSelector:".js-ellipsis",maxCharsRemoveEnsureEndOnWordBreak:5}),this.after("initialize",function(){"undefined"!=typeof document.createRange&&this.on(document,"uiSwiftLoaded uiPageChanged uiHasInjectedNewTimeline uiHasInjectedOldTimelineItems uiHasInjectedRangeTimelineItems uiOverlayUpdate uiTrendsDisplayed uiShowMoreTrends uiTriggerEllipsis",this.addEllipses)}),this.addEllipses=function(){var t=this.select("unEllipsifiedTextSelector").filter(":visible");t.removeClass(this.attr.unEllipsifiedTextClass),t.each(this.addEllipsis.bind(this))},this.addEllipsis=function(e,i){var s=t(i),n=this.createRange(s);if(n.hasOverflow()){s.data("full-text",s.text()),n.shortenToVisibleContent(),n.ensureLastLineAvailableWidth(this.maxEllipsisWidth(s)),n.shortenToNearestWordBreak({maxCharsToRemove:this.attr.maxCharsRemoveEnsureEndOnWordBreak});var o=n.toDocumentFragment();o.appendChild(document.createTextNode("…")),s.html(o),this.trigger(s,"uiEllipsisAdded")}},this.maxEllipsisWidth=function(t){var e=parseInt(t.css("font-size"));return 2*e},this.createRange=function(t){return new l.default(t)}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(952),l=s(r);e.default=(0,a.default)(n)}).call(e,i(10))},function(t,e){"use strict";function i(t){function e(){var e=document.createRange(),i=t.contents(),s=t.contents().last()[0];return i.length>0&&(e.setStart(i[0],0),e.setEnd(s,c(s))),e}function i(t){return 3===t.nodeType||4===t.nodeType}function r(){for(var t=l(),e=null,i=null,s=null,n=null,o=0;o<t.length;o++){var a=t[o];(null===i||a.bottom>i)&&(i=a.bottom),(null===e||a.top<e)&&(e=a.top),(null===s||a.left<s)&&(s=a.left),(null===n||a.right>n)&&(n=a.right)}return{top:e,bottom:i,left:s,right:n,width:Math.abs(n-s),height:Math.abs(i-e)}}function l(){for(var t=m.getClientRects(),e=[],i=0;i<t.length;i++)e.push(t[i]);return e.filter(function(t){return t.width>0})}function c(t){return i(t)?t.nodeValue.length:t.childNodes.length}function d(){return t.width()-u()}function u(){var t=r(),e=l(),i=e[e.length-1];return 0===e.length?0:i.right-t.left}function h(t){var e=t.match(o);if(null!==e){var i=e[e.length-1],s=t.lastIndexOf(i);return{startIndex:s,endIndex:s+i.length}}return null}function f(t){return!!t.match(n)}function p(t){return(t.match(s)||[]).length}var m=e();this.shortenToVisibleContent=function(){for(var e=t.contents(),s=e.length-1;s>=0;s--){var n=e[s];if(i(n)){for(var o=n.nodeValue.length;o>=0;o--)if(m.setEnd(n,o),!this.hasOverflow())return}else if(m.setEnd(n,n.childNodes.length),!this.hasOverflow())return}},this.shortenToNearestWordBreak=function(t){var e=m.endContainer,s=t.maxCharsToRemove;if(i(e)&&(e.nodeValue.match(a)||m.endOffset!==e.nodeValue.length&&!f(e.nodeValue[m.endOffset]))){var n=e.nodeValue.slice(0,m.endOffset),o=h(n);null!==o&&(void 0!==s&&p(n.substring(o.endIndex))>s||m.setEnd(e,o.startIndex))}},this.ensureLastLineAvailableWidth=function(t){for(;d(m)<=t;){var e=m.endContainer;if(i(e)&&m.endOffset>1)m.setEnd(e,m.endOffset-1);else{var s=e.previousSibling;if(null===s)break;m.setEnd(s,c(s))}}},this.hasOverflow=function(){var e=r(),i=parseFloat(t.css("line-height"));return Math.round(e.height/i)>Math.round(t.height()/i)},this.toDocumentFragment=function(){return m.cloneContents()},this.setEnd=function(t,e){m.setEnd(t,e)}}Object.defineProperty(e,"__esModule",{value:!0});var s=/([\uD800-\uDBFF][\uDC00-\uDFFF]|[\S\s])/g,n=/\s/,o=/\s+/g,a=/^\n$/;e.default=i},,,function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.attributes({defaultDisplayDuration:5e3,defaultIcon:void 0}),this.displayNotification=function(t,e){if(e&&"granted"===Notification.permission){var i=new Notification(e.title,{body:e.body,icon:e.icon||this.attr.defaultIcon,tag:e.tag});this.trigger("uiNativeNotificationTriggered",{type:e.type}),i.onclick=this.clickCallback.bind(this,e.click,e.type),i.onerror=this.errorCallback.bind(this,e.error,e.type),setTimeout(i.close.bind(i),e.displayDuration||this.attr.defaultDisplayDuration)}},this.clickCallback=function(t,e,i){i.target.close&&i.target.close(),this.trigger("uiNativeNotificationClicked",{type:e}),this.triggerEventWithData(t)},this.errorCallback=function(t,e){this.trigger("uiNativeNotificationError",{type:e}),this.triggerEventWithData(t)},this.triggerEventWithData=function(t){t&&t.eventName&&this.trigger(t.eventName,t.eventData||{})},this.requestPermission=function(){var t=this;Notification.requestPermission(function(e){switch(e){case"granted":t.trigger("uiNativeNotificationPermissionGranted");break;case"denied":t.trigger("uiNativeNotificationPermissionDenied");break;case"default":t.trigger("uiNativeNotificationPermissionDismissed")}}),this.trigger("uiNativeNotificationPermissionRequested")},this.after("initialize",function(){"Notification"in window&&(this.on("uiRequestNativeNotificationPermission",this.requestPermission),this.on("uiDisplayNativeNotification",this.displayNotification))})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=(0,a.default)(n);e.default=r},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.after("initialize",function(){this.scribeOnEvent("uiNativeNotificationPermissionGranted",{page:"",section:"",component:"native_notifications",element:"permission",action:"success"}),this.scribeOnEvent("uiNativeNotificationPermissionDenied",{page:"",section:"",component:"native_notifications",element:"permission",action:"failure"}),this.scribeOnEvent("uiNativeNotificationPermissionDismissed",{page:"",section:"",component:"native_notifications",element:"permission",action:"dismiss"}),this.scribeOnEvent("uiNativeNotificationPermissionRequested",{page:"",section:"",component:"native_notifications",element:"permission",action:"impression"}),this.scribeOnEvent("uiNativeNotificationTriggered",{page:"",section:"",component:"native_notifications",element:"notification",action:"show"}),this.scribeOnEvent("uiNativeNotificationClicked",{page:"",section:"",component:"native_notifications",element:"notification",action:"click"}),this.scribeOnEvent("uiNativeNotificationError",{page:"",section:"",component:"native_notifications",element:"notification",action:"error"})})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(142),l=s(r),c=(0,a.default)(n,l.default);e.default=c},,function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.pollForNotifications=function(t,e){d.default.shouldPoll()&&this.trigger("uiDMPoll")},this.resetDMs=function(t,e){d.default.resetDMState(t,e)},this.notifications=d.default,this.after("initialize",function(){d.default.init(this.attr),this.on(document,"uiResetDMPoll",this.resetDMs),this.on(document,"uiPollForNotifications",this.pollForNotifications),this.timer=(0,l.default)("uiPollForNotifications")})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(959),l=s(r),c=i(251),d=s(c),u=(0,a.default)(n);e.default=u},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(e,i,s){var n={focusedInterval:3e4,blurredInterval:9e4,backoffFactor:2};s=o({},n,s);var a=r.default.setIntervalEvent(e,s.focusedInterval,s.eventData);return t(document).on("uiPageHidden",a.backoff.bind(a,s.blurredInterval,s.backoffFactor)),t(document).on("uiPageVisible",a.cancelBackoff.bind(a)),a}Object.defineProperty(e,"__esModule",{value:!0});var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},a=i(110),r=s(a);e.default=n}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.requestEmbedCode=function(t,e){var i=this.cacheKeyForOptions(e),s=this.cachedEmbedCodes[i],n=this.receivedEmbedCode.bind(this,e),a=this.failedToReceiveEmbedCode.bind(this,e);return s?void this.receivedEmbedCode(e,s):void this.get({dataType:"jsonp",url:this.embedCodeUrl(),data:o({id:e.tweetId},e.data),eventData:{},success:n,error:a})},this.embedCodeUrl=function(){return"//api.twitter.com/1/statuses/oembed.json"},this.receivedEmbedCode=function(t,e){var i=this.cacheKeyForOptions(t);this.cachedEmbedCodes[i]=e,this.trigger("dataOembedSuccess",{options:t,data:e})},this.failedToReceiveEmbedCode=function(t){t.retry?(t.retry=!1,this.trigger("dataOembedRetry",t),this.requestEmbedCode({},t)):this.trigger("dataOembedError",t)},this.cacheKeyForOptions=function(t){return JSON.stringify(t.data)+t.tweetId},this.after("initialize",function(){this.on("uiNeedsOembed",this.requestEmbedCode),this.cachedEmbedCodes={}})}Object.defineProperty(e,"__esModule",{value:!0});var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},a=i(111),r=s(a),l=i(244),c=s(l);e.default=(0,r.default)(n,c.default)},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.scribeError=function(t,e){this.scribe({component:"oembed",action:"request_failed"})},this.scribeRetry=function(t,e){this.scribe({component:"oembed",action:"retry"})},this.scribeRequest=function(t,e){this.scribe({component:"oembed",action:"request"},e)},this.scribeSuccess=function(t,e){this.scribe({component:"oembed",action:"success"},e)},this.after("initialize",function(){this.on("dataOembedError",this.scribeError),this.on("dataOembedRetry",this.scribeRetry),this.on("dataOembedRequest",this.scribeRequest),this.on("dataOembedSuccess",this.scribeSuccess)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(142),l=s(r);e.default=(0,a.default)(n,l.default)},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.addCount=function(t,e){this.trigger(document,{type:"uiUpdatePageCount",defaultBehavior:this.updateCount.bind(this,e)})},this.updateCount=function(t){t.count&&(document.title="("+t.count+") "+this.title)},this.removeCount=function(t,e){document.title=this.title},this.setTitle=function(t,e){var i=e||t.originalEvent.state;i&&i.title&&(document.title=this.title=i.title)},this.after("initialize",function(){this.title=document.title,this.on("uiAddPageCount",this.addCount),this.on("uiHasInjectedNewTimeline",this.removeCount),this.on(document,"uiBeforePageChanged uiUpdatePageTitle",this.setTitle)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=(0,a.default)(n);e.default=r},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({heartBeat:0,doc:document,isIe:(0,a.default)().msie});var t=void 0,e=!1;this.visibilityChange=function(i){var s=void 0;switch(i.type){case"focus":case"focusin":s=!1;break;case"blur":case"focusout":s=!0;break;case"beforeunload":case"uiBeforeUnload":this.trigger("uiPageUnload");break;default:t&&(s=this.attr.doc[t])}s===!0?(e=!0,this.trigger("uiPageHidden")):s===!1&&(e=!1,this.trigger("uiPageVisible"))},this.focusTick=function(){e||this.trigger("uiPageVisible")},this.after("initialize",function(){var e={hidden:"visibilitychange",mozHidden:"mozvisibilitychange",webkitHidden:"webkitvisibilitychange",msHidden:"msvisibilitychange"},i=!1;for(var s in e)if(s in this.attr.doc){t=s,this.on(this.attr.doc,e[t],this.visibilityChange),i=!0;break}i||(this.attr.isIe?this.on(this.attr.doc,"focusin focusout",this.visibilityChange):this.on(window,"focus focusin blur focusout",this.visibilityChange)),this.on(window,"beforeunload uiBeforeUnload",this.visibilityChange),this.attr.heartBeat&&(this.timer=l.default.setIntervalEvent("uiPageFocusTick",this.attr.heartBeat),this.on("uiPageFocusTick",this.focusTick))})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(156),a=s(o),r=i(110),l=s(r),c=i(111),d=s(c);e.default=(0,d.default)(n)},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(t){c.default.attachTo("#profile-hover-container",o({},t,{eventData:{scribeContext:{component:"profile_hover"}}})),u.default.attachTo(document,o({},t,{eventData:{scribeContext:{component:"profile_dialog"}}})),m.default.attachTo(document,t),r.default.attachTo(document,t),f.default.attachTo(document,t)}Object.defineProperty(e,"__esModule",{value:!0});var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},a=i(965),r=s(a),l=i(966),c=s(l),d=i(968),u=s(d),h=i(969),f=s(h),p=i(970),m=s(p),g=t("#profile-hover-container").length>0;e.default=g?n:t.noop}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.listMembershipContent=function(t,e){this.get({url:"/i/"+e.userId+"/lists",dataType:"json",data:{},eventData:e,success:"dataGotListMembershipContent",error:"dataFailedToGetListMembershipContent"})},this.addUserToList=function(t,e){this.post({url:"/i/"+e.userId+"/lists/"+e.listId+"/members",dataType:"json",data:{},eventData:e,success:"dataDidAddUserToList",error:"dataFailedToAddUserToList"})},this.removeUserFromList=function(t,e){this.destroy({url:"/i/"+e.userId+"/lists/"+e.listId+"/members",dataType:"json",data:{},eventData:e,success:"dataDidRemoveUserFromList",error:"dataFailedToRemoveUserFromList"})},this.createList=function(t,e){this.post({url:"/i/lists/create",dataType:"json",data:e,eventData:e,success:"dataDidCreateList",error:"dataFailedToCreateList"})},this.after("initialize",function(){this.on("uiNeedsListMembershipContent",this.listMembershipContent),this.on("uiAddUserToList",this.addUserToList),this.on("uiRemoveUserFromList",this.removeUserFromList),this.on("uiCreateList",this.createList)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(244),l=s(r);e.default=(0,a.default)(n,l.default)},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({excludedContainerSelector:".modal-container, .Gallery, .ProfileCard",profileLinkSelector:"a.profile-picture, .fullname a",itemType:"user",subTargetClass:".username"}),this.openProfileHover=function(e,i){"true"!==(0,l.default)("disable_profile_hovers")&&(i.screenName&&delete i.userId,this.skipScreenName&&i.screenName&&i.screenName.toLowerCase()===this.skipScreenName.toLowerCase()||this.skipUserId&&i.userId===this.skipUserId||(i.isHoverRequest=!0,e.target&&t(e.target).closest(this.attr.excludedContainerSelector).length>0||(this.refEventData=i,this.refEl=t(e.target).find(this.attr.subTargetClass)[0]||e.target,this.lastRequested=i.screenName?i.screenName.toLowerCase():i.userId,this.prepareHover(this.lastRequested),this.$node.attr("data-associated-tweet-id",i.tweetId||null),this.$node.attr("data-impression-id",i.impressionId||null),this.$node.attr("data-disclosure-type",i.disclosureType||null),this.$node.attr("data-impression-cookie",i.impressionCookie||null),this.trigger("uiWantsProfilePopup",i))))},this.dataAvailable=function(e,i){if(i.screen_name&&this.lastRequested===i.screen_name.toLowerCase()||this.lastRequested===i.user_id){this.$node.attr("data-screen-name",i.screen_name||null),this.$node.attr("data-user-id",i.user_id||null);var s=t(i.html);s.find("a[href^='/"+i.screen_name+"']").attr("data-send-impression-cookie","true"),this.showHTML(i.user_id,s,t(this.refEl),this.refEventData)}},this.after("initialize",function(t,e){p.default.attachTo(this.$node,{eventData:{scribeContext:{component:"profile_hover"}}}),e.profile_user&&(this.skipScreenName=e.profile_user.screen_name,this.skipUserId=e.profile_user.id_str),this.on(document,"dataProfilePopupSuccess",this.dataAvailable),
this.on(document,"uiShowProfileHover",this.openProfileHover),this.on(document,"uiHideProfileHover",this.hide)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(154),l=s(r),c=i(967),d=s(c),u=i(886),h=s(u),f=i(957),p=s(f),m=(0,a.default)(n,d.default,h.default);e.default=m}).call(e,i(10))},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){a.default.mixin(this,[l.default]),this.defaultAttrs({hoverContentSelector:".hovercard",hoverContainerClasses:"hovercard",showDelay:600,hideDelay:100}),this.prepareHover=function(t){this.currentKey!==t&&this.forceHide(!1),this.openTimer=setTimeout(this.timerSaysOK.bind(this),this.attr.showDelay)},this.timerSaysOK=function(){this.okToOpen=!0,this.queuedOpen&&this.queuedOpen()},this.showHTML=function(e,i,s,n){var o=this;if(n=n||{},n.id=e,this.currentKey===e&&this.timeout)return clearTimeout(this.timeout),void(this.timeout=null);if(!this.okToOpen)return void(this.queuedOpen=function(){this.showHTML(e,i,s,n)});this.queuedOpen=null,this.forceHide(),this.currentKey=e,this.$hoverContent=t(i),this.$hoverContent.addClass(this.attr.hoverContainerClasses),this.$node.html(this.$hoverContent),this.pos=this.adjacent(this.$node,t(s),{gravity:"vertical"}),this.$hoverContent.addClass("gravity-"+this.pos.gravity),this.$hoverContent.addClass("weight-"+this.pos.weight),"south"===this.pos.gravity&&(this.pos.top-=10),this.$node.css({top:this.pos.top,left:this.pos.left});var a=function(){var t=o.pos.top,e=o.pos.top+("north"===o.pos.gravity?20:-20);o.$node.css({top:e,opacity:0}),o.$node.show(),o.$node.animate({top:t,opacity:1},150,"easeOutQuad"),o.trigger("uiHoverShown",n)},r=this.$hoverContent.find("img.banner");r.length>0?r.on("load",a):a()},this.forceHide=function(t){var e=this;(null!==this.currentKey||t)&&(this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.openTimer&&(clearTimeout(this.openTimer),this.openTimer=null),this.currentKey=null,this.$hoverContent&&this.$node.fadeOut({duration:100,complete:function(){e.$hoverContent&&(e.$hoverContent.remove(),e.$hoverContent=null)},easing:"easeOutQuad"}))},this.hide=function(){this.okToOpen=!1,this.queuedOpen=null,clearTimeout(this.openTimer),this.openTimer=null,this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(this.forceHide.bind(this,!1),this.attr.hideDelay)},this.mouseOverContent=function(){if(this.timeout)return clearTimeout(this.timeout),void(this.timeout=null)},this.after("initialize",function(){this.on(document,"uiOverlayNavigate uiBeforePageChanged uiShortcutEsc",this.forceHide.bind(this,!0)),this.on(document,"mouseover",{hoverContentSelector:this.mouseOverContent}),this.on(document,"mouseout",{hoverContentSelector:this.hide}),t.extend(t.easing,{def:"easeOutQuad",easeOutQuad:function(t,e,i,s,n){return-s*(e/=n)*(e-2)+i}})})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(121),a=s(o),r=i(172),l=s(r);e.default=n}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({hoverFetchDelay:100,noShowError:!0,statsName:"swift_profile_popup"}),this.userCache={screenNames:Object.create(null),ids:Object.create(null)},this.socialProofCache={screenNames:Object.create(null),ids:Object.create(null)},this.saveToCache=function(t,e){t.ids[e.user_id]=e,t.screenNames[e.screen_name]=e},this.retrieveFromCache=function(t,e){var i=void 0;return e.userId?i=t.ids[e.userId]:e.user_id?i=t.ids[e.user_id]:e.screenName?i=t.screenNames[e.screenName]:e.screen_name&&(i=t.screenNames[e.screen_name]),i},this.invalidateCaches=function(t,e){var i=void 0,s=void 0,n=void 0;e.userId?(i=e.userId,n=this.userCache.ids[i],s=n&&n.screen_name):(s=e.screenName,n=this.userCache.screenNames[s],i=n&&n.user_id),i&&delete this.userCache.ids[i],i&&delete this.socialProofCache.ids[i],s&&delete this.userCache.screenNames[s],s&&delete this.socialProofCache.screenNames[s]},this.getProfilePopupMain=function(t,e){var i=this,s=function(t){i.saveToCache(i.userCache,t),i.trigger("dataProfilePopupSuccess",t);var e=i.retrieveFromCache(i.socialProofCache,t);e&&i.trigger("dataSocialProofSuccess",e)},n=function(t){return i.trigger("dataProfilePopupFailure",t)},o=this.retrieveFromCache(this.userCache,t);if(o)return o.sourceEventData=t,void s(o);var a=function(){i.pendingRemoteRequest=null,i.get({url:"/i/profiles/popup",data:e,eventData:t,cache:!1,success:s,error:n})};e.wants_hovercard?this.pendingRemoteRequest=setTimeout(a,this.attr.hoverFetchDelay):a()},this.getProfilePopup=function(t,e){var i={};e.screenName?i.screen_name=e.screenName:e.userId&&(i.user_id=e.userId),e.isHoverRequest&&(i.wants_hovercard=!0),this.getProfilePopupMain(e,i)},this.hideProfileHover=function(){this.pendingRemoteRequest&&(clearTimeout(this.pendingRemoteRequest),this.pendingRemoteRequest=null)},this.after("initialize",function(){this.on("uiWantsProfilePopup",this.getProfilePopup),this.on("uiHideProfileHover",this.hideProfileHover),this.on(document,"dataFollowStateChange dataUserActionSuccess dataDidMuteUser dataDidUnmuteUser",this.invalidateCaches)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(244),l=s(r),c=(0,a.default)(n,l.default);e.default=c},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({scribeContext:{component:"profile_hover"}}),this.scribeProfilePopupOpen=function(e,i){if(i.isHoverRequest){i.user_id=i.user_id||t(e.target).attr("data-user-id"),["profile","me"].indexOf(this.clientEvent.scribeContext.page)!==-1&&this.clientEvent.scribeData.profile_id||(this.clientEvent.scribeData.profile_id=i.user_id);var s=o({},this.attr.scribeContext,{action:"open"});this.scribeInteraction(s,i)}},this.cleanupProfilePopupScribing=function(t,e){this.clientEvent.scribeData.profile_id&&["profile","me"].indexOf(this.clientEvent.scribeContext.page)===-1&&delete this.clientEvent.scribeData.profile_id},this.after("initialize",function(){this.clientEvent=u.default,this.on(document,"uiHideProfileHover",this.cleanupProfilePopupScribing),this.on(document,"uiHoverShown",this.scribeProfilePopupOpen)})}Object.defineProperty(e,"__esModule",{value:!0});var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},a=i(111),r=s(a),l=i(141),c=s(l),d=i(134),u=s(d);e.default=(0,r.default)(n,c.default)}).call(e,i(10))},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function o(){this.defaultAttrs({millisecInDay:864e5,ageGateingErrorCode:250,ageGateCookieKey:"age-gated"}),this.hasBeenAgeGatedWithin24Hr=function(){var t=(0,d.default)(this.attr.ageGateCookieKey);return!!t&&(new Date).getTime()-parseInt(t,10)<this.attr.millisecInDay},this.getUserAction=function(t){var e,i=(e={"/i/user/block":"block","/i/user/unblock":"unblock","/i/user/hide":"dismiss"},n(e,this.apiEndpointUrl("/friendships/create.json"),"follow"),n(e,this.apiEndpointUrl("/friendships/destroy.json"),"unfollow"),e);return i[t]},this.updateFollowStatus=function(t,e){function i(i){i.message&&this.trigger("uiShowMessage",i);var s=i.new_state,n=i.is_follow_back,l=void 0;if(o&&(i.protected&&"follow"===r?(s="pending",l=0):"follow"===r?(s="following",l=1):(l=-1,s="not-following"),n=i.followed_by&&"follow"===r),this.trigger("dataFollowStateChange",a({},i,t,{userId:t.userId,newState:s,requestUrl:e,isFollowBack:n,action:r,username:t.screenName})),o){var c={stats:[{stat:"following",user_id:g.default.user.id,delta:l},{stat:"follower",user_id:t.userId,delta:l}]};this.trigger(document,"dataGotProfileStats",c)}else this.trigger(document,"dataGotProfileStats",{stats:i.profile_stats})}function s(i){var s,o=this,r=(s={},n(s,l.apiErrorCodes.CurrentUserSuspended,function(){return o.showApiErrorToast(S)}),n(s,l.apiErrorCodes.FollowBlockedUserError,function(){return o.showApiErrorToast(y)}),n(s,l.apiErrorCodes.UserMustBeAlcoholAgeScreened,function(){var e=o.getApiErrorDataField(i,"timestamp");o.trigger("uiNeedsAgeGateDialog",{originalData:t,newState:d,ageGated:o.hasBeenAgeGatedWithin24Hr(),minBirthDate:parseInt(e,10)})}),s),c=t.userId,d=t.originalFollowState;return i.new_state&&(d=i.new_state),this.trigger("dataFollowStateChange",a({},i,{userId:c,newState:d,action:this.getUserAction(e),username:t.screenName})),(0,p.default)(r,i)}var o=this.isApiRequest(e),r=this.getUserAction(e),c=t.disclosureType?"earned"===t.disclosureType:void 0,d=a({user_id:t.userId,impression_id:t.impressionId,earned:c,fromShortcut:t.fromShortcut,handles_challenges:1},t.additionalPostData);t.lifeline&&(d.lifeline=1),d.challenges_passed=!!t.passedAgeGating,this.post({url:e,data:d,eventData:t,success:i.bind(this),error:s.bind(this),retryIfUnavailable:!0,useOAuthSessionAuth:t.useOAuthSessionAuth})},this.reversibleAjaxCall=function(t,e,i){function s(i){this.trigger("dataUserActionSuccess",a({},i,{userId:t.userId,requestUrl:e,action:this.getUserAction(e)})),i.message&&this.trigger("uiShowMessage",i)}function n(e){this.trigger(i,t)}this.post({url:e,data:{user_id:t.userId,impression_id:t.impressionId},eventData:t,success:s.bind(this),error:n.bind(this)})},this.normalAjaxCall=function(t,e,i){function s(i){this.trigger("dataUserActionSuccess",a({},i,{userId:t.userId,requestUrl:e,action:this.getUserAction(e)})),i.message&&this.trigger("uiShowMessage",i)}var n=a({user_id:t.userId,token:t.feedbackToken,impression_id:t.impressionId},i);this.post({url:e,data:n,eventData:t,success:s.bind(this),error:"dataUserActionError"})};var e={include_blocking:!0,include_blocked_by:!0,include_can_dm:!0,include_followed_by:!0,include_mute_edge:!0,skip_status:!0};this.followAction=function(i,s){var n=this.apiEndpointUrl("/friendships/create.json");this.updateFollowStatus(t.extend(s,{useOAuthSessionAuth:!0,additionalPostData:e}),n)},this.unfollowAction=function(t,i){var s=this.apiEndpointUrl("/friendships/destroy.json");this.updateFollowStatus(Object.assign(i,{useOAuthSessionAuth:!0,additionalPostData:e}),s)},this.cancelAction=function(t,e){var i="/i/user/cancel";this.updateFollowStatus(e,i)},this.blockAction=function(t,e){var i="/i/user/block";this.updateFollowStatus(e,i)},this.unblockAction=function(t,e){var i="/i/user/unblock";this.updateFollowStatus(e,i)},this.reportSpamAction=function(t,e){this.normalAjaxCall(e,"/i/user/report_spam",{screen_name:e.screenName,report_type:e.reportType,block_user:e.blockUser,impression_id:e.impressionId})},this.hideSuggestionAction=function(t,e){this.normalAjaxCall(e,"/i/user/hide")},this.retweetOnAction=function(t,e){this.reversibleAjaxCall(e,"/i/user/retweets_on","dataRetweetOffAction")},this.retweetOffAction=function(t,e){this.reversibleAjaxCall(e,"/i/user/retweets_off","dataRetweetOnAction")},this.deviceNotificationsOnAction=function(t,e){this.reversibleAjaxCall(e,"/i/user/device_notifications_on","dataDeviceNotificationsOffAction")},this.deviceNotificationsOffAction=function(t,e){this.reversibleAjaxCall(e,"/i/user/device_notifications_off","dataDeviceNotificationsOnAction")},this.after("initialize",function(){this.on(document,"uiFollowAction",this.followAction),this.on(document,"uiUnfollowAction",this.unfollowAction),this.on(document,"uiCancelFollowRequestAction",this.cancelAction),this.on(document,"uiBlockAction",this.blockAction),this.on(document,"uiUnblockAction",this.unblockAction),this.on(document,"uiReportSpamAction uiReportUserAction",this.reportSpamAction),this.on(document,"uiHideSuggestionAction",this.hideSuggestionAction),this.on(document,"uiRetweetOnAction",this.retweetOnAction),this.on(document,"uiRetweetOffAction",this.retweetOffAction),this.on(document,"uiDeviceNotificationsOnAction",this.deviceNotificationsOnAction),this.on(document,"uiDeviceNotificationsOffAction",this.deviceNotificationsOffAction),this.on(document,"uiAgeGatePassed",this.followAction)})}Object.defineProperty(e,"__esModule",{value:!0});var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},r=i(123),l=(s(r),i(245)),c=i(154),d=s(c),u=i(111),h=s(u),f=i(971),p=s(f),m=i(136),g=s(m),v=i(244),b=s(v),w=(0,h.default)(o,b.default),S="Your account is suspended and is not permitted to follow users.",y="You have been blocked from following this user at their request.";e.default=w}).call(e,i(10))},function(t,e){"use strict";function i(t,e){return new Promise(function(i,s){var n=e&&e.errors&&e.errors[0]?e.errors[0].code:void 0,o=t[n];o?(o(e),i(e)):s(e)})}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({currentUserPath:""}),this.navigateToProfilePath=function(){this.trigger("uiNavigate",{href:this.attr.currentUserPath})},this.after("initialize",function(){this.on("uiNavigateToProfile",this.navigateToProfilePath)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=(0,a.default)(n);e.default=r},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(t){var e=t.promptbirdData||{};if(e.promptbirdEnabled){r.default.attachTo(document),c.default.attachTo(document),u.default.attachTo(document,e),f.default.attachTo(document,e),M.default.attachTo(document,r.default),T.default.attachTo(document,r.default),m.default.attachTo("#above-timeline-prompt",e),v.default.attachTo("#dashboard-profile-prompt",e),k.default.attachTo("#promptbird-modal-prompt",e);var i=E.default.timelinePromptOptions(e.format),s=o({},e,i.promptOptions);P.default.attachTo(i.timelineSelector,s),w.default.attachTo(i.timelineSelector,o({},s,{actionSelector:".PromptbirdPrompt--inline .js-promptAction",dismissSelector:".PromptbirdPrompt--inline .js-promptDismiss"})),y.default.attachTo(i.timelineSelector,o({},s,{actionSelector:".PromptbirdPrompt--inlinePointer .js-promptAction",dismissSelector:".PromptbirdPrompt--inlinePointer .js-promptDismiss"}))}}Object.defineProperty(e,"__esModule",{value:!0});var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t};e.default=n;var a=i(974),r=s(a),l=i(975),c=s(l),d=i(976),u=s(d),h=i(978),f=s(h),p=i(979),m=s(p),g=i(1014),v=s(g),b=i(1015),w=s(b),S=i(1017),y=s(S),C=i(1018),T=s(C),D=i(1020),M=s(D),I=i(1021),P=s(I),x=i(1022),k=s(x),A=i(981),E=s(A)},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.postFunction=function(t,e,i,s,n){var o={prompt_id:n.prompt_id};this.post({url:"/i/users/prompts/"+t,eventData:o,data:o,success:e,error:i})},this.after("initialize",function(){this.on("uiPromptbirdDismissPrompt",this.postFunction.bind(this,"dismiss","dataPromptbirdPromptDismissed","dataPromptbirdPromptDismissalError")),this.on("uiPromptbirdClick",this.postFunction.bind(this,"click","dataPromptbirdPromptClicked","dataPromptbirdPromptClickError")),this.on("uiPromptbirdPromptWasShown uiInlinePromptScrolledIn",this.postFunction.bind(this,"impress","dataPromptbirdPromptImpressed","dataPromptbirdPromptImpressError")),this.on("uiPromptbirdPromptWasShown uiInlinePromptScrolledIn","uiItemsInjected")})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(244),l=s(r);e.default=(0,a.default)(n,l.default)},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.after("initialize",function(){this.scribeOnEvent("uiPromptbirdPromptWasShown",{action:"impression"}),this.scribeOnEvent("uiInlinePromptScrolledIn",{action:"impression"}),this.scribeOnEvent("uiPromptbirdClick",{action:"click"}),this.scribeOnEvent("uiPromptbirdDismissPrompt",{action:"dismiss"}),this.scribeOnEvent("uiPromptbirdPreviewPromotedAccount",{action:"preview"}),this.scribeOnEvent("uiShowDashboardProfilePromptbird",{action:"show"})})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(142),l=s(r);e.default=(0,a.default)(n,l.default)},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({delayedPrompts:[],tweetItemSelector:'.js-stream-item[data-item-type="tweet"]:visible',originalTweetSelector:".js-original-tweet",promotedTweetClass:"promoted-tweet",immediateTriggers:[]}),this.initPage=function(){this.trigger("uiPromptbirdManagerWantsPrompts",{tweetIds:this.getTweetIds()})},this.renderImmediatePrompts=function(t){var e=t.filter(function(t){return this.shouldRenderPromptImmediately(t)},this);e.forEach(this.renderPrompt,this)},this.renderPrompt=function(t){this.trigger("uiPromptbirdShouldRenderPrompt",{prompt:t})},this.saveDelayedPrompts=function(t){var e=t.filter(function(t){return!this.shouldRenderPromptImmediately(t)},this);this.attr.delayedPrompts=e},this.refreshPrompts=function(t,e){e.prompts&&(this.renderImmediatePrompts(e.prompts),this.saveDelayedPrompts(e.prompts))},this.shouldRenderPromptImmediately=function(t){return!t.trigger||this.attr.immediateTriggers.indexOf(t.trigger)>-1},this.getTweetIds=function(){var e=this,i=this.select("tweetItemSelector").filter(function(i,s){return!t(s).find(e.attr.originalTweetSelector).hasClass(e.attr.promotedTweetClass)}).map(function(){return t(this).data("item-id")}).toArray();return i.join(",")},this.after("initialize",function(){this.on(document,"uiSwiftLoaded uiPageChanged",this.initPage),this.on("dataPromptbirdManagerHasPrompts",this.refreshPrompts)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(977),l=s(r);e.default=(0,a.default)(n,l.default)}).call(e,i(10))},function(t,e){"use strict";function i(){this.renderActionPrompt=function(t,e,i){this.renderDelayedPromptForAction(i.sourceEventData.id,t)},this.renderDelayedPromptForAction=function(t,e){var i=this.getDelayedPromptForAction(e);i&&(i.pointerTweetId=t,this.renderPrompt(i))},this.getDelayedPromptForAction=function(t){var e=this.attr.delayedPrompts.filter(function(e){return e.trigger===t})[0];if(e){var i=this.attr.delayedPrompts.indexOf(e);this.attr.delayedPrompts.splice(i,1)}return e},this.after("initialize",function(){this.on(document,"dataDidRetweet",this.renderActionPrompt.bind(this,"retweet")),this.on(document,"dataDidFavoriteTweet",this.renderActionPrompt.bind(this,"favorite"))})}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({endpoint:"/i/users/prompts",format:""}),this.fetchPrompts=function(t,e){e=e||{};var i={format:this.attr.format,tweet_ids:e.tweetIds,force_prompt_id:this.getForcePromptIdParam()};this.get({url:this.attr.endpoint,eventData:i,data:i,success:"dataPromptbirdManagerHasPrompts",error:"dataPromptbirdManagerPollFailure"})},this.getForcePromptIdParam=function(){return d.default.decode(window.location.search.replace(/^\?/,"")).force_prompt_id},this.after("initialize",function(){this.on("uiPromptbirdManagerWantsPrompts",this.fetchPrompts)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(244),l=s(r),c=i(253),d=s(c);e.default=(0,a.default)(n,l.default)},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({promptType:"above_timeline"}),this.insertPrompt=function(t){this.$node.html(t.html)}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(980),a=s(o),r=i(1012),l=s(r),c=i(1013),d=s(c);e.default=a.default.mixin(n,l.default,d.default)},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({promptType:null,promptSelector:".PromptbirdPrompt",actionSelector:".js-promptAction",dismissSelector:".js-promptDismiss",promptLayoutContainerSelector:".js-prompt-layout-container",promptBirdStreamItemSelector:".PromptbirdPrompt-streamItem",isStickyClass:"js-isSticky",triggerImpressionOnInsert:!0}),this.insertPrompt=function(t){},this.removePrompt=function(t){t.closest(this.attr.promptLayoutContainerSelector).remove()},this.showPrompt=function(t,e){var i=this.filterPrompt(e.prompt);i&&(i.html=l.default.getPromptHtml(i,this.attr.format),this.insertPrompt(i),this.bootPrompt(i),this.attr.triggerImpressionOnInsert&&this.trigger("uiPromptbirdPromptWasShown",this.scribeData(i.id)))},this.bootPrompt=function(t){var e=this;if(t.js_boot){var s=function(i){return i({promptElement:e.getPromptByPromptId(t.id)})};i.e(6,function(e){var n=i(999)("./"+t.js_boot).default;s(n)})}},this.filterPrompt=function(t){if(this.attr.promptType===t.type)return t},this.actionClicked=function(e,i){this.triggerPromptAction(i.el,"uiPromptbirdClick");var s=t(i.el);s.hasClass(this.attr.isStickyClass)||this.removePrompt(this.getPromptFromChild(i.el))},this.dismissClicked=function(t,e){t.preventDefault(),this.dismissPrompt(e.el)},this.dismissPrompt=function(e){this.triggerPromptAction(e,"uiPromptbirdDismissPrompt");var i=t(e).closest(this.attr.promptBirdStreamItemSelector);this.trigger(i,"uiRemoveClassBeforePromptbird"),this.removePrompt(this.getPromptFromChild(e))},this.triggerPromptAction=function(t,e){var i=this.getPromptFromChild(t),s=i.data("prompt-intent"),n=i.data("prompt-intent-params"),o=parseInt(i.data("prompt-id"),10);this.trigger(e,this.scribeData(o,s,n))},this.scribeData=function(t,e,i){return{scribeContext:{component:"promptbird_"+t},prompt_id:t,intent:e,intent_params:i}},this.getPromptFromChild=function(e){return t(e).closest(this.attr.promptSelector)},this.getPromptByPromptId=function(t,e){var i=this.attr.promptSelector+'[data-prompt-id="'+t+'"]',s=this.$node.find(i).addBack(i);return e?s.closest(this.attr.promptLayoutContainerSelector):s},this.getPromptIdFromNode=function(t){var e=t.is(this.attr.promptSelector)?t:t.find(this.attr.promptSelector);return e.data("prompt-id")},this.after("initialize",function(){this.on(document,"uiPromptbirdShouldRenderPrompt",this.showPrompt),this.on("click",{actionSelector:this.actionClicked,dismissSelector:this.dismissClicked})})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(981),l=s(r);e.default=(0,a.default)(n)}).call(e,i(10))},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var n=i(982),o=s(n),a=i(993),r=s(a),l=i(994),c=s(l),d=i(997),u=s(d),h={PROFILE_FORMATS:["ProfileOther","ProfileSelf"],TIMELINE_LAYOUT_TYPES:["inline","inline_pointer"],timelinePromptOptions:function(t){return this.isProfileFormat(t)?{timelineSelector:".GridTimeline-items",promptOptions:{streamItemSelector:".Grid .Grid-cell .js-stream-item",streamItemContainerSelector:"> .Grid"}}:{timelineSelector:"#stream-items-id",promptOptions:{streamItemSelector:"> .js-stream-item",streamItemContainerSelector:"> .js-stream-item"}}},DEFAULT_LAYOUT:r.default,GRID_TIMELINE_LAYOUT:c.default,LIST_TIMELINE_LAYOUT:u.default,getPromptLayout:function(t,e){var i=void 0;return i=this.hasTimelineLayout(t)?this.isProfileFormat(e)?h.GRID_TIMELINE_LAYOUT:h.LIST_TIMELINE_LAYOUT:h.DEFAULT_LAYOUT},getPromptHtml:function(e,i){var s=this.getPromptLayout(e.type,i),n=s.render(e.renderData),a=o.default[e.template].render(e.renderData),r=t("<div></div>");return r.html(n),r.find(".js-prompt-layout-content").html(a),r.html()},isProfileFormat:function(t){return this.PROFILE_FORMATS.indexOf(t)>-1},hasTimelineLayout:function(t){return this.TIMELINE_LAYOUT_TYPES.indexOf(t)>-1}};e.default=h}).call(e,i(10))},function(t,e,i){"use strict";function s(t){var e=t.match(o);if(e)return e[1];throw new Error("unexpected mustache path: "+t)}function n(t){var e={};return t.keys().forEach(function(i){var n=s(i);e[n]=t(i)}),e}Object.defineProperty(e,"__esModule",{value:!0});var o=/^\.\/(.+)\.mustache$/,a=n(i(983));e.default=a},function(t,e,i){function s(t){return i(n(t))}function n(t){return o[t]||function(){throw new Error("Cannot find module '"+t+"'.")}()}var o={"./above_timeline_prompt.mustache":984,"./account_health_prompt.mustache":989,"./dashboard_profile_prompt.mustache":992,"./default_layout.mustache":993,"./grid_timeline_layout.mustache":994,"./inline_pointer_prompt.mustache":995,"./inline_prompt.mustache":996,"./list_timeline_layout.mustache":997,"./modal_prompt.mustache":998};s.keys=function(){return Object.keys(o)},s.resolve=n,t.exports=s,s.id=983},function(t,e,i){(function(e){function s(t,e,i){e=e||{};for(var s in a)e[s]||(e[s]=a[s]);return r.render(t,e,i)}var n=i(220).default,o={"promptbird/templates/dismiss_button":i(985),"promptbird/templates/title":i(986),"promptbird/templates/explanation":i(987),"promptbird/templates/call_to_action":i(988)},a=n(o),r=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<div class="PromptbirdPrompt PromptbirdPrompt--aboveTimeline" data-prompt-id="'),s.b(s.v(s.f("prompt_id",t,e,0))),s.b('">\n  <div class="PromptbirdPrompt-content '),s.b(s.v(s.f("prompt_css_class",t,e,0))),s.b(" "),s.s(s.f("background_image_url",t,e,1),t,e,0,179,189,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b("with-image")}),t.pop()),s.b('"\n    '),s.s(s.f("data_attributes",t,e,1),t,e,0,240,260,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(" "),i.b(i.v(i.f("key",t,e,0))),i.b('="'),i.b(i.v(i.f("value",t,e,0))),i.b('"')}),t.pop()),s.b("\n"+i),s.b("    "),s.s(s.f("background_image_url",t,e,1),t,e,0,310,367,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(' style="background-image: url('),i.b(i.v(i.f("background_image_url",t,e,0))),i.b(');"')}),t.pop()),s.b(">\n\n"),s.b(s.rp("<promptbird/templates/dismiss_button0",t,e,"    ")),s.b(s.rp("<promptbird/templates/title1",t,e,"    ")),s.b(s.rp("<promptbird/templates/explanation2",t,e,"    ")),s.b(s.rp("<promptbird/templates/call_to_action3",t,e,"    ")),s.b("  </div>\n</div>"),s.fl()},partials:{"<promptbird/templates/dismiss_button0":{name:"promptbird/templates/dismiss_button",partials:{},subs:{}},"<promptbird/templates/title1":{name:"promptbird/templates/title",partials:{},subs:{}},"<promptbird/templates/explanation2":{name:"promptbird/templates/explanation",partials:{},subs:{}},"<promptbird/templates/call_to_action3":{name:"promptbird/templates/call_to_action",partials:{},subs:{}}},subs:{}});t.exports={template:r,partials:a,render:s}}).call(e,i(1))},function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<button type="button" class="PromptbirdPrompt-dismiss js-promptDismiss" tabindex="-1">\n  <span data-edge="'),s.s(s.f("edge_design",t,e,1),t,e,0,122,126,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b("edge")}),t.pop()),s.b('" class="Icon Icon--close '),s.s(s.f("edge_design",t,e,1),t,e,0,184,195,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b("Icon--small")}),t.pop()),s.s(s.f("edge_design",t,e,1),t,e,1,0,0,"")||s.b("Icon--smallest"),s.b('">\n    <span class="visuallyhidden">\n      Dismiss\n    </span>\n  </span>\n</button>'),s.fl()},partials:{},subs:{}})}).call(e,i(1))},function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<h3 class="PromptbirdPrompt-title">'),s.b(s.v(s.f("title",t,e,0))),s.b("</h3>"),s.fl()},partials:{},subs:{}})}).call(e,i(1))},function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<p class="PromptbirdPrompt-explanation">'),s.b(s.v(s.f("explanation",t,e,0))),s.b("</p>"),s.fl()},partials:{},subs:{}})}).call(e,i(1))},function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.s(s.f("call_to_action_text",t,e,1),t,e,0,96,570,"{{ }}")&&(s.rs(t,e,function(t,e,s){s.b('  <div class="PromptbirdPrompt-action">\n'),s.s(s.f("call_to_action_url",t,e,1),t,e,0,164,307,"{{ }}")&&(s.rs(t,e,function(t,e,s){s.b('      <a href="'),s.b(s.v(s.f("call_to_action_url",t,e,0))),s.b('" class="EdgeButton EdgeButton--primary js-promptAction">\n        '),s.b(s.v(s.f("call_to_action_text",t,e,0))),s.b("\n"+i),s.b("      </a>\n")}),t.pop()),s.s(s.f("call_to_action_url",t,e,1),t,e,1,0,0,"")||(s.b('      <button type="button" class="EdgeButton EdgeButton--primary js-promptAction '),s.s(s.f("sticky_cta",t,e,1),t,e,0,456,467,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b("js-isSticky")}),t.pop()),s.b('">\n        '),s.b(s.v(s.f("call_to_action_text",t,e,0))),s.b("\n"+i),s.b("      </button>\n")),s.b("  </div>\n")}),t.pop()),s.fl()},partials:{},subs:{}})}).call(e,i(1))},function(t,e,i){(function(e){function s(t,e,i){e=e||{};for(var s in a)e[s]||(e[s]=a[s]);return r.render(t,e,i)}var n=i(220).default,o={"promptbird/templates/dismiss_button":i(985),"promptbird/templates/icon":i(990),"promptbird/templates/title":i(986),"promptbird/templates/explanation":i(987),"promptbird/templates/call_to_action":i(988),"promptbird/templates/second_call_to_action":i(991)},a=n(o),r=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<div class="PromptbirdPrompt PromptbirdPrompt--'),s.s(s.f("is_modal",t,e,1),t,e,0,60,65,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b("modal")}),t.pop()),s.s(s.f("is_above_timeline",t,e,1),t,e,0,100,113,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b("aboveTimeline")}),t.pop()),s.b(" "),s.b(s.v(s.f("health_prompt_custom_class",t,e,0))),s.b('" data-prompt-id="'),s.b(s.v(s.f("prompt_id",t,e,0))),s.b('">\n'),s.s(s.f("is_above_timeline",t,e,1),t,e,0,224,272,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(i.rp("<promptbird/templates/dismiss_button0",t,e,"    "))}),t.pop()),s.s(s.f("is_modal",t,e,1),t,e,0,310,348,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(i.rp("<promptbird/templates/icon1",t,e,"    "))}),t.pop()),s.b(s.rp("<promptbird/templates/title2",t,e,"  ")),s.b(s.rp("<promptbird/templates/explanation3",t,e,"  ")),s.b(s.rp("<promptbird/templates/call_to_action4",t,e,"  ")),s.b(s.rp("<promptbird/templates/second_call_to_action5",t,e,"  ")),s.b("</div>"),s.fl()},partials:{"<promptbird/templates/dismiss_button0":{name:"promptbird/templates/dismiss_button",partials:{},subs:{}},"<promptbird/templates/icon1":{name:"promptbird/templates/icon",partials:{},subs:{}},"<promptbird/templates/title2":{name:"promptbird/templates/title",partials:{},subs:{}},"<promptbird/templates/explanation3":{name:"promptbird/templates/explanation",partials:{},subs:{}},"<promptbird/templates/call_to_action4":{name:"promptbird/templates/call_to_action",partials:{},subs:{}},"<promptbird/templates/second_call_to_action5":{name:"promptbird/templates/second_call_to_action",partials:{},subs:{}}},subs:{}});t.exports={template:r,partials:a,render:s}}).call(e,i(1))},function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.s(s.f("icon_class",t,e,1),t,e,0,15,99,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b('  <span class="PromptbirdPrompt-icon Icon Icon--extraLarge '),i.b(i.v(i.f("icon_class",t,e,0))),i.b('"></span>\n')}),t.pop()),s.s(s.f("icon_class",t,e,1),t,e,1,0,0,"")||s.b('  <span class="PromptbirdPrompt-icon PromptbirdPrompt-icon--default Icon Icon--extraLarge Icon--bird"></span>\n'),s.fl()},partials:{},subs:{}})}).call(e,i(1))},function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.s(s.f("second_call_to_action_text",t,e,1),t,e,0,247,603,"{{ }}")&&(s.rs(t,e,function(t,e,s){s.b('  <div class="PromptbirdPrompt-action">\n'),s.s(s.f("second_call_to_action_url",t,e,1),t,e,0,322,563,"{{ }}")&&(s.rs(t,e,function(t,e,s){s.b('      <a href="'),s.b(s.v(s.f("second_call_to_action_url",t,e,0))),s.b('" class="btn-link js-promptAction '),s.b(s.v(s.f("custom_js_class",t,e,0))),s.b('" data-scribe-component="'),s.b(s.v(s.f("scribe_component",t,e,0))),s.b('" data-scribe-element="'),s.b(s.v(s.f("scribe_element",t,e,0))),s.b('">\n        '),s.b(s.v(s.f("second_call_to_action_text",t,e,0))),s.b("\n"+i),s.b("      </a>\n")}),t.pop()),s.b("  </div>\n")}),t.pop()),s.fl()},partials:{},subs:{}})}).call(e,i(1))},function(t,e,i){(function(e){
function s(t,e,i){e=e||{};for(var s in a)e[s]||(e[s]=a[s]);return r.render(t,e,i)}var n=i(220).default,o={"promptbird/templates/dismiss_button":i(985),"promptbird/templates/title":i(986)},a=n(o),r=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<div class="PromptbirdPrompt PromptbirdPrompt--dashboardProfile" data-prompt-id="'),s.b(s.v(s.f("prompt_id",t,e,0))),s.b('">\n  <span class="PromptbirdPrompt-arrow"></span>\n'),s.b(s.rp("<promptbird/templates/dismiss_button0",t,e,"  ")),s.b(s.rp("<promptbird/templates/title1",t,e,"  ")),s.b('  <p class="PromptbirdPrompt-explanation">\n    <a class="js-promptAction" href="'),s.b(s.v(s.f("call_to_action_url",t,e,0))),s.b('" target="_blank">\n      '),s.b(s.v(s.f("call_to_action_text",t,e,0))),s.b("\n"+i),s.b("    </a>\n    "),s.b(s.v(s.f("explanation",t,e,0))),s.b("\n"+i),s.b('    <button type="button" class="btn-link js-previewAccount">'),s.b(s.v(s.f("preview_text",t,e,0))),s.b("</button>\n  </p>\n</div>\n"),s.fl()},partials:{"<promptbird/templates/dismiss_button0":{name:"promptbird/templates/dismiss_button",partials:{},subs:{}},"<promptbird/templates/title1":{name:"promptbird/templates/title",partials:{},subs:{}}},subs:{}});t.exports={template:r,partials:a,render:s}}).call(e,i(1))},function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<div class="js-prompt-layout-container">\n  <div class="js-prompt-layout-content"></div>\n</div>'),s.fl()},partials:{},subs:{}})}).call(e,i(1))},function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<div class="Grid js-prompt-layout-container" data-component-context="prompt" role="presentation">\n  <div class="Grid-cell" role="presentation">\n    <div class="PromptbirdPrompt-streamItem StreamItem js-stream-item js-prompt-layout-content separated-module" data-item-type="prompt" data-item-id="'),s.b(s.v(s.f("prompt_id",t,e,0))),s.b('" role="listitem"></div>\n  </div>\n</div>'),s.fl()},partials:{},subs:{}})}).call(e,i(1))},function(t,e,i){(function(e){function s(t,e,i){e=e||{};for(var s in a)e[s]||(e[s]=a[s]);return r.render(t,e,i)}var n=i(220).default,o={"promptbird/templates/dismiss_button":i(985),"promptbird/templates/icon":i(990),"promptbird/templates/title":i(986),"promptbird/templates/explanation":i(987)},a=n(o),r=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<div class="PromptbirdPrompt PromptbirdPrompt--inlinePointer" data-prompt-id="'),s.b(s.v(s.f("prompt_id",t,e,0))),s.b('" data-prompt-intent="'),s.b(s.v(s.f("prompt_intent",t,e,0))),s.b('">\n  <span class="PromptbirdPrompt-arrow"></span>\n'),s.b(s.rp("<promptbird/templates/dismiss_button0",t,e,"  ")),s.b(s.rp("<promptbird/templates/icon1",t,e,"  ")),s.b(s.rp("<promptbird/templates/title2",t,e,"  ")),s.b(s.rp("<promptbird/templates/explanation3",t,e,"  ")),s.b("</div>\n"),s.fl()},partials:{"<promptbird/templates/dismiss_button0":{name:"promptbird/templates/dismiss_button",partials:{},subs:{}},"<promptbird/templates/icon1":{name:"promptbird/templates/icon",partials:{},subs:{}},"<promptbird/templates/title2":{name:"promptbird/templates/title",partials:{},subs:{}},"<promptbird/templates/explanation3":{name:"promptbird/templates/explanation",partials:{},subs:{}}},subs:{}});t.exports={template:r,partials:a,render:s}}).call(e,i(1))},function(t,e,i){(function(e){function s(t,e,i){e=e||{};for(var s in a)e[s]||(e[s]=a[s]);return r.render(t,e,i)}var n=i(220).default,o={"promptbird/templates/dismiss_button":i(985),"promptbird/templates/icon":i(990),"promptbird/templates/title":i(986),"promptbird/templates/explanation":i(987),"promptbird/templates/call_to_action":i(988)},a=n(o),r=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<div class="PromptbirdPrompt PromptbirdPrompt--inline" data-prompt-id="'),s.b(s.v(s.f("prompt_id",t,e,0))),s.b('" data-prompt-intent="'),s.b(s.v(s.f("prompt_intent",t,e,0))),s.b('" data-prompt-intent-params="'),s.b(s.v(s.f("prompt_intent_params",t,e,0))),s.b('">\n'),s.b(s.rp("<promptbird/templates/dismiss_button0",t,e,"  ")),s.b(s.rp("<promptbird/templates/icon1",t,e,"  ")),s.b(s.rp("<promptbird/templates/title2",t,e,"  ")),s.b(s.rp("<promptbird/templates/explanation3",t,e,"  ")),s.b(s.rp("<promptbird/templates/call_to_action4",t,e,"  ")),s.b("</div>\n"),s.fl()},partials:{"<promptbird/templates/dismiss_button0":{name:"promptbird/templates/dismiss_button",partials:{},subs:{}},"<promptbird/templates/icon1":{name:"promptbird/templates/icon",partials:{},subs:{}},"<promptbird/templates/title2":{name:"promptbird/templates/title",partials:{},subs:{}},"<promptbird/templates/explanation3":{name:"promptbird/templates/explanation",partials:{},subs:{}},"<promptbird/templates/call_to_action4":{name:"promptbird/templates/call_to_action",partials:{},subs:{}}},subs:{}});t.exports={template:r,partials:a,render:s}}).call(e,i(1))},function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<li class="PromptbirdPrompt-streamItem js-stream-item js-prompt-layout-container separated-module" data-item-type="prompt" data-item-id="'),s.b(s.v(s.f("prompt_id",t,e,0))),s.b('">\n  <div class="js-prompt-layout-content"></div>\n</li>'),s.fl()},partials:{},subs:{}})}).call(e,i(1))},function(t,e,i){(function(e){function s(t,e,i){e=e||{};for(var s in a)e[s]||(e[s]=a[s]);return r.render(t,e,i)}var n=i(220).default,o={"promptbird/templates/icon":i(990),"promptbird/templates/title":i(986),"promptbird/templates/explanation":i(987),"promptbird/templates/call_to_action":i(988),"promptbird/templates/second_call_to_action":i(991)},a=n(o),r=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<div class="PromptbirdPrompt PromptbirdPrompt--modal" data-prompt-id="'),s.b(s.v(s.f("prompt_id",t,e,0))),s.b('" data-prompt-intent="'),s.b(s.v(s.f("prompt_intent",t,e,0))),s.b('">\n'),s.b(s.rp("<promptbird/templates/icon0",t,e,"  ")),s.b(s.rp("<promptbird/templates/title1",t,e,"  ")),s.b(s.rp("<promptbird/templates/explanation2",t,e,"  ")),s.b(s.rp("<promptbird/templates/call_to_action3",t,e,"  ")),s.b(s.rp("<promptbird/templates/second_call_to_action4",t,e,"  ")),s.b("</div>\n"),s.fl()},partials:{"<promptbird/templates/icon0":{name:"promptbird/templates/icon",partials:{},subs:{}},"<promptbird/templates/title1":{name:"promptbird/templates/title",partials:{},subs:{}},"<promptbird/templates/explanation2":{name:"promptbird/templates/explanation",partials:{},subs:{}},"<promptbird/templates/call_to_action3":{name:"promptbird/templates/call_to_action",partials:{},subs:{}},"<promptbird/templates/second_call_to_action4":{name:"promptbird/templates/second_call_to_action",partials:{},subs:{}}},subs:{}});t.exports={template:r,partials:a,render:s}}).call(e,i(1))},,,,,,,,,,,,,,function(t,e){"use strict";function i(){this.after("insertPrompt",function(){this.select("promptSelector").slideDown()})}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i},function(t,e){"use strict";function i(){this.defaultAttrs({removePromptDuration:400}),this.around("removePrompt",function(t,e){e.slideUp(this.attr.removePromptDuration,function(){return t(e)})})}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({promptType:"dashboard_profile"}),this.insertPrompt=function(t){this.$node.html(t.html)}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(980),a=s(o),r=i(1013),l=s(r);e.default=a.default.mixin(n,l.default)},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({promptType:"inline",promptItemSelector:".PromptbirdPrompt--inline",defaultInsertionIndex:0}),this.insertPrompt=function(t){var e=t.renderData.insertionIndex||this.attr.defaultInsertionIndex,i=t.renderData.shouldInsertAbove||!1;this.insertPromptAtIndex(t,e,i)}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(1016),a=s(o),r=i(1012),l=s(r);e.default=a.default.mixin(n,l.default)},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({streamItemSelector:"> .js-stream-item",streamItemContainerSelector:"> .js-stream-item",scrollDebounceInterval:100}),this.enabledScrollCheck=function(t){var e=this,i=this.getPromptIdFromNode(t);setTimeout(function(){return e.updateVisibility(t)},0),this.on(window,"scroll.prompt"+i,d.default.debounce(this.updateVisibility.bind(this,t),this.attr.scrollDebounceInterval))},this.disableScrollCheck=function(t){var e=t.data("prompt-id");this.off(window,"scroll.prompt"+e)},this.updateVisibility=function(e,i,s){var n=h.default.isWithinBounds(t(window),e),o=this.getPromptIdFromNode(e);!this.promptVisibility[o]&&n&&this.trigger("uiInlinePromptScrolledIn",this.scribeData(o)),this.promptVisibility[o]=n},this.insertPromptAtIndex=function(e,i,s){var n=s?"before":"after",o=t(e.html),a=this.select("streamItemContainerSelector").eq(i);a[n](o),this.enabledScrollCheck(o)},this.before("removePrompt",this.disableScrollCheck),this.after("initialize",function(){this.attr.triggerImpressionOnInsert=!1,this.promptVisibility={}})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(980),a=s(o),r=i(1013),l=s(r),c=i(126),d=s(c),u=i(177),h=s(u);e.default=a.default.mixin(n,l.default)}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({promptType:"inline_pointer",promptItemSelector:".PromptbirdPrompt--inlinePointer",pointerArrowSelector:".PromptbirdPrompt-arrow",pointerTargetSelectors:{favorite_action:".ProfileTweet-action .js-actionFavorite .Icon, .ProfileTweet-action .js-actionFavorite .HeartAnimation",reply_action:".ProfileTweet-action .js-actionReply .Icon",retweet_action:".ProfileTweet-action .js-actionRetweet .Icon",more_action:".ProfileTweet-action .js-dropdown-toggle .Icon"}}),this.insertPrompt=function(t){this.trigger("uiPromptNeedsInsertionIndex",{prompt:t})},this.insertPromptWithIndex=function(t,e){var i=e.prompt;this.insertPromptAtIndex(i,e.insertionIndex,e.shouldInsertAbove),this.setPointerArrowOffset(i)},this.setPointerArrowOffset=function(t){var e=this.attr.pointerTargetSelectors[t.renderData.pointerTarget],i=this.getPromptByPromptId(t.id,!0),s=i.find(this.attr.pointerArrowSelector),n=i.prev(),o=n.find(e),a=o.offset().left-n.offset().left;a<=i.width()&&s.css({left:a+"px"})},this.after("initialize",function(){this.on("uiPromptHasInsertionIndex",this.insertPromptWithIndex)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(1016),a=s(o),r=i(1012),l=s(r);e.default=a.default.mixin(n,l.default)},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({intent:"post_then_trigger"}),this.action=function(t){var e=this,i=l.default.decode(t),s=i.post_path,n=i.success_event_name,o=i.fail_event_name,a=this.tryParseData(i.post_data),r=this.tryParseData(i.success_event_data),c=this.tryParseData(i.fail_event_data);return this.post({url:s,data:a}).then(function(){return e.trigger(n,r)}).catch(function(){o&&e.trigger(o,c)})},this.tryParseData=function(t){var e=void 0;try{e=JSON.parse(t)}catch(i){e={}}return e}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(1019),a=s(o),r=i(253),l=s(r),c=i(244),d=s(c);e.default=a.default.mixin(n,d.default)},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({intent:null}),this.action=function(){},this.checkIntents=function(t,e){if(e.intent&&this.attr.intent===e.intent)return this.action(e.intent_params)},this.after("initialize",function(){this.on(document,"uiPromptbirdClick",this.checkIntents)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o);e.default=(0,a.default)(n)},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({intent:"tweet"}),this.action=function(t){var e=l.default.decode(t);e.canTweetDefaultText=!0,this.trigger("uiOpenTweetDialog",e)}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(1019),a=s(o),r=i(253),l=s(r);e.default=a.default.mixin(n)},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({streamItemSelector:".js-stream-item",promotedTweetSelector:".promoted-tweet",originalTweetSelector:".js-original-tweet",favoritedClass:"favorited",favoriteCountSelector:".ProfileTweet-action--favorite .ProfileTweet-actionCount",tweetStatCountSelector:"tweet-stat-count",tweetSelectionAlgorithmMap:{most_favorited:"getMostFavoritedTweet",mutual_follow:"getMutualFollowTweet",not_following:"getNotFollowingTweet"}}),this.getInsertionIndex=function(t,e){var i=e.prompt,s=this.getInsertionIndexForPrompt(i);s<0||this.trigger("uiPromptHasInsertionIndex",{prompt:i,insertionIndex:s})},this.getEligibleTweets=function(){var e=this.attr.promotedTweetSelector;return this.select("streamItemSelector").filter(function(i,s){return 0===t(s).find(e).length})},this.getInsertionIndexForPrompt=function(e){var i=e.renderData.pointerTweetId||this.getTweetIdForPrompt(e),s=this.select("streamItemSelector").map(function(){return t(this).data("item-id").toString()}).toArray();return s.indexOf(i)},this.getTweetIdForPrompt=function(t){var e=this.attr.tweetSelectionAlgorithmMap[t.renderData.pointerTweetSelection];if(this[e]){var i=this[e]();return i.length>0?i.data("item-id").toString():void 0}},this.getMutualFollowTweet=function(){var e=this;return this.getEligibleTweets().filter(function(i,s){var n=t(s).find(e.attr.originalTweetSelector);return n.data("you-follow")&&n.data("follows-you")}).eq(0)},this.getNotFollowingTweet=function(){var e=this;return this.getEligibleTweets().filter(function(i,s){return!t(s).find(e.attr.originalTweetSelector).data("you-follow")}).eq(0)},this.getMostFavoritedTweet=function(){var e=this,i=this.getEligibleTweets().filter(function(i,s){return!t(s).find(e.attr.originalTweetSelector).hasClass(e.attr.favoritedClass)});return i.sort(function(i,s){var n=function(i){return t(i).find(e.attr.favoriteCountSelector).data(e.attr.tweetStatCountSelector)};return n(s)-n(i)}).eq(0)},this.after("initialize",function(){this.on("uiPromptNeedsInsertionIndex",this.getInsertionIndex)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o);e.default=(0,a.default)(n)}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({promptType:"modal",top:120,width:590,blockClickDuration:2e3}),this.insertPrompt=function(t){var e=!t.renderData.hide_dismiss;this.disableBackgroundClicks(e),this.select("modalContentSelector").html(t.html),this.open(),this.removeOrAdjustCloseBtnPosition(e)},this.removePrompt=function(){},this.disableBackgroundClicks=function(t){var e=this;this.attr.enableClosingViaBackground=!1,t&&setTimeout(function(){return e.attr.enableClosingViaBackground=!0},this.attr.blockClickDuration)},this.removeOrAdjustCloseBtnPosition=function(t){this.select("closeButtonSelector").remove(),t&&this.select("promptSelector").append(this.$modalCloseBtn)},this.dismissPromptOnDismissDialog=function(){this.dismissPrompt(this.select("promptSelector"))},this.onUiShortcutEsc=function(){this.isOpen()&&(this.trigger("uiPromptbirdModalPromptKeyboardDismiss"),this.dismissPromptOnDismissDialog())},this.after("initialize",function(){this.$modalCloseBtn=this.select("closeButtonSelector").clone(!1),this.on(document,"uiShortcutEsc",this.onUiShortcutEsc),this.on(this.$node,"uiDialogClosed",this.dismissPromptOnDismissDialog),this.on("click",{actionSelector:this.close})})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(980),a=s(o),r=i(163),l=s(r);e.default=a.default.mixin(n,l.default)},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({autoSubscribe:!1,allowRegistration:!0,serviceWorkerPath:"/push_service_worker.js",pushCheckinTTL:864e5}),this.subscriptionChangeRequested=function(t,e){var i=this,s=Promise.resolve();if(!this.serviceWorkerRegistration||!this.attr.allowRegistration)return s;var n=!this.subscription&&e.subscribe,o=this.subscription&&!e.subscribe,a=void 0;if(n)a=this.subscribe(this.serviceWorkerRegistration);else if(o){var r=function(){i.subscription=null,i.storeUnregister(),i.trigger("uiBrowserPushUnsubscribe"),i.sendCurrentStatus()};a=this.subscription.unsubscribe().then(r,r)}return a||s},this.showInitialNotification=function(){this.trigger("uiDisplayNativeNotification",{title:"Customize your notifications",body:"Click to visit your settings and choose which web notifications you receive",displayDuration:15e3,click:{eventName:"uiPushSettingsNotificationClicked"}})},this.subscribe=function(t){if(!t||!this.attr.allowRegistration)return Promise.resolve();var e="granted"===this.getNotificationPermission();e?this.trigger("uiBrowserSilentSubscribeAttempt"):this.trigger("uiBrowserPushPromptImpression");var i=f.default.getDecider("allowWebPushVapidUpgrade"),s={userVisibleOnly:!0};return i&&(s.applicationServerKey=v),t.pushManager.subscribe(s).then(this.subscribeSuccess.bind(this,e),this.subscribeFailure.bind(this,e))},this.subscribeSuccess=function(t,e){t?this.trigger("uiBrowserSilentSubscribeSuccess"):this.trigger("uiBrowserPushPromptAllow"),this.subscription=e,this.storeSubscription(this.subscription,!0),this.sendCurrentStatus(),this.showInitialNotification()},this.subscribeFailure=function(t){"denied"===this.getNotificationPermission()?this.trigger("uiBrowserPushPromptDeny"):"default"===this.getNotificationPermission()?this.trigger("uiBrowserPushPromptDismiss"):t?this.trigger("uiBrowserSilentSubscribeError"):this.trigger("uiBrowserPushPromptError")},this.isSupported=function(){var t="PushManager"in window,e="denied"!==this.getNotificationPermission(),i="serviceWorker"in navigator,s=i&&"showNotification"in ServiceWorkerRegistration.prototype;return s&&t&&e&&i},this.isRememberMeOn=function(){return"1"===(0,r.default)("remember_checked_on")},this.supportsVapid=function(){return"PushSubscriptionOptions"in window&&window.PushSubscriptionOptions.prototype.hasOwnProperty("applicationServerKey")},this.serviceWorkerReady=function(t){var e=this;return this.serviceWorkerRegistration=t,this.serviceWorkerRegistration.pushManager.getSubscription().then(function(i){if(!(i||e.isRememberMeOn()&&e.supportsVapid()))return e.supported=!1,e.sendCurrentStatus();e.subscription=i;var s=f.default.getDecider("allowWebPushVapidUpgrade");if("granted"===e.getNotificationPermission()&&!i&&e.attr.autoSubscribe&&e.supportsVapid())e.subscribe(t);else{if(i&&!e.isVapidSubscription(i)&&e.supportsVapid()&&s)return e.subscription.unsubscribe().then(function(){return e.subscribe(t)});e.sendCurrentStatus()}e.storeSubscription(e.subscription)})},this.getNotificationPermission=function(){return"Notification"in window&&Notification.permission},this.isVapidSubscription=function(t){if(!t||!t.options)return!1;var e=new Uint8Array(t.options.applicationServerKey);return 65===e.byteLength&&4===e[0]},this.storeSubscription=function(e,i){var s=this;if(e&&(!this.storage.getItem("isSaved")||i)){var n=o({subscribe:!0,token:e.endpoint,useWebClientId:this.isVapidSubscription(e)},e.toJSON());e.subscriptionId&&e.endpoint.indexOf(e.subscriptionId)===-1&&(n.token=e.endpoint+"/"+e.subscriptionId),this.post({url:"/i/push_destinations",data:n,success:function(){return s.storage.setItem("isSaved",!0,s.attr.pushCheckinTTL)},error:t.noop})}},this.storeUnregister=function(){this.storage.clear(),this.post({url:"/i/push_destinations/destroy",success:t.noop,error:t.noop})},this.sendCurrentStatus=function(){this.trigger("dataPushSubscriptionState",{supported:this.attr.allowRegistration&&this.supported,subscribed:!!this.subscription})},this.navigateToSettings=function(t,e){this.trigger("uiNavigate",{href:"/settings/web_notifications"})},this.after("initialize",function(){var t=this;if(this.serviceWorkerRegistration=null,this.subscription=null,this.on("uiPushSettingsNotificationClicked",this.navigateToSettings),this.supported=this.isSupported(),this.supported){var e=(0,c.default)({withExpiry:!0});this.storage=new e("push_notifications"),this.on("uiWantsPushSubscriptionState",this.sendCurrentStatus),this.on("uiPushSubscriptionChangeRequested",this.subscriptionChangeRequested);var i=navigator.serviceWorker;i.register(this.attr.serviceWorkerPath).then(function(){return i.ready}).then(this.serviceWorkerReady.bind(this)).catch(function(){t.supported=!1,t.sendCurrentStatus()})}else"denied"===this.getNotificationPermission()&&this.trigger("uiBrowserPushPermissionDenied"),this.sendCurrentStatus()})}Object.defineProperty(e,"__esModule",{value:!0});var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},a=i(154),r=s(a),l=i(247),c=s(l),d=i(111),u=s(d),h=i(136),f=s(h),p=i(244),m=s(p),g=i(123),v=(s(g),new Uint8Array([4,94,104,18,141,49,13,74,96,202,82,131,78,91,29,242,150,102,197,0,53,149,230,8,54,38,62,173,43,28,89,130,191,222,213,128,147,62,21,49,187,95,212,194,196,253,140,157,234,34,8,234,143,158,221,15,83,8,222,111,100,204,213,48,75]));e.default=(0,u.default)(n,m.default)}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.after("initialize",function(){this.scribeOnEvent("uiPushPromptShown",{component:"push_manager",element:"soft_prompt",action:"impression"}),this.scribeOnEvent("uiPushPromptClick",{component:"push_manager",element:"soft_prompt",action:"click"}),this.scribeOnEvent("uiPushPromptDismiss",{component:"push_manager",element:"soft_prompt",action:"dismiss"}),this.scribeOnEvent("uiBrowserPushPromptImpression",{component:"push_manager",element:"browser_prompt",action:"impression"}),this.scribeOnEvent("uiBrowserPushPromptAllow",{component:"push_manager",element:"browser_prompt",action:"permissions_granted"}),this.scribeOnEvent("uiBrowserPushPromptDeny",{component:"push_manager",element:"browser_prompt",action:"permissions_denied"}),this.scribeOnEvent("uiBrowserPushPermissionDenied",{component:"push_manager",action:"permissions_denied"}),this.scribeOnEvent("uiBrowserPushPromptDismiss",{component:"push_manager",element:"browser_prompt",action:"dismiss"}),this.scribeOnEvent("uiBrowserPushPromptError",{component:"push_manager",element:"browser_prompt",action:"permissions_error"}),this.scribeOnEvent("uiBrowserPushUnsubscribe",{component:"push_manager",action:"disable"}),this.scribeOnEvent("uiBrowserSilentSubscribeAttempt",{component:"push_manager",element:"silent_subscribe",action:"impression"}),this.scribeOnEvent("uiBrowserSilentSubscribeError",{component:"push_manager",element:"silent_subscribe",action:"error"}),this.scribeOnEvent("uiBrowserSilentSubscribeSuccess",{component:"push_manager",element:"silent_subscribe",action:"success"})})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(142),l=s(r);e.default=(0,a.default)(l.default,n)},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({quickPromoteIframeSelector:".quick-promote-iframe",cancelButtonSelector:".cancel-action",top:47}),this.openDialog=function(e,i){var s=t(e.target),n=s.attr("data-tfb-view");this.select("quickPromoteIframeSelector").attr("src",n),this.open(),this.scribeDialogOpenInteraction(e)},this.closeDialog=function(t,e){this.select("quickPromoteIframeSelector").removeAttr("src style"),this.off(window,"message",this.postMessageHandler)},this.postMessageHandler=function(t){var e=t.originalEvent,i=!1;if(e.origin===window.location.protocol+"//"+window.location.host){if("string"==typeof e.data&&"undefined"!==e.data)try{i=JSON.parse(e.data)}catch(s){}if(i&&i.name&&"quick_promote"===i.name)if("resize"===i.type)this.adjustIframeHeight(e);else if("scribe"===i.type){var n=i.scribeData||{};this.scribeUiInteraction(n.uiEvent,n.data)}else"close"===i.type&&this.close()}},this.scribeDialogOpenInteraction=function(t){this.scribe({component:"tweet",element:"view_tweet_analytics",action:"navigate"})},this.scribeUiInteraction=function(t,e){t=t&&t.toLowerCase();var i=["click","confirm"];i.indexOf(t)>=0&&this.scribe({component:"tweet",element:"quick_promote",action:t})},this.adjustIframeHeight=function(t){var e={iframeSelector:this.attr.quickPromoteIframeSelector,isQualified:function(t){return t.height}};this.fitIframeHeight(t,e)},this.setupMessageListener=function(){this.on(window,"message",this.postMessageHandler)},this.after("initialize",function(){this.on("click",{cancelButtonSelector:this.close}),this.on("uiDialogOpened",this.setupMessageListener),this.on(document,"uiOpenQuickPromoteDialog",this.openDialog),this.on("uiDialogClosed",this.closeDialog),this.on(window,"message",this.postMessageHandler)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(163),l=s(r),c=i(173),d=s(c),u=i(172),h=s(u),f=i(142),p=s(f),m=(0,a.default)(n,l.default,h.default,d.default,p.default);e.default=m}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({reporterUserIdSelector:"#current-user-id",newReportFlowFormSelector:".new-report-flow-form",newReportFlowIframeSelector:"#new-report-flow-frame",newReportFlowNextSelector:".new-report-flow-next-button",newReportFlowNextTextSelector:".next-text",newReportFlowAddTextSelector:".add-text",newReportFlowBackSelector:".new-report-flow-back-button",newReportFlowCloseSelector:".new-report-flow-close-button",newReportFlowDoneSelector:".new-report-flow-done-button"}),this.setUpDialog=function(t,e){this.reset(),this.clientEvent=e.clientEvent||l.default,this.eventData=e,this.setTriggeredTarget(),this.setNewReportFlowContext(),this.showNewReportFlow(),this.open()},this.reset=function(){this.isComplete=!1},this.setTriggeredTarget=function(){this.$node.removeClass("report-moment report-user report-tweet report-dm"),"user"===this.eventData.target?this.$node.addClass("report-user"):"moment"===this.eventData.target?this.$node.addClass("report-moment"):"dm-conversation"===this.eventData.target?this.$node.addClass("report-dm"):this.$node.addClass("report-tweet")},this.buildReportClientContextParams=function(t){var e=this.clientEvent.scribeContext.page,i=this.clientEvent.scribeContext.section||"",s=this.eventData.scribeContext?this.eventData.scribeContext.component||"":"",n=e+":"+i+":"+s;if(t.client_location=n,this.clientEvent.scribeData)switch(this.clientEvent.scribeData.internal_referer&&(t.client_referer=this.clientEvent.scribeData.internal_referer),e){case"profile":t.profile_id=this.clientEvent.scribeData.profile_id||"";break;case"search":this.clientEvent.scribeData.search_details&&(t.search_query=this.clientEvent.scribeData.search_details.query||"",t.search_source=this.clientEvent.scribeData.search_details.query_source||"",t.search_result_filter=this.clientEvent.scribeData.search_details.result_filter||"")}return t},this.buildReportSourceParams=function(t){return this.$node.hasClass("report-user")?t.source="reportprofile":this.$node.hasClass("report-moment")?(t.source="reportmoment",t.is_media="true",t.reported_moment_id=this.eventData.momentId,t.reported_tweet_id=this.eventData.tweetId):this.$node.hasClass("report-dm")?(t.source="reportdmconversation",t.reported_direct_message_conversation_id=this.eventData.reportedDirectMessageConversationId,t.reported_direct_message_id=this.eventData.reportedDirectMessageId,t.reported_user_id=this.eventData.userId,t.reported_user_id||(t.reported_user_id=0)):(t.source="reporttweet",t.reported_moment_id=this.eventData.momentId,t.reported_tweet_id=this.eventData.tweetId,this.eventData.conversationSection&&(t.conversation_section=this.eventData.conversationSection)),t},this.setNewReportFlowContext=function(){var t=this.select("reporterUserIdSelector").val(),e=(!!this.eventData.mediaType).toString(),i=("promoted"===this.eventData.disclosureType).toString(),s={next_view:"report_story_start",reporter_user_id:t,reported_user_id:this.eventData.userId,is_media:e,is_promoted:i},n=this.buildReportSourceParams(s),o="/i/safety/report_story?"+h.default.encode(this.buildReportClientContextParams(n));this.select("newReportFlowIframeSelector").attr("src",o)},this.showNewReportFlow=function(){this.$node.addClass("new-report-flow-dialog"),this.$node.attr("aria-hidden",!1),this.select("newReportFlowBackSelector").hide(),this.select("newReportFlowDoneSelector").hide(),this.select("newReportFlowNextSelector").show(),this.select("newReportFlowNextTextSelector").show(),this.select("newReportFlowAddTextSelector").hide()},this.cancelReport=function(){this.trigger("uiDidCancelReport",this.eventData)},this.completeReport=function(){this.isComplete=!0,this.close()},this.around("close",function(t){this.isOpen()&&!this.isComplete&&this.cancelReport(),this.select("newReportFlowIframeSelector").attr("src",""),t()}),this.newReportFlowFrameNext=function(){this.select("newReportFlowIframeSelector").contents().find("#report_webview_form").submit()},this.newReportFlowFrameBack=function(){this.select("newReportFlowNextTextSelector").show(),this.select("newReportFlowAddTextSelector").hide(),this.select("newReportFlowIframeSelector").get(0).contentWindow.history.back()},this.getIframeLocation=function(){return this.select("newReportFlowIframeSelector").contents().get(0).location},this.checkNewReportFlowContentAndUpdate=function(){var t=this.getIframeLocation(),e=t.href.indexOf("report_story_start")>=0,i=t.href.indexOf("/i/safety/report_story_complete")>=0;if(e)this.select("newReportFlowBackSelector").hide(),this.select("newReportFlowDoneSelector").hide(),this.select("newReportFlowCloseSelector").hide(),this.select("newReportFlowNextTextSelector").show(),this.select("newReportFlowAddTextSelector").hide();else if(i){this.select("newReportFlowBackSelector").hide(),this.select("newReportFlowNextSelector").hide(),this.select("newReportFlowAddTextSelector").hide(),this.select("newReportFlowNextTextSelector").hide(),this.select("newReportFlowDoneSelector").show();var s=t.search.match(/\baction=([^&]+)/),n=void 0;if(this.eventData.userId)n=this.eventData.userId;else{var o=t.search.match(/\breported_user_id=([^&]+)/);n=o[1]}if(null!=s){var a={userId:n,impressionId:this.eventData.impressionId,disclosureType:this.eventData.disclosureType,skipScribe:!0},r=s[1].toLowerCase();if("error"===r)this.select("newReportFlowCloseSelector").show(),this.select("newReportFlowBackSelector").hide(),this.select("newReportFlowDoneSelector").hide();else{var l=void 0;"mute"===r?l="uiDidMuteUser":"block"===r?l="uiBlockAction":"unfollow"===r&&(l="uiUnfollowAction"),void 0!==l&&this.trigger(l,a),this.completeReport()}}}else this.select("newReportFlowBackSelector").show(),this.select("newReportFlowDoneSelector").hide(),this.select("newReportFlowCloseSelector").hide()},this.after("initialize",function(){this.isComplete=!1,this.on(document,"uiNeedsReportDialog",this.setUpDialog);var t=this;this.select("newReportFlowIframeSelector").on("load",function(){return t.checkNewReportFlowContentAndUpdate()}),this.on("click",{newReportFlowNextSelector:this.newReportFlowFrameNext,newReportFlowBackSelector:this.newReportFlowFrameBack,newReportFlowDoneSelector:this.close,newReportFlowCloseSelector:this.close})})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(134),l=s(r),c=i(163),d=s(c),u=i(253),h=s(u),f=(0,a.default)(d.default,n);e.default=f},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({leftDashboardSelector:".dashboard-left",rightDashboardSelector:".dashboard-right",roamingSelector:".roaming-module:not(.roaming-top-module)",roamingTopSelector:".roaming-module.roaming-top-module",dashboardLeftBottomSelector:".dashboard-left-bottom-module",
threeColWidth:1236}),this.setWindowWidth=function(t){if(this.windowWidth=this.$window.width(),this.windowWidth<this.attr.threeColWidth){if(this.threeCol||t){this.$dashboardLeft.prepend(this.$dashboardRight.find(this.attr.roamingTopSelector));var e=this.$dashboardRight.find(this.attr.roamingSelector);this.$dashboardLeftBottomModule.length?this.$dashboardLeftBottomModule.before(e):this.$dashboardLeft.append(e),this.$body.removeClass("three-col"),this.threeCol=!1}}else this.threeCol&&!t||(this.$dashboardRight.prepend(this.$dashboardLeft.find(this.attr.roamingTopSelector)),this.$dashboardRight.append(this.$dashboardLeft.find(this.attr.roamingSelector)),this.$body.addClass("three-col"),this.threeCol=!0)},this.after("initialize",function(){this.$dashboardRight=this.select("rightDashboardSelector"),this.$dashboardRight.length&&(this.$window=t(window),this.$body=t(document.body),this.$dashboardLeft=this.select("leftDashboardSelector"),this.$dashboardLeftBottomModule=this.$dashboardLeft.find(this.attr.dashboardLeftBottomSelector),this.threeCol=!1,this.setWindowWidth(!0),this.on(window,"resize",l.default.debounce(this.setWindowWidth.bind(this),100)))})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(126),l=s(r);e.default=(0,a.default)(n)}).call(e,i(10))},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaults={retweetSelector:".retweet-action",commentBoxSelector:".RetweetDialog-commentBox",tweetBoxSelector:"form.tweet-form",isWithCommentClass:"is-withComment",top:"20%"},this.openRetweet=function(t,e){this.tweetBoxReady||(h.default.attachTo(this.$tweetBox,{condensable:!0,condenseContainer:this.attr.commentBoxSelector,typeaheadData:this.attr.typeaheadData,noTeardown:this.attr.noTeardown,hashflagsEnabled:!0}),this.tweetBoxReady=!0),this.trigger(this.$tweetBox,"uiOverrideTweetBoxOptions",{draftTweetId:"retweet_"+e.tweetId,urlToRetweet:["https://twitter.com",e.screenName,"status",e.id].join("/"),impressionId:e.impressionId,earned:e.disclosureType?"earned"===e.disclosureType:void 0}),this.sourceEventData=e,this.displayTweet(e.id,{modal:"retweet",disableLinks:!0}),this.open()},this.retweet=function(){this.$tweetBox.hasClass(this.attr.isWithCommentClass)||this.trigger("uiDidRetweet",this.sourceEventData)},this.retweetSuccess=function(t,e){void 0!==this.sourceEventData&&(this.trigger("uiDidRetweetSuccess",this.sourceEventData),"uiRetweetWithCommentSuccess"===t.type&&this.trigger("uiDidRetweetWithCommentSuccess",this.sourceEventData)),this.close(),this.sourceEventData=void 0},this.restoreFocusToTweet=function(e){t(e.target).is(this.$dialog)&&this.activeEl&&(e.preventDefault(),this.trigger(t(this.activeEl).closest(".tweet"),"uiShouldAddFocusStyle"),this.activeEl.focus())},this.updateTitle=function(t,e){e&&e.title&&this.select("modalTitleSelector").text(e.title)},this.after("initialize",function(t){this.$tweetBox=this.select("tweetBoxSelector"),this.on("click",{retweetSelector:this.retweet}),this.on(document,"uiOpenRetweetDialog",this.openRetweet),this.on(document,"uiRetweetWithCommentSuccess dataDidRetweet",this.retweetSuccess),this.on(document,"uiDialogRestorePreviousFocus",this.restoreFocusToTweet),this.on("uiDialogUpdateTitle",this.updateTitle)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(163),l=s(r),c=i(182),d=s(c),u=i(1029),h=s(u);e.default=(0,a.default)(n,l.default,d.default)}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({tweetActionSelector:".retweet-action",tweetboxId:"retweet",isWithCommentClass:"is-withComment"}),this.dmRegex=/^\s*(?:d|m|dm)\s+[@＠]?(\S+)\s*(.*)/i,this.createDataForSending=function(){var t={status:this.getVisibleText(),impression_id:this.impressionId,earned:this.earned,attachment_url:this.urlToRetweet};return t},this.isEmpty=function(){return!this.getVisibleText().trim()},this.hasAttachment=function(){return!0},this.sendRetweet=function(){this.detectUpdatedText(),this.isEmpty()||(this.trigger("uiSendTweet",{tweetboxId:this.attr.tweetboxId,tweetData:this.createDataForSending()}),this.$node.addClass("tweeting"),this.disable())},this.updateTweetStateOnTextChanged=function(t){var e=!this.isEmpty();this.maxReached()||this.$node.hasClass("tweeting")||this.getVisibleText().match(this.dmRegex)?this.disable():this.enable(),this.$node.toggleClass(this.attr.isWithCommentClass,e),e?this.trigger("uiDialogUpdateTitle",{title:"Quote Tweet"}):this.trigger("uiDialogRestoreTitle")},this.retweetSent=function(t,e){var i=e.tweetboxId||e.sourceEventData.tweetboxId;i===this.attr.tweetboxId&&(this.trigger("uiShowMessage",{message:"Your Tweet was posted!"}),this.trigger("uiRetweetWithCommentSuccess",e),this.$node.removeClass("tweeting"),this.clear())},this.retweetError=function(t,e){var i=e.tweetboxId||e.sourceEventData.tweetboxId;i===this.attr.tweetboxId&&(this.$node.removeClass("tweeting"),this.enable())},this.enable=function(){this.$tweetButton.removeClass("disabled").prop("disabled",!1)},this.disable=function(){this.$tweetButton.addClass("disabled").prop("disabled",!0)},this.clear=function(){this.reset()},this.reset=function(){this.resetTweetText()},this.resetAndFocus=function(){this.reset(),this.focus()},this.resetTweetText=function(){this.trigger("uiClearUndoState"),this.setVisibleText("")},this.handleCmdEnterSubmit=function(){this.$tweetButton.hasClass("disabled")||this.$tweetButton.click()},this.overrideOptions=function(t,e){this.urlToRetweet=e.urlToRetweet,this.impressionId=e.impressionId,this.earned=e.earned},this.after("initialize",function(){this.$tweetButton=this.select("tweetActionSelector"),this.on("uiTextChanged",this.updateTweetStateOnTextChanged),this.on("uiComposerResetAndFocus",this.resetAndFocus),this.initDraftTweets(),this.initTextNode(),this.on(this.$tweetButton,"click",this.sendRetweet),this.on("uiShortcutCmdEnter",this.handleCmdEnterSubmit),this.on(document,"dataTweetSuccess",this.retweetSent),this.on(document,"dataTweetError",this.retweetError),this.on("uiOverrideTweetBoxOptions",this.overrideOptions),this.reset()})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(123),a=(s(o),i(111)),r=s(a),l=i(1030),c=s(l),d=i(233),u=s(d),h=i(1031),f=s(h),p=i(436),m=s(p),g=i(437),v=s(g),b=i(228),w=s(b),S=i(438),y=s(S),C=i(1032),T=s(C);e.default=(0,r.default)(n,c.default,w.default,y.default,u.default,v.default,f.default,T.default,m.default)},function(t,e,i){(function(t){"use strict";function i(){this.defaultAttrs({condensable:!1,condensedClass:"condensed"}),this.isCondensed=function(){return this.attr.condensable&&this.$node.hasClass(this.attr.condensedClass)},this.canBeCondensed=function(){return this.attr.condensable&&!this.$node.hasClass(this.attr.condensedClass)},this.isWithinContainer=function(e){return t.contains(this.containerElement,e)},this.expand=function(t){var e=this;this.isCondensed()&&(this.$node.removeClass(this.attr.condensedClass),this.trigger("uiTweetBoxExpanded"),void 0!==this.cursorPosition&&setTimeout(function(){return e.setCursorPosition(e.cursorPosition)}),t&&this.trigger("uiComposerResetAndFocus"))},this.getCondensedText=function(){return void 0===this.condensedText&&(this.condensedText=void 0!==this.attr.condensedText?this.attr.condensedText:this.$node.attr("data-condensed-text")||""),this.condensedText},this.condense=function(){this.$node.addClass(this.attr.condensedClass),this.$text.blur(),this.resetTweetText(),this.trigger("uiTweetBoxCondensed")},this.condenseIfNotActive=function(){var t=this;setTimeout(function(){t.canBeCondensed()&&!t.isWithinContainer(document.activeElement)&&(t.detectUpdatedText(),t.trigger("uiHideAutocomplete"),t.isEmpty()&&t.condense())},0)},this.condenseOnMouseDown=function(t){this.canBeCondensed()&&(this.checkCondenseOnMouseUp=!0)},this.condenseOnMouseUp=function(){this.checkCondenseOnMouseUp&&(this.checkCondenseOnMouseUp=!1,this.condenseIfNotActive())},this.condenseOnFocusOut=function(){this.checkCondenseOnMouseUp||this.condenseIfNotActive()},this.expandOnFocusIn=function(){this.expand(!0)},this.around("resetTweetText",function(t){this.isCondensed()?this.setVisibleText(this.getCondensedText()):t()}),this.around("setTweetBoxOverrides",function(t,e,i){t(e,i),this.condensedText=i?i.condensedText:void 0,i&&this.isCondensed()&&this.setVisibleText(this.getCondensedText())}),this.around("isEmpty",function(t){return this.isCondensed()&&this.getVisibleText().trim()===this.getCondensedText().trim()||t()}),this.after("clear",function(){this.canBeCondensed()&&this.condense()}),this.after("initialize",function(){if(this.containerElement=t(this.attr.condenseContainer||this.$node)[0],this.attr.condensable){this.on(this.$text,"focusin",this.ignoreDuringFakeFocus(this.expandOnFocusIn)),this.on(this.containerElement,"focusout",this.ignoreDuringFakeFocus(this.condenseOnFocusOut)),this.on(document,"mousedown",this.condenseOnMouseDown),this.on(document,"mouseup",this.condenseOnMouseUp);var e=this.hasFocus();if(e){var i=this.getVisibleText(),s=this.getCondensedText();s&&!i.indexOf(s)&&this.setVisibleText(i.replace(s,this.defaultText))}!e&&this.isEmpty()||this.expand(!1)}})}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){this.defaultAttrs({draftTweetTTL:864e5}),this.getDraftTweet=function(){return this.draftTweetId&&this.draftTweets().getItem(this.draftTweetId)},this.hasDraftTweet=function(){return!!this.getDraftTweet()},this.saveDraftTweet=function(t,e){if(this.draftTweetId&&this.hasFocus()){var i=e.text.trim();i&&!this.isEmpty(!0)?this.draftTweets().setItem(this.draftTweetId,i,this.attr.draftTweetTTL):this.draftTweets().removeItem(this.draftTweetId)}},this.before("clear",function(){this.draftTweetId&&this.draftTweets().removeItem(this.draftTweetId)}),this.overrideDraftTweetId=function(t,e){var i=e&&e.draftTweetId||this.attr.draftTweetId;this.draftTweetId!==i&&(this.draftTweetId=i,this.resetTweetText())},this.draftTweets=function(){if(!this.draftTweetsStore){var t=(0,o.default)({withExpiry:!0});this.draftTweetsStore=new t("draft_tweets")}return this.draftTweetsStore},this.after("resetTweetText",function(){var t=this.getDraftTweet();t&&(this.setVisibleText(t),this.trigger("uiSaveUndoState"))}),this.initDraftTweets=function(){this.draftTweetId=this.attr.draftTweetId,this.on("uiTextChanged",this.saveDraftTweet),this.on("uiOverrideTweetBoxOptions",this.overrideDraftTweetId)}};var n=i(247),o=s(n)},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.after("initialize",function(){var t=this.attr.typeaheadData;t&&(this.attachChild(l.default,this.$node,{inputSelector:"div.rich-editor, textarea.tweet-box",completeAllEntities:t.hashtags&&t.hashtags.enabled,includeTweetContext:!0,allowAccountsWithoutAtSign:t.fullNameMatchingInCompose,inputIsTweetbox:!0}),this.attachChild(a.default,this.$node,{inputSelector:"div.rich-editor, textarea.tweet-box",blockLinkActions:!0,includeSearchGlass:!1,parseHashflags:!0,typeaheadSrc:"COMPOSE",renderLimit:this.attr.renderLimit,datasourceRenders:[["accounts",["accounts"]],["topics",["hashtags"]]],datasourceOptions:{accountsWithoutAtSignLocalOnly:!0,topicsMustStartWithHashtag:!0},accountsShortcutShow:this.attr.accountsShortcutShow,deciders:t}))})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(414),a=s(o),r=i(429),l=s(r);e.default=n},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.saveSearch=function(t,e){this.post({url:"/i/saved_searches/create.json",data:e,eventData:{scribeComponent:e.scribeComponent,scribeAction:"add"},success:"dataAddedSavedSearch",error:"dataSavedSearchError"})},this.removeSavedSearch=function(t,e){this.post({url:"/i/saved_searches/destroy/"+encodeURIComponent(e.id)+".json",data:"",eventData:{scribeComponent:e.scribeComponent,scribeAction:"remove"},success:"dataRemovedSavedSearch",error:"dataSavedSearchError"})},this.after("initialize",function(){this.on("uiAddSavedSearch",this.saveSearch),this.on("uiRemoveSavedSearch",this.removeSavedSearch)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(244),l=s(r);e.default=(0,a.default)(n,l.default)},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.scribeSavedSearchAction=function(t,e){this.scribe({component:e.sourceEventData.scribeComponent,element:"saved_search",action:e.sourceEventData.scribeAction})},this.after("initialize",function(){this.on("dataAddedSavedSearch dataRemovedSavedSearch",this.scribeSavedSearchAction)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(142),l=s(r);e.default=(0,a.default)(n,l.default)},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({querySourceLinkSelector:"a[data-query-source]",querySourceDataAttr:"data-query-source",storageExpiration:6e4}),this.saveQuerySource=function(t){this.storage.setItem("source",{source:{value:t,expire:Date.now()+this.attr.storageExpiration}},this.attr.storageExpiration)},this.catchLinkClick=function(e,i){var s=t(i.el).attr(this.attr.querySourceDataAttr);s&&this.saveQuerySource(s)},this.saveTypedQuery=function(t,e){"search"===e.source&&this.saveQuerySource("typed_query")},this.after("initialize",function(){var t=(0,l.default)({withExpiry:!0});this.storage=new t("searchQuerySource"),this.on("click",{querySourceLinkSelector:this.catchLinkClick}),this.on("uiSearchQuery",this.saveTypedQuery)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(247),l=s(r);e.default=(0,a.default)(n)}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.handleMessage=function(t){try{var e=JSON.parse(t.data),i=e.event,s=e.data;this.trigger(i,s)}catch(n){}},this.after("initialize",function(){navigator.serviceWorker&&navigator.serviceWorker.addEventListener("message",this.handleMessage.bind(this))})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=(0,a.default)(n);e.default=r},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.smsConfirmationAjaxCall=function(t,e,i){function s(t){t.error?this.trigger("uiAlertBanner",t):this.trigger(i,{message:t.message})}var n=o({user_id:t.userId},t);this.post({url:e,data:n,success:s.bind(this),error:"dataUserActionError"})},this.sendPinAction=function(t,e){var i={phone_number:e.phone_number,country_code:e.country_code};this.smsConfirmationAjaxCall(i,"/i/devices/sms_confirmation_begin","dataSendPinSuccess")},this.resendPinAction=function(t,e){var i={phone_number:e.phone_number,country_code:e.country_code,resend:!0};this.smsConfirmationAjaxCall(i,"/i/devices/sms_confirmation_begin","dataResendPinSuccess")},this.verifyPinAction=function(t,e){var i={numeric_pin:e.numeric_pin,phone_number:e.phone_number,country_code:e.country_code};this.smsConfirmationAjaxCall(i,"/i/devices/sms_confirmation_complete","dataVerifyPinSuccess")},this.after("initialize",function(){this.on(document,"uiSendPinAction",this.sendPinAction),this.on(document,"uiResendPinAction",this.resendPinAction),this.on(document,"uiVerifyPinAction",this.verifyPinAction)})}Object.defineProperty(e,"__esModule",{value:!0});var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},a=i(111),r=s(a),l=i(244),c=s(l),d=(0,r.default)(n,c.default);e.default=d},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({phoneNumberInputModalSelector:"#sms-confirmation-begin-modal",pinVerificationModalSelector:"#sms-confirmation-complete-modal",alertBoxSelector:"#sms-alert-box",alertMessageSelector:"#sms-alert-message",alertBoxCloseSelector:"#sms-alert-close",authenticityTokenSelector:"#authenticity_token",resendCodeSelector:"#resend_code"}),this.setUpDialog=function(t,e){this.reset(),this.open()},this.reset=function(){this.select("pinVerificationModalSelector").hide(),this.select("phoneNumberSelector").val(""),this.savedPhoneNumber="",this.savedCountryCode=""},this.afterOpen=function(){this.position(),this.select("alertBoxSelector").hide()},this.alertBannerHandler=function(t,e){this.showAlert(e.message)},this.showAlert=function(t){this.select("alertBoxSelector").show(),this.select("alertMessageSelector").text(t)},this.hideAlert=function(){this.select("alertBoxSelector").hide(),this.select("alertMessageSelector").text("")},this.sendPinCode=function(t,e){t.preventDefault(),this.callbackIfValidPhoneNumber(function(){var t=this.select("phoneNumberSelector").val(),e=this.select("countryCodeSelector").val();this.savedPhoneNumber=t,this.savedCountryCode=e,this.trigger("uiSendPinAction",{phone_number:t,country_code:e})})},this.resendPinCode=function(){this.trigger("uiResendPinAction",{phone_number:this.savedPhoneNumber,country_code:this.savedCountryCode})},this.verifyPinCode=function(t,e){t.preventDefault();var i=this.stripPin(this.select("pinCodeSelectorRaw").val());return i?void this.trigger("uiVerifyPinAction",{numeric_pin:i,phone_number:this.savedPhoneNumber,country_code:this.savedCountryCode}):void this.showAlert("Incorrect code. Please try again or request a new one.")},this.sendPinSuccess=function(t,e){this.select("phoneNumberInputModalSelector").remove(),this.hideAlert();var i=this.trimSavedPhoneNumber();this.select("pinVerificationModalSelector").find("#phone_number_to_verify").html(i),this.select("pinVerificationModalSelector").show(),this.trigger("uiVerifyPinFormImpression")},this.trimSavedPhoneNumber=function(){var t=/\(*\)*\+*-*#* */g,e=this.savedPhoneNumber.replace(t,"");return this.savedCountryCode+e},this.verifyPinSuccess=function(t,e){this.isCompleted=!0,this.close(),this.trigger("uiShowMessage",{message:"Your account is unlocked."})},this.resendPinSuccess=function(t,e){this.showAlert(e.message)},this.updateSmsConfirmationCountryCode=function(t,e){this.trigger("uiSmsConfirmationCountryChange")},this.phoneNumberInput=function(t,e){this.startedPhoneInput||(this.trigger("uiSmsConfirmationPhoneNumberInput"),this.startedPhoneInput=!0)},this.pinInput=function(t,e){this.startedPinInput||(this.trigger("uiSmsConfirmationPinCodeInput"),this.startedPinInput=!0)},this.around("close",function(t){this.isOpen()&&!this.isCompleted&&this.trigger("uiCancelSmsConfirmationDialog"),t()}),this.after("initialize",function(){this.on(document,"uiNeedsSmsConfirmationDialog",this.setUpDialog),this.on("uiDialogOpened",this.afterOpen),this.on(document,"dataSendPinSuccess",this.sendPinSuccess),this.on(document,"dataResendPinSuccess",this.resendPinSuccess),this.on(document,"dataVerifyPinSuccess",this.verifyPinSuccess);var t=this.attr.show_sms_confirmation_dialog;t&&this.trigger("uiNeedsSmsConfirmationDialog"),this.on("click",{submitRegisterButtonSelector:this.sendPinCode,submitVerifyButtonSelector:this.verifyPinCode,alertBoxCloseSelector:this.clearInvalidPhoneMessage,resendCodeSelector:this.resendPinCode}),this.on("uiAlertBanner",this.alertBannerHandler),this.on("uiAlertBannerClose",this.hideAlert),this.on("submit",{phoneNumberInputModalSelector:this.sendPinCode,pinVerificationModalSelector:this.verifyPinCode}),this.on("change",{countryNameSelector:this.updateSmsConfirmationCountryCode}),this.on("input",{phoneNumberSelector:this.phoneNumberInput,pinCodeSelectorRaw:this.pinInput}),this.startedPhoneInput=!1,this.startedPinInput=!1,this.isCompleted=!1})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(123),l=(s(r),i(163)),c=s(l),d=i(1039),u=s(d),h=(0,a.default)(c.default,u.default,n);e.default=h},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({countryCodeDisplaySelector:"#country_code_display",countryCodeSelector:"#country_code",countryNameSelector:"#device_country_code",phoneNumberSelector:"#phone_number",pinCodeSelector:"#numeric_pin",pinCodeSelectorRaw:"#numeric_pin_raw",submitRegisterButtonSelector:"#send_verification_pin",submitVerifyButtonSelector:"#device_verify"}),this.updateCountryCode=function(t,e){var i=e.value;this.select("countryCodeDisplaySelector").html("+"+i),this.select("countryCodeSelector").val(i),""!==this.select("phoneNumberSelector").val()&&this.callbackIfValidPhoneNumber(this.clearInvalidPhoneMessage)},this.callbackIfValidPhoneNumber=function(t){var e=this.select("countryCodeSelector").val(),i=this.select("phoneNumberSelector").val(),s=this.validatePhoneNumber(e,i);s?t.call(this):this.showInvalidPhoneMessage(e)},this.showInvalidPhoneMessage=function(t){var e="US and Canadian phone numbers must have 11 digits.",i="This appears to be an invalid phone number.",s="1"===t?e:i;s+=" Please enter a valid phone number.",this.trigger("uiAlertBanner",{message:s})},this.clearInvalidPhoneMessage=function(){this.trigger("uiAlertBannerClose")},this.validatePhoneNumber=function(t,e){var i=/\(*\)*\+*-*#* */g,s=e.replace(i,""),n=/^\d{11}$/;return"1"!==t&&(n=/^\d{10,15}$/),n.test(t+s)},this.enableIfValue=function(t){return function(e,i){var s=e.target||e.srcElement;this.select(t).prop("disabled",""===s.value)}},this.stripPin=function(t){return t.replace(/[^a-zA-Z0-9]/g,"")},this.after("initialize",function(){r.default.attachTo(this.attr.countryNameSelector),this.on(this.attr.countryNameSelector,"uiItemSelect",this.updateCountryCode),this.on("input",{phoneNumberSelector:this.enableIfValue("submitRegisterButtonSelector"),pinCodeSelectorRaw:this.enableIfValue("submitVerifyButtonSelector")})})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(123),a=(s(o),i(1040)),r=s(a);e.default=n},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.clickItems=function(t,e){this.trigger("uiItemClick")},this.itemSelect=function(){var t=void 0,e={index:this.node.selectedIndex},i=void 0;if(this.node.selectedIndex>=0){i=this.node.options[this.node.selectedIndex];for(var s=0;s<i.attributes.length;s++)t=i.attributes[s].name,e[t]=i.attributes[s].value;e.text=i.innerHTML}this.trigger("uiItemSelect",e)},this.setItems=function(e,i){var s=this;this.$node.empty(),i.items&&i.items.forEach(function(e){var i=t("<option />");for(var n in e)"text"===n?i.html(e[n]):i.attr(n,e[n]);i.appendTo(s.$node)}),this.itemSelect()},this.after("initialize",function(){this.node.jquery&&(this.node=this.node[0]),this.attr.items&&this.node.trigger("setItems",{items:this.attr.items}),this.on("setItems",this.setItems),this.on("change",this.itemSelect),this.on("mousedown",this.clickItems)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o);e.default=(0,a.default)(n)}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.scribeDialogImpression=function(t,e){this.scribe({component:"sms_confirmation_dialog",action:"impression"},e)},this.scribeCountryChange=function(t,e){this.scribe({component:"sms_confirmation_dialog",element:"mobile_country_code",action:"change"},e)},this.scribePhoneNumberInput=function(t,e){this.scribe({component:"sms_confirmation_dialog",element:"phone_number",action:"change"},e)},this.scribeSendPinClick=function(t,e){this.scribe({component:"sms_confirmation_dialog",element:"activate_mobile",action:"click"},e)},this.scribeVerifyPinFormImpression=function(t,e){this.scribe({component:"sms_confirmation_dialog",element:"verify_pin",action:"impression"},e)},this.scribePinCodeInput=function(t,e){this.scribe({component:"sms_confirmation_dialog",element:"verify_pin",action:"input"},e)},this.scribeVerifyButtonClick=function(t,e){this.scribe({component:"sms_confirmation_dialog",element:"verify_pin",action:"click"},e)},this.scribeResendPinCodeButtonClick=function(t,e){this.scribe({component:"sms_confirmation_dialog",element:"resend_pin",action:"click"},e)},this.scribeDialogCancelClick=function(t,e){this.scribe({component:"sms_confirmation_dialog",action:"cancel"},e)},this.scribeUnlockSuccessImpression=function(t,e){this.scribe({component:"sms_confirmation_dialog",element:"verify_pin",action:"success"},e)},this.after("initialize",function(){this.on("dataVerifyPinSuccess",this.scribeUnlockSuccessImpression),this.on("uiCancelSmsConfirmationDialog",this.scribeDialogCancelClick),this.on("uiNeedsSmsConfirmationDialog",this.scribeDialogImpression),this.on("uiResendPinAction",this.scribeResendPinCodeButtonClick),this.on("uiSendPinAction",this.scribeSendPinClick),this.on("uiSmsConfirmationCountryChange",this.scribeCountryChange),this.on("uiSmsConfirmationPhoneNumberInput",this.scribePhoneNumberInput),this.on("uiSmsConfirmationPinCodeInput",this.scribePinCodeInput),this.on("uiVerifyPinAction",this.scribeVerifyButtonClick),this.on("uiVerifyPinFormImpression",this.scribeVerifyPinFormImpression)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(142),l=s(r);e.default=(0,a.default)(n,l.default)},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({supportedChallengeTypes:["Captcha"],captchaName:"Captcha",defaultCompletionMessage:"Challenge completed.",recaptchaLoadTime:100,maxCaptchaLoadRetries:3}),this.hitChallengeEndpoint=function(t){this.get({url:"/account/challenge",data:{challenge:t.challenge,response:t.response,challenge_name:t.challengeName},success:this.handleSuccessResponse.bind(this),error:this.handleErrorResponse.bind(this)})},this.handleErrorResponse=function(t){this.closeCurrentChallenge(),this.resetChallengeParams()},this.closeCurrentChallenge=function(){this.currentChallenge&&this.trigger("uiCloseSpam"+this.currentChallenge+"Challenge")},this.allChallengesCompleted=function(t){return!t.challengeName},this.isValidChallengeType=function(t){return this.attr.supportedChallengeTypes.indexOf(t.challengeName)!==-1},this.needToRefreshCaptchaChallenge=function(t){return this.currentChallenge===this.attr.captchaName&&t.challengeName===this.attr.captchaName},this.handleSuccessResponse=function(t){this.allChallengesCompleted(t)?(this.closeCurrentChallenge(),this.sendCompletionMessage(),this.resetChallengeParams()):this.needToRefreshCaptchaChallenge(t)?this.trigger("uiRefreshSpamCaptchaChallenge"):this.isValidChallengeType(t)?(this.closeCurrentChallenge(),this.setAndOpenNewChallenge(t)):(this.closeCurrentChallenge(),this.resetChallengeParams())},this.setAndOpenNewChallenge=function(t){this.setChallengeParams(t.challengeName,t.completionMessage),this.trigger("uiOpenSpam"+this.currentChallenge+"Challenge",t)},this.sendCompletionMessage=function(){this.trigger("uiShowMessage",{message:this.getCompletionMessage()})},this.getCompletionMessage=function(){return this.completionMessage||this.attr.defaultCompletionMessage},this.createInitialChallenge=function(t,e){this.needToCreateRecaptchaWidget(e)?this.fetchRecaptchaScript(t,e):this.setAndOpenNewChallenge(e)},this.needToCreateRecaptchaWidget=function(t){return t.challengeName===this.attr.captchaName&&!this.isRecaptchaObjectDefined()},this.isRecaptchaObjectDefined=function(){return"undefined"!=typeof Recaptcha},this.fetchScriptDone=function(t,e,i){"success"===i?this.ensureRecaptchaCreatedAndLoadChallenge(t):this.trigger(document,"uiShowError",{message:"Internal server error."})},this.fetchScriptFailure=function(t,e,i){this.trigger(document,"uiShowError",{message:"Internal server error."})},this.fetchRecaptchaScript=function(e,i){t.getScript(this.attr.recaptchaApiUrl).done(this.fetchScriptDone.bind(this,i)).fail(this.fetchScriptFailure.bind(this))},this.ensureRecaptchaCreatedAndLoadChallenge=function(t){return this.isRecaptchaObjectDefined()?void this.setAndOpenNewChallenge(t):(this.loadAttempts=this.attr.maxCaptchaLoadRetries,void(this.recaptchaLoadInterval=setInterval(this.checkIfRecaptchaCreated.bind(this,t),this.attr.recaptchaLoadTime)))},this.clearRecaptchLoadInterval=function(){clearInterval(this.recaptchaLoadInterval)},this.clearLoadAttempts=function(){this.loadAttempts=void 0},this.isLoadAttemptsDefined=function(){return"undefined"!=typeof this.loadAttempts},this.checkIfRecaptchaCreated=function(t){this.isLoadAttemptsDefined()&&this.loadAttempts--,this.isRecaptchaObjectDefined()&&(this.clearRecaptchLoadInterval(),this.setAndOpenNewChallenge(t),this.clearLoadAttempts()),(!this.isLoadAttemptsDefined()||this.loadAttempts<=0)&&(this.clearRecaptchLoadInterval(),this.clearLoadAttempts(),this.trigger(document,"uiShowError",{message:"Internal server error."}))},this.submitChallenge=function(t,e){this.hitChallengeEndpoint(e)},this.resetChallengeParams=function(){this.setChallengeParams()},this.setChallengeParams=function(t,e){this.currentChallenge=t,this.completionMessage=e},this.after("initialize",function(){this.on("uiSubmitSpamChallenge",this.submitChallenge),this.on("dataInitialChallengeNeeded",this.createInitialChallenge)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(123),l=(s(r),i(244)),c=s(l);e.default=(0,a.default)(n,c.default)}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.scribeSruStats=function(t,e){var i=["stats","sru",e.mediaCategory,e.command,e.status],s={browser:(0,a.default)(),append_byte_size:e.appendByteSize,total_duration_ms:e.totalDuration,total_byte_size:e.totalByteSize};this.scribePerftown(i.join(":"),e.duration,s)},this.after("initialize",function(){h.default.getDecider("web_sru_stats")&&this.on("dataSruStats",this.scribeSruStats)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(156),a=s(o),r=i(111),l=s(r),c=i(216),d=s(c),u=i(136),h=s(u);e.default=(0,l.default)(n,d.default)},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({tcoSelector:".js-display-url",appendTarget:"head"}),this.preconnect=function(e){var i=e.target.parentNode,s=i&&i.href,n=i&&i.getAttribute("data-expanded-url");n&&s&&0===s.indexOf("https://t.co/")&&t('<link rel="preconnect">').attr({href:n}).appendTo(this.attr.appendTarget)},this.after("initialize",function(){this.on("click",{tcoSelector:this.preconnect})})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=(0,a.default)(n);e.default=r}).call(e,i(10))},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({width:590,sourceLangSelector:".TranslationFeedbackDialog-sourceLanguage select",translationInputSelector:".TranslationFeedbackDialog-translationInput",submitSelector:".modal-submit"}),this.openDialog=function(t,e){this.resetDialog(),this.displayTweet(e.tweetId,{modal:"translation_feedback",disableLinks:!0}),this.tweetId=e.tweetId,this.destLang=e.destLang,this.select("sourceLangSelector").val(e.sourceLang),this.setVisibleText(this.unescapeHtml(e.translation)),this.open()},this.resetDialog=function(){this.enableSubmitButton()},this.unescapeHtml=function(e){return t("<div/>").html(e).text()},this.submit=function(){this.disableSubmitButton();var t={id:this.tweetId,source:this.select("sourceLangSelector").val(),dest:this.destLang,translation:this.getVisibleText()};this.trigger("uiSuggestTweetTranslation",t)},this.enableSubmitButton=function(){this.select("submitSelector").prop("disabled",!1)},this.disableSubmitButton=function(){this.select("submitSelector").prop("disabled",!0)},this.isEmpty=function(){return!this.getVisibleText().trim()},this.updateSubmitButton=function(){this.isEmpty()?this.disableSubmitButton():this.enableSubmitButton()},this.translationSubmitted=function(t,e){this.enableSubmitButton(),this.close()},this.submissionError=function(t,e){this.enableSubmitButton(),this.close()},this.after("initialize",function(){this.attr.textSelector=this.attr.translationInputSelector,this.initTextNode(),
this.on(document,"uiNeedsTranslationFeedbackDialog",this.openDialog),this.on(document,"dataTweetTranslationSuggestionSuccess",this.translationSubmitted),this.on(document,"dataTweetTranslationSuggestionError",this.submissionError),this.on("uiTextChanged",this.updateSubmitButton),this.on("click",{submitSelector:this.submit})})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(244),l=s(r),c=i(163),d=s(c),u=i(182),h=s(u),f=i(228),p=s(f);e.default=(0,a.default)(n,d.default,p.default,h.default,l.default)}).call(e,i(10))},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({favoriteSelector:".js-toggle-fav a, .js-actionFavorite",replySelector:".js-actionReply",retweetSelector:".js-toggleRt a:not([aria-disabled=true]), .js-actionRetweet:not(:disabled)",quickPromoteSelector:".js-actionQuickPromote",permalinkSelector:".tweet .js-permalink",tweetItemSelector:".tweet",retweetInlineSelector:".js-actionInlineRetweet",togglableTweetActionsSelector:"a:visible",toggleContainerSelector:".js-toggleState",otherReplyUsersSelector:".js-other-reply-users",anyLoggedInActionSelector:".js-toggleRt a:not([aria-disabled=true]), .js-toggle-fav a, .js-actionReply, .js-actionRetweet, .js-actionFavorite, .js-actionCount",favoritedTweetClass:"favorited",retweetedTweetClass:"retweeted"}),this.handleTransition=function(e,i){return function(s,n){var o=n.id||n.sourceEventData.id,a=(0,d.default)(this.$node,this.attr.tweetItemSelector,o),r=a[0],l=document.activeElement,c=void 0;r&&t.contains(r,l)&&(c=t(l).closest(this.attr.toggleContainerSelector)),a[e](i),c&&c.find(this.attr.togglableTweetActionsSelector).focus()}},this.getDataForReply=function(t){var e=t.closest("[data-semantic-annotation-ids]").attr("data-semantic-annotation-ids"),i=void 0;try{i=JSON.parse(t.attr("data-reply-to-users-json")||"[]")}catch(s){}return Array.isArray(i)||(i=[]),h.default.merge({isReplyLinkClick:!0,replyToUsers:i,retweetId:t.attr("data-retweet-id"),semanticAnnotationIds:e},!0)},this.toggleFavorite=function(t,e,i){var s=i.$tweet.hasClass(this.attr.favoritedTweetClass)?"uiDidUnfavoriteTweet":"uiDidFavoriteTweet";this.trigger(i.$tweet,s,i.tweetData)},this.toggleRetweet=function(t,e,i){var s=i.$tweet.hasClass(this.attr.retweetedTweetClass)?"uiDidUnretweet":"uiOpenRetweetDialog";this.trigger(i.$tweet,s,i.tweetData)},this.uiOpenSignupDialog=function(e,i,s){var n=t(i.el),o=void 0;o=n.is(this.attr.replySelector)?"reply":n.is(this.attr.retweetSelector)?"retweet":n.is(this.attr.favoriteSelector)?"favorite":"default",this.trigger("uiOpenSignupDialog",{screenName:s.tweetData.screenName,action:o})},this.handleLoggedOutFavoriteClick=function(t,e,i){this.trigger("uiLoggedOutActionAttempt",o({},i.tweetData,{action:"favorite_attempt"}))},this.handleLoggedOutRetweetClick=function(t,e,i){this.trigger("uiLoggedOutActionAttempt",o({},i.tweetData,{action:"retweet_attempt"}))},this.handleLoggedOutReplyClick=function(t,e,i){this.trigger("uiLoggedOutActionAttempt",o({},i.tweetData,{action:"reply_attempt"}))},this.otherReplyUsersPopup=function(t,e,i){this.trigger(i.$tweet,"uiRequestActivityPopup",{component:"people_in_conversation_popup",contentId:i.tweetData.tweetId,htmlTitle:"People in this conversation"})},this.after("initialize",function(){var t=this.mkTweetDataCollectorForAction(this.interactionDataWithCard);if(!this.attr.loggedIn)return void this.on("click",{anyLoggedInActionSelector:this.composeHandler(this.preventDefault,this.getClosestTweet,t,this.uiOpenSignupDialog),favoriteSelector:this.composeHandler(this.preventDefault,this.getClosestTweet,t,this.handleLoggedOutFavoriteClick),retweetSelector:this.composeHandler(this.preventDefault,this.getClosestTweet,t,this.handleLoggedOutRetweetClick),replySelector:this.composeHandler(this.preventDefault,this.getClosestTweet,t,this.handleLoggedOutReplyClick)});var e=this.mkTweetDataCollectorForAction(this.interactionDataWithCard,this.getDataForReply);this.on("click",{favoriteSelector:this.composeHandler(this.preventDefault,this.getClosestTweet,t,this.toggleFavorite),retweetSelector:this.composeHandler(this.preventDefault,this.getClosestTweet,t,this.toggleRetweet),replySelector:this.composeHandler(this.preventDefault,this.getClosestTweet,e,this.triggerTweetAction("uiReplyToTweet")),quickPromoteSelector:this.composeHandler(this.preventDefault,this.getClosestTweet,this.triggerTweetAction("uiOpenQuickPromoteDialog")),permalinkSelector:this.composeHandler(this.getClosestTweet,t,this.triggerTweetAction("uiPermalinkClick")),otherReplyUsersSelector:this.composeHandler(this.getClosestTweet,t,this.otherReplyUsersPopup)}),this.on(document,"uiDidFavoriteTweet dataFailedToUnfavoriteTweet",this.handleTransition("addClass",this.attr.favoritedTweetClass)),this.on(document,"uiDidUnfavoriteTweet dataFailedToFavoriteTweet",this.handleTransition("removeClass",this.attr.favoritedTweetClass)),this.on(document,"uiDidRetweet dataFailedToUnretweet",this.handleTransition("addClass",this.attr.retweetedTweetClass)),this.on(document,"uiDidUnretweet dataFailedToRetweet",this.handleTransition("removeClass",this.attr.retweetedTweetClass))})}Object.defineProperty(e,"__esModule",{value:!0});var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},a=i(123),r=(s(a),i(111)),l=s(r),c=i(948),d=s(c),u=i(126),h=s(u),f=i(890),p=s(f),m=i(138),g=s(m),v=i(1047),b=s(v),w=i(1048),S=s(w),y=i(1049),C=s(y),T=(0,l.default)(n,p.default,g.default,b.default,S.default,C.default);e.default=T}).call(e,i(10))},function(t,e){"use strict";function i(){this.before("toggleFavorite",function(t,e,i){return i.tweetData.tweetStatCount=i.$tweet.find(".ProfileTweet-action--favorite .ProfileTweet-actionCount").attr("data-tweet-stat-count")}),this.before("toggleRetweet",function(t,e,i){return i.tweetData.tweetStatCount=i.$tweet.find(".ProfileTweet-action--retweet .ProfileTweet-actionCount").attr("data-tweet-stat-count")})}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i},function(t,e,i){(function(t){"use strict";function i(){this.defaultAttrs({tweetActionContainerSelector:".ProfileTweet-action",animationStateClass:"is-animating",animationTweetSelector:".tweet",animationName:"heart-burst"}),this.getTweetActions=function(t){return t.find(this.attr.tweetActionContainerSelector)},this.isTweetAnimating=function(t){return this.getTweetActions(t).find(this.animationStateClass)},this.cleanupAnimation=function(t){this.isTweetAnimating(t)&&(this.getTweetActions(t).removeClass(this.attr.animationStateClass),this.trigger("uiAnimationEnd"))},this.completeAnimation=function(e){e.originalEvent&&e.originalEvent.animationName===this.attr.animationName&&this.cleanupAnimation(t(e.target).closest(this.attr.animationTweetSelector))},this.unfavoriteHandler=function(e){this.cleanupAnimation(t(e.target))},this.animateAction=function(e,i){this.getTweetActions(t(e.target)).addClass(this.attr.animationStateClass)},this.after("initialize",function(){this.on(document,"uiDidFavoriteTweet",this.animateAction),this.on(document,"uiDidUnfavoriteTweet",this.unfavoriteHandler),this.on("webkitAnimationEnd oanimationend oAnimationEnd msAnimationEnd animationend",{animationTweetSelector:this.completeAnimation})})}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i}).call(e,i(10))},function(t,e,i){(function(t){"use strict";function i(){this.addCancelHoverStyleClass=function(e,i,s){var n=t(e.target).closest(this.attr.tweetItemSelector),o=t(e.target).closest(this.attr.toggleContainerSelector);return"click"!==e.type||n.hasClass(this.attr.favoritedTweetClass)||n.hasClass(this.attr.retweetedTweetClass)?void o.removeClass("is-hoverStateCancelled"):(o.addClass("is-hoverStateCancelled"),void o.one("mouseleave",function(){return o.removeClass("is-hoverStateCancelled")}))},this.after("toggleFavorite",this.addCancelHoverStyleClass),this.after("toggleRetweet",this.addCancelHoverStyleClass)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(t){a.default.attachTo(document,t),l.default.attachTo(document,t),d.default.attachTo(document,t),h.default.attachTo("#global-tweet-dialog",{autoplayDisabled:t.autoplayDisabled,environment:t.environment}),p.default.attachTo("#global-new-tweet-button",{eventData:{scribeContext:{component:"top_bar",element:"tweet_button"}},isGlobalTweetButton:!0,defaultText:t.query,cursorPosition:t.query?0:void 0}),g.default.attachTo(document,t),b.default.attachTo(document,t)}Object.defineProperty(e,"__esModule",{value:!0});var o=i(1051),a=s(o),r=i(1052),l=s(r),c=i(1053),d=s(c),u=i(1058),h=s(u),f=i(1061),p=s(f),m=i(1062),g=s(m),v=i(1063),b=s(v);e.default=n},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({noShowError:!0,profileSearchThrottle:35}),this.isInState=function(t){return t.split(" ").indexOf(this.state)>=0},this.isEnabled=function(t){return!this.isInState("disabled enabling enableIsUnavailable")},this.setInitialState=function(){this.attr.geoEnabled?this.state="1"===p.webclientCookie()?"enabledTurnedOn":"enabledTurnedOff":this.state="disabled"},this.requestState=function(t,e){this.shouldLocate()?this.locate():this.sendState(this.state)},this.shouldLocate=function(){return this.isInState("enabledTurnedOn locateIsUnavailable")||this.isInState("located locationUnknown")&&(!this.lastLocationTime||this.now()-this.lastLocationTime>m)},this.locate=function(t){var e=this;this.sendState(t?"changing":"locating");var i=function(t){return e.sendState(e.locateOrEnableState(t)||"locateIsUnavailable")},s=function(){return e.sendState("locateIsUnavailable")},n={override_place_id:t};this.post({url:"/account/geo_locate",data:n,echoParams:{spoof_ip:!0},eventData:n,success:i,error:s})},this.locateOrEnableState=function(t){switch(t.status){case"ok":return this.place_id=t.place_id,this.place_name=t.place_name,this.places_html=t.html,this.lastLocationTime=this.now(),"located";case"unknown":return this.lastLocationTime=this.now(),"locationUnknown"}},this.now=function(){return(new Date).getTime()},this.sendState=function(t){t&&(this.state=t);var e={state:this.state};"located"===this.state&&(e.place_id=this.place_id,e.place_name=this.place_name,e.places_html=this.places_html),this.trigger("dataGeoState",e)},this.turnOn=function(){this.isEnabled()&&(p.webclientCookie("1"),this.locate())},this.turnOff=function(){this.isEnabled()&&(p.webclientCookie(null),this.sendState("enabledTurnedOff"))},this.enable=function(t,e){var i=this;if(this.isInState("disabled enableIsUnavailable")){this.sendState("enabling");var s=function(t){p.webclientCookie("1"),i.sendState(i.locateOrEnableState(t)||"enableIsUnavailable")},n=function(){return i.sendState("enableIsUnavailable")};this.post({url:"/account/geo_locate",data:{enable:"1"},echoParams:{spoof_ip:!0},eventData:e,success:s,error:n})}},this.change=function(t,e){this.isEnabled()&&this.locate(e.placeId)},this.search=function(t,e){var i=this;if(this.searching)return void(this.pendingSearchData=e);this.pendingSearchData=null;var s=function(){if(i.searching=!1,i.pendingSearchData)return i.search(t,i.pendingSearchData),!0},n=e.query.trim(),a=[n,e.placeId,e.isPrefix].join(","),r=function(t){i.searchCache[a]=t,t=o({},t,{sourceEventData:e}),s()||i.trigger("dataGeoSearchResults",t)},l=function(){s()||i.trigger("dataGeoSearchResultsUnavailable")};if(!n)return void r({html:""});var c=this.searchCache[a];return c?void r(c):(this.searching=!0,void this.get({url:"/account/geo_search",data:{query:n,place_id:e.placeId,is_prefix:e.isPrefix?"1":"0"},eventData:e,success:r,error:l}))},this.profileSearch=function(t,e){var i=this,s=e.query.trim(),n=s,a=function(t){i.profileSearchCache[n]=t,t=o({},t,{sourceEventData:e}),i.trigger("dataProfileGeoSearchResults",t)},r=this.profileSearchCache[n];return r?void a(r):void this.get({url:"/account/geo_profile",data:{query:s},eventData:e,success:a,error:"dataProfileGeoSearchResultsUnavailable"})},this.requestDefaultProfileLocations=function(t,e){this.get({url:"/account/geo_profile",eventData:e,success:"dataDefaultProfileLocations",error:"dataProfileGeoSearchResultsUnavailable"})},this.after("initialize",function(){this.searchCache={},this.profileSearchCache={},this.setInitialState(),this.on("uiRequestGeoState",this.requestState),this.on("uiGeoPickerEnable",this.enable),this.on("uiGeoPickerTurnOn",this.turnOn),this.on("uiGeoPickerTurnOff",this.turnOff),this.on("uiGeoPickerChange",this.change),this.on("uiGeoPickerSearch",this.search),this.on("uiRequestDefaultProfileLocations",this.requestDefaultProfileLocations),this.on("uiGeoProfileSearch",c.default.throttle(this.profileSearch.bind(this),this.attr.profileSearchThrottle))})}Object.defineProperty(e,"__esModule",{value:!0});var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},a=i(111),r=s(a),l=i(126),c=s(l),d=i(154),u=s(d),h=i(244),f=s(h),p=(0,r.default)(n,f.default),m=9e5;e.default=p,p.webclientCookie=function(t){return void 0===t?(0,u.default)("geo_webclient"):(0,u.default)("geo_webclient",t,{expires:3650,path:"/"})}},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({noShowError:!0,defaultCategory:"trending"}),this.updateFetchMoreParameters=function(t,e){this.fetchingMore=!1,this.fetchMoreParameters.url=t.url,this.fetchMoreParameters.data={cursor:e.cursor,y:e.y||0},t.data&&t.data.q&&(this.fetchMoreParameters.data.q=t.data.q)},this.fetchCategories=function(t){var e=this;this.fetchMoreParameters={},this.get({retryIfUnavailable:!0,url:"/i/found_media/categories",success:function(i){i.error?e.error(t):e.trigger(t.target,"dataFoundMediaCategories",i)},error:function(){return e.error(t)}})},this.fetchCategoryItems=function(t,e){var i=this,s=e&&e.categoryName||this.attr.defaultCategory,n={retryIfUnavailable:!0,url:"/i/found_media/category_items?category="+s,success:function(e){e.error?i.error(t):(i.updateFetchMoreParameters(n,e),i.fetchMoreParametersCategory[s]=o({},i.fetchMoreParameters),i.successCategoryItems(t,e))},error:function(){return i.error(t)}};this.get(n)},this.successCategoryItems=function(t,e){this.trigger(t.target,"dataFoundMediaCategoryItems",e)},this.error=function(t){this.trigger(t.target,"dataFoundMediaError")},this.dispatchPendingSearch=function(t){var e=!1;return this.pendingSearchData&&(this.search(t,this.pendingSearchData),e=!0),e},this.search=function(t,e){var i=this;if(this.searching)return void(this.pendingSearchData=e);this.pendingSearchData=null;var s=e.query.trim();if(!s)return this.fetchMoreParameters.data&&this.fetchMoreParameters.data.q?this.fetchMoreParameters=o({},this.fetchMoreParametersCategory.trending):this.fetchMoreParameters={},void this.trigger(t.target,"dataFoundMediaSearchClear");var n=s,a={retryIfUnavailable:!0,url:"/i/found_media/search",data:{q:s},eventData:e,success:function(s){s.error?i.searchError(t):(i.updateFetchMoreParameters(a,s),i.searchSuccess(t,n,e,s))},error:function(){return i.searchError(t)}},r=this.searchCache[n];return r?void a.success(r):(this.searching=!0,void this.get(a))},this.searchSuccess=function(t,e,i,s){this.searching=!1,this.searchCache[e]=s,s=o({},s,{sourceEventData:i}),this.dispatchPendingSearch(t)||this.trigger(t.target,"dataFoundMediaSearchResults",s)},this.searchError=function(t){this.searching=!1,this.dispatchPendingSearch(t)||this.trigger(t.target,"dataFoundMediaSearchResultsUnavailable")},this.isRequestUpToDate=function(t){return t.url===this.fetchMoreParameters.url&&this.fetchMoreParameters.data.q===t.data.q},this.fetchMore=function(t){var e=this;if(!this.fetchingMore&&!this.searching&&this.fetchMoreParameters.data&&"string"==typeof this.fetchMoreParameters.data.cursor){this.fetchingMore=!0;var i=o({success:function(s){e.isRequestUpToDate(i)&&(s.error?e.fetchMoreError(t,i):(e.updateFetchMoreParameters(i,s),e.fetchMoreSuccess(t,i,s)))},error:function(){e.isRequestUpToDate(i)&&e.fetchMoreError(t,i)}},this.fetchMoreParameters);this.isRequestUpToDate(i)&&this.get(i)}},this.fetchMoreSuccess=function(t,e,i){this.fetchingMore=!1,this.trigger(t.target,"dataFoundMediaFetchMoreResults",i)},this.fetchMoreError=function(t,e){this.fetchingMore=!1,this.trigger(t.target,"dataFoundMediaFetchMoreUnavailable")},this.getFileDataForMedia=function(t,e){var i="file.gif",s={sourceUrl:e.url,attribution:e.attribution,detailsUrl:e.detailsUrl,foundMediaOrigin:e.origin,mediaCategoryPrefix:e.mediaCategoryPrefix};return c.default.getFileInfo(i,t,s)},this.notifyGotFileData=function(t,e){this.trigger(t,"dataImageAttachBinaryData",{fileId:e.fileId})},this.gotBlob=function(t,e,i){this.getFileDataForMedia(i,e).then(this.notifyGotFileData.bind(this,t))},this.failedToGetBlob=function(t){this.trigger(t,"dataImageAttachFailed")},this.attachImageUrl=function(t,e){var i=t.target,s=this.gotBlob.bind(this,i,e),n=this.failedToGetBlob.bind(this,i);c.default.fetchAsBlob(e.url).then(s,n)},this.after("initialize",function(){this.fetchMoreParametersCategory={},this.fetchMoreParameters={},this.searchCache={},this.on("uiRequestFoundMediaTrending uiRequestFoundMediaCategoryItems",this.fetchCategoryItems),this.on("uiRequestFoundMediaCategories",this.fetchCategories),this.on("uiFoundMediaSearch",this.search),this.on("uiFoundMediaFetchMore",this.fetchMore),this.on("uiAttachImageUrl",this.attachImageUrl)})}Object.defineProperty(e,"__esModule",{value:!0});var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},a=i(111),r=s(a),l=i(393),c=s(l),d=i(244),u=s(d);e.default=(0,r.default)(n,u.default)},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.IFRAME_TIMEOUT=12e4,this.defaultAttrs({includePageContext:!0,liveVideoEventId:void 0}),this.sendTweet=function(t,e){var i=e.tweetboxId,s=function(t){t.tweetboxId=i,t.tweetData=e.tweetData,this.trigger("dataTweetSuccess",t),this.trigger("dataGotProfileStats",{stats:t.profile_stats}),t.tweet_stats&&this.trigger("dataGotTweetStats",{stats:t.tweet_stats})},n=function(t){var e=void 0;try{e={message:t.message,spamChallenge:t.challengeName}}catch(s){e={error:"Sorry! We did something wrong."}}e.tweetboxId=i,this.trigger("dataTweetError",e)},o=this.attr.liveVideoEventId?{liveVideoEventId:this.attr.liveVideoEventId}:{},a=p.default.merge(e.tweetData,o);this.post({url:"/i/tweet/create",isMutation:!1,data:a,success:s.bind(this),error:n.bind(this),retryIfUnavailable:!0})},this.sendTweetWithMedia=function(t,e){var i=this,s=e.tweetboxId,n=e.tweetData,o=(0,d.default)(s),a=function(e){n.media_ids=e.join(","),i.sendTweet(t,{tweetboxId:s,tweetData:n})},r=function(t){return i.trigger(t.cancelled?"dataTweetCancel":"dataTweetError",{message:t.message,tweetboxId:s})};return this.collectMediaItems(o).then(a,r)},this.normalizeError=function(t){throw t="object"===("undefined"==typeof t?"undefined":o(t))?t:{message:t}},this.collectMediaItems=function(t){var e=this;return Promise.all(t.map(function(t){return e.mediaSruFinalize(t).then(function(i){return e.uploadMetadata(i,t).then(void 0,e.normalizeError)},e.normalizeError)}))},this.sendTweetWithCard=function(t,e){var i=this,s=void 0;if(void 0===e.cardData)return this.trigger("dataTweetError",{tweetboxId:s,message:e.clientErrorMsg}),Promise.reject();s=e.tweetboxId;var n=function(n){var o=e.tweetData;o.card_uri=n,i.sendTweet(t,{tweetboxId:s,tweetData:o})},o=function(){return i.trigger("dataTweetError",{tweetboxId:s,message:e.serverErrorMsg})};return this.createCard(e.cardData).then(n,o)},this.sendDirectMessage=function(t,e){this.trigger("dataDirectMessageSuccess",e)},this.after("initialize",function(){this.attachChild(h.default,document),this.on("uiSendTweet",this.sendTweet),this.on("uiSendTweetWithMedia",this.sendTweetWithMedia),this.on("uiSendTweetWithCard",this.sendTweetWithCard),this.on("uiSendDirectMessage",this.sendDirectMessage)})}Object.defineProperty(e,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=i(123),r=(s(a),i(111)),l=s(r),c=i(392),d=s(c),u=i(1054),h=s(u),f=i(126),p=s(f),m=i(351),g=s(m),v=i(1056),b=s(v),w=i(244),S=s(w),y=i(1057),C=s(y),T=i(860),D=s(T),M=i(231),I=s(M),P=(0,l.default)(n,g.default,S.default,D.default,I.default,b.default,C.default);e.default=P},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.createUpload=function(t){return new d.default(t)},this.stats=function(t){this.trigger("dataSruStats",{mediaCategory:t.mediaType.replace("image/gif","gif").replace(/\/.*/,""),command:t.command.toLowerCase(),appendByteSize:t.appendByteSize,status:t.status,duration:t.duration,totalDuration:t.totalDuration,totalByteSize:t.totalByteSize})},this.dataToExtraInitParams=function(t){return h.default.getDecider("sruMediaCategory")&&t.mediaCategory&&"&media_category="+encodeURIComponent(t.mediaCategory)||null},this.init=function(t,e){var i=e.uploadId,s=this.uploads[i],n=l.default.get(e.fileId),o={extraInitParams:this.dataToExtraInitParams(e),pauseBeforeFinalize:!0,stats:this.stats.bind(this),sourceUrl:e.sourceUrl,mediaType:e.mediaType};!s&&n&&(s=this.createUpload(n.fileHandle),this.uploads[i]=s),s.upload(o)},this.finalize=function(t,e){var i=this,s=e.uploadId,n=this.uploads[s];n?n.upload({extraInitParams:this.dataToExtraInitParams(e),success:function(t){return i.trigger("dataMediaSruSuccess",{uploadId:s,mediaId:t,percent:100})},progress:function(t,e){return i.trigger("dataMediaSruProgress",{uploadId:s,percent:t,mode:e})},error:function(t){return i.trigger("dataMediaSruError",{uploadId:s,error:t})},trimRanges:e.trimRange,stats:this.stats.bind(this),sourceUrl:e.sourceUrl,mediaType:e.mediaType}):this.trigger("dataMediaSruError",e)},this.cancelOrComplete=function(t,e){var i=this.uploads[e];i&&(i.cancel(),delete this.uploads[e],this.trigger(t,{uploadId:e}))},this.complete=function(t,e){this.cancelOrComplete("dataMediaSruComplete",e.uploadId)},this.cancel=function(t,e){this.cancelOrComplete("dataMediaSruCancel",e.uploadId)},this.after("initialize",function(){this.uploads={},this.on(document,"uiMediaSruInit",this.init),this.on(document,"uiMediaSruFinalize",this.finalize),this.on(document,"uiMediaSruCancel",this.cancel),this.on(document,"uiMediaSruComplete",this.complete)}),this.after("teardown",function(){var t=this;Object.keys(this.uploads).forEach(function(e){return t.uploads[e].cancel()})})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(224),l=s(r),c=i(1055),d=s(c),u=i(136),h=s(u);e.default=(0,a.default)(n)},function(t,e,i){var s;s=function(){var t=0,e=1,i=2,s=3,n=4,o=2147483647,a=5242880,r=65536,l=1e3,c=1,d=45e3,u=2e3,h="https://upload.twitter.com/i/media/upload.json",f={FILE_TOO_LARGE:2,INTERNAL_ERROR:131,INVALID_MEDIA:1,RATE_LIMIT:88,TIMEOUT:67,UNSUPPORTED_MEDIA:3,ZERO_FILE_LENGTH:4},p={0:f.INTERNAL_ERROR,1:f.INVALID_MEDIA,2:f.FILE_TOO_LARGE,3:f.UNSUPPORTED_MEDIA,4:f.TIMEOUT};return function(m,g){function v(){S(),L=t,U=null,j={},G=q,W=0,H=0,X=!1,K&&(K.abort(),K=null)}function b(){if($){Y="uploading";var t="&total_bytes="+$+"&media_type="+encodeURIComponent(V);j.extraInitParams&&(t+=j.extraInitParams),N("POST","INIT",t,null,w,A,c)}else A({error:{code:f.ZERO_FILE_LENGTH}})}function w(t){L===e&&(U=t.media_id_string,y(t.expires_after_secs),C())}function S(){Q&&(clearTimeout(Q),Q=null)}function y(t){if(t){S();var e=Math.min(o,1e3*t);Q=setTimeout(function(){A({error:{code:f.TIMEOUT}}),F("NONE","timeout"),v()},e)}}function C(){if(H===$)D();else{z=Math.min(G,$-H);var t=m.webkitSlice||m.mozSlice||m.slice,e=t.call(m,H,H+z),i=new FormData;i.append("media",e);var s="&media_id="+U+"&segment_index="+W;N("POST","APPEND",s,i,T,A,c)}}function T(){L===e&&(W++,H+=z,O(E()),C())}function D(){if(j.pauseBeforeFinalize)L=i;else{X=!0;var t="&media_id="+U;j.trimRanges&&(t+="&trim_ranges="+encodeURIComponent(j.trimRanges)),/^video\//.test(V)&&(t+="&allow_async=true"),t+=j.extraFinalizeParams||"",N("POST","FINALIZE",t,null,P,A,c)}}function M(){Y="uploading";var t="&source_url="+encodeURIComponent(j.sourceUrl);j.mediaType&&(t+="&media_type="+encodeURIComponent(j.mediaType)),j.mediaCategory&&(t+="&media_category="+encodeURIComponent(j.mediaCategory)),t+=j.extraInitParams||"",t+=j.extraFinalizeParams||"",N("POST","INIT",t,null,I,A,c)}function I(t){U=t.media_id_string,x()}function P(t){y(t.expires_after_secs);var e=t.processing_info,i=0;if(!e)return void k(t);switch(e.state){case"pending":Y="waiting";break;case"in_progress":Y="processing",i=e.progress_percent;break;case"succeeded":return void k(t);case"failed":var s=e.error||{};return s.code=p[s.code]||f.INTERNAL_ERROR,void A({error:s});default:return void A(t)}O(i,U),setTimeout(x,1e3*e.check_after_secs)}function x(){if(L===e){var t="&media_id="+U;N("GET","STATUS",t,null,P,A,c)}}function k(t){L===e&&(L=s,R())}function A(t){L===e&&(B=t&&t.error&&t.error.code?t.error:{code:f.INTERNAL_ERROR},L=n,R())}function E(){return $?100*H/$:0}function O(t,e){L!==n&&j.progress&&j.progress(t,Y,e)}function R(){L===s&&j.success&&j.success(U),L===n&&j.error&&j.error(B)}function F(t,e){if(j.stats){var i={mediaType:V,command:t,status:e,duration:new Date-J,totalByteSize:$,totalDuration:new Date-Z};"APPEND"===t&&(i.appendByteSize=z),j.stats(i)}}function N(t,e,i,s,n,o,r){function l(){if(K.status>=200&&K.status<400){var t=m();204===K.status||t?(F(e,"success"),p(),n(t||{})):c("parsererror")}else K.status&&503!==K.status?h():c()}function c(a){r?N(t,e,i,s,n,o,r-1):h(a)}function h(t){F(e,t||"error"),o(m()||{})}function f(){z=q,c("timeout")}function p(){if(s){var t=Math.max(1,new Date-J);G=Math.max(q,Math.min(a,Math.round(u*z/t)))}}function m(){try{return JSON.parse(K.responseText)}catch(t){return null}}var g=et+"?command="+e+i;J=new Date,K=new XMLHttpRequest,K.open(t,g,!0),K.withCredentials=!0,K.timeout=d,K.onload=l,K.onerror=function(){c()},K.ontimeout=f;for(var v in tt)K.setRequestHeader(v,tt[v]);s?K.send(s):K.send()}m=m||{},g=g||{};var U=void 0,j=void 0,L=void 0,B=void 0,$=m.size||0,V=m.type,q=Math.max(Math.ceil($/l),r),H=void 0,z=void 0,G=void 0,W=void 0,Q=void 0,K=void 0,Y=void 0,X=void 0,J=void 0,Z=new Date,tt=g.sruHeaders||{},et=g.uploadUrl||h;v(),this.upload=function(t){t=t||{},(X&&(j.trimRanges!==t.trimRanges||j.extraFinalizeParams!==t.extraFinalizeParams)||j.extraInitParams!==t.extraInitParams||j.sourceUrl!==t.sourceUrl||j.mediaCategory!==t.mediaCategory||j.mediaType!==t.mediaType)&&v(),j=t,L!==s&&L!==e&&(L=e,j.sourceUrl?M():X?D():U?C():b()),R(),O(E())},this.cancel=function(){v()},this.pollStatusOfExistingMediaId=function(t,i){U=t,j=i||{},L=e,x()}}}.call(e,i,e,t),!(void 0!==s&&(t.exports=s))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){var t="/i/cards/create/v1",e=3e4;a.default.mixin(this,[l.default]),this._buildData=function(t,e){var i={card_data:JSON.stringify(t)};return void 0!==e&&(i.guid=e),i},this.createCard=function(i,s){var n=this;return new Promise(function(o,a){var r={url:t,data:n._buildData(i,s),isMutation:!1,dataType:"json",timeout:e,retryIfUnavailable:!0};n.post(r).done(function(t){return o(t.card_uri)}).fail(function(){return a()})})}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(121),a=s(o),r=i(244),l=s(r);e.default=n},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(t){var e=t.altText?{alt_text:{text:t.altText}}:{},i=t.foundMediaOrigin?{found_media_origin:t.foundMediaOrigin}:{};return a({},e,i)}function o(){this.uploadMetadata=function(t,e){var i=n(e);return new Promise(function(e,s){if(i&&"{}"!==JSON.stringify(i)){var n=new XMLHttpRequest;n.open("POST",l,!0),n.withCredentials=!0,n.timeout=c,n.onload=function(){n.status>=200&&n.status<400?e(t):s(d)},n.ontimeout=n.onerror=function(){s(d)},n.send(JSON.stringify(a({media_id:t},i)))}else e(t)})}}Object.defineProperty(e,"__esModule",{value:!0});var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},r=i(123),l=(s(r),"https://upload.twitter.com/i/media/metadata/create.json"),c=4e3,d="Uploading media metadata failed! Please try again later.";e.default=o},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({disableKeyboardShortcuts:!0,globalTweetBoxDialogSelector:"#global-tweet-dialog",globalTweetBoxSelector:"#global-tweet-dialog form.tweet-form",top:"20%"}),this.openReply=function(t,e){this.displayTweet(e.retweetId||e.id,{modal:"reply"});var i={};i.htmlTitle=p.default.render({in_reply_to_user:e.replyToUsers[0]}),e.semanticAnnotationIds&&(i.semanticAnnotationIds=e.semanticAnnotationIds),this.openTweetDialog(t,o({},e,i))},this.openTweetDialog=function(e,i){var s=t(this.attr.globalTweetBoxSelector),n=void 0;if(i&&i.htmlTitle?this.setHtmlTitle(i.htmlTitle):this.setTitle(i&&i.title||"Compose new Tweet"),this.tweetBoxReady||(n={autoplayDisabled:this.attr.autoplayDisabled,eventData:{scribeContext:{component:"tweet_box_dialog"}},thumbnailSize:"large",environment:this.attr.environment,videoSupport:!0,tweetBoxDialogSelector:this.attr.globalTweetBoxDialogSelector},this.trigger(s,"uiInitTweetbox",n),this.tweetBoxReady=!0),i){if(!i.id){var o=null;i.screenNames?o=i.screenNames:i.screenName&&(o=[i.screenName]),o&&(i.defaultText="@"+o.join(" @")+" ")}i.text&&(i.defaultText=" "+i.text),this.trigger(s,"uiOverrideTweetBoxOptions",i)}this.open(),this.trigger(s,"uiComposerResetAndFocus")},this.preventDefaultDialogFocus=function(t){this.isOpen()&&this.$dialog.is(t.target)&&t.preventDefault()},this.after("initialize",function(){this.on(document,"uiDialogInitialFocus",this.preventDefaultDialogFocus),this.on(document,"uiOpenTweetDialog",this.openTweetDialog),this.on(document,"uiOpenReplyDialog",this.openReply),this.on("uiTweetSent",this.close),this.on("uiDialogClosed",this.removeTweet)})}Object.defineProperty(e,"__esModule",{value:!0});var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},a=i(111),r=s(a),l=i(163),c=s(l),d=i(182),u=s(d),h=i(123),f=(s(h),i(1059)),p=s(f),m=(0,r.default)(n,c.default,u.default);e.default=m}).call(e,i(10))},function(t,e,i){(function(e){function s(t,e,i){e=e||{};for(var s in a)e[s]||(e[s]=a[s]);return r.render(t,e,i)}var n=i(220).default,o={emojified_name:i(1060)},a=n(o),r=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b("Reply to "),s.s(s.f("in_reply_to_user",t,e,1),t,e,0,30,49,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(i.rp("<emojified_name0",t,e,""))}),t.pop()),s.fl()},partials:{"<emojified_name0":{name:"emojified_name",partials:{},subs:{}}},subs:{}});t.exports={template:r,partials:a,render:s}}).call(e,i(1))},function(t,e,i){(function(e){function s(t,e,i){e=e||{};for(var s in a)e[s]||(e[s]=a[s]);return r.render(t,e,i)}var n=i(220).default,o={emojified_text:i(369)},a=n(o),r=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.s(s.f("emojified_name",t,e,1),t,e,0,19,38,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(i.rp("<emojified_text0",t,e,""))}),t.pop()),s.fl()},partials:{"<emojified_text0":{name:"emojified_text",partials:{},subs:{}}},subs:{}});t.exports={template:r,partials:a,render:s}}).call(e,i(1))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({draftTweetIdAttr:"draft-tweet-id",dialogTitleAttr:"dialog-title",cursorPositionAttr:"cursor-position",cursorPosition:void 0,canTweetDefaultTextAttr:"can-tweet-default-text",
defaultTextAttr:"default-text",defaultText:void 0,isGlobalTweetButton:!1}),this.openTweetDialog=function(){this.scribe({element:"tweet_button",action:"click"},this.attr.eventData),this.trigger("uiOpenTweetDialog",this.tweetDialogData())},this.tweetDialogData=function(){return{draftTweetId:this.$node.data(this.attr.draftTweetIdAttr)||"global",screenName:d.default.getScreenName(this.$node),canTweetDefaultText:this.$node.data(this.attr.canTweetDefaultTextAttr),cursorPosition:void 0!==this.attr.cursorPosition?this.attr.cursorPosition:this.$node.data(this.attr.cursorPositionAttr),title:this.$node.data(this.attr.dialogTitleAttr),text:void 0!==this.attr.defaultText?this.attr.defaultText:this.$node.data(this.attr.defaultTextAttr)}},this.after("initialize",function(){this.on("click",this.openTweetDialog),this.attr.isGlobalTweetButton&&this.on(document,"uiShortcutShowTweetbox",this.openTweetDialog)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(142),l=s(r),c=i(889),d=s(c);e.default=(0,a.default)(n,l.default)},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){var t={tweet_box:{uiTweetboxTweetError:"failure",uiTweetboxTweetSuccess:"send_tweet",uiTweetboxGeotaggedTweetSuccess:"send_geotagged_tweet",uiTweetboxPhotoTweetSuccess:"send_photo_tweet",uiTweetboxPhotoTweetWithAltTextSuccess:"send_photo_tweet_with_alt_text",uiTweetboxPhotoTweetWithoutAltTextSuccess:"send_photo_tweet_without_alt_text",uiTweetboxPollTweetSuccess:"send_poll_tweet",uiTweetboxVideoTweetSuccess:"send_video_tweet",uiTweetboxProVideoTweetSuccess:"send_pro_video_tweet",uiTweetboxReplySuccess:"send_reply",uiTweetboxReplyEditedSuccess:"send_reply_edited",uiTweetboxEmojiTweetSuccess:"send_emoji_tweet",uiTweetboxDMSuccess:"send_dm",uiOpenTweetDialog:"compose_tweet"},local:{uiTweetboxLocalGifTweetSuccess:"send_gif_tweet"},remote:{uiTweetboxRemoteGifTweetSuccess:"send_gif_tweet"},image_picker:{uiImagePickerClick:"click",uiImagePickerAdd:"add",uiImagePickerRemove:"remove",uiImagePickerError:"error",uiImagePickerNoFileReaderError:"no_file_reader",uiImagePickerSelectedFlash:"selected_flash",uiDrop:"drag_and_drop",uiDropMany:"drag_and_drop_many",uiVideoPickerAdd:"add_video",uiVideoPickerProAdd:"add_pro_video"},found_media_category:{uiFoundMediaCategoryImpression:"impression",uiFoundMediaCategorySelect:"select",uiFoundMediaCategoryAdd:"add",uiFoundMediaCategoryError:"error",uiFoundMediaCategoryCancel:"cancel"},found_media_gallery:{uiFoundMediaGalleryImpression:"impression"},found_media_trend:{uiFoundMediaTrendImpression:"impression",uiFoundMediaTrendSelect:"select",uiFoundMediaTrendAdd:"add",uiFoundMediaTrendError:"error",uiFoundMediaTrendCancel:"cancel"},geo_picker:{uiGeoPickerOffer:"offer",uiGeoPickerEnable:"enable",uiGeoPickerOpen:"open",uiGeoPickerTurnOn:"on",uiGeoPickerTurnOff:"off",uiGeoPickerChange:"select",uiGeoPickerInteraction:"focus_field",uiGeoPickerSendTweet:"send_tweet_geo_interaction"},emoji_picker:{uiEmojiPickerOpen:"open",uiEmojiPickerCancel:"cancel",uiEmojiPickerResults:"results",uiEmojiPickerAdd:"add",uiEmojiPickerChangeSkinTone:"change"},lifeline_alerts:{uiLifelineAlertsSelect:"select",uiLifelineAlertsImpression:"impression",uiLifelineAlertsTweet:"tweet",uiLifelineAlertsCancel:"cancel"},add_poll:{uiActivatePollComposer:"click"},remove_poll:{uiDeactivatePollComposer:"click"},add_poll_option:{uiAddPollOption:"click"},remove_poll_option:{uiRemovePollOption:"click"}};this.after("initialize",function(){var e=this;Object.keys(t).forEach(function(i){return Object.keys(t[i]).forEach(function(s){return e.scribeOnEvent(s,{element:i,action:t[i][s]})})})})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(142),l=s(r);e.default=(0,a.default)(n,l.default)},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({composeAltText:!1}),this.createTweetBoxAtTarget=function(t,e){this.createTweetBox(t.target,e)},this.createTweetBox=function(e,i){var s=t(e);if(!((i.eventData||{}).scribeContext||{}).component)throw new Error("Please specify scribing component for tweet box.");s.find(".geo-picker").length>0&&d.default.attachTo(s.find(".geo-picker"),i,{eventData:{scribeContext:{element:"geo_picker"}},parentSelector:".tweet-form",restoreFocusOnClose:!0,skipFocusManager:!0});var n=s.find("div.rich-editor").length>0?[p.default]:[],o=(i.dmOnly?l.default:a.default).mixin.apply(this,n),r=!i.dmOnly&&this.attr.composeAltText,c={typeaheadData:this.attr.typeaheadData,hashflagsEnabled:!i.dmOnly,composeAltText:r,mediaCategoryPrefix:i.dmOnly?"dm_":"tweet_"};o.attachTo(s,c,i)},this.after("initialize",function(){this.on("uiInitTweetbox",this.createTweetBoxAtTarget)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(1064),a=s(o),r=i(388),l=s(r),c=i(1075),d=s(c),u=i(111),h=s(u),f=i(438),p=s(f),m=(0,h.default)(n);e.default=m}).call(e,i(10))},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({shadowTextSelector:".tweet-box-shadow",messagingClass:"messaging",tweetActionSelector:".tweet-action",placeIdSelector:"input[name=place_id]",tweetBoxDialogSelector:null,overrides:{},condensable:!1,suppressFlashMessage:!1,suppressSuccessMessage:!1,customData:{},canTweetDefaultText:!1,gifSupport:!0,videoSupport:!0,sruAllMedia:!1,composeAltText:!1}),this.confirmAndSendTweet=function(){this.sendTweet()},this.geoPlaceId=function(){return this.select("placeIdSelector").val()},this.createDataForSending=function(){return{status:this.addHiddenText(this.getVisibleText()),place_id:this.geoPlaceId(),tweet_stat_count:this.overrides.tweetStatCount,impression_id:this.impressionId,earned:this.disclosureType?"earned"===this.disclosureType:void 0,is_permalink_page:t(".permalink").length>0,semantic_annotation_ids:this.semanticAnnotationIds,engagement_metadata:this.overrides.engagementMetadata}},this.isEmpty=function(){var t=this.getVisibleText().trim(),e=t&&(this.canTweetDefaultText||t!==this.defaultText.trim());return!(e||this.hasAttachment())},this.hasAttachment=function(){return!1},this.hasValidContent=function(){return!this.isEmpty()&&!this.maxReached()},this.sendTweet=function(){var t=this.getTweetboxId();this.detectUpdatedText(),this.$node.attr("id",t);var e="uiSendTweet",i=void 0,s="",n="";this.hasMedia?e="uiSendTweetWithMedia":this.hasPoll&&(e="uiSendTweetWithCard",i=this.getPollData(),s="Sorry, there was a problem creating your poll.",n="Sorry, there was a problem creating your poll. Please try again later."),this.setTweeting(!0),this.disable(),this.trigger(e,{tweetboxId:t,tweetData:o({},this.createDataForSending()),customData:this.customData,cardData:i,clientErrorMsg:s,serverErrorMsg:n})},this.alertMedia=function(t){var e="Your Tweet has not been sent. Are you sure you wish to leave the page?";if("beforeunload"!==t.type&&"uiBeforeUnload"!==t.type){"uiDialogCloseRequested"===t.type&&(e="Are you sure you wish to close the dialog and cancel sending the Tweet?");var i=confirm(e);i?this.trigger("dataTweetCancel",{tweetboxId:this.getTweetboxId()}):t.preventDefault()}return e},this.getTweetboxId=function(){return this.tweetboxId||(this.tweetboxId="swift_tweetbox_"+ +new Date),this.tweetboxId},this.setTweetBoxOverrides=function(t,e){var i=this,s=g.default.merge(e||this.attr.overrides,!0);this.overrides=s;var n=s.defaultText;void 0===n&&(n=this.$node.attr("data-default-text")),void 0===n&&(n=this.attr.defaultText||""),this.defaultText=n,this.semanticAnnotationIds=s.semanticAnnotationIds||this.$node.closest("[data-semantic-annotation-ids]").attr("data-semantic-annotation-ids"),this.canTweetDefaultText=void 0!==s.canTweetDefaultText?s.canTweetDefaultText:this.attr.canTweetDefaultText,this.impressionId=s.impressionId||this.attr.impressionId,this.disclosureType=s.disclosureType||this.attr.disclosureType,this.customData=s.customData||this.attr.customData,void 0!==s.cursorPosition?(this.cursorPosition=s.cursorPosition,setTimeout(function(){return i.setCursorPosition(i.cursorPosition)})):this.cursorPosition=this.attr.cursorPosition},this.updateTweetStateOnTextChanged=function(t,e){this.select("shadowTextSelector").val(e.text),this.updateTweetButton()},this.updateTweetButton=function(){!this.hasValidContent()||this.$node.hasClass("tweeting")?this.disable():this.enable()},this.notifyImageTweetSuccess=function(t,e){this.attr.composeAltText&&(t.tweetData.has_alt_text?this.trigger("uiTweetboxPhotoTweetWithAltTextSuccess",e):this.trigger("uiTweetboxPhotoTweetWithoutAltTextSuccess",e)),this.trigger("uiTweetboxPhotoTweetSuccess",e)},this.notifyGIFTweetSuccess=function(t){var e=this.foundMediaInfo?"uiTweetboxRemoteGifTweetSuccess":"uiTweetboxLocalGifTweetSuccess";this.trigger(e,t)},this.notifyVideoTweetSuccess=function(t){p.default.getDeciderValue("web_upload_video_advanced")&&this.trigger("uiTweetboxProVideoTweetSuccess",t),this.trigger("uiTweetboxVideoTweetSuccess",t)},this.notifyMediaTweetSuccess=function(t,e){this.isVideo&&this.notifyVideoTweetSuccess(e),this.isGif&&this.notifyGIFTweetSuccess(e),this.isVideo||this.isGif||this.notifyImageTweetSuccess(t,e)},this.getMediaDetailsForScribing=function(t){return this.foundMediaInfo?{photo_count:1,found_media_provider:this.foundMediaInfo.provider}:p.default.getDeciderValue("web_upload_video_advanced")&&t.tweetData?{metadata:{title:t.tweetData.advanced_title,description:t.tweetData.advanced_description,cta_type:t.tweetData.advanced_cta_type,cta_url:t.tweetData.advanced_cta_url,embeddable:t.tweetData.advanced_embeddable}}:void 0},this.tweetSent=function(t,e){var i=e.tweetboxId||e.sourceEventData.tweetboxId;if(i===this.getTweetboxId()){e.customData=this.customData,!e.message||this.attr.suppressSuccessMessage&&!e.unusual||this.trigger(e.unusual?"uiShowError":"uiShowMessage",{message:e.message});var s="uiTweetboxTweetSuccess",n={id:e.tweet_id,item_type:h.default.tweet};n.media_details=this.getMediaDetailsForScribing(e);var o={scribeData:{items:[n],event_value:(this.overrides.screenNames||[]).length}};this.overrides.id?(this.notifyReplyButtonTweetSuccess(),this.excludeReplyUserIds.length&&this.trigger("uiTweetboxReplyEditedSuccess",o),s="uiTweetboxReplySuccess"):this.dmMode&&(s="uiTweetboxDMSuccess"),this.trigger(s,o),this.hasMedia?this.notifyMediaTweetSuccess(e,o):this.hasPoll&&this.trigger("uiTweetboxPollTweetSuccess",o),this.getVisibleText().match(d.default.regex)&&this.trigger("uiTweetboxEmojiTweetSuccess"),this.geoPlaceId()&&this.trigger("uiTweetboxGeotaggedTweetSuccess",o),this.setTweeting(!1),this.trigger("uiTweetSent",e),this.clear()}},this.tweetError=function(t,e){var i=e.tweetboxId||e.sourceEventData.tweetboxId;i===this.getTweetboxId()&&(this.attr.suppressFlashMessage||e.spamChallenge||this.trigger("uiShowError",{message:e.error||e.message}),this.setTweeting(!1),this.enable(),this.trigger("uiTweetboxTweetError"))},this.tweetCancel=function(t,e){var i=e.tweetboxId||e.sourceEventData.tweetboxId;i===this.getTweetboxId()&&(this.setTweeting(!1),this.trigger("uiTweetCancelled",e),this.clear())},this.enable=function(){this.select("tweetActionSelector").removeClass("disabled").prop("disabled",!1),this.$node.trigger("uiEnableTweetAction")},this.disable=function(){this.select("tweetActionSelector").addClass("disabled").prop("disabled",!0),this.$node.trigger("uiDisableTweetAction")},this.clear=function(){this.reset()},this.reset=function(){this.resetTweetText()},this.resetAndFocus=function(){this.reset(),this.focus(),this.setCursorPosition(),this.composerActive(),this.trigger("uiCloseDropdowns")},this.composerActive=function(){this.trigger("uiComposerActive")},this.resetTweetText=function(){this.trigger("uiClearUndoState"),this.setVisibleText(this.defaultText)},this.handleCmdEnterSubmit=function(){this.select("tweetActionSelector").hasClass("disabled")||this.confirmAndSendTweet()},this.setTweeting=function(e){e?(this.on(window,"beforeunload uiBeforeUnload",this.alertMedia),this.on(document,"uiBeforeNavigate",this.alertMedia),this.attr.tweetBoxDialogSelector&&this.on(t(this.attr.tweetBoxDialogSelector),"uiDialogCloseRequested",this.alertMedia)):(this.off(window,"beforeunload uiBeforeUnload",this.alertMedia),this.off(document,"uiBeforeNavigate",this.alertMedia),this.attr.tweetBoxDialogSelector&&this.off(t(this.attr.tweetBoxDialogSelector),"uiDialogCloseRequested",this.alertMedia)),this.$node.toggleClass("tweeting",e),this.trigger(this.$text,e?"uiDisableEditing":"uiEnableEditing")},this.keyShortcutTooltip=function(t){if(9===t.which){var e=navigator.platform.toLowerCase().indexOf("mac")!==-1,i=e?"You can also press cmd-enter":"You can also press ctrl-enter";this.select("tweetActionSelector").attr("data-original-title",i).filter(document.activeElement).tooltip("show")}},this.reenableForBouncedUser=function(){this.setTweeting(!1),this.enable()},this.after("initialize",function(){this.setTweetBoxOverrides(),this.on("uiTextChanged",this.updateTweetStateOnTextChanged),this.initDraftTweets(),this.initTextNode(),this.on(this.select("tweetActionSelector"),"click",this.confirmAndSendTweet),this.on("uiShortcutCmdEnter",this.handleCmdEnterSubmit),this.on(document,"dataTweetSuccess",this.tweetSent),this.on(document,"dataTweetError",this.tweetError),this.on(document,"dataTweetCancel",this.tweetCancel),this.on(document,"uiBouncerCancelled",this.reenableForBouncedUser),this.on(this.$text,"dragover",this.focus),this.on("uiComposerResetAndFocus",this.resetAndFocus),this.on("keyup",this.keyShortcutTooltip),this.on("uiOverrideTweetBoxOptions",this.setTweetBoxOverrides),this.on(this.$text,"focusin",this.ignoreDuringFakeFocus(this.composerActive)),this.hasFocus()?(this.composerActive(),this.trigger("uiComposerHadFocus")):this.reset()})}Object.defineProperty(e,"__esModule",{value:!0});var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},a=i(123),r=(s(a),i(111)),l=s(r),c=i(363),d=s(c),u=i(144),h=s(u),f=i(136),p=s(f),m=i(126),g=s(m),v=i(1030),b=s(v),w=i(389),S=s(w),y=i(233),C=s(y),T=i(1031),D=s(T),M=i(452),I=s(M),P=i(1065),x=s(P),k=i(1066),A=s(k),E=i(437),O=s(E),R=i(228),F=s(R),N=i(390),U=s(N),j=i(1067),L=s(j),B=i(1068),$=s(B),V=i(1032),q=s(V),H=i(1071),z=s(H),G=i(436),W=s(G),Q=i(454),K=s(Q),Y=(0,l.default)(n,b.default,F.default,C.default,O.default,D.default,I.default,U.default,x.default,S.default,L.default,q.default,A.default,z.default,W.default,K.default,$.default);e.default=Y}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({lifelineAlertSelector:".lifeline-alert-status",lifelineAlertBtnSelector:".lifeline-alert-status-btn"}),this.sendLifelineAlertTweet=function(){this.sendTweet(),this.trigger("uiLifelineAlertsTweet")},this.cancelLifelineAlertTweet=function(){this.trigger("uiLifelineAlertsCancel")},this.around("confirmAndSendTweet",function(t){this.lifelineAlertMode?(this.trigger("uiLifelineAlertsImpression"),this.trigger("uiOpenConfirmDialog",{titleText:"Send Twitter Alert",bodyText:"Are you sure you want to send a Twitter Alert to your followers?",cancelText:"Cancel",submitText:"Send",action:"SendLifelineAlert"})):t()}),this.setLifelineAlertMode=function(t){this.lifelineAlertMode!==t&&(t?(this.select("lifelineAlertBtnSelector").addClass("enabled"),this.trigger("uiLifelineAlertsSelect")):this.select("lifelineAlertBtnSelector").removeClass("enabled"),this.focus(),this.lifelineAlertMode=t,this.detectUpdatedText(!0))},this.selectLifelineAlertAction=function(){this.setLifelineAlertMode(!this.lifelineAlertMode)},this.around("addHiddenText",function(t,e){return e=t(e),this.lifelineAlertMode&&(e+=this.lifelineAlertText),e}),this.before("clear",function(){this.setLifelineAlertMode(!1)}),this.after("initialize",function(){this.lifelineAlertMode=!1,this.lifelineAlertText=" #alert",this.on(this.attr.lifelineAlertSelector,"click",this.selectLifelineAlertAction),this.on("uiSendLifelineAlertConfirm",this.sendLifelineAlertTweet),this.on("uiSendLifelineAlertCancel",this.cancelLifelineAlertTweet)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(123);s(o);e.default=n},function(t,e){"use strict";function i(){this.defaultAttrs({photoIntentSelector:".TweetBox-photoIntent",mediaPickerSelector:".TweetBox-mediaPicker"}),this.moveChildren=function(t,e){this.select(t).children().detach().appendTo(this.select(e))},this.moveMediaPickerIntoPhotoIntent=function(){this.moveChildren("mediaPickerSelector","photoIntentSelector"),this.trigger("uiOverrideImageSelectorScribeContext",{component:"stream_header"})},this.moveMediaPickerOutOfPhotoIntent=function(){this.moveChildren("photoIntentSelector","mediaPickerSelector"),this.trigger("uiOverrideImageSelectorScribeContext",this.attr.eventData.scribeContext)},this.after("initialize",function(){this.select("photoIntentSelector").length&&(this.on("uiTweetBoxExpanded",this.moveMediaPickerOutOfPhotoIntent),this.on("uiTweetBoxCondensed",this.moveMediaPickerIntoPhotoIntent),this.isCondensed()&&this.moveMediaPickerIntoPhotoIntent())})}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i},function(t,e){"use strict";function i(){this.defaultAttrs({currentPositionSelector:".TweetBoxUploadProgress-barPosition"}),this.showProgressBar=function(t,e){var i=this.getTweetboxId();e.tweetboxId===i&&(s[i]=e.uploadId,this.$node.addClass("is-showingProgress"))},this.hideProgressBar=function(t,e){this.$node.removeClass("is-showingProgress is-uploading is-waiting is-processing");var i=this.getTweetboxId(),n=s[i];if(n){var o="uiTweetSent"===t.type?"uiMediaSruComplete":"uiMediaSruCancel";this.trigger(document,o,{uploadId:n}),this.select("currentPositionSelector").width(0),delete s[i]}},this.updateProgressBar=function(t,e){s[this.getTweetboxId()]===e.uploadId&&(e.mode&&this.$node.addClass("is-"+e.mode),"uploading"===e.mode&&this.select("currentPositionSelector").width(e.percent+"%"))},this.after("initialize",function(){this.on(document,"uiMediaSruFinalize",this.showProgressBar),this.on(document,"dataMediaSruProgress dataMediaSruSuccess",this.updateProgressBar),this.on(document,"dataMediaSruError dataTweetError uiTweetDialogClosed",this.hideProgressBar),this.on("uiTweetSent uiTweetCancelled",this.hideProgressBar)})}Object.defineProperty(e,"__esModule",{value:!0});var s={};e.default=i},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({replyUsersSelector:".reply-users",replyUsersButtonSelector:".reply-users-btn",tooltipClass:"js-tooltip",visibleTooltipSelector:".js-tooltip.in"}),this.around("createDataForSending",function(t){var e=o({},t(),{in_reply_to_status_id:this.overrides.retweetId||this.overrides.id,auto_populate_reply_metadata:this.isAutoPopulateReply||void 0,exclude_reply_user_ids:Array.isArray(this.excludeReplyUserIds)&&this.excludeReplyUserIds.join(",")||void 0});for(var i in e)void 0===e[i]&&delete e[i];return e}),this.notifyReplyButtonTweetSuccess=function(){if(this.overrides.isReplyLinkClick){var t=o({},this.overrides);t.scribeContext&&"suggest_recap"!==t.scribeContext.component&&(t.scribeContext.element=""),this.trigger("uiReplyButtonTweetSuccess",t)}},this.renderReplyUsers=function(){this.removeTooltips(),delete this.screenNamesInConversationHash;var t="";if(this.isAutoPopulateReply){var e=this.originalReplyUsers.filter(function(t){return this.excludeReplyUserIds.indexOf(t.id_str)<0},this),i={};if(e.forEach(function(t){return i[t.screen_name.toLowerCase()]=!0}),this.screenNamesInConversationHash=i,this.trigger("uiChangedUsersInConversation",{screenNamesInConversationHash:i}),this.originalReplyUsers.length>0){var s=e.length,n={is_reply_user_count_1:1===s,is_reply_user_count_2:2===s,is_reply_user_count_3:3===s,is_reply_user_count_more_than_3:s>3,reply_user_count_minus_2:s-2,first_reply_user:e[0],second_reply_user:e[1],third_reply_user:e[2]};n["reply_user_count_minus_2_"+c.default.PluralRules.rule_for(n.reply_user_count_minus_2)]=!0,t=u.default.render(n)}}this.select("replyUsersSelector").html(t)},this.removeTooltips=function(){this.$node.attr("data-original-title")&&this.$node.attr("data-original-title","").tooltip("hide"),this.select("replyUsersSelector").find(this.attr.visibleTooltipSelector).tooltip("hide")},this.after("setTweetBoxOverrides",function(){this.isAutoPopulateReply=!!this.overrides.id,this.originalReplyUsers=this.overrides.replyToUsers||[],this.$node.toggleClass("is-reply",this.isAutoPopulateReply),this.resetReplyUsers()}),this.replyPrefixTooltip=function(e,i){var s=this;if(this.screenNamesInConversationHash){var n=[],o=i.text.match(h);o&&o[0].replace(f,function(t,e){s.screenNamesInConversationHash[e.toLowerCase()]&&n.push("@"+e)});var a=n.length?(0,r.default)("The reply already includes {{duplicated_mentions}}",{duplicated_mentions:n.join(" ")}):"";a!==this.lastReplyTipText&&(this.lastReplyTipText=a,t(this.select("replyUsersButtonSelector")[0]||this.node).attr("data-original-title",a).toggleClass(this.attr.tooltipClass,!!a).tooltip(a?"show":"hide"))}},this.openReplyUsersDialog=function(){this.isEditReplyUsersDialogOpen=!0,this.trigger("uiRequestActivityPopup",{component:"reply_users_popup",contentId:this.overrides.retweetId||this.overrides.id,htmlTitle:"Replying to",excludeReplyUserIds:this.excludeReplyUserIds})},this.editReplyUsersDialogClosed=function(){this.focus(),this.isEditReplyUsersDialogOpen=!1},this.editReplyUsersDialogSave=function(t,e){this.excludeReplyUserIds=e.excludeReplyUserIds,this.renderReplyUsers()},this.resetReplyUsers=function(){this.excludeReplyUserIds=[],this.lastReplyTipText=null,this.renderReplyUsers()},this.after("reset",function(){this.isEditReplyUsersDialogOpen=!1,this.resetReplyUsers()}),this.around("isEmpty",function(t){return t()&&!this.isEditReplyUsersDialogOpen&&!(this.excludeReplyUserIds&&this.excludeReplyUserIds.length)}),this.after("initialize",function(){this.isEditReplyUsersDialogOpen=!1,this.on("click",{replyUsersButtonSelector:this.openReplyUsersDialog}),this.on("uiTextChanged",this.replyPrefixTooltip),this.on("uiActivityPopupClosed",this.editReplyUsersDialogClosed),this.on("uiActivityPopupSave",this.editReplyUsersDialogSave)})}Object.defineProperty(e,"__esModule",{value:!0});var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},a=i(123),r=s(a),l=i(483),c=s(l),d=i(1069),u=s(d),h=/^\s*([@＠]\w{1,20}\s+)+/,f=/[@＠](\w{1,20})/g;e.default=n}).call(e,i(10))},function(t,e,i){(function(e){function s(t,e,i){e=e||{};for(var s in a)e[s]||(e[s]=a[s]);return r.render(t,e,i)}var n=i(220).default,o={"compose/reply_users_button":i(1070)},a=n(o),r=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b("Replying to "),s.b(s.rp("<compose/reply_users_button0",t,e,"")),s.fl()},partials:{"<compose/reply_users_button0":{name:"compose/reply_users_button",partials:{},subs:{}}},subs:{}});t.exports={template:r,partials:a,render:s}}).call(e,i(1))},function(t,e,i){(function(e){function s(t,e,i){e=e||{};for(var s in a)e[s]||(e[s]=a[s]);return r.render(t,e,i)}var n=i(220).default,o={screen_name:i(380),screen_name:i(380),screen_name:i(380),screen_name:i(380),screen_name:i(380),screen_name:i(380),screen_name:i(380),screen_name:i(380),screen_name:i(380),screen_name:i(380)},a=n(o),r=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<button type="button" class="btn-link reply-users-btn js-tooltip" data-original-title="Select who gets your reply">'),s.s(s.f("is_reply_user_count_1",t,e,1),t,e,0,149,225,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.s(i.f("first_reply_user",t,e,1),t,e,0,180,196,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b(i.rp("<screen_name0",t,e,""))}),t.pop())}),t.pop()),s.s(s.f("is_reply_user_count_2",t,e,1),t,e,0,286,427,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.s(i.f("first_reply_user",t,e,1),t,e,0,317,333,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b(i.rp("<screen_name1",t,e,""))}),t.pop()),i.b(" and "),i.s(i.f("second_reply_user",t,e,1),t,e,0,381,397,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b(i.rp("<screen_name2",t,e,""))}),t.pop())}),t.pop()),s.s(s.f("is_reply_user_count_3",t,e,1),t,e,0,488,688,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.s(i.f("first_reply_user",t,e,1),t,e,0,519,535,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b(i.rp("<screen_name3",t,e,""))}),t.pop()),i.b(" "),i.s(i.f("second_reply_user",t,e,1),t,e,0,579,595,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b(i.rp("<screen_name4",t,e,""))}),t.pop()),i.b(" and "),i.s(i.f("third_reply_user",t,e,1),t,e,0,643,659,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b(i.rp("<screen_name5",t,e,""))}),t.pop())}),t.pop()),s.s(s.f("is_reply_user_count_more_than_3",t,e,1),t,e,0,759,1270,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.s(i.f("reply_user_count_minus_2_one",t,e,1),t,e,0,802,982,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.s(i.f("first_reply_user",t,e,1),t,e,0,835,851,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b(i.rp("<screen_name6",t,e,""))}),t.pop()),i.b(" "),i.s(i.f("second_reply_user",t,e,1),t,e,0,895,911,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b(i.rp("<screen_name7",t,e,""))}),t.pop()),i.b(" and "),i.b(i.v(i.f("reply_user_count_minus_2",t,e,0))),i.b(" other")}),t.pop()),i.s(i.f("reply_user_count_minus_2_other",t,e,1),t,e,0,1058,1227,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.s(i.f("first_reply_user",t,e,1),t,e,0,1089,1105,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b(i.rp("<screen_name8",t,e,""))}),t.pop()),i.b(" "),i.s(i.f("second_reply_user",t,e,1),t,e,0,1149,1165,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b(i.rp("<screen_name9",t,e,""))}),t.pop()),i.b(" and "),i.b(i.v(i.f("reply_user_count_minus_2",t,e,0))),i.b(" others")}),t.pop())}),t.pop()),s.b("</button>\n"),s.fl()},partials:{"<screen_name0":{name:"screen_name",partials:{},subs:{}},"<screen_name1":{name:"screen_name",partials:{},subs:{}},"<screen_name2":{name:"screen_name",partials:{},subs:{}},"<screen_name3":{name:"screen_name",partials:{},subs:{}},"<screen_name4":{name:"screen_name",partials:{},subs:{}},"<screen_name5":{name:"screen_name",partials:{},subs:{}},"<screen_name6":{name:"screen_name",partials:{},subs:{}},"<screen_name7":{name:"screen_name",partials:{},subs:{}},"<screen_name8":{name:"screen_name",partials:{},subs:{}},"<screen_name9":{name:"screen_name",partials:{},subs:{}}},subs:{}});t.exports={template:r,partials:a,render:s}}).call(e,i(1))},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){a.default.mixin(this,[h.default]),this.defaultAttrs({pollCreatorSelector:".PollCreator",pollingCardComposeViewSelector:".PollingCardComposer",pollingCardComposeViewInputSelector:".PollingCardComposer-optionInput",pollComposeViewOptionsSelector:".PollingCardComposer-option",pollComposeViewOption1Selector:".PollingCardComposer-option1",pollComposeViewOption2Selector:".PollingCardComposer-option2",pollComposeViewOption3Selector:".PollingCardComposer-option3",pollComposeViewOption4Selector:".PollingCardComposer-option4",pollComposeViewOption1InputSelector:".PollingCardComposer-option1 .PollingCardComposer-optionInput",pollComposeViewOption2InputSelector:".PollingCardComposer-option2 .PollingCardComposer-optionInput",pollComposeViewOption3InputSelector:".PollingCardComposer-option3 .PollingCardComposer-optionInput",pollComposeViewOption4InputSelector:".PollingCardComposer-option4 .PollingCardComposer-optionInput",pollComposeViewRemoveOption1Selector:".PollingCardComposer-option1 .PollingCardComposer-removeOption",pollComposeViewRemoveOption2Selector:".PollingCardComposer-option2 .PollingCardComposer-removeOption",pollComposeViewRemoveOption3Selector:".PollingCardComposer-option3 .PollingCardComposer-removeOption",pollComposeViewRemoveOption4Selector:".PollingCardComposer-option4 .PollingCardComposer-removeOption",pollComposeViewActiveClass:"is-cardComposerOn is-pollingCardComposerOn",pollComposeViewRemoveSelector:".PollingCardComposer-remove",pollComposeViewAddOptionSelector:".PollingCardComposer-addOption",pollComposeViewRemoveOptionSelector:".PollingCardComposer-removeOption",pollComposeViewDefaultDurationSelector:".PollingCardComposer-defaultDuration",pollComposeViewCustomDurationDaysSelector:".PollingCardComposer-customDuration--days",pollComposeViewCustomDurationHoursSelector:".PollingCardComposer-customDuration--hours",pollComposeViewCustomDurationMinutesSelector:".PollingCardComposer-customDuration--minutes",minimalLabelClass:"is-minimalButtonLabels",hiddenClass:"u-hidden",maxOptionsAttr:"data-poll-max-options",composerRowsAttr:"data-poll-composer-rows",pollOption3FlagAttr:"data-poll-option-3",pollOption4FlagAttr:"data-poll-option-4",optionIndexAttr:"data-option-index",customDurationAttr:"data-custom-duration",minimalDurationAttr:"data-poll-min-duration",maximalDurationAttr:"data-poll-max-duration",durationTargetAttr:"data-duration-target"});var e="1",i=60,s=24*i,n=1*s,o=25,r=2,c=4,u="days";this.hasPoll=!1,this.hasCustomDuration=!1,this.enableFourOptions=!1,this.pollOptions=[],this.optionCount=r,this.validOptionCount=0,this.hasInvalidOption=!1,this.pollDurationMin=0,this.pollDurationMax=0,this.customDuration=0,this.durationDays=0,this.durationHours=0,this.durationMinutes=0,this.activatePollComposer=function(){this.hasPoll||(this.hasPoll=!0,this.optionCount=r,this.pollOptions=[],this.trigger("uiPollComposeViewShow"),this.detectUpdatedText(!0))},this.deactivatePollComposer=function(){this.hasPoll&&(this.resetPoll(),this.detectUpdatedText(!0))},this.showComposeView=function(){this.select("pollingCardComposeViewSelector").removeClass(this.attr.hiddenClass),this.$node.addClass(this.attr.pollComposeViewActiveClass)},this.hideComposeView=function(){this.select("pollingCardComposeViewSelector").addClass(this.attr.hiddenClass),this.$node.removeClass(this.attr.pollComposeViewActiveClass)},this.togglePollComposer=function(){this.hasPoll?this.removePoll():this.addPoll()},this.addPoll=function(){this.trigger("uiActivatePollComposer"),this.select("pollComposeViewOption1InputSelector").focus()},this.removePoll=function(){this.trigger("uiDeactivatePollComposer"),this.focus()},this.focusOnInput=function(t){t?this.select(this._buildInputSelectorName(t)).focus():this.select("pollComposeViewOption1InputSelector").focus()},this._buildInputSelectorName=function(t){return"pollComposeViewOption"+t+"InputSelector"},this.addPollOption=function(){var t=this.optionCount;if(this.enableFourOptions&&t<c){var e=t+1;this.pollOptions[t]="",this._setOptionCount(e),this._checkValidOptions(),this.select(this._buildInputSelectorName(e)).trigger("uiUpdatePollOption",""),this.detectUpdatedText(!0),this.trigger("uiAddPollOption"),this.focusOnInput(e)}this.select("pollComposeViewAddOptionSelector").blur()},this.removePollOption=function(e){var i=this.optionCount;if(e&&e.target&&this.enableFourOptions&&i>r){var s=i-1,n=t(e.target).closest(this.attr.pollComposeViewOptionsSelector),o=t(n).attr(this.attr.optionIndexAttr),a=o-1,l=this.pollOptions.map(function(t,e){return this.select(this._buildInputSelectorName(e+1)).text()},this);l.splice(a,1),this.pollOptions.splice(a,1),this._setOptionCount(l.length),l.forEach(function(t,e){var i=this._buildInputSelectorName(e+1);this.select(i).text()!==t&&this.select(i).trigger("uiUpdatePollOption",t)},this),this._checkValidOptions(),this.detectUpdatedText(!0),this.trigger("uiRemovePollOption"),this.focusOnInput(Math.min(o,s))}},this.turnOnCustomDuration=function(){this.hasCustomDuration||(this.hasCustomDuration=!0,this.$composeView.attr(this.attr.customDurationAttr,!0),this.customDuration=n,this._calculateSettingsFromCustomDuration(),this._updateCustomDurationElementsFromSettings(),this.select("pollComposeViewCustomDurationDaysSelector").focus(),this.trigger("uiTurnOnCustomPollDuration"))},this.turnOffCustomDuration=function(){this.hasCustomDuration=!1,this.$composeView.attr(this.attr.customDurationAttr,!1)},this._updateCustomDuration=function(e){var s=e&&e.target?t(e.target).attr(this.attr.durationTargetAttr):"";
if(this._updateCustomDurationSettingsFromElements(),this._calculateCustomDurationFromSettings(),this.customDuration<this.pollDurationMin){var n=this.pollDurationMin-this.customDuration;s===u&&(0===this.durationMinutes||n>=i)?(this.durationHours=Math.max(1,Math.floor(this.pollDurationMin/i)),this.durationMinutes=Math.max(0,this.pollDurationMin-this.durationHours*i)):(this.durationHours=Math.floor(this.pollDurationMin/i),this.durationMinutes=Math.max(1,this.pollDurationMin-this.durationHours*i)),this._calculateCustomDurationFromSettings(),this._updateCustomDurationElementsFromSettings()}else this.customDuration>this.pollDurationMax&&(this.customDuration=this.pollDurationMax,this._calculateSettingsFromCustomDuration(),this._updateCustomDurationElementsFromSettings());this._disableUnavailableDurationOptions()},this._disableUnavailableDurationOptions=function(){var t=Math.max(0,this.pollDurationMin-this.durationDays*s),e=this.pollDurationMax-this.durationDays*s,n=Math.floor(t/i),o=Math.floor(e/i),a=this.select("pollComposeViewCustomDurationHoursSelector").children();a.toArray().forEach(function(t,e){return t.disabled=t.value<n||t.value>o}),t-=this.durationHours*i,e-=this.durationHours*i;var r=this.select("pollComposeViewCustomDurationMinutesSelector").children();r.toArray().forEach(function(i,s){return i.disabled=i.value<t||i.value>e})},this._updateCustomDurationElementsFromSettings=function(){this.select("pollComposeViewCustomDurationDaysSelector").val(this.durationDays),this.select("pollComposeViewCustomDurationHoursSelector").val(this.durationHours),this.select("pollComposeViewCustomDurationMinutesSelector").val(this.durationMinutes)},this._updateCustomDurationSettingsFromElements=function(){this.durationDays=Number(this.select("pollComposeViewCustomDurationDaysSelector").val()||0),this.durationHours=Number(this.select("pollComposeViewCustomDurationHoursSelector").val()||0),this.durationMinutes=Number(this.select("pollComposeViewCustomDurationMinutesSelector").val()||0)},this._calculateCustomDurationFromSettings=function(){this.customDuration=this.durationDays*s+this.durationHours*i+this.durationMinutes},this._calculateSettingsFromCustomDuration=function(){this.durationDays=Math.floor(this.customDuration/s),this.durationHours=Math.floor(this.customDuration%s/i),this.durationMinutes=this.customDuration%i},this._setOptionCount=function(t){if(this.enableFourOptions)switch(this.optionCount=t,t){case 2:this.$node.attr(this.attr.composerRowsAttr,3),this.$composeView.attr(this.attr.pollOption3FlagAttr,!1),this.$composeView.attr(this.attr.pollOption4FlagAttr,!1);break;case 3:this.$node.attr(this.attr.composerRowsAttr,4),this.$composeView.attr(this.attr.pollOption3FlagAttr,!0),this.$composeView.attr(this.attr.pollOption4FlagAttr,!1);break;case 4:this.$node.attr(this.attr.composerRowsAttr,4),this.$composeView.attr(this.attr.pollOption3FlagAttr,!0),this.$composeView.attr(this.attr.pollOption4FlagAttr,!0)}},this._hasValidPollOptions=function(){return this._checkValidOptions(),this.validOptionCount>=r&&!this.hasInvalidOption},this._buildCardName=function(t){return"poll"+t+"choice_text_only"},this._buildChoiceName=function(t){return"twitter:string:choice"+t+"_label"},this.getPollData=function(){if(this._hasValidPollOptions()){var t={"twitter:card":this._buildCardName(this.validOptionCount),"twitter:api:api:endpoint":e},i=1;return this.pollOptions.forEach(function(e,s){if(e){var n=this._buildChoiceName(i);t[n]=e,i++}},this),this.hasCustomDuration&&(t["twitter:long:duration_minutes"]=this.customDuration),t}},this._checkValidOptions=function(){this.validOptionCount=0,this.hasInvalidOption=!1,this.pollOptions.forEach(function(t,e){t?this.validOptionCount++:void 0===t&&(this.hasInvalidOption=!0)},this)},this.updateOption=function(t,e){e.index>0&&e.index<=this.optionCount&&(this.pollOptions[e.index-1]=e.text)},this.resetPoll=function(){this.hasPoll=!1,this.hasCustomDuration=!1,this._setOptionCount(r),this.pollOptions=[],this.customDuration=n,this._checkValidOptions(),this.trigger("uiResetPollOptions"),this.trigger("uiPollComposeViewHide"),this.turnOffCustomDuration()},this.around("isEmpty",function(t){return t()&&!this.hasPoll}),this.around("hasValidContent",function(t){return this.hasPoll?""!==this.getVisibleText().trim()&&this._hasValidPollOptions()&&!this.dmMode&&t():t()}),this.after("reset",function(){var t=this;this.hasPoll&&this.resetPoll(),"poll"===this.overrides.mode&&(this.overrides.mode=void 0,setTimeout(function(){return t.trigger("uiActivatePollComposer")},0))}),this.after("initialize",function(){this.hideComposeView(),this.$composeView=this.select("pollingCardComposeViewSelector"),this.enableFourOptions="4"===this.$composeView.attr(this.attr.maxOptionsAttr),this.pollDurationMin=Number(this.$composeView.attr(this.attr.minimalDurationAttr)),this.pollDurationMax=Number(this.$composeView.attr(this.attr.maximalDurationAttr)),this.customDuration=n,this._calculateSettingsFromCustomDuration(),this.on("uiActivatePollComposer",this.activatePollComposer),this.on("uiDeactivatePollComposer",this.deactivatePollComposer),this.on("uiTogglePollComposer",this.togglePollComposer),this.on("uiPollComposeViewShow",this.showComposeView),this.on("uiPollComposeViewHide",this.hideComposeView),this.on("uiPollComposeOptionUpdate",this.updateOption),this.on("click",{pollComposeViewRemoveSelector:this.removePoll,pollComposeViewAddOptionSelector:this.addPollOption,pollComposeViewRemoveOptionSelector:this.removePollOption,pollComposeViewDefaultDurationSelector:this.turnOnCustomDuration}),this.on("change",{pollComposeViewCustomDurationDaysSelector:this._updateCustomDuration,pollComposeViewCustomDurationHoursSelector:this._updateCustomDuration,pollComposeViewCustomDurationMinutesSelector:this._updateCustomDuration}),this.attachChild(d.default,this.select("pollCreatorSelector"),{eventData:{scribeContext:{element:"poll_composer"}}}),this.attachChild(l.default,this.select("pollComposeViewOptionsSelector"),{maxLength:o,richEditorTextSelector:this.attr.pollingCardComposeViewInputSelector})})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(121),a=s(o),r=i(1072),l=s(r),c=i(1074),d=s(c),u=i(231),h=s(u);e.default=n}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({tweetBoxSelector:"form.tweet-form",optionIndexAttr:"data-option-index"}),this.textChanged=function(){var t=this.getVisibleText(),e=this._getCleanText(t);this.$tweetBox.trigger("uiPollComposeOptionUpdate",{index:this.pollComposeInputIndex,text:e})},this.resetPollComposeInput=function(){this.setVisibleText(""),this.textChanged()},this.updatePollOption=function(t,e){this.setVisibleText(e)},this._isOptionValid=function(t){return""!==t.trim()&&this.getLength(t)<=this.attr.maxLength},this._isOptionEmpty=function(t){return""===t.trim()},this._getCleanText=function(t){return this._isOptionEmpty(t)?"":this._isOptionValid(t)?t.trim():void 0},this.after("initialize",function(){this.$tweetBox=this.$node.closest(this.attr.tweetBoxSelector),this.pollComposeInputIndex=this.$node.attr(this.attr.optionIndexAttr),this.initTextNode(),this.textChanged(),this.on("uiTextChanged",this.textChanged),this.on(this.$tweetBox,"uiResetPollOptions",this.resetPollComposeInput),this.on(this.$text,"uiUpdatePollOption",this.updatePollOption)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(1073),l=s(r),c=i(438),d=s(c),u=i(437),h=s(u),f=i(228),p=s(f),m=i(436),g=s(m),v=(0,a.default)(n,p.default,d.default,l.default,h.default,g.default);e.default=v},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this._getTextLength=function(t){return a.default.getUnicodeTextLength(t)},this.getLength=function(t){return t=this.addHiddenText(void 0===t?this.getVisibleText():t),t!==this.prevCounterText&&(this.prevCounterText=t,this.prevCounterLength=this._getTextLength(t)),this.prevCounterLength}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(234),a=s(o);e.default=n},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({tweetBoxSelector:".tweet-form",pollCreatorButtonSelector:".PollCreator-btn",enabledPollCreatorButtonSelector:".PollCreator-btn:not([disabled])",pollCreatorLabelSelector:".PollCreator-label",disabledClass:"disabled",enabledClass:"enabled"}),this.activatePollCreator=function(){this.isActive=!0,this.updateLabel("Poll added"),this.$tweetBox.trigger("uiComposerDisableExclusiveAttachments"),this.enablePollCreator(),this.showActivatedState()},this.deactivatePollCreator=function(){this.isActive=!1,this.updateLabel("Add poll"),this.$tweetBox.trigger("uiComposerEnableExclusiveAttachments")},this.enablePollCreator=function(){this.$node.removeClass(this.attr.disabledClass),this.select("pollCreatorButtonSelector").prop("disabled",!1).prop("tabindex","0").removeClass(this.attr.disabledClass).removeClass(this.attr.enabledClass)},this.disablePollCreator=function(){this.$node.addClass(this.attr.disabledClass),this.select("pollCreatorButtonSelector").prop("disabled",!0).prop("tabindex","-1").addClass(this.attr.disabledClass)},this.triggerTogglePollComposer=function(){this.$tweetBox.trigger("uiTogglePollComposer")},this.showActivatedState=function(){this.$node.addClass(this.attr.disabledClass),this.select("pollCreatorButtonSelector").prop("disabled",!1).prop("tabindex","-1").addClass(this.attr.enabledClass)},this.updateLabel=function(t){this.select("pollCreatorButtonSelector").attr("data-original-title",t)},this.after("initialize",function(){this.$tweetBox=this.$node.closest(this.attr.tweetBoxSelector),this.isActive=!1,this.on(this.$tweetBox,"uiPollComposeViewShow",this.activatePollCreator),this.on(this.$tweetBox,"uiPollComposeViewHide",this.deactivatePollCreator),this.on(this.$tweetBox,"uiComposerEnableExclusiveAttachments",this.enablePollCreator),this.on(this.$tweetBox,"uiComposerDisableExclusiveAttachments",this.disablePollCreator),this.on("click",{enabledPollCreatorButtonSelector:this.triggerTogglePollComposer})})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(123),a=(s(o),i(111)),r=s(a),l=(0,r.default)(n);e.default=l},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({tweetBoxSelector:".tweet-form",buttonSelector:"button.geo-picker-btn",placeIdSelector:"input[name=place_id]",statusSelector:"span.geo-status",dropdownContainerSelector:"span.dropdown-container",dropdownDisabledSelector:"#geo-disabled-dropdown",enableButtonSelector:"button.geo-turn-on",notNowButtonSelector:"button.geo-not-now",dropdownEnabledSelector:"#geo-enabled-dropdown",geoSearchSelector:".geo-query-location .icon",dropdownStatusSelector:".geo-dropdown-status",searchResultsSelector:".GeoSearch-result--search",placeResultsSelector:".GeoSearch-result--place",turnOffButtonSelector:".geo-turn-off-item",turnOffButtonTemplateClass:".geo-turn-off-item",disabledClass:"disabled"}),this.selectGeoAction=function(t){if(this.dropdownIsOpen)return void this.closeDropdown();switch(this.geoState.state){case"disabled":this.disable(),this.trigger("uiGeoPickerOffer");break;case"enableIsUnavailable":this.trigger("uiGeoPickerOffer");break;case"locateIsUnavailable":case"enabledTurnedOn":this.requestGeoState();break;case"enabledTurnedOff":this.turnOn();break;case"changing":case"locating":case"located":case"locationUnknown":this.trigger("uiGeoPickerOpen")}},this.prepare=function(e,i){var s=void 0,n=void 0;"uiGeoPickerOpen"===e.type?(s=this.attr.dropdownEnabledSelector,n=1,this.geoDetails&&!this.geoDetails.interacted_poi_list&&(this.geoDetails.interacted_poi_list=!0)):(s=this.attr.dropdownDisabledSelector,n=0),n!==this.dropdownState&&(this.select("dropdownContainerSelector").html(t(s).html()),this.dropdownState=n),this.showGeoState(),this.applyAriaAttrsToResultsAndAnnounceNumResults(),this.lastQuery="",this.geoQueryFieldChanged=!1},this.after("openDropdown",function(){var t=this.select("enableButtonSelector");t.length||(t=this.select("querySelector")),t.focus(),this.applyAriaAttrsToDropdown(),this.applyAriaAttrsToResultsAndAnnounceNumResults()}),this.after("closeDropdown",function(){this.select("querySelector").val("")}),this.enable=function(){this.closeDropdown(),this.trigger("uiGeoPickerEnable")},this.turnOn=function(){this.trigger("uiGeoPickerTurnOn")},this.turnOff=function(t){this.closeDropdown(),this.trigger("uiGeoPickerTurnOff")},this.changeLocation=function(t,e){var i=this.select("querySelector").val(),s=e.placeId,n=e.placeName,o="search"===e.resultType,a=e.placeOffset;if(this.closeDropdown(),s&&s!==this.lastPlaceId){this.lastGeoPlace&&(this.discardLastGeoPlace(),this.lastGeoPlace={place_name:n,place_id:s,offset:a,is_autotag:!1,query:""!==i?i:null,source:o?"search":"default",last_interaction_time:(new Date).getTime()});var r={placeId:s,scribeData:{items:[{name:s}]}};this.lastPlaceId&&r.scribeData.items.push({name:this.lastPlaceId}),o&&this.lastQueryData&&(r.scribeData.query=this.lastQueryData.query),this.trigger("uiGeoPickerChange",r)}},this.updateState=function(t,e){this.geoState=e,this.showGeoState()},this.showGeoState=function(){var t="Add location",e="",i=!1,s=!1,n="",o=this.geoState;switch("enabling"===o.state&&this.select("buttonSelector").removeClass(this.attr.disabledClass),o.state){case"enabling":case"locating":t="Getting location...";break;case"enableIsUnavailable":case"locateIsUnavailable":t="Location service unavailable";break;case"changing":t="Changing location...";break;case"locationUnknown":t="Unknown location";break;case"located":t=o.place_name,e=o.place_id,n=o.places_html;var a=(0,u.default)();n+=m.default.render({id:a}),i=!0,s=!0,this.initializeGeoScribeData(o);break;case"enabledTurnedOff":this.discardLastGeoPlace();break;case"disabled":s=!0,this.disable(),t="Location disabled"}this.$node.toggleClass("active",i),this.select("buttonSelector").toggleClass("enabled",i).toggleClass("js-dropdown-toggle",s).attr("aria-haspopup",s),this.select("statusSelector").text(t),this.select("buttonSelector").attr("data-original-title",t),this.select("placeResultsSelector").add(this.select("searchResultsSelector")).remove(),this.select("dropdownStatusSelector").text(t).toggle(!i),this.select("dropdownSelector").html(n),this.select("placeIdSelector").val(e),this.lastPlaceId=e,this.applyAriaAttrsToResultsAndAnnounceNumResults()},this.initializeGeoScribeData=function(t){this.geoDetails||this.resetGeoDetails(),this.lastGeoPlace&&this.lastGeoPlace.place_id||!t.place_id||(this.lastGeoPlace={place_name:t.place_name,place_id:t.place_id,source:"default",is_autotag:!0,last_interaction_time:(new Date).getTime()})},this.resetGeoDetails=function(){this.geoDetails={interacted_poi_list:!1,interacted_server_search:!1,geo_place_details:[]}},this.discardLastGeoPlace=function(){this.lastGeoPlace&&this.lastGeoPlace.place_id&&(this.lastGeoPlace.state="discarded",this.geoDetails.geo_place_details.push(this.lastGeoPlace),this.lastGeoPlace={})},this.sendTweetScribeData=function(t){if(this.geoDetails){this.lastGeoPlace&&this.lastGeoPlace.place_id&&(this.lastGeoPlace.state="geotag",this.geoDetails.geo_place_details.push(this.lastGeoPlace));var e={scribeData:{items:[{item_type:c.default.geoDetails,geo_details:this.geoDetails}]}};this.trigger("uiGeoPickerSendTweet",e),this.resetGeoDetails(),this.lastGeoPlace={}}},this.requestGeoState=function(){this.trigger("uiRequestGeoState")},this.searchIfQueryChanged=function(t){var e=this.select("querySelector").val()||"";t&&this.lastQuery===e||(this.geoDetails.interacted_server_search||(this.geoDetails.interacted_server_search=!0),this.lastIsPrefix=t,this.lastQuery=e,this.select("dropdownStatusSelector").text("Searching places...").show(),this.geoQueryFieldChanged||(this.geoQueryFieldChanged=!0,this.trigger("uiGeoPickerInteraction")),this.trigger("uiGeoPickerSearch",{placeId:this.lastPlaceId,query:e,isPrefix:t}))},this.searchExactMatch=function(){this.searchIfQueryChanged(!1)},this.searchAutocomplete=function(){var t=this;setTimeout(function(){return t.searchIfQueryChanged(!0)},0)},this.searchResults=function(t,e){var i=e.sourceEventData;!i||i.placeId!==this.lastPlaceId||i.query!==this.select("querySelector").val()||i.isPrefix&&!this.lastIsPrefix||(this.lastQueryData=i,this.select("searchResultsSelector").remove(),this.select("dropdownStatusSelector").hide(),this.select("dropdownSelector").prepend(e.html),this.applyAriaAttrsToResultsAndAnnounceNumResults())},this.searchUnavailable=function(t,e){this.select("dropdownStatusSelector").text("Location service unavailable").show()},this.disable=function(){this.select("buttonSelector").addClass(this.attr.disabledClass).addClass("js-dropdown-toggle").attr("aria-haspopup",!0).attr("data-original-title","Location disabled"),this.select("statusSelector").text("Location disabled")},this.after("initialize",function(){this.geoState={},this.skipFocusManager=!0;var t=this.$node.closest(this.attr.parentSelector);this.on(t,"uiComposerActive uiPrepareGeoPicker",this.requestGeoState),this.on(t,"uiTweetSent",this.sendTweetScribeData),this.on(document,"dataGeoState",this.updateState),this.on(document,"dataGeoSearchResults",this.searchResults),this.on(document,"dataGeoSearchResultsUnavailable",this.searchUnavailable),this.on("uiDropdownOpenRequested",this.selectGeoAction),this.on("click",{buttonSelector:this.selectGeoAction,enableButtonSelector:this.enable,notNowButtonSelector:this.closeDropdown,turnOffButtonSelector:this.turnOff,geoSearchSelector:this.searchExactMatch}),this.on("mousedown",{buttonSelector:this.preventFocusLoss}),this.on("uiGeoSearchSelect",{turnOffButtonSelector:this.turnOff}),this.on("uiGeoPickerOpen uiGeoPickerOffer",this.prepare),this.on("uiGeoSearchEnter",this.searchExactMatch),this.on("uiGeoSearchChangeLocation",this.changeLocation),this.on("uiGeoSearchAutocomplete",this.searchAutocomplete)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(123),a=(s(o),i(111)),r=s(a),l=i(144),c=s(l),d=i(399),u=s(d),h=i(1076),f=s(h),p=i(1077),m=s(p);e.default=(0,r.default)(f.default,n)}).call(e,i(10))},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){a.default.mixin(this,[h.default,g.default.withAdvice,p.default]),this.defaultAttrs({querySelector:".GeoSearch-queryInput",dropdownTriggerSelector:".js-geo-search-trigger",dropdownSelector:".GeoSearch-dropdownMenu",resultSelector:".GeoSearch-result",resultClass:"GeoSearch-result",focusableSelector:".GeoSearch-focusable:visible",firstFocusableSelector:".GeoSearch-focusable:first",focusedSelector:".GeoSearch-focusable.is-focused",focusedClass:"is-focused"}),this.getQuery=function(){return this.select("querySelector").val()||""},this.applyAriaAttrsToDropdown=function(){var t=this.select("dropdownSelector");if(t.length){var e=(0,d.default)(t[0]);this.select("querySelector").attr({"aria-owns":e,"aria-expanded":!0,"aria-autocomplete":"list"}),this.select("dropdownSelector").attr("role","listbox"),this.ariaApplied=!0}},this.applyAriaAttrsToResultsAndAnnounceNumResults=function(){if(this.ariaApplied){var e=this.select("resultSelector").length;e&&(this.select("resultSelector").each(function(e,i){t(i).attr("role","option"),(0,d.default)(i)}),this.trigger("uiGeoResultsShown",{numResults:e}))}},this.moveFocus=function(t){var e=this.select("focusedSelector"),i=this.select("focusableSelector"),s=i.index(e)+t,n=i.length-1;s<0?s=n:s>n&&(s=0);var o=i.eq(s);e.removeClass(this.attr.focusedClass),o.addClass(this.attr.focusedClass),this.ariaApplied&&(e.removeAttr("aria-selected"),e.removeAttr("tabindex"),o.attr({"aria-selected":!0,tabindex:"-1"}),this.select("querySelector").attr("aria-activedescendant",o.attr("id")))},this.queryKeyDown=function(t){switch(t.which){case l.default.UP:return t.preventDefault(),void this.moveFocus(-1);case l.default.DOWN:return t.preventDefault(),void this.moveFocus(1);case l.default.LEFT:case l.default.RIGHT:return;case l.default.ENTER:t.preventDefault();var e=this.select("focusedSelector");return e.length?(t.stopPropagation(),void e.trigger("uiGeoSearchSelect")):void this.trigger("uiGeoSearchEnter");case l.default.TAB:return void this.trigger("uiGeoSearchTab")}this.trigger("uiGeoSearchAutocomplete")},this.selectResult=function(e){var i=t(e.target),s=i.data("place-id"),n=i.text(),o=i.data("result-type"),a=i.data("result-type")?'[data-result-type="'+i.data("result-type")+'"]':this.attr.resultSelector,r=this.$node.find(a).index(i);this.trigger("uiGeoSearchChangeLocation",{placeId:s,placeName:n,resultType:o,placeOffset:r})},this.changeQuery=function(t){this.trigger("uiGeoSearchAutocomplete")},this.setFocus=function(e){var i=t(e.target).closest(this.attr.focusableSelector);this.select("focusedSelector").not(i).removeClass(this.attr.focusedClass),i.addClass(this.attr.focusedClass)},this.clearFocus=function(e){t(e.target).removeClass(this.attr.focusedClass)},this.after("openDropdown",function(){this.applyAriaAttrsToDropdown()}),this.after("closeDropdown",function(){this.ariaApplied&&(this.select("focusedSelector").removeAttr("aria-selected").removeAttr("tabindex"),this.select("querySelector").attr("aria-expanded",!1).removeAttr("aria-activedescendant"))}),this.after("initialize",function(){this.on("click",{resultSelector:this.selectResult}),this.on("uiGeoSearchSelect",{resultSelector:this.selectResult}),this.on("mouseover",{focusableSelector:this.setFocus}),this.on("mouseout",{focusableSelector:this.clearFocus}),this.on("change paste cut input",{querySelector:this.changeQuery}),this.on("keydown",{querySelector:this.queryKeyDown})})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(121),a=s(o),r=i(359),l=s(r),c=i(399),d=s(c),u=i(443),h=s(u),f=i(444),p=s(f),m=i(122),g=s(m);e.default=n}).call(e,i(10))},function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<li class="dropdown-link geo-turn-off-item GeoSearch-focusable" id='),s.b(s.v(s.f("id",t,e,0))),s.b(' role="option">\n  <span class="Icon Icon--close Icon--smallest"></span>Turn off location\n</li>\n'),s.fl()},partials:{},subs:{}})}).call(e,i(1))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.updateRetweetState=function(t,e){var i=e.tweet_id||e.id,s=e.retweet_id||e.id_str,n=this.$node.find('div.tweet[data-tweet-id="'+i+'"]');n.attr("data-my-retweet-id",s)},this.updateUnRetweetState=function(t,e){var i=e.tweet_id||e.id_str,s=this.$node.find('div.tweet[data-tweet-id="'+i+'"]');s.removeAttr("data-my-retweet-id data-retweet-id data-retweeter")},this.after("initialize",function(){this.attr.loggedIn&&(this.on(document,"dataDidRetweet",this.updateRetweetState),this.on(document,"dataDidUnretweet",this.updateUnRetweetState))})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=(0,a.default)(n);e.default=r},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var n=i(111),o=s(n);e.default=(0,o.default)(function(){this.openTweetstormDialog=function(){this.trigger("uiOpenTweetstormDialog")},this.after("initialize",function(){this.on("click",this.openTweetstormDialog)})})},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.sendTweet=function(t,e){this.post({url:this.apiEndpointUrl(v),data:e,error:r.TweetstormDataEvent.tweet.SEND_ERROR,success:r.TweetstormDataEvent.tweet.SEND_SUCCESS,useOAuthSessionAuth:!0})},this.sendMedia=function(t){var e=this;return this.mediaSruFinalize(t).then(function(i){return e.uploadMetadata(i,t)}).then(function(t){return e.trigger(r.TweetstormDataEvent.media.SEND_SUCCESS,{mediaId:t}),t}).catch(function(t){return e.trigger(r.TweetstormDataEvent.media.SEND_ERROR,{errors:[t]})})},this.sendMediaBatch=function(t){for(var e=this,i=arguments.length,s=Array(i>1?i-1:0),n=1;n<i;n++)s[n-1]=arguments[n];return Promise.all(s.map(this.sendMedia.bind(this))).then(function(t){e.trigger(r.TweetstormDataEvent.media.SEND_BATCH_SUCCESS,t)})},this.sendCard=function(t,e){var i=this;return this.createCard(e).then(function(t){return i.trigger(r.TweetstormDataEvent.card.SEND_SUCCESS,{cardUri:t})}).catch(function(t){return i.trigger(r.TweetstormDataEvent.card.SEND_ERROR,{errors:[t]})})},this.after("initialize",function(){var t=this;this.on(r.TweetstormDataEvent.tweet.SEND,this.sendTweet),this.on(r.TweetstormDataEvent.card.SEND,this.sendCard),this.on(r.TweetstormDataEvent.media.SEND,this.sendMediaBatch),this.on("dataMediaSruProgress",function(e,i){return t.trigger(r.TweetstormDataEvent.media.SEND_PROGRESS,i)})})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(1081),l=i(1056),c=s(l),d=i(244),u=s(d),h=i(1057),f=s(h),p=i(860),m=s(p),g=(0,a.default)(n,u.default,m.default,f.default,c.default),v="/statuses/update.json";e.default=g},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.TweetstormDataEvent={card:{SEND:"dataTweetstormCardSend",SEND_SUCCESS:"dataTweetstormCardSendSuccess",SEND_ERROR:"dataTweetstormCardSendSuccess"},media:{SEND_BATCH:"dataTweetstormMediaSendBatch",SEND_BATCH_SUCCESS:"dataTweetstormMediaSendBatchSuccess",SEND_SUCCESS:"dataTweetstormMediaSendSuccess",SEND_PROGRESS:"dataTweetstormMediaSendProgress",SEND_ERROR:"dataTweetstormMediaSendError"},tweet:{SEND:"dataTweetstormTweetSend",SEND_SUCCESS:"dataTweetstormTweetSendSuccess",SEND_ERROR:"dataTweetstormTweetSendError"}}},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var n=i(111),o=s(n),a=i(163),r=s(a),l=i(1083),c=s(l);e.default=(0,o.default)(r.default,function(){this.openTweetstormDialog=function(e,i){this.tweetBoxReady||(c.default.attachTo(t(this.node)),this.tweetBoxReady=!0),this.open()},this.after("initialize",function(){this.on(document,"uiOpenTweetstormDialog",this.openTweetstormDialog),this.on(document,"dataTweetstormSendSuccess",this.close)})})}).call(e,i(10))},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var n=i(111),o=s(n),a=i(1084),r=s(a),l=i(1085),c=s(l);e.default=(0,o.default)(function(){this.defaultAttrs({selectorTweetstormContainer:".Tweetstorm",selectorTweetBoxes:".Tweetstorm-tweet-box",selectorSendTweetstormButton:".send-tweets-btn",selectorAddTweetButton:".add-tweet-btn",classActive:"active",classHidden:"hidden",classDisabled:"disabled",classSingleTweet:"single-tweet",attrIndex:"data-index"}),this.newTweetstorm=function(){r.default.new(),this.initTweetBoxesWithData()},this.initTweetBoxesWithData=function(){var e=this;this.$tweetBoxes.each(function(i,s){t(s).addClass(e.attr.classHidden),t(s).trigger("uiClearTweetBox")}),Array(r.default.length).fill().map(function(_,t){var i=e.getTweetBoxByIndex(t);i.addClass(e.attr.classActive).removeClass(e.attr.classHidden),c.default.attachTo(i,r.default.data(t))}),this.onTweetsLengthChange()},this.validateSendTweetstormButton=function(){this.toggleButtonDisabled(this.$sendTweetstormButton,!r.default.isValid)},this.onTweetsLengthChange=function(){this.toggleButtonDisabled(this.$addTweetButton,r.default.length>=this.$tweetBoxes.length),r.default.length<=1?this.$TweetstormContainer.addClass(this.attr.classSingleTweet):this.$TweetstormContainer.removeClass(this.attr.classSingleTweet),this.validateSendTweetstormButton()},this.reorderTweetBoxIndex=function(){var e=this;this.$tweetBoxes=this.select("selectorTweetBoxes"),this.$tweetBoxes.each(function(i,s){t(s).attr(e.attr.attrIndex,i)})},this.getIndexByEvent=function(e){return parseInt(t(e.target).attr(this.attr.attrIndex))},this.getTweetBoxByIndex=function(t){return this.$tweetBoxes.eq(t)},this.toggleButtonDisabled=function(t,e){e?t.addClass(this.attr.classDisabled).prop("disabled",!0):t.removeClass(this.attr.classDisabled).prop("disabled",!1)},this.tweetBoxTextChange=function(t,e){var i=this.getIndexByEvent(t),s=this.getTweetBoxByIndex(i);i<r.default.length&&!s.hasClass(this.attr.classHidden)&&(r.default.text(i,e.text),this.validateSendTweetstormButton())},this.deleteTweet=function(t,e){var i=this.getIndexByEvent(t);if(r.default.length>1){var s=this.getTweetBoxByIndex(i),n=this.getTweetBoxByIndex(r.default.length-1);s.trigger("uiClearTweetBox"),s.addClass(this.attr.classHidden),s.insertAfter(n),r.default.delete(i),this.reorderTweetBoxIndex(),this.onTweetsLengthChange()}},this.addTweet=function(){var t=this.getTweetBoxByIndex(r.default.length);t.hasClass(this.attr.classActive)||(c.default.attachTo(t),t.addClass(this.attr.classActive)),t.removeClass(this.attr.classHidden),r.default.add(),this.onTweetsLengthChange()},this.sendTweetstorm=function(){this.trigger(document,"uiTweetstormSend")},this.after("initialize",function(t,e){this.$TweetstormContainer=this.select("selectorTweetstormContainer"),this.$addTweetButton=this.select("selectorAddTweetButton"),this.$sendTweetstormButton=this.select("selectorSendTweetstormButton"),this.reorderTweetBoxIndex(),e.TweetstormDraft||this.newTweetstorm(),this.on("uiTweetBoxTextChange",this.tweetBoxTextChange),this.on("uiTweetBoxDeleteTweet",this.deleteTweet),this.on(document,"dataTweetstormSendSuccess",this.newTweetstorm),this.on(this.$addTweetButton,"click",this.addTweet),this.on(this.$sendTweetstormButton,"click",this.sendTweetstorm)})})}).call(e,i(10))},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),n=function(){function t(){i(this,t),this.status=""}return s(t,[{key:"tweetBoxId",value:function(t){this.tweetBoxId=t}},{key:"text",value:function(t){this.status=t}},{key:"medias",value:function(t){this.media_ids=t.join(",")}},{key:"replyTo",value:function(t){this.in_reply_to_status_id=t}},{key:"isValid",get:function(){return this.status&&this.status.length>=0&&this.status.length<140}},{key:"data",get:function(){var t=this.status,e=this.media_ids,i=this.in_reply_to_status_id;return{status:t,media_ids:e,in_reply_to_status_id:i}}}]),t}(),o=[],a={"new":function(){return o=[new n]},add:function(){return o.push(new n)},"delete":function(t){return o.splice(t,1)},deleteAll:function(){return o=[]},tweetBoxId:function(t,e){return o[t].tweetBoxId(e)},text:function(t,e){return o[t].text(e)},medias:function(t,e){return o[t].medias(e)},replyTo:function(t,e){return o[t].replyTo(e)},get length(){return o.length},get isValid(){return o.every(function(t){return t.isValid})},findByTweetBoxId:function(t){return o.filter(function(e){return e.tweetBoxId===t})},data:function(t){return o[t].data}};e.default=a},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({selectorDeleteTweetButton:".delete-tweet-btn"}),this.clear=function(){this.trigger("uiClearUndoState"),this.setVisibleText("")},this.delete=function(t){t.preventDefault(),this.trigger("uiTweetBoxDeleteTweet")},this.after("initialize",function(t,e){this.initTextNode(),e&&"status"in e&&this.setVisibleText(e.status),this.on("uiTextChanged","uiTweetBoxTextChange"),this.on("click",{selectorDeleteTweetButton:this.delete}),this.on("uiClearTweetBox",this.clear)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(233),l=s(r),c=i(436),d=s(c),u=i(437),h=s(u),f=i(228),p=s(f),m=i(438),g=s(m),v=i(1032),b=s(v);e.default=(0,a.default)(n,p.default,g.default,l.default,d.default,h.default,b.default)},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];
for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},o=i(111),a=s(o),r=i(1081),l=i(1084),c=s(l),d=i(1087),u=s(d);e.default=(0,a.default)(u.default,function(){this.initialState({uploading:!1,uploadIndex:0}),this.uploadTweetStorm=function(t,e){c.default.length&&(this.initUpload(),this.uploadTweet())},this.initUpload=function(){this.mergeState({uploading:!0,uploadIndex:0})},this.resetUpload=function(){this.mergeState({uploading:!1,uploadIndex:0})},this.uploadTweet=function(t){var e=this.state.uploadIndex;this.trigger(r.TweetstormDataEvent.tweet.SEND,n({},c.default.data(e),t))},this.uploadTweetSuccess=function(t,e){var i=this.state.uploading;i&&(++this.state.uploadIndex>=c.default.length?this.uploadTweetstormSuccess():this.uploadTweet({in_reply_to_status_id:e.id_str}))},this.uploadTweetstormSuccess=function(){this.resetUpload(),this.trigger("dataTweetstormSendSuccess"),this.trigger("uiShowMessage",{message:"Success TweetStorm!"})},this.after("initialize",function(){this.on("uiTweetstormSend",this.uploadTweetStorm),this.on(r.TweetstormDataEvent.tweet.SEND_SUCCESS,this.uploadTweetSuccess)})})},function(t,e,i){!function(e,i){t.exports=i()}(this,function(){return function(t){function e(s){if(i[s])return i[s].exports;var n=i[s]={exports:{},id:s,loaded:!1};return t[s].call(n.exports,n,n.exports,e),n.loaded=!0,n.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(t){return t=t||{},function(){var e=this;return Object.keys(t).reduce(function(i,s){var n=t[s];return i[s]="function"==typeof n?n.call(e):n,i},{})}}function o(){this.initialState=function(t){if(this._stateDef)throw new Error("initialState can only be defined once");this._stateDef="function"==typeof t?t:n(t)},this.replaceState=function(t){if(t&&"object"==typeof t){var e=this.state;return this.state=t,this.stateChanged(this.state,e),this.state}},this.mergeState=function(t){return this.replaceState((0,r.default)({},this.state,t))},this.fromState=function(t){return function(){return this.state[t]}},this.toState=function(t){return function(e){var i={};i[t]=e,this.mergeState(i)}},this.fromAttr=function(t){return function(e){return this.attr[t]}},this.stateChanged=function(t,e){},this.after("initialize",function(){this._stateDef=this._stateDef||l,this.replaceState(this._stateDef())})}Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var a=i(2),r=s(a),l=function(){return{}};t.exports=e.default},function(t,e,i){function s(t){return function(e){return null==e?void 0:e[t]}}function n(t){return null!=t&&a(b(t))}function o(t,e){return t="number"==typeof t||f.test(t)?+t:-1,e=null==e?v:e,t>-1&&t%1==0&&e>t}function a(t){return"number"==typeof t&&t>-1&&t%1==0&&v>=t}function r(t){for(var e=c(t),i=e.length,s=i&&t.length,n=!!s&&a(s)&&(h(t)||u(t)),r=-1,l=[];++r<i;){var d=e[r];(n&&o(d,s)||m.call(t,d))&&l.push(d)}return l}function l(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function c(t){if(null==t)return[];l(t)||(t=Object(t));var e=t.length;e=e&&a(e)&&(h(t)||u(t))&&e||0;for(var i=t.constructor,s=-1,n="function"==typeof i&&i.prototype===t,r=Array(e),c=e>0;++s<e;)r[s]=s+"";for(var d in t)c&&o(d,e)||"constructor"==d&&(n||!m.call(t,d))||r.push(d);return r}var d=i(9),u=i(10),h=i(11),f=/^\d+$/,p=Object.prototype,m=p.hasOwnProperty,g=d(Object,"keys"),v=9007199254740991,b=s("length"),w=g?function(t){var e=null==t?void 0:t.constructor;return"function"==typeof e&&e.prototype===t||"function"!=typeof t&&n(t)?r(t):l(t)?g(t):[]}:r;t.exports=w},function(t,e,i){function s(t,e,i){for(var s=-1,n=a(e),o=n.length;++s<o;){var r=n[s],l=t[r],c=i(l,e[r],r,t,e);(c===c?c===l:l!==l)&&(void 0!==l||r in t)||(t[r]=c)}return t}var n=i(3),o=i(5),a=i(1),r=o(function(t,e,i){return i?s(t,e,i):n(t,e)});t.exports=r},function(t,e,i){function s(t,e){return null==e?t:n(e,o(e),t)}var n=i(4),o=i(1);t.exports=s},function(t,e){function i(t,e,i){i||(i={});for(var s=-1,n=e.length;++s<n;){var o=e[s];i[o]=t[o]}return i}t.exports=i},function(t,e,i){function s(t){return a(function(e,i){var s=-1,a=null==e?0:i.length,r=a>2?i[a-2]:void 0,l=a>2?i[2]:void 0,c=a>1?i[a-1]:void 0;for("function"==typeof r?(r=n(r,c,5),a-=2):(r="function"==typeof c?c:void 0,a-=r?1:0),l&&o(i[0],i[1],l)&&(r=3>a?void 0:r,a=1);++s<a;){var d=i[s];d&&t(e,d,r)}return e})}var n=i(6),o=i(7),a=i(8);t.exports=s},function(t,e){function i(t,e,i){if("function"!=typeof t)return s;if(void 0===e)return t;switch(i){case 1:return function(i){return t.call(e,i)};case 3:return function(i,s,n){return t.call(e,i,s,n)};case 4:return function(i,s,n,o){return t.call(e,i,s,n,o)};case 5:return function(i,s,n,o,a){return t.call(e,i,s,n,o,a)}}return function(){return t.apply(e,arguments)}}function s(t){return t}t.exports=i},function(t,e){function i(t){return function(e){return null==e?void 0:e[t]}}function s(t){return null!=t&&a(d(t))}function n(t,e){return t="number"==typeof t||l.test(t)?+t:-1,e=null==e?c:e,t>-1&&t%1==0&&e>t}function o(t,e,i){if(!r(i))return!1;var o=typeof e;if("number"==o?s(i)&&n(e,i.length):"string"==o&&e in i){var a=i[e];return t===t?t===a:a!==a}return!1}function a(t){return"number"==typeof t&&t>-1&&t%1==0&&c>=t}function r(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}var l=/^\d+$/,c=9007199254740991,d=i("length");t.exports=o},function(t,e){function i(t,e){if("function"!=typeof t)throw new TypeError(s);return e=n(void 0===e?t.length-1:+e||0,0),function(){for(var i=arguments,s=-1,o=n(i.length-e,0),a=Array(o);++s<o;)a[s]=i[e+s];switch(e){case 0:return t.call(this,a);case 1:return t.call(this,i[0],a);case 2:return t.call(this,i[0],i[1],a)}var r=Array(e+1);for(s=-1;++s<e;)r[s]=i[s];return r[e]=a,t.apply(this,r)}}var s="Expected a function",n=Math.max;t.exports=i},function(t,e){function i(t){return!!t&&"object"==typeof t}function s(t,e){var i=null==t?void 0:t[e];return a(i)?i:void 0}function n(t){return o(t)&&h.call(t)==r}function o(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function a(t){return null!=t&&(n(t)?f.test(d.call(t)):i(t)&&l.test(t))}var r="[object Function]",l=/^\[object .+?Constructor\]$/,c=Object.prototype,d=Function.prototype.toString,u=c.hasOwnProperty,h=c.toString,f=RegExp("^"+d.call(u).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=s},function(t,e){function i(t){return function(e){return null==e?void 0:e[t]}}function s(t){return o(t)&&m.call(t,"callee")&&(!v.call(t,"callee")||g.call(t)==u)}function n(t){return null!=t&&r(b(t))&&!a(t)}function o(t){return c(t)&&n(t)}function a(t){var e=l(t)?g.call(t):"";return e==h||e==f}function r(t){return"number"==typeof t&&t>-1&&t%1==0&&d>=t}function l(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function c(t){return!!t&&"object"==typeof t}var d=9007199254740991,u="[object Arguments]",h="[object Function]",f="[object GeneratorFunction]",p=Object.prototype,m=p.hasOwnProperty,g=p.toString,v=p.propertyIsEnumerable,b=i("length");t.exports=s},function(t,e){function i(t){return!!t&&"object"==typeof t}function s(t,e){var i=null==t?void 0:t[e];return r(i)?i:void 0}function n(t){return"number"==typeof t&&t>-1&&t%1==0&&v>=t}function o(t){return a(t)&&p.call(t)==c}function a(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function r(t){return null!=t&&(o(t)?m.test(h.call(t)):i(t)&&d.test(t))}var l="[object Array]",c="[object Function]",d=/^\[object .+?Constructor\]$/,u=Object.prototype,h=Function.prototype.toString,f=u.hasOwnProperty,p=u.toString,m=RegExp("^"+h.call(f).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),g=s(Array,"isArray"),v=9007199254740991,b=g||function(t){return i(t)&&n(t.length)&&p.call(t)==l};t.exports=b}])})},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({limit:10,remoteDebounceInterval:300,remoteThrottleInterval:300,outstandingRemoteRequestCount:0,queuedRequestData:!1,outstandingRemoteRequestMax:6,useThrottle:!1,tweetContextEnabled:!1,topicsWithFiltersEnabled:!1}),this.triggerSuggestionsEvent=function(t,e,i){this.trigger("dataTypeaheadSuggestionsResults",{suggestions:i,queryData:e,id:t})},this.hasAnySuggestions=function(t,e){return e.some(function(e){return t[e]&&t[e].length})},this.needsRemoteRequest=function(t,e){return e.some(function(e){return this.datasources[e]&&this.datasources[e].requiresRemoteSuggestions&&this.datasources[e].requiresRemoteSuggestions(t)},this)},this.getLocalSuggestions=function(t,e,i){function s(){o++,o===e.length&&i(n)}var n={},o=0;e.forEach(function(e){this.datasources[e]?this.datasources[e].getLocalSuggestions(t,function(t){t.length&&(t.forEach(function(t){return t.origin="prefetched"}),n[e]=t),s()}):s()},this)},this.processRemoteSuggestions=function(t){this.adjustRequestCount(-1);var e=t.sourceEventData,i=e.suggestions||{};e.datasources.forEach(function(s){var n=s.processRemoteSuggestions(e,t,i);if(n[s.attr.id]&&n[s.attr.id].length){for(var o in n)n[o].forEach(function(t){return t.origin=t.origin||"remote"});e.suggestions[s.attr.id]=n[s.attr.id]}},this),this.processSuggestionsByDataset(i),this.triggerSuggestionsEvent(e.id,e.queryData,i),this.makeQueuedRemoteRequestIfPossible()},this.getRemoteSuggestions=function(t,e,i,s){e&&this.needsRemoteRequest(e,s)&&(this.request[t]||(this.attr.useThrottle?this.request[t]=u.default.throttle(this.splitRemoteRequests.bind(this),this.attr.remoteThrottleInterval):this.request[t]=u.default.debounce(this.splitRemoteRequests.bind(this),this.attr.remoteDebounceInterval)),0===e.query.indexOf("@")&&"COMPOSE"===e.typeaheadSrc&&(e.query=e.query.substring(1),e.atSignRemoved=!0),this.request[t](t,e,i,s))},this.makeQueuedRemoteRequestIfPossible=function(){if(this.attr.outstandingRemoteRequestCount===this.attr.outstandingRemoteRequestMax-1&&this.attr.queuedRequestData){var t=this.attr.queuedRequestData;this.getRemoteSuggestions(t.id,t.queryData,t.suggestions,t.datasources),this.attr.queuedRequestData=!1}},this.adjustRequestCount=function(t){this.attr.outstandingRemoteRequestCount+=t},this.canMakeRemoteRequest=function(t){return this.attr.outstandingRemoteRequestCount<this.attr.outstandingRemoteRequestMax||(this.attr.queuedRequestData=t,!1)},this.processRemoteRequestError=function(){this.adjustRequestCount(-1),this.makeQueuedRemoteRequestIfPossible()},this.splitRemoteRequests=function(t,e,i,s){var n={};s.forEach(function(t){if(this[t]&&this[t].requiresRemoteSuggestions&&this[t].requiresRemoteSuggestions(e)){var i=this[t];n[i.attr.remotePath]?n[i.attr.remotePath].push(i):n[i.attr.remotePath]=[i]}},this.datasources);for(var o in n){this.executeRemoteRequest(t,e,i,n[o]);break}},this.executeRemoteRequest=function(t,e,i,s){var n={id:t,queryData:e,suggestions:i,datasources:s};this.canMakeRemoteRequest(n)&&((!this.attr.tweetContextEnabled||e.tweetContext&&e.tweetContext.length>1e3)&&(e.tweetContext=void 0),this.adjustRequestCount(1),this.get({url:s[0].attr.remotePath,data:{q:e.query,tweet_context:e.tweetContext,count:this.attr.limit,result_type:s.map(function(t){return t.attr.remoteType}).join(","),filters:this.attr.topicsWithFiltersEnabled,src:e.typeaheadSrc},eventData:n,success:this.processRemoteSuggestions.bind(this),error:this.processRemoteRequestError.bind(this)}))},this.truncateTopicsWithRecentSearches=function(t){if(t.topics&&t.recentSearches){var e=t.recentSearches.length,i=4-e;t.topics=t.topics.slice(0,i)}},this.dedupSuggestions=function(t,e,i){function s(){return e.some(function(t){return t in i})}function n(t){var e=t.topic||t.name;return!o[e.toLowerCase()]}if(i[t]&&s()){var o={};i[t].forEach(function(t){var e=t.name||t.topic;o[e.toLowerCase()]=!0}),e.forEach(function(t){t in i&&(i[t]=i[t].filter(n))})}},this.processSuggestionsByDataset=function(t){this.dedupSuggestions("recentSearches",["topics"],t),this.truncateTopicsWithRecentSearches(t)},this.getSuggestions=function(t,e){var i=this;if("undefined"==typeof e)throw"No parameters specified";if(!e.datasources)throw"No datasources specified";if("undefined"==typeof e.queryData)throw"No query data specified";if("undefined"==typeof e.queryData.query)throw"No query specified";if(!e.id)throw"No id specified";this.getLocalSuggestions(e.queryData,e.datasources,function(t){i.processSuggestionsByDataset(t);var s="@"!==e.queryData.query&&i.needsRemoteRequest(e.queryData,e.datasources);!i.hasAnySuggestions(t,e.datasources)&&s||i.triggerSuggestionsEvent(e.id,e.queryData,t),s&&i.getRemoteSuggestions(e.id,e.queryData,t,e.datasources)})},this.getGlobalDatasources=function(){return K},this.setGlobalDatasources=function(t){K=t},this.addSynchronousDatasource=function(t,e,i){var s=i[e]||{};this.isDatasourceEnabled(e)&&(K.hasOwnProperty(e)?this.datasources[e]=K[e]:K[e]=this.datasources[e]=new t(o({},s,{id:e})),this.setupEventListeners(e))},this.addAsynchronousDatasource=function(t){var e=this,i=t.datasource;t=t||{};var s=t.dsName,n=this.componentOptions[s]||{},a=new i(o({},n,{id:s}),t);return a.initialize().then(function(t){return K[s]=e.datasources[s]=a,t})},this.initializeLocalData=function(t){this.addDatasourcesNotUsingIndexedDB();var e=this.shouldUseIndexedDB()?this.addAsynchronousDatasources():this.addSynchronousDatasources(),i=this.addDMTypeaheadDatasources();Promise.all([e,i]).then(t,t)},this.isDatasourceEnabled=function(t){var e=this.componentOptions[t]||{};return!!e.enabled},this.isBrowserSafari=function(){return(0,r.default)().safari},this.shouldUseIndexedDB=function(){return H.default.isSupported()&&this.attr.useIndexedDB&&!this.isBrowserSafari()},this.addAsync=function(t){var e=arguments,i=t.dsName,s=t.dbName,n=t.datasource,o=this;return(0,Q.default)({title:"Typeahead ("+i+")",enabled:window.DEBUG&&window.DEBUG.enabled},new Promise(function(t,a){o.isDatasourceEnabled(i)?o.addAsynchronousDatasource({dbName:s,dsName:i,datasource:n,indexedDBWrapper:G.default}).then(function(e){o.setupEventListeners(i),o.addDBHandleToGlobals(s,e),t([i,s,e])}).catch(function(){o.indexedDBInitializationFailed=!0,a(e)}):t()}))},this.addDBHandleToGlobals=function(t,e){e&&(window.globalIndexedDBs[t]=e)},this.addDMTypeaheadDatasources=function(){return this.addAsync({dsName:"dmConversations",dbName:"dm_typeahead",datasource:T.default})},this.addAsynchronousDatasources=function(){var t=this;return this.pendingAsyncDatasources=this.addAsync({dsName:"accounts",dbName:"accounts",datasource:y.default}).then(function(){return t.addAsync({dsName:"dmAccounts",dbName:"accounts",datasource:y.default})}).then(function(){return t.addAsync({dsName:"mediaTagAccounts",dbName:"accounts",datasource:y.default})})},this.addDatasourcesNotUsingIndexedDB=function(){this.addSynchronousDatasource(M.default,"savedSearches",this.componentOptions),this.addSynchronousDatasource(P.default,"followedSearches",this.componentOptions),this.addSynchronousDatasource(R.default,"topics",this.componentOptions),this.addSynchronousDatasource(R.default,"hashtags",u.default.merge(this.componentOptions,{hashtags:{remoteType:"hashtags"}},!0)),this.addSynchronousDatasource(N.default,"trendLocations",this.componentOptions),this.addSynchronousDatasource(B.default,"selectedUsers",this.componentOptions),this.addSynchronousDatasource(V.default,"prefillUsers",this.componentOptions),this.addSynchronousDatasource(k.default,"recentSearches",this.componentOptions),this.addSynchronousDatasource(j.default,"concierge",this.componentOptions)},this.addSynchronousDatasources=function(){return this.addSynchronousDatasource(w.default,"accounts",this.componentOptions),this.addSynchronousDatasource(w.default,"dmAccounts",this.componentOptions),this.addSynchronousDatasource(w.default,"mediaTagAccounts",this.componentOptions),Promise.resolve()},this.possiblyScribeIndexedDB=function(){if(this.shouldUseIndexedDB()){var t=this.indexedDBInitializationFailed?"failure":"success";this.scribe({component:"indexeddb",action:t})}},this.after("initialize",function(t,e){var i=this;this.datasources={},this.request={},this.componentOptions=e,this.initializeLocalData(function(){i.on("uiNeedsTypeaheadSuggestions",i.getSuggestions),i.possiblyScribeIndexedDB()})})}Object.defineProperty(e,"__esModule",{value:!0});var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},a=i(156),r=s(a),l=i(111),c=s(l),d=i(126),u=s(d),h=i(244),f=s(h),p=i(1089),m=s(p),g=i(142),v=s(g),b=i(1090),w=s(b),S=i(1092),y=s(S),C=i(1095),T=s(C),D=i(1096),M=s(D),I=i(1097),P=s(I),x=i(1098),k=s(x),A=i(1099),E=s(A),O=i(1100),R=s(O),F=i(1101),N=s(F),U=i(1102),j=s(U),L=i(1103),B=s(L),$=i(1104),V=s($),q=i(1093),H=s(q),z=i(1105),G=s(z),W=i(1094),Q=s(W);window.globalIndexedDBs={};var K={};e.default=(0,c.default)(n,f.default,m.default,E.default,v.default)},function(t,e){"use strict";function i(){this.defaultAttrs({cache_limit:10}),this.getCachedSuggestions=function(t){return this.cache[t]?this.cache[t].value:null},this.clearCache=function(){this.cache={NEWEST:null,OLDEST:null,COUNT:0,LIMIT:this.attr.cache_limit}},this.deleteCachedSuggestions=function(t){return!!this.cache[t]&&(this.cache.COUNT>1&&(t===this.cache.NEWEST.query?(this.cache.NEWEST=this.cache.NEWEST.before,this.cache.NEWEST.after=null):t===this.cache.OLDEST.query?(this.cache.OLDEST=this.cache.OLDEST.after,this.cache.OLDEST.before=null):(this.cache[t].after.before=this.cache[t].before,this.cache[t].before.after=this.cache[t].after)),delete this.cache[t],this.cache.COUNT-=1,!0)},this.setCachedSuggestions=function(t,e){0!==this.cache.LIMIT&&(this.deleteCachedSuggestions(t),this.cache.COUNT>=this.cache.LIMIT&&this.deleteCachedSuggestions(this.cache.OLDEST.query),0===this.cache.COUNT?(this.cache[t]={query:t,value:e,before:null,after:null},this.cache.NEWEST=this.cache[t],this.cache.OLDEST=this.cache[t]):(this.cache[t]={query:t,value:e,before:this.cache.NEWEST,after:null},this.cache.NEWEST.after=this.cache[t],this.cache.NEWEST=this.cache[t]),this.cache.COUNT+=1)},this.aroundGetSuggestions=function(t,e,i){var s=i.id+":"+i.query,n=this.getCachedSuggestions(s);return n?void this.triggerSuggestionsEvent(i.id,i.query,n):void t(e,i)},this.afterTriggerSuggestionsEvent=function(t,e,i,s){if(!s){var n=t+":"+e;this.setCachedSuggestions(n,i)}},this.after("triggerSuggestionsEvent",this.afterTriggerSuggestionsEvent),this.around("getSuggestions",this.aroundGetSuggestions),this.after("initialize",function(){this.clearCache(),this.on("uiTypeaheadDeleteRecentSearch",this.clearCache)})}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(e){this.attr={id:null,ttl_ms:1728e5,localStorageCount:1200,ie8LocalStorageCount:1e3,limit:6,version:4,localQueriesEnabled:!1,remoteQueriesEnabled:!1,onlyDMable:!1,onlyShowUsersWithCanMediaTag:!1,currentUserId:null,storageAdjacencyList:"userAdjacencyList",storageHash:"userHash",storageProtocol:"protocol",storageVersion:"userVersion",remotePath:"/i/search/typeahead.json",remoteType:"users",prefetchPath:"/i/search/typeahead.json",prefetchType:"users",storageBlackList:"userBlackList",maxLengthBlacklist:100},this.attr=g.default.merge(this.attr,e),this.after=t.noop,this.defaultAttrs=t.noop,p.default.mixin(this,[d.default,b.default,h.default]),this.getPrefetchCount=function(){return this.attr.localStorageCount},this.isMetadataExpired=function(){var t=this.storage.getItem(this.attr.storageVersion),e=this.storage.getItem(this.attr.storageProtocol);return t!==this.attr.version||e!==this.getProtocol()},this.getStorageKeys=function(){return[this.attr.storageVersion,this.attr.storageHash,this.attr.storageAdjacencyList,this.attr.storageProtocol]},this.getDataFromLocalStorage=function(){this.userHash=this.storage.getItem(this.attr.storageHash)||this.userHash,this.adjacencyList=this.storage.getItem(this.attr.storageAdjacencyList)||this.adjacencyList},this.processResults=function(t){return t&&t[this.attr.prefetchType]?(t[this.attr.prefetchType].forEach(function(t){this.isAccountMalformedAndScribe(t,"typeahead_local")||(t.tokens=t.tokens.map(function(t){return"string"==typeof t?t:t.token}),t.prefetched=!0,this.userHash[t.id]=t,t.tokens.forEach(function(e){var i=a.default.getFirstChar(e);i.trim().length&&(void 0===this.adjacencyList[i]&&(this.adjacencyList[i]=[]),this.adjacencyList[i].indexOf(t.id)===-1&&this.adjacencyList[i].push(t.id))},this))},this),this.storage.setItem(this.attr.storageHash,this.userHash,this.attr.ttl_ms),this.storage.setItem(this.attr.storageAdjacencyList,this.adjacencyList,this.attr.ttl_ms),this.storage.setItem(this.attr.storageVersion,this.attr.version,this.attr.ttl_ms),void this.storage.setItem(this.attr.storageProtocol,this.getProtocol(),this.attr.ttl_ms)):void this.useStaleData()},this.getLocalSuggestions=function(t,e){if(!this.attr.localQueriesEnabled)return void e([]);var i=a.default.tokenizeText(t.query.replace("@","")),s=this.getPotentiallyMatchingIds(i),n=this.getAccountsFromIds(s),o=n.filter(this.matcher(i));o.sort(this.sorter),o=o.slice(0,this.attr.limit),e(o)},this.getPotentiallyMatchingIds=function(t){var e=[];return t.map(function(t){var i=this.adjacencyList[a.default.getFirstChar(t)];i&&(e=e.concat(i))},this),e=g.default.uniqueArray(e)},this.getAccountsFromIds=function(t){var e=[];return t.forEach(function(t){var i=this.userHash[t];i&&e.push(i)},this),e},this.matcher=function(t){var e=this;return function(i){var s=i.tokens;if(e.attr.onlyDMable&&!i.is_dm_able)return!1;if(!e.isEligibleForMediaTagSuggestion(i))return!1;var n=t.every(function(t){var e=s.filter(function(e){return 0===e.indexOf(t)});return e.length});return n?i:void 0}},this.sorter=function(t,e){function i(t,e){var i=t.score_boost?t.score_boost:0,s=e.score_boost?e.score_boost:0,n=t.rounded_score?t.rounded_score:0,o=e.rounded_score?e.rounded_score:0;return o+s-(n+i)}var s=t.prefetched,n=e.prefetched;return s&&!n?-1:n&&!s?1:i(t,e)},this.processRemoteSuggestions=function(t,e,i){var s=i[this.attr.id]||[],n={};return s.forEach(function(t){return n[t.id_str]=!0},this),this.requiresRemoteSuggestions(t.queryData)&&e[this.attr.remoteType]&&e[this.attr.remoteType].forEach(function(t){var e=!n[t.id_str]&&(!this.attr.onlyDMable||t.is_dm_able)&&this.isEligibleForMediaTagSuggestion(t)&&!this.isAccountMalformedAndScribe(t,"typeahead_remote");e&&s.push(t)},this),i[this.attr.id]=s.slice(0,this.attr.limit),i[this.attr.id].forEach(function(t){this.removeBlacklistSocialContext(t)},this),i},this.removeBlacklistSocialContext=function(t){t.first_connecting_user_id in this.socialContextBlackList&&(t.first_connecting_user_name=void 0,t.first_connecting_user_id=void 0)},this.requiresRemoteSuggestions=function(t){return!(!t||!t.query)&&(t.accountsWithoutAtSignLocalOnly?this.attr.remoteQueriesEnabled&&("@"===a.default.getFirstChar(t.query)||t.atSignRemoved):this.attr.remoteQueriesEnabled)},this.isEligibleForMediaTagSuggestion=function(t){return!this.attr.onlyShowUsersWithCanMediaTag||t.can_media_tag||t.id===this.attr.currentUserId},this.isAccountMalformedAndScribe=function(t,e){var i=a.default.isAccountMalformed(t);return i&&this.scribe({component:"local_storage",element:e,action:"empty"}),i},this.initialize=function(){var t=(0,l.default)({withExpiry:!0});this.storage=new t("typeahead"),this.adjacencyList={},this.userHash={},this.attr.localQueriesEnabled&&this.loadData(this.attr.prefetchPath,this.attr.prefetchType),this.socialContextBlackList=this.storage.getItem(this.attr.storageBlackList)||{}},this.initialize()}Object.defineProperty(e,"__esModule",{value:!0});var o=i(416),a=s(o),r=i(247),l=s(r),c=i(244),d=s(c),u=i(142),h=s(u),f=i(121),p=s(f),m=i(126),g=s(m),v=i(1091),b=s(v);e.default=n}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.prefetch=function(t,e,i,s){var n=this,o={prefetch:!0,result_type:e,count:this.getPrefetchCount(),media_tagging_in_prefetch:this.shouldIncludeCanMediaTag()};return this.storage&&(o[e+"_cache_age"]=this.storage.getCacheAge(this.attr.storageHash,this.attr.ttl_ms)),new Promise(function(e,a){var r=n.get({url:t,data:o,eventData:{},success:i,error:s});r.then(e).fail(a)})},this.useStaleData=function(){this.storage&&(this.extendTTL(),this.getDataFromLocalStorage())},this.extendTTL=function(){for(var t=this.getStorageKeys(),e=0;e<t.length;e++)this.storage.updateTTL(t[e],this.attr.ttl_ms)},this.loadData=function(t,e){var i=this.getStorageKeys().some(function(t){return this.storage.isExpired(t)},this);i||this.isMetadataExpired()?this.prefetch(t,e,this.processResults.bind(this),this.useStaleData.bind(this)):this.getDataFromLocalStorage()},this.getProtocol=function(){return window.location.protocol},this.shouldIncludeCanMediaTag=function(){return a.default.getDecider("enable_media_tag_prefetch")}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(136),a=s(o);e.default=n},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(e,i){this.attr={id:null,ttlMilliseconds:1728e5,itemCount:1e3,limit:6,version:1,localQueriesEnabled:!1,remoteQueriesEnabled:!1,onlyDMable:!1,onlyShowUsersWithCanMediaTag:!1,currentUserId:null,remotePath:"/i/search/typeahead.json",remoteType:"users",prefetchPath:"/i/search/typeahead.json",prefetchType:"users",storageBlackList:"userBlackList",maxLengthBlacklist:100,dbName:i.dbName||"accounts_typeahead",dbVersion:20150128,datastores:{MetadataStore:{name:"MetadataStore",keyPath:"key"},AccountTokensToIds:{name:"AccountTokensToIds",keyPath:"token"},IdsToAccounts:{name:"IdsToAccounts",keyPath:"id"}}},this.attr=b.default.merge(this.attr,e),this.after=t.noop,this.defaultAttrs=t.noop,g.default.mixin(this,[h.default,S.default,p.default]),this.initialize=function(t){var e=t||this.openIndexedDB.bind(this);this.isUsingIndexedDB=!0,this.initializeSocialContextBlacklist();var i=[this.attr.datastores.MetadataStore,this.attr.datastores.AccountTokensToIds,this.attr.datastores.IdsToAccounts],s=this;return e(this.attr.dbName,this.attr.dbVersion,i).then(this.checkIfLocalDataHasExpired.bind(this)).then(this.fetchDataIfExpired.bind(this)).then(this.repopulateDataStore.bind(this)).then(function(){return s.database}).catch(this.onInitializationError.bind(this))},this.openIndexedDB=function(t,e,i){var s=this;return l.default.open(t,e,i).then(function(t){return s.database=t})},this.close=function(){this.database&&this.database.close()},this.checkIfLocalDataHasExpired=function(){var t=this;return this.getData(this.attr.datastores.MetadataStore.name,this.attr.datastores.MetadataStore.keyPath).then(function(e){return t.isMetadataExpired(e)})},this.fetchDataIfExpired=function(t){return t&&this.attr.localQueriesEnabled&&this.prefetch(this.attr.prefetchPath,this.attr.prefetchType)},this.getData=function(t,e){return this.database.get(t,e)},this.repopulateDataStore=function(t){return t&&this.database.clear().then(this.populateDataStore.bind(this,t))},this.populateDataStore=function(t){return t&&this.database.put(this.processData(t))},this.onInitializationError=function(t){!this.isHttpError(t)&&this.close()},this.getPrefetchCount=function(){return this.attr.itemCount},this.initializeSocialContextBlacklist=function(){var t=(0,C.default)({withExpiry:!0});this.storage=new t("typeahead"),this.socialContextBlackList=this.storage.getItem(this.attr.storageBlackList)||{}},this.isMetadataExpired=function(t){if(!t)return!0;var e=t.version!==this.attr.version,i=this.hasTTLExpired(t.expirationTime),s=t.protocol!==this.getProtocol();return e||i||s},this.processData=function(t){var e=t[this.attr.prefetchType].filter(function(t){return!this.isAccountMalformedAndScribe(t,"typeahead_local")},this);t[this.attr.prefetchType]=e;var i={};return i[this.attr.datastores.AccountTokensToIds.name]=this.createItemsForAccountTokensToIdsObjectstore(t),i[this.attr.datastores.IdsToAccounts.name]=this.createItemsForIdsToAccountsObjectstore(t),i[this.attr.datastores.MetadataStore.name]=this.createItemsForMetadataObjectstore(t),i},this.createItemsForIdsToAccountsObjectstore=function(t){var e=t[this.attr.prefetchType].map(function(t){t.prefetched=!0;var e={};return e[this.attr.datastores.IdsToAccounts.keyPath]=t.id,e.account=t,e},this);return e},this.createItemsForAccountTokensToIdsObjectstore=function(t){var e=this.attr.datastores.AccountTokensToIds.keyPath,i={},s=[];t[this.attr.prefetchType].forEach(function(t){t.tokens.forEach(function(e){var s=e.token;""!==s&&(Array.isArray(i[s])?i[s].push(t.id):i[s]=[t.id])},this)},this);for(var n in i)if(i.hasOwnProperty(n)){var o={};o.ids=i[n],o[e]=n,s.push(o)}return s},this.createItemsForMetadataObjectstore=function(t){var e={};return e[this.attr.datastores.MetadataStore.keyPath]=this.attr.datastores.MetadataStore.keyPath,e.expirationTime=this.attr.ttlMilliseconds+(new Date).getTime(),e.version=this.attr.version,e.protocol=this.getProtocol(),[e]},this.addAccount=function(t){return this.getTokenIdsForAccount(t).then(this.addTokenIdsForAccount.bind(this,t)).then(this.addToIdsToAccounts.bind(this,t))},this.getTokenIdsForAccount=function(t){t=t.account||t;var e=t.tokens.map(function(t){var e=this.standardizeToken(t);return this.database.get(this.attr.datastores.AccountTokensToIds.name,e)},this);return Promise.all(e)},this.addTokenIdsForAccount=function(t,e){var i=a.default.compact(e);i=this.addNewTokenIds(t,i),i=this.addIdToTokenIds(t,i);var s={};return s[this.attr.datastores.AccountTokensToIds.name]=i,this.database.put(s)},this.standardizeToken=function(t){return"string"==typeof t?t:t.token},this.addNewTokenIds=function(t,e){var i=[];return t.tokens.forEach(function(t){var s=e.some(function(e){return e.token===t});s||i.push(this.createTokenId(t))},this),e.concat(i)},this.addIdToTokenIds=function(t,e){return e.forEach(function(e){return e.ids.push(t.id)}),e},this.createTokenId=function(t){var e={};return e[this.attr.datastores.AccountTokensToIds.keyPath]=t,e.ids=[],e},this.removeAccount=function(t){return this.database.destroy(this.attr.datastores.IdsToAccounts.name,t)},this.createAddAccountOptions=function(t){var e={},i={};return e[this.attr.datastores.IdsToAccounts.keyPath]=t.id,e.account=t,i[this.attr.datastores.IdsToAccounts.name]=[e],i},this.addToIdsToAccounts=function(t){var e=this.createAddAccountOptions(t);return this.database.put(e)},this.getLocalSuggestions=function(t,e){var i=d.default.tokenizeText(t.query.replace("@",""));return this.attr.localQueriesEnabled&&""!==t.query?void this.search(i).then(e,e):void e([])},this.search=function(t){return this.getIds(t).then(this.filterForRelevantIds.bind(this)).then(this.getAccounts.bind(this)).then(this.filterAndSortAccounts.bind(this))},this.filterForRelevantIds=function(t){if(0===t.length)return[];var e=this.createIdGroups(t),i=b.default.uniqueArray(e.candidateIds);return this.getCandidateIdsFoundInAllTermGroups(i,e.allIdGroupsByTerm)},this.getAccounts=function(t){var e=t.map(function(t){return this.database.get(this.attr.datastores.IdsToAccounts.name,t)},this);return Promise.all(e)},this.filterAndSortAccounts=function(t){var e=a.default.compact(t),i=e.map(function(t){return t.account});return t=i.filter(function(t){return!(this.attr.onlyDMable&&!t.is_dm_able)&&!!this.isEligibleForMediaTagSuggestion(t)},this),t.sort(this.sorter),t.slice(0,this.attr.limit)},this.sorter=function(t,e){function i(t,e){var i=t.score_boost?t.score_boost:0,s=e.score_boost?e.score_boost:0,n=t.rounded_score?t.rounded_score:0,o=e.rounded_score?e.rounded_score:0;return o+s-(n+i)}var s=t.prefetched,n=e.prefetched;return s&&!n?-1:n&&!s?1:i(t,e)},this.getIds=function(t){var e=t.map(function(t){return this.database.getByPrefix(this.attr.datastores.AccountTokensToIds.name,t)},this);return Promise.all(e)},this.getCandidateIdsFoundInAllTermGroups=function(t,e){return t.filter(function(t){return e.every(function(e){return e.indexOf(t)!==-1})})},this.createIdGroups=function(t){var e=[],i=[];return t.forEach(function(t){var s=[];t.forEach(function(t){
e=e.concat(t.ids),s=s.concat(t.ids)}),i.push(s)}),{candidateIds:e,allIdGroupsByTerm:i}},this.processRemoteSuggestions=function(t,e,i){var s=i[this.attr.id]||[],n={};return s.forEach(function(t){return n[t.id_str]=!0},this),this.requiresRemoteSuggestions(t.queryData)&&e[this.attr.remoteType]&&e[this.attr.remoteType].forEach(function(t){var e=!n[t.id_str]&&(!this.attr.onlyDMable||t.is_dm_able)&&this.isEligibleForMediaTagSuggestion(t)&&!this.isAccountMalformedAndScribe(t,"typeahead_remote");e&&s.push(t)},this),i[this.attr.id]=s.slice(0,this.attr.limit),i[this.attr.id].forEach(function(t){this.removeBlacklistSocialContext(t)},this),i},this.requiresRemoteSuggestions=function(t){return!(!t||!t.query)&&(t.accountsWithoutAtSignLocalOnly?this.attr.remoteQueriesEnabled&&("@"===d.default.getFirstChar(t.query)||t.atSignRemoved):this.attr.remoteQueriesEnabled)},this.isHttpError=function(t){return t&&t.status&&t.status>=400&&t.status<600},this.hasTTLExpired=function(t){return t-this.now()<=0},this.now=function(){return(new Date).getTime()},this.removeBlacklistSocialContext=function(t){t.first_connecting_user_id in this.socialContextBlackList&&(t.first_connecting_user_name=void 0,t.first_connecting_user_id=void 0)},this.isEligibleForMediaTagSuggestion=function(t){return!this.attr.onlyShowUsersWithCanMediaTag||t.can_media_tag||t.id===this.attr.currentUserId},this.isAccountMalformedAndScribe=function(t,e){var i=d.default.isAccountMalformed(t);return i&&this.scribe({component:"indexeddb",element:e,action:"empty"}),i}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(362),a=s(o),r=i(1093),l=s(r),c=i(416),d=s(c),u=i(244),h=s(u),f=i(142),p=s(f),m=i(121),g=s(m),v=i(126),b=s(v),w=i(1091),S=s(w),y=i(247),C=s(y);e.default=n}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){var t=Array.prototype.slice.call(arguments);if(!(this instanceof n))return n.open.apply(null,t);var e=t[0];this.database=e,this.name=e.name,this.version=e.version,this.stores=o(e),e.onversionchange=function(){e.close(),self.location&&self.location.reload(!0)}}function o(t){for(var e=[],i=t.objectStoreNames,s=0;s<i.length;s++)e.push(i[s]);return e}Object.defineProperty(e,"__esModule",{value:!0});var a=i(1094),r=s(a),l=self.indexedDB||self.mozIndexedDB||self.webkitIndexedDB||self.msIndexedDB,c=self.IDBKeyRange||self.webkitIDBKeyRange||self.msIDBKeyRange,d={readwrite:(self.IDBTransaction||self.webkitIDBTransaction||self.msIDBTransaction||{}).READ_WRITE||"readwrite",readonly:(self.IDBTransaction||self.webkitIDBTransaction||self.msIDBTransaction||{}).READ_ONLY||"readonly"};e.default=n,n.KeyRange=c,n.deleteDatabase=function(t){return new Promise(function(e){var i=l.deleteDatabase(t);i.onsuccess=i.onerror=e})},n.isSupported=function(){return!!l},n.open=function(t,e,i,s){var a={title:'IndexedDB "'+t+'" version '+e,enabled:self.DEBUG&&self.DEBUG.enabled};return(0,r.default)(a,new Promise(function(a,c){if(!n.isSupported())return c("not supported");var d=e?l.open(t,e):l.open(t),u=void 0;d.onupgradeneeded=function(e){var n=e.target.result,a={title:'IndexedDB "'+t+'" migration from version '+e.oldVersion+" to "+e.newVersion,enabled:self.DEBUG&&self.DEBUG.enabled};(0,r.default)(a,new Promise(function(t,e){s||o(n).forEach(function(t){return n.deleteObjectStore(t)});var a=o(n),r=(i||[]).map(function(t){return new Promise(function(e,i){var s=t.name,o=t.keyPath,r=t.indexes||[];if(a.indexOf(s)<0){var l=n.createObjectStore(s,{keyPath:o});return r.forEach(function(t){return l.createIndex(t.name,t.keyPath,t)}),l}})});return Promise.all(r).then(t,e)}))},d.onsuccess=function(t){(u||Promise.resolve()).then(function(){var e=new n(t.target.result);return a(e)}).catch(c)},d.onblocked=function(t){c("open blocked",t.target.error)},d.onerror=function(t){c("open error",t.target.error)}}))},n.prototype.add=function(t){return this.insert("add",t)},n.prototype.clear=function(){var t=arguments.length?Array.prototype.slice.call(arguments):this.stores,e=t.map(function(t){return this.transaction(t,d.readwrite,function(e){return e.objectStore(t).clear()})},this);return Promise.all(e)},n.prototype.close=function(){var t=this;return new Promise(function(e){return t.database.close(),e()})},n.prototype.destroy=function(t,e){return this.transaction(t,d.readwrite,function(i){return i.objectStore(t).delete(e)})},n.prototype.get=function(t,e){return this.transaction(t,d.readonly,function(i){return i.objectStore(t).get(e)}).then(function(t){return t.target.result})},n.prototype.getAll=function(){var t=Array.prototype.slice.call(arguments).filter(function(t){return null!=t}),e=t.length,i=t[0],s="string"==typeof t[1]?t[1]:null,n="string"!=typeof t[e-1]?t[e-1]:null,o=this.database;return new Promise(function(t,e){var a=o.transaction(i,d.readonly),r=s?a.objectStore(i).index(s):a.objectStore(i),l=[],c=r.openCursor(n);c.onerror=e,c.onsuccess=function(e){var i=e.target.result;i?(l.push(i.value),i.continue()):t(l)}})},n.prototype.getByPrefix=function(){var t=Array.prototype.slice.call(arguments).filter(function(t){return null!=t}),e=t[0],i=3===t.length?t[1]:null,s=t[t.length-1];return this.getAll(e,i,c.bound(s,s+"￿",!1,!1))},n.prototype.put=function(t){return this.insert("put",t)},n.prototype.insert=function(t,e){var i=Object.keys(e),s=i.map(function(i){return this.transaction(i,d.readwrite,function(s){var n=s.objectStore(i);e[i].forEach(function(e){return n[t](e)})})},this);return Promise.all(s)},n.prototype.transaction=function(t,e,i){var s=this;return new Promise(function(n,o){var a=s.database.transaction(t,e),r=i(a);r?(r.onsuccess=n,r.onerror=o):(a.oncomplete=n,a.onerror=o)})}},function(t,e){"use strict";function i(t,e){if(t=t||{enabled:!1,title:null},t.enabled){var i=s(t.title,"resolved","info"),n=s(t.title,"rejected","warn");return e.then(i,function(t){throw n(t)})}return e}function s(t,e,i){return function(i){("["+e+"] "+(t||"")).trim();return i}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(e,i){i=i||{},this.attr={url:"/i/direct_messages/typeahead",dbName:i.dbName||"dm_typeahead",dbVersion:i.dbVersion||20160920,metadata:{name:"metadata",keyPath:"key"},conversations:{name:"conversations",keyPath:"id",indexes:[{name:"title",keyPath:"title",unique:!1}]},users:{name:"users",keyPath:"id",indexes:[{name:"name_lowercase",keyPath:"name_lowercase",unique:!1},{name:"screen_name",keyPath:"screen_name",unique:!0}]}},this.attr=p.default.merge(this.attr,e),this.after=t.noop,this.defaultAttrs=t.noop,d.default.mixin(this,[g.default]),this.initialize=function(){this.isUsingIndexedDB=!0;var t=this;return this.openIndexedDB(this.attr.dbName,this.attr.dbVersion,[this.attr.metadata,this.attr.users,this.attr.conversations]).then(this.ensureLocalDataBelongsToCurrentUser.bind(this,b.default.user.id)).then(this.checkIfLocalDataHasExpired.bind(this)).then(this.fetchDataIfExpired.bind(this)).then(this.ensureDataAndSchemaVersionMatch.bind(this)).then(this.repopulateDataStore.bind(this)).then(function(){return t.database}).catch(this.onInitializationError.bind(this))},this.getLocalSuggestions=function(t,e){var i=this;return new Promise(function(s,n){var o=function(t){(e||s)(t||[])},a=h.default.tokenizeText(t.query),r=t.dmConversationsOptions||{},l=a.map(function(t){return this.search(t)},i);Promise.all(l).then(y).then(function(t){return r.excludeGroups?i.removeGroups(t):t}).then(function(t){return r.excludeOneToOnes?i.removeOneToOnes(t):t}).then(function(t){return r.sortBySortId?i.sortBySortId(t):t}).then(o,o)})},this.repopulateIfStale=function(t){var e=this;if(t=t||[],t.length){var i=l.default.KeyRange.bound(t[0],t[t.length-1],!1,!1);return this.database.getAll(this.attr.conversations.name,i).then(function(e){return e.length<t.length}).then(function(t){return t&&e.database.clear(e.attr.metadata.name)}).then(function(){return e.initialize()})}return Promise.reject()},this.removeGroups=function(t){return(t||[]).filter(function(t){return t&&!t.is_group})},this.removeOneToOnes=function(t){return(t||[]).filter(function(t){return t&&t.is_group})},this.sortBySortId=function(t){return(t||[]).sort(function(t,e){return S.default.compare(e.sort_id,t.sort_id)})},this.openIndexedDB=function(t,e,i){var s=this;return l.default.open(t,e,i).then(function(t){return s.database=t})},this.ensureLocalDataBelongsToCurrentUser=function(t){var e=this;return this.database.get(this.attr.metadata.name,"user").then(function(e){return e&&e.id===t}).then(function(t){return t||e.database.clear()})},this.checkIfLocalDataHasExpired=function(){var t=this.now();return this.database.get(this.attr.metadata.name,"ttl").then(function(e){return!e||!e.expires||e.expires<t})},this.fetchDataIfExpired=function(t){return t&&this.get({url:this.attr.url})},this.ensureDataAndSchemaVersionMatch=function(t){if(t){var e=(t.metadata||[]).reduce(function(t,e){return e.version||t},0);if(this.database.version===e)return t}},this.repopulateDataStore=function(t){return t&&this.database.clear().then(this.populateDataStore.bind(this,t))},this.populateDataStore=function(t){return t&&this.database.add(t)},this.onInitializationError=function(t){this.database&&this.database.close()},this.hydrateParticipantsForOneToOnes=function(t){var e=this,i=t.map(function(t){return t.is_group?t:e.hydrateParticipants(t)});return Promise.all(i)},this.hydrateParticipants=function(t){var e=t.participants.map(function(t){return this.getUserById(t)},this);return Promise.all(e).then(function(e){return t.participants=e,t})},this.getUserById=function(t){return this.database.get(this.attr.users.name,t)},this.search=function(t){var e=this.searchUsers(t),i=this.searchConversations(t),s=this.getConversation.bind(this);return Promise.all([e,i]).then(y).then(C).then(function(t){return Promise.all(t.map(function(t){return s(t)}))}).then(this.hydrateParticipantsForOneToOnes.bind(this))},this.searchUsers=function(t){var e=this.database.getByPrefix(this.attr.users.name,"name_lowercase",t),i=this.database.getByPrefix(this.attr.users.name,"screen_name",t),s=Promise.all([e,i]).then(y);return s.then(function(t){return t.map(function(t){return t.conversations})}).then(y)},this.searchConversations=function(t){var e=this.database.getByPrefix(this.attr.conversations.name,"title",t);return e.then(function(t){return t.map(function(t){return t.id})})},this.getConversation=function(t){return this.database.get(this.attr.conversations.name,t)},this.now=function(){return(new Date).getTime()}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(362),a=s(o),r=i(1093),l=s(r),c=i(121),d=s(c),u=i(416),h=s(u),f=i(126),p=s(f),m=i(244),g=s(m),v=i(136),b=s(v),w=i(357),S=s(w),y=a.default.flatten,C=a.default.unique;e.default=n}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(t){this.attr={id:null,items:[],limit:0,searchPathWithQuery:"/search?src=savs&q=",querySource:"saved_search_click"},this.attr=a.default.merge(this.attr,t),this.getRemoteSuggestions=function(t,e,i){return i},this.requiresRemoteSuggestions=function(t){return!1},this.getLocalSuggestions=function(t,e){if(t&&t.query){var i=this.attr.items.filter(function(e){return 0===e.name.indexOf(t.query)}).slice(0,this.attr.limit);e(i)}else e(this.attr.items)},this.addSavedSearch=function(t){t&&t.query&&this.attr.items.push({id:t.id,id_str:t.id_str,name:t.name,query:t.query,saved_search_path:this.attr.searchPathWithQuery+encodeURIComponent(t.query),search_query_source:this.attr.querySource})},this.removeSavedSearch=function(t){if(t&&t.query)for(var e=this.attr.items,i=0;i<e.length;i++)if(e[i].query===t.query||e[i].name===t.query)return void e.splice(i,1)}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(126),a=s(o);e.default=n},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(t){this.attr={id:null,items:[],searchPathWithQuery:"/search?src=fols&q=",querySource:"follow_search"},this.attr=a.default.merge(this.attr,t),this.getRemoteSuggestions=function(t,e,i){return i},this.requiresRemoteSuggestions=function(t){return!1},this.getLocalSuggestions=function(t,e){if(t&&t.query){var i=this.attr.items.filter(function(e){return 0===e.query.indexOf(t.query)});e(i)}else e(this.attr.items)},this.setItems=function(t){var e=t.entries,i=!0,s=!1,n=void 0;try{for(var o,a=e[Symbol.iterator]();!(i=(o=a.next()).done);i=!0){var r=o.value;try{var l=r.content.item.content.followSearch.displayQuery;r.sortIndex&&l&&this.attr.items.push({id_str:r.sortIndex,query:l,followed_search_path:this.attr.searchPathWithQuery+encodeURIComponent(l),search_query_source:this.attr.querySource})}catch(c){}}}catch(d){s=!0,n=d}finally{try{!i&&a.return&&a.return()}finally{if(s)throw n}}}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(126),a=s(o);e.default=n},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(t){this.attr={id:null,limit:4,storageList:"recentSearchesList",maxLength:100,ttl_ms:12096e5,searchPathWithQuery:"/search?src=typd&q=",querySource:"typed_query"},this.attr=a.default.merge(this.attr,t),this.getRemoteSuggestions=function(t,e,i){return i},this.requiresRemoteSuggestions=function(){return!1},this.removeAllRecentSearches=function(){this.items=[],this.updateStorage()},this.getLocalSuggestions=function(t,e){if(t&&""!==t.query){var i=this.items.filter(function(e){return 0===e.name.indexOf(t.query)}).slice(0,this.attr.limit);e(i)}else e(this.items.slice(0,this.attr.limit))},this.updateStorage=function(){this.storage.setItem(this.attr.storageList,this.items,this.attr.ttl_ms)},this.removeOneRecentSearch=function(t){this.removeRecentSearchFromList(t.query),this.updateStorage()},this.addRecentSearch=function(t){t&&t.query&&(t.query=t.query.trim(),this.updateRecentSearchList(t),this.updateStorage())},this.updateRecentSearchList=function(t){var e=this.items,i={normalized_name:t.query.toLowerCase(),name:t.query,recent_search_path:this.attr.searchPathWithQuery+encodeURIComponent(t.query),search_query_source:this.attr.querySource};this.removeRecentSearchFromList(t.query),e.unshift(i),e.length>this.attr.maxLength&&e.pop()},this.removeRecentSearchFromList=function(t){for(var e=this.items,i=-1,s=t.toLowerCase(),n=0;n<e.length;n++)if(e[n].normalized_name===s){i=n;break}i!==-1&&e.splice(i,1)},this.initialize=function(){var t=(0,l.default)({withExpiry:!0});this.storage=new t("typeahead"),this.items=this.storage.getItem(this.attr.storageList)||[]},this.initialize()}Object.defineProperty(e,"__esModule",{value:!0});var o=i(126),a=s(o),r=i(247),l=s(r);e.default=n},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({weights:{CACHED_PROFILE_VISIT:10,UNCACHED_PROFILE_VISIT:75,FOLLOW:100}}),this.cleanupUserData=function(t){this.shouldUseIndexedDB()?this.removeAccountAsync(parseInt(t,10)):this.removeAccount(t),this.addToUserBlacklist(t)},this.onFollowStateChange=function(t,e){if(e.userId){switch(e.newState){case"blocked":this.cleanupUserData(e.userId);break;case"not-following":this.cleanupUserData(e.userId);break;case"following":e.user&&(this.adjustScoreBoost(e.user,this.attr.weights.FOLLOW),this.shouldUseIndexedDB()?this.addAccountForFollowAsync(e.user):this.addAccount(e.user,"following"),this.removeUserFromBlacklist(e.userId))}this.shouldUseIndexedDB()||this.updateLocalStorage()}},this.onProfileVisit=function(t,e){this.shouldUseIndexedDB()?this.handleProfileVisitAsync(e):this.handleProfileVisitSync(e)},this.handleProfileVisitAsync=function(t){this.datasources.accounts.getAccounts([t.id]).then(this.processUserAsync.bind(this,t)).then(this.datasources.accounts.addAccount.bind(this.datasources.accounts))},this.processUserAsync=function(t,e){e=l.default.compact(e);var i=0!==e.length,s=i?this.attr.weights.CACHED_PROFILE_VISIT:this.attr.weights.UNCACHED_PROFILE_VISIT,n=i?e[0].account:t;return this.adjustScoreBoost(n,s),i||(n.tokens=["@"+n.screen_name,n.screen_name].concat(a.default.tokenizeText(n.name))),n},this.handleProfileVisitSync=function(t){var e=this.datasources.accounts.userHash[t.id];this.processUserSync(t,e)},this.processUserSync=function(t,e){e?this.adjustScoreBoost(e,this.attr.weights.CACHED_PROFILE_VISIT):(this.adjustScoreBoost(t,this.attr.weights.UNCACHED_PROFILE_VISIT),this.addAccount(t,"visit")),this.updateLocalStorage()},this.updateLocalStorage=function(){this.datasources.accounts.storage.setItem("userHash",this.datasources.accounts.userHash,this.datasources.accounts.attr.ttl),this.datasources.accounts.storage.setItem("adjacencyList",this.datasources.accounts.adjacencyList,this.datasources.accounts.attr.ttl),this.datasources.accounts.storage.setItem("version",this.datasources.accounts.attr.version,this.datasources.accounts.attr.ttl)},this.removeAccount=function(t){if(this.datasources.accounts.userHash[t]){var e=this.datasources.accounts.userHash[t].tokens;e.forEach(function(e){var i=this.datasources.accounts.adjacencyList[e.charAt(0)];if(i){var s=i.indexOf(t);s!==-1&&i.splice(s,1)}},this),delete this.datasources.accounts.userHash[t]}},this.removeAccountAsync=function(t){this.datasources.accounts.removeAccount(t)},this.adjustScoreBoost=function(t,e){t.score_boost?t.score_boost+=e:t.score_boost=e},this.addAccount=function(t,e){this.datasources.accounts.userHash[t.id]=t,t.tokens=["@"+t.screen_name,t.screen_name].concat(a.default.tokenizeText(t.name)),t.social_proof="following"===e?1:0,t.tokens.forEach(function(e){var i=e.charAt(0);if(e.trim().length)return this.datasources.accounts.adjacencyList[i]?void(this.datasources.accounts.adjacencyList[i].indexOf(t.id)===-1&&this.datasources.accounts.adjacencyList[i].push(t.id)):void(this.datasources.accounts.adjacencyList[i]=[t.id])},this)},this.addAccountForFollowAsync=function(t){t.tokens=["@"+t.screen_name,t.screen_name].concat(a.default.tokenizeText(t.name)),t.social_proof=1,this.datasources.accounts.addAccount(t)},this.removeOldAccountsInBlackList=function(){var t=void 0,e=void 0,i=0,s=this.datasources.accounts.attr.maxLengthBlacklist||100,n=this.datasources.accounts.socialContextBlackList,o=(new Date).getTime(),a=this.datasources.accounts.attr.ttl_ms;for(e in n){var r=n[e]+a;r<o?delete n[e]:(t=t||e,t=n[t]>n[e]?e:t,i+=1)}s<i&&delete n[t]},this.updateBlacklistLocalStorage=function(t){this.datasources.accounts.storage.setItem("userBlackList",t,this.attr.ttl)},this.addToUserBlacklist=function(t){var e=this.datasources.accounts.socialContextBlackList;e[t]=(new Date).getTime(),this.removeOldAccountsInBlackList(),this.updateBlacklistLocalStorage(e)},this.removeUserFromBlacklist=function(t){var e=this.datasources.accounts.socialContextBlackList;this.removeOldAccountsInBlackList(),e[t]&&(delete e[t],this.updateBlacklistLocalStorage(e))},this.checkItemTypeForRecentSearch=function(t){return"saved_search"===t||"topics"===t||"recent_search"===t},this.addSavedSearch=function(t,e){this.datasources.savedSearches.addSavedSearch(e)},this.removeSavedSearch=function(t,e){this.datasources.savedSearches.removeSavedSearch(e)},this.addRecentSearch=function(t,e){"search"===e.source?this.datasources.recentSearches.addRecentSearch({query:e.query}):this.checkItemTypeForRecentSearch(e.source)&&e.isSearchInput&&this.datasources.recentSearches.addRecentSearch({query:e.query})},this.removeRecentSearch=function(e,i){i.deleteAll?this.datasources.recentSearches.removeAllRecentSearches():this.datasources.recentSearches.removeOneRecentSearch(i),t(e.target).trigger("dataTypeaheadRecentSearchDeleted")},this.updateSelectedUsers=function(t,e){this.datasources.selectedUsers.updateSelectedUsers(e)},this.setTrendLocations=function(t,e){this.datasources.trendLocations.setTrendLocations(e)},this.updatePrefill=function(t,e){this.datasources.prefillUsers.updateRecentlySelectedUsers(e)},this.checkDMConversationFreshness=function(t,e){this.datasources.dmConversations.repopulateIfStale(e&&e.groups)},this.initializeFollowedSearches=function(t,e){this.datasources.followedSearches&&this.datasources.followedSearches.setItems(e)},this.setupEventListeners=function(t){switch(t){case"accounts":this.on("dataFollowStateChange",this.onFollowStateChange),this.on("profileVisit",this.onProfileVisit);break;case"savedSearches":this.on(document,"dataAddedSavedSearch",this.addSavedSearch),this.on(document,"dataRemovedSavedSearch",this.removeSavedSearch);break;case"followedSearches":this.on(document,"uiSwiftLoaded","dataFollowedSearchesListGet"),this.on(document,"dataFollowSearchGetListSuccess",this.initializeFollowedSearches);break;case"recentSearches":this.on("uiSearchQuery uiTypeaheadItemSelected",this.addRecentSearch),this.on("uiTypeaheadDeleteRecentSearch",this.removeRecentSearch);break;case"trendLocations":this.on(document,"dataLoadedTrendLocations",this.setTrendLocations);break;case"selectedUsers":this.on("uiUpdatedSelectedUsers",this.updateSelectedUsers);break;case"prefillUsers":this.on("uiUpdateRecentTags",this.updatePrefill);break;case"dmConversations":this.on("dataDMConversationListResult",this.checkDMConversationFreshness)}}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(416),a=s(o),r=i(362),l=s(r);e.default=n}).call(e,i(10))},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(e){this.attr={id:null,ttl_ms:216e5,limit:4,version:4,storageAdjacencyList:"topicsAdjacencyList",storageHash:"topicsHash",storageVersion:"topicsVersion",prefetchLimit:500,localQueriesEnabled:!1,remoteQueriesEnabled:!1,remotePath:"/i/search/typeahead.json",remoteType:"topics",prefetchPath:"/i/search/typeahead.json",prefetchType:"topics",basePath:"/search?",modePathMap:{images:"f=images",videos:"f=videos",news:"f=news"},querySourcePathTypeahead:"src=tyah"},this.attr=h.default.merge(this.attr,e),this.after=t.noop,this.defaultAttrs=t.noop,d.default.mixin(this,[l.default,p.default]),this.getLocalSuggestions=function(t,e){e([])},this.getTopicObjectsFromStrings=function(t){var e=[];return t.forEach(function(t){var i=this.topicsHash[t];i&&e.push(i)},this),e},this.requiresRemoteSuggestions=function(t){var e=a.default.getFirstChar(t.query),i=t.topicsMustStartWithHashtag&&m.indexOf(e)===-1;return!(!t||!t.query||i)&&this.attr.remoteQueriesEnabled},this.processRemoteSuggestions=function(t,e,i){var s=i[this.attr.id]||[],n={};return s.forEach(function(t){var e=t.topic||t.hashtag;n[e.toLowerCase()]=!0},this),e[this.attr.remoteType]&&e[this.attr.remoteType].forEach(function(t){var e=t.topic||t.hashtag;t.searchPath=this.constructSearchPath(e,t.filter),n[e.toLowerCase()]||s.push(t)},this),i[this.attr.id]=s.slice(0,this.attr.limit),i},this.constructSearchPath=function(t,e){var i=["q="+encodeURIComponent(t)],s=e?this.attr.modePathMap[e]:"";return s&&i.push(s),i.push(this.attr.querySourcePathTypeahead),this.attr.basePath+i.join("&")},this.initialize=function(){},this.initialize()}Object.defineProperty(e,"__esModule",{value:!0});var o=i(416),a=s(o),r=i(244),l=s(r),c=i(121),d=s(c),u=i(126),h=s(u),f=i(1091),p=s(f),m=["$","#","＃"];e.default=n}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(t){var e={woeid:-1,placeTypeCode:-1,name:"No results were found. Try selecting from a list."};this.attr={id:null,items:[],limit:10},this.attr=a.default.merge(this.attr,t),this.getRemoteSuggestions=function(t,e,i){return i},this.requiresRemoteSuggestions=function(t){return!1},this.getLocalSuggestions=function(t,i){var s=this.attr.items,n=function(t){return t.replace(/\s+/g,"").toLowerCase()};if(t&&t.query){var o=n(t.query);s=this.attr.items.filter(function(t){return 0===n(t.name).indexOf(o)})}i(s.length?s.slice(0,this.attr.limit):[e])},this.setTrendLocations=function(t){this.attr.items=t.trendLocations}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(126),a=s(o),r=i(123);s(r);e.default=n},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(e){this.attr={id:null,ttl_ms:216e5,limit:3,version:1,storageList:"conciergeList",storageVersion:"conciergeVersion",prefetchLimit:3,localQueriesEnabled:!1,remoteQueriesEnabled:!1,prefetchPath:"/i/search/typeahead.json",prefetchType:"oneclick",remotePath:"/i/search/typeahead.json",remoteType:"oneclick",basePath:"/search?",scribeMap:{images:"photos",videos:"video",news:"news",users:"people"},nameMap:{"images near":"Photos near you","images follow":"Photos from people you follow","videos near":"Videos near you","videos follow":"Videos from people you follow","news near":"News near you","news follow":"News shared by people you follow","users near":"People near you"},modePathMap:{images:"mode=photos",videos:"mode=videos",news:"mode=news",users:"mode=users"},locationFilterPath:"near=me",followFilterPath:"f=follows",querySourcePath:"src=taoc",querySource:"typeahead_oneclick"},this.attr=l.default.merge(this.attr,e),this.after=t.noop,this.defaultAttrs=t.noop,a.default.mixin(this,[f.default,m.default]),this.getStorageKeys=function(){return[this.attr.storageVersion,this.attr.storageList]},this.getPrefetchCount=function(){return this.attr.prefetchLimit},this.isMetadataExpired=function(){var t=this.storage.getItem(this.attr.storageVersion);return t!==this.attr.version},this.getDataFromLocalStorage=function(){this.conciergeList=this.storage.getItem(this.attr.storageList)||this.conciergeList},this.processResults=function(t){return t&&t[this.attr.prefetchType]?(t[this.attr.prefetchType].forEach(function(t){var e=this.constructConciergeSuggestion(t);e&&this.conciergeList.push(e)},this),this.storage.setItem(this.attr.storageList,this.conciergeList,this.attr.ttl_ms),void this.storage.setItem(this.attr.storageVersion,this.attr.version,this.attr.ttl_ms)):void this.useStaleData()},this.getLocalSuggestions=function(t,e){e(t&&""!==t.query?[]:this.conciergeList.slice(0,this.attr.limit))},this.requiresRemoteSuggestions=function(t){return!(!t||""!==t.query)&&this.attr.remoteQueriesEnabled},this.processRemoteSuggestions=function(t,e,i){var s=i[this.attr.id]||[];if(e[this.attr.remoteType])for(var n=e[this.attr.remoteType],o=0;o<n.length;o++){var a=this.constructConciergeSuggestion(n[o]);if(a){var r=s.push(a);if(r>=this.attr.limit)break}}return i[this.attr.id]=s.slice(0,this.attr.limit),i},this.constructConciergeSuggestion=function(t){var e=t.filter,i=!!t.location,s=!!t.follow,n=t.topic,o=this.constructName(e,i,s,n);return o?{topic:n,searchPath:this.constructSearchPath(e,i,s,n),name:o,querySource:this.attr.querySource,searchDetails:this.constructScribeDetails(e,i,s,n)}:null},this.constructName=function(t,e,i,s){var n=e?" near":"",o=i?" follow":"",a=s||this.attr.nameMap[t+n+o];return a},this.constructSearchPath=function(t,e,i,s){var n=[this.attr.querySourcePath],o=t?this.attr.modePathMap[t]:"";return o&&n.push(o),e&&n.push(this.attr.locationFilterPath),i&&n.push(this.attr.followFilterPath),s&&n.push("q="+encodeURIComponent(s)),this.attr.basePath+n.join("&")},this.constructScribeDetails=function(t,e,i,s){var n={result_type:this.attr.scribeMap[t]||"everything",social_filter:i?"following":"all"};return s&&(n.query=s),e&&(n.near="me"),n},this.initialize=function(){var t=(0,u.default)({withExpiry:!0});this.storage=new t("typeahead"),this.conciergeList=[],this.attr.localQueriesEnabled&&this.loadData(this.attr.prefetchPath,this.attr.prefetchType)},this.initialize()}Object.defineProperty(e,"__esModule",{value:!0});var o=i(121),a=s(o),r=i(126),l=s(r),c=i(123),d=(s(c),i(247)),u=s(d),h=i(244),f=s(h),p=i(1091),m=s(p);e.default=n}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(t){this.attr={id:null,maxLength:100,querySource:"typed_query",items:[]},this.attr=a.default.merge(this.attr,t),this.getRemoteSuggestions=function(t,e,i){return i},this.requiresRemoteSuggestions=function(){return!1},this.removeAllSelectedUsers=function(){this.attr.items=[]},this.getLocalSuggestions=function(t,e){e(this.attr.items.slice(0,this.attr.maxLength))},this.updateSelectedUsers=function(t){this.attr.items=t.items}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(126),a=s(o);e.default=n},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(t){this.attr={id:null,maxLength:10,querySource:"typed_query",customItems:[],ttl_ms:12096e5,storageList:"recentlySelectedList"},this.attr=a.default.merge(this.attr,t),this.getRemoteSuggestions=function(t,e,i){return i},this.requiresRemoteSuggestions=function(){return!1},this.updateStorage=function(){this.storage.setItem(this.attr.storageList,this.storageItems,this.attr.ttl_ms)},this.updateRecentlySelectedUsers=function(t){var e=this.storageItems;t.items.forEach(function(t){this.removeRecentUserFromList(t),e.unshift(t),e.length>this.attr.maxLength&&(this.storageItems=e.slice(0,this.attr.maxLength))},this),this.updateStorage()},this.removeRecentUserFromList=function(t){var e=this.storageItems,i=this.getSuggestionIndexById(t,e);i!==-1&&e.splice(i,1)},this.getSuggestionIndexById=function(t,e){for(var i=0;i<e.length;i++)if(e[i].id===t.id)return i;return-1},this.getLocalSuggestions=function(t,e){for(var i=this.storageItems.slice(0,this.attr.maxLength),s=0;i.length<this.attr.maxLength&&s<this.attr.customItems.length;s++){var n=this.attr.customItems[s];this.getSuggestionIndexById(i,n)===-1&&i.push(n)}e(i)},this.updateCustomItems=function(t){this.attr.customItems=t.items},this.initialize=function(){var t=(0,l.default)({withExpiry:!0});this.storage=new t("typeahead"),this.storageItems=this.storage.getItem(this.attr.storageList)||[]},this.initialize()}Object.defineProperty(e,"__esModule",{value:!0});var o=i(126),a=s(o),r=i(247),l=s(r);e.default=n},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){var t=Array.prototype.slice.call(arguments);if(!(this instanceof n)){var e=t[0],i=e.dbName,s=e.dbVersion,a=r.default.open(i,s),l=a.then(function(t){return new n(t)});return o(l,e)}this.database=t[0]}function o(e,i){return i=i||{},e.then(i.onSuccess||t.noop,i.onFailure||t.noop)}Object.defineProperty(e,"__esModule",{value:!0});var a=i(1093),r=s(a);e.default=n,n.prototype.closeConnection=function(){this.database.close()},n.prototype.getItemByKey=function(t){var e=this.database.get(t.objectStoreName,t.key);return o(e,t)},n.prototype.getItemsByPrefix=function(t){var e=this.database.getByPrefix(t.objectStoreName,t.index,t.prefix);return o(e,t)},n.prototype.addItems=function(t){var e={};return e[t.objectStoreName]=t.items,o(this.database.add(e),t)},n.prototype.upsertItems=function(t){var e={};return e[t.objectStoreName]=t.items,o(this.database.put(e),t)},n.prototype.createObjectStore=function(t){var e=this,i=this.database.name,s=this.database.version;this.database.close();var n={name:t.objectStoreName,keyPath:t.keyPathName,indexes:t.indexes||[]},a=r.default.open(i,s+1,[n],!0);return o(a.then(function(t){return e.database=t}),t)},n.prototype.deleteItem=function(t){var e=this.database.destroy(t.objectStoreName,t.key);return o(e,t)},n.prototype.clearObjectStore=function(t){var e=this.database.clear(t.objectStoreName);return o(e,t)},n.prototype.clearAllObjectStores=function(t){var e=this.database.clear();return o(e,t)},n.prototype.checkIfObjectStoreExists=function(t){return this.database.stores.indexOf(t)>-1}}).call(e,i(10))},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({tweetboxSelector:".tweet-box-shadow"}),this.storeCompletionData=function(t,e){if(e.scribeContext&&"tweet_box"===e.scribeContext.component){var i="account"===e.source?"@"+e.display:e.display;this.completions.push(i)}},this.handleTweetCompletion=function(e,i){if("tweet_box"===i.scribeContext.component){var s=t(e.target).find(this.attr.tweetboxSelector).val(),n=d.default.extractEntitiesWithIndices(s).filter(function(t){return t.screenName||t.cashtag||t.hashtag});n=n.map(function(t){return s.slice(t.indices[0],t.indices[1]);
});var o=n.filter(function(t){return this.completions.indexOf(t)>=0},this);if(this.completions=[],0!==n.length){var a={query:i.query,message:n.length,event_info:o.length,format_version:2};this.scribe("entities",i,a)}}},this.scribeSelection=function(t,e){if(!e.fromSelectionEvent||"uiTypeaheadItemComplete"!==t.type){var i={element:"typeahead_"+e.source,action:"select"},s=void 0;"uiTypeaheadItemComplete"===t.type?s="autocomplete":e.isClick?s="click":"uiTypeaheadItemSelected"===t.type&&(s="key_select");var n={position:e.index,description:s};"account"===e.source?(n.item_type=h.default.user,n.id=e.query):"topics"===e.source?(n.item_type=h.default.search,n.item_query=e.query):"saved_search"===e.source?(n.item_type=h.default.savedSearch,n.item_query=e.query):"recent_search"===e.source?(n.item_type=h.default.search,n.item_query=e.query):"trend_location"===e.source?(n.item_type=h.default.trend,n.item_query=e.item.woeid,e.item.woeid===-1&&(i.action="no_results")):"concierge"===e.source&&(n.item_type=h.default.search,n.item_query=e.query||e.item.name);var o={message:e.input,items:[n],format_version:2,event_info:e.item?e.item.origin:null,search_details:e.item?e.item.searchDetails:null};this.scribe(i,e,o)}},this.scribeMalformedAccount=function(){this.scribe({element:"typeahead_account",action:"empty"})},this.after("initialize",function(){this.completions=[],this.on("uiTypeaheadItemComplete uiTypeaheadItemSelected",this.storeCompletionData),this.on("uiTypeaheadItemComplete uiTypeaheadItemSelected",this.scribeSelection),this.on("uiTweetboxTweetSuccess uiTweetboxReplySuccess",this.handleTweetCompletion),this.on("uiTypeaheadAccountMalformed",this.scribeMalformedAccount)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(142),l=s(r),c=i(234),d=s(c),u=i(144),h=s(u);e.default=(0,a.default)(n,l.default)}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var n=i(253),o=s(n),a=i(111),r=s(a);e.default=(0,r.default)(function(){this.triggerCommand=function(){var t=this.attr.href,e=o.default.queryMap(t);switch(e.action){case"compose":this.trigger("uiOpenTweetDialog",this._trimParams(["action","mode"],e)),this._removeQueryStringFromUrl();break;case"overlay":e.screen_name&&e.tweet_id&&(this.trigger("uiOverlayNavigate",{href:e.screen_name+"/status/"+e.tweet_id}),this._removeQueryStringFromUrl())}},this._removeQueryStringFromUrl=function(){if(window.history&&history.replaceState){var t=window.location.href.replace(/\?[^#]*/,"");history.replaceState({title:document.title},document.title,t)}},this._trimParams=function(t,e){var i={};return Object.getOwnPropertyNames(e).forEach(function(s){t.indexOf(s)>=0&&(i[s]=e[s])}),i},this.after("initialize",function(){"string"==typeof this.attr.href&&this.on("uiSwiftLoaded",this.triggerCommand)})})},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({backgroundSelector:"#uz_bg",containerSelector:"#uz_popup_container",backgroundParentSelector:"body",blockUserSurveyClass:"uz_block_user_survey"}),this.fadeoutSurvey=function(e){t(this.attr.containerSelector).fadeOut(500)},this.openSurvey=function(){window._uzactions=window._uzactions||[];var e=this.overrideCookie?this.overrideCookie:"twittersurvey"+this.surveyId;window._uzactions.push(["_setCookie",e]),window._uzactions.push(["_setCustomVar",["userID",l.default.user.id]]),window._uzactions.push(["_setCustomVar",["guestId",l.default.user.guestId]]),window._uzactions.push(["_start"]);var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(t.extend(document.createElement("script"),{type:"text/javascript",async:!0,id:"injected_uz_survey_script",charset:"utf-8",src:"https://cdn5.userzoom.com/files/js/"+this.surveyId+".js?t=uz_til&cuid=2BA733EB49F6DF1188490022196C4538"}),i)},this.onBlockAction=function(){this.$node.hasClass(this.attr.blockUserSurveyClass)&&this.openSurvey()},this.after("initialize",function(){this.surveyId=this.$node.attr("data-survey-id"),this.overrideCookie=this.$node.attr("data-override-cookie"),this.$node.attr("data-show")&&this.openSurvey(),this.on(document,"uiOpenSurvey",this.openSurvey),this.on(this.attr.backgroundParentSelector,"click",{backgroundSelector:this.fadeoutSurvey}),this.on(document,"uiBlockAction",this.onBlockAction)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(136),l=s(r);e.default=(0,a.default)(n)}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var n=i(111),o=s(n),a=i(163),r=s(a),l=i(253),c=s(l);e.default=(0,o.default)(r.default,function(){this.defaultAttrs({whyThisAdIframeSelector:"#why-this-ad-frame",spinnerSelector:".why-this-ad-spinner"}),this.setUpDialog=function(t,e){this.$spinner.show(),this.$iframe.hide(),this.eventData=e,this.setWhyThisAdFrame(),this.open()},this.setWhyThisAdFrame=function(){var t="/about-ads?"+c.default.encode({aid:this.eventData.impressionId});this.$iframe.attr("src",t)},this.around("close",function(t){this.$iframe.attr("src",""),t()}),this.after("initialize",function(){var t=this;this.$iframe=this.select("whyThisAdIframeSelector"),this.$spinner=this.select("spinnerSelector"),this.on(document,"uiNeedsWhyThisAdDialog",this.setUpDialog),this.$iframe.on("load",function(){t.$iframe.show(),t.$spinner.hide()})})})},,,,,,,,,,,function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(e){if(!e.no_global_infinite_scroll){var i=e.infiniteScrollNode||window;a.default.attachTo(i,{contentSelector:e.contentSelector,immediatelyRequestMoreItems:t(".stream-container").hasClass("js-request-more-stream-items")})}var s=e.inOverlay?".PermalinkOverlay":document;d.default.attachTo(s,e),l.default.attachTo(document)}Object.defineProperty(e,"__esModule",{value:!0});var o=i(456),a=s(o),r=i(1121),l=s(r),c=i(1122),d=s(c);e.default=n}).call(e,i(10))},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){var e=void 0,i="webkitfullscreenchange",s="onwebkitfullscreenchange",n=s in document;this.getFullscreenElement=function(){return document.webkitFullscreenElement},this.getYOffset=function(){return l.default.getGlobalYOffset()},this.supportsFullscreen=function(){return n},this.isEnteringFullscreen=function(){return Boolean(this.getFullscreenElement())},this.saveFullscreenElement=function(){e=this.getFullscreenElement()},this.scrollToFullscreenElement=function(){if(e){var i=t(e).parents('[data-component-context="tweet"]');i&&"function"==typeof i.offset&&i.offset()&&window.scrollTo(window.scrollX,i.offset().top-l.default.getGlobalYOffset()),e=void 0}},this.changeFullScreen=function(t,e){this.isEnteringFullscreen()?this.saveFullscreenElement():this.scrollToFullscreenElement()},this.after("initialize",function(){this.supportsFullscreen()&&this.on(document,i,this.changeFullScreen)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(178),l=s(r),c=(0,a.default)(n);e.default=c}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({defaultAjaxData:{include_entities:1,include_available_features:1},noShowError:!0,startPollingInterval:7500,maxPollingInterval:6e4}),this.requestItems=function(t,e){t&&t.stopPropagation();var i=function(i){this.hasTornDown||(e.isNewItemRequest?this.hasActiveNewItemsRequest=!1:this.hasActiveOldItemsRequest=!1,this.trigger(t.target,"dataGotMoreTimelineItems",i))},s=this.requestInterval,n=function(i){this.hasTornDown||(i&&i.xhr&&"timeout"===i.xhr.statusText&&s===this.requestInterval&&(this.requestInterval=Math.min(2*this.requestInterval,this.attr.maxPollingInterval)),e.isNewItemRequest?this.hasActiveNewItemsRequest=!1:this.hasActiveOldItemsRequest=!1,this.trigger(t.target,"dataGotMoreTimelineItemsError",i))},a=e&&e.headers||{};e&&e.fromPolling&&(a["X-Twitter-Polling"]=!0);var r={contextual_tweet_id:e.contextual_tweet_id,cursor:e.cursor,cursor_index:e.cursor_index,cursor_offset:e.cursor_offset,min_position:e.min_position,max_position:e.max_position,is_forward:e.is_forward,latent_count:e.latent_count,composed_count:e.composed_count,composed_ids:e.composed_ids,include_new_items_bar:e.include_new_items_bar,interval:e.interval,count:e.count,timeline_empty:e.timeline_empty,reset_error_state:e.reset_error_state};e.query&&(r.q=e.query),e.curated_timeline_since_id&&(r.curated_timeline_since_id=e.curated_timeline_since_id),e.scroll_cursor&&(r.scroll_cursor=e.scroll_cursor),e.refresh_cursor&&(r.refresh_cursor=e.refresh_cursor),e.excluded&&(r.excluded=e.excluded);var l=e.isNewItemRequest&&this.hasActiveNewItemsRequest||!e.isNewItemRequest&&this.hasActiveOldItemsRequest;l||(this.hasActiveNewItemsRequest=!(!this.hasActiveNewItemsRequest&&!e.isNewItemRequest),this.hasActiveOldItemsRequest=!(!this.hasActiveOldItemsRequest&&e.isNewItemRequest),this.get({url:this.attr.endpoint,headers:a,timeout:this.requestInterval,data:o({},this.attr.defaultAjaxData,r),eventData:e,success:i.bind(this),error:n.bind(this)}))},this.before("teardown",function(){this.hasTornDown=!0}),this.after("initialize",function(){this.hasActiveNewItemsRequest=!1,this.hasActiveOldItemsRequest=!1,this.requestInterval=this.attr.startPollingInterval,this.on("uiWantsMoreTimelineItems",this.requestItems)})}Object.defineProperty(e,"__esModule",{value:!0});var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},a=i(111),r=s(a),l=i(244),c=s(l);e.default=(0,r.default)(n,c.default)},,function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(t){a.default.attachTo(document,t),d.default.attachTo(document,t),l.default.attachTo(u,t,{initialFocusSelector:".modal-close"})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(1125),a=s(o),r=i(1126),l=s(r),c=i(1127),d=s(c),u="#activity-popup-dialog";e.default=n},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({noShowError:!0}),this.getUsers=function(t,e){var i={retweeted_popup:"/i/activity/retweeted_popup",favorited_popup:"/i/activity/favorited_popup",media_tagged_popup:"/i/activity/media_tagged_popup",reply_users_popup:"/i/tweet/reply_users_popup",like_moment_popup:"/i/moments/user_likes_dialog",people_in_conversation_popup:"/i/tweet/people_in_conversation_popup"}[e.component];this.get({url:i,data:{id:e.contentId},eventData:e,success:"dataActivityPopupSuccess",error:"dataActivityPopupError"})},this.after("initialize",function(){this.on("uiFetchActivityPopup",this.getUsers)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(244),l=s(r);e.default=(0,a.default)(n,l.default)},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({itemType:"user",titleSelector:".modal-title",contentSelector:".activity-popup-dialog-content",contentShowingSelector:".tweet-showing",userContentSelector:".activity-popup-dialog-users",openDropdownSelector:".user-dropdown.open .dropdown-menu",usersSelector:".activity-popup-users",replyUsersHeadingSelector:".reply-users-heading",activityUserCheckboxSelector:".activity-popup-dialog-users .js-user-checkbox",activityOtherReplyUsersCheckboxSelector:".activity-popup-dialog-other-reply-users .js-other-reply-users-checkbox",accountSelector:".account",saveSelector:".save-action",maxTop:100,modalClasses:{retweeted_popup:"retweeted-popup",favorited_popup:"favorited-popup",media_tagged_popup:"media-tagged-popup",reply_users_popup:"reply-users-popup",like_moment_popup:"like-moment-popup",people_in_conversation_popup:"people-in-conversation-popup"}}),this.setTitle=function(t){this.select("titleSelector").html(t)},this.setContent=function(t,e){this.$node.addClass("has-content");var i=this.select("contentSelector");i.html(t),i.toggleClass(this.attr.contentShowingSelector,!e)},this.setUsers=function(t){this.$node.addClass("has-content"),this.select("userContentSelector").html(t)},this.clearContent=function(){this.$node.removeClass("has-content"),this.select("contentSelector").empty(),this.select("userContentSelector").empty(),this.setTitle("")},this.requestPopup=function(t,e){this.openerNode=t.target,this.excludeReplyUserIds=e.excludeReplyUserIds;var i=e.htmlTitle,s=e.contentId,n=e.component;if(this.attr.eventData=c.default.merge(this.attr.eventData,{scribeContext:{component:n}},!0),this.defaultEventData=this.attr.eventData,this.attr.modalClasses[n]){this.clearContent();var o=i||"Loading...";this.setTitle(o),Object.keys(this.attr.modalClasses).forEach(function(t){var e=this.attr.modalClasses[t];this.$node.toggleClass(e,t===n)},this),this.open(),this.trigger("uiFetchActivityPopup",{component:n,contentId:s})}},this.updatePopup=function(t,e){this.setTitle(e.htmlTitle),this.setUsers(e.htmlUsers),this.setContent(e.htmlContent),this.trigger("uiActivityPopupRendered"),this.setReplyUsersCheckboxState(this.excludeReplyUserIds);var i=this.select("usersSelector");i.height()>=parseInt(i.css("max-height"),10)&&i.addClass("dropdown-threshold")},this.showError=function(e,i){this.clearContent();var s=t("<p>").addClass("error").html(i.message);this.setUsers(s,!0),this.setTitle("Sorry! There was an error.")},this.notifyOpenerDialogClosed=function(){this.trigger(this.openerNode,"uiActivityPopupClosed")},this.setReplyUsersCheckboxState=function(e){var i=this;e&&(this.select("activityUserCheckboxSelector").each(function(s,n){var o=t(n),a=o.closest(i.attr.accountSelector),r=a.attr("data-user-id");o.prop("checked",e.indexOf(r)<0)}),this.updateExcludeAllCheckboxState())},this.updateExcludeAllCheckboxState=function(){var t=this.select("activityUserCheckboxSelector"),e=t.length===t.filter(":checked").length;this.select("activityOtherReplyUsersCheckboxSelector").prop("checked",e)},this.saveExcludedReplyUsers=function(){var e=this.select("activityUserCheckboxSelector").filter(":not(:checked)").toArray().map(function(e){return t(e).closest(this.attr.accountSelector).attr("data-user-id")},this);this.trigger(this.openerNode,"uiActivityPopupSave",{excludeReplyUserIds:e})},this.toggleAllReplyUsers=function(e){this.select("activityUserCheckboxSelector").prop("checked",t(e.target).prop("checked"))},this.after("initialize",function(){this.on(document,"uiRequestActivityPopup",this.requestPopup),this.on(document,"dataActivityPopupSuccess",this.updatePopup),this.on(document,"dataActivityPopupError",this.showError),this.on(document,"uiShowProfilePopup uiOpenTweetDialogWithOptions uiNeedsDMDialog uiOpenSignupDialog",this.close),this.on("change",{activityUserCheckboxSelector:this.updateExcludeAllCheckboxState,activityOtherReplyUsersCheckboxSelector:this.toggleAllReplyUsers}),this.on("uiDialogClosed",this.saveExcludedReplyUsers),this.on("uiDialogClosed",this.notifyOpenerDialogClosed)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(123),a=(s(o),i(111)),r=s(a),l=i(126),c=s(l),d=i(163),u=s(d),h=i(883),f=s(h),p=i(886),m=s(p);e.default=(0,r.default)(n,u.default,m.default,f.default)}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.scribeActivityPopupOpen=function(t,e){var i=e.sourceEventData;this.scribe("open",e,{items:[{id:i.contentId,item_type:l.default.tweet}],item_count:1})},this.after("initialize",function(){this.on(document,"dataActivityPopupSuccess",this.scribeActivityPopupOpen)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(144),l=s(r),c=i(142),d=s(c);e.default=(0,a.default)(n,d.default)},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.curateTweets=function(t,e){function i(t){var i=this;e.added.forEach(function(){return i.scribe({component:"tweet",action:"add_to_timeline"},t)});var s="Tweet successfully added/removed.";this.trigger("uiShowMessage",{message:s}),this.trigger("dataTweetsCurated",t)}function s(t){var e="Failed to add/remove Tweet.";this.trigger("uiShowError",{message:e})}var n={added:e.added,removed:e.removed,tweet_id:e.tweetId,impression_id:e.impressionId};this.post({url:"/i/curate/batch",data:n,eventData:e,success:i.bind(this),error:s.bind(this)})},this.addTweet=function(t,e){function i(t){var e=(0,p.default)("Added Tweet to <a href='{{url}}'>{{name}}</a>",{url:t.timeline_url,name:t.timeline_name});this.trigger("uiShowMessage",{message:e,timeout:1e4}),this.trigger("dataTweetAddedToTimeline",t),this.scribe({component:"tweet",action:"quick_add_to_timeline"},t)}function s(t){this.trigger("uiShowError",t),this.trigger("dataTweetNotAddedToTimeline",t)}var n={timeline_id:e.timelineId,tweet_id:e.tweetId,impression_id:e.impressionId};this.post({url:"/i/curate/add_tweet",data:n,eventData:e,success:i.bind(this),error:s.bind(this)})},this.removeTweet=function(t,e){function i(t){this.trigger("dataTweetRemovedFromTimeline",t),this.trigger("uiShowMessage",{message:"Tweet successfully removed."}),this.trigger("dataTweetRemovedFromTimeline",t)}function s(t){this.trigger("uiShowError",{message:"Error removing tweet."}),this.trigger("dataTweetNotRemovedFromTimeline",t)}var n={timeline_id:e.timelineId,tweet_id:e.tweetId,id:e.tweetId};this.post({url:"/i/curate/remove_tweet",data:n,eventData:e,success:i.bind(this),error:s.bind(this)})},this.createCustomTimeline=function(t,e){function i(t){this.scribe({component:"custom_timeline",action:"create"},t),this.trigger("uiNavigate",{href:t.timeline_url})}function s(t){this.trigger("uiShowError",{message:"Error creating collection."})}var n={name:e.name,description:e.description,order:e.order,tweet_id:e.tweetId,impression_id:e.impressionId};this.post({url:"/i/curate/create",data:n,eventData:e,success:i.bind(this),error:s.bind(this)})},this.updateCustomTimeline=function(t,e){function i(t){this.scribe({element:"custom_timeline",action:"update"},t);var e=(0,p.default)("Collection updated. <a href='{{url}}'>Click here to refresh.</a>",{url:t.timeline_url});this.trigger("uiShowMessage",{message:e,timeout:5e3}),this.trigger("dataCustomTimelineUpdated",t)}function s(t){this.trigger("uiShowError",{message:"Error updating collection."})}var n={timeline_id:e.id,name:e.name,description:e.description,order:e.order};this.post({url:"/i/curate/update",data:n,eventData:e,success:i.bind(this),error:s.bind(this)})},this.deleteCustomTimeline=function(t,e){function i(t){this.scribe({element:"custom_timeline",action:"delete"},t),this.trigger("uiNavigate",{href:this.attr.timelines_url})}function s(t){this.trigger("uiShowError",{message:"Error deleting collection."})}this.post({url:"/i/curate/destroy",data:{timeline_id:e.timeline_id},eventData:e,success:i.bind(this),error:s.bind(this)})},this.getFullCustomTimelines=function(t,e){this.get({url:"/i/curate/all_timelines",eventData:e,data:{tweet_id:e.tweetId},success:"dataGotFullCustomTimelines",error:"dataFailedToGetFullCustomTimelines"})},this.getCustomTimelinesForDropdown=function(t,e){e.tweetId&&this.get({url:"/i/curate/timelines",eventData:e,data:{tweet_id:e.tweetId},success:"dataGotCustomTimelines",error:"dataFailedToGetCustomTimelines"})},this.after("initialize",function(){d.default.getDecider("custom_timeline_curation")&&(this.on("uiCurateTweets",this.curateTweets),this.on("uiCurateAddTweet",this.addTweet),this.on("uiCurateRemoveTweet",this.removeTweet),this.on("uiNeedsCustomTimelines",this.getCustomTimelinesForDropdown),this.on("uiNeedsFullCustomTimelines",this.getFullCustomTimelines),this.on("uiCreateCustomTimeline",this.createCustomTimeline),this.on("uiUpdateCustomTimeline",this.updateCustomTimeline),this.on("uiDeleteCustomTimeline",this.deleteCustomTimeline))})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(244),l=s(r),c=i(136),d=s(c),u=i(142),h=s(u),f=i(123),p=s(f),m=(0,a.default)(n,l.default,h.default);e.default=m},,,,,,,,function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.scribeCreateMoment=function(t,e){var i=e&&e.scribeContext&&e.scribeContext.component;this.scribe({component:i,element:"create_moment_button",action:"click"})},this.after("initialize",function(){this.on("uiMomentMakerCreateMoment",this.scribeCreateMoment)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(142),l=s(r);e.default=(0,a.default)(n,l.default)},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.createActionHandler=function(t,e){var i=this;return function(s,n){return i.post({url:"/i/moments/edit/"+n.moment_id+"/"+t,data:n,success:"dataMomentMaker"+e+"TweetSuccess",error:"dataMomentMaker"+e+"TweetFailure"})}},this.bindAction=function(t){var e=t.charAt(0).toUpperCase()+t.slice(1).toLowerCase();this.on("uiMomentMaker"+e+"Tweet",this.createActionHandler(t.toLowerCase(),e))},this.sortMoment=function(t,e){this.post({url:"/i/moments/edit/"+e.moment_id+"/sort",data:e,success:"dataMomentMakerSortMomentSuccess",error:this.genericErrorMessage.bind(this)})},this.editMetaData=function(t,e){this.post({url:"/i/moments/edit/"+e.moment_id+"/meta",data:e,success:"dataMomentMakerEditMetaSuccess",error:"dataMomentMakerEditMetaFailure",noAbortOnNavigate:!0})},this.setCoverData=function(t,e){this.post({url:"/i/moments/edit/"+e.moment_id+"/update_cover",data:e,success:"dataMomentMakerSetCoverSuccess",error:"dataMomentMakerSetCoverFailure"})},this.setCoverCropData=function(t,e){this.post({url:"/i/moments/edit/"+e.moment_id+"/update_cover",data:e,success:"dataMomentMakerSetCoverCropSuccess",error:"dataMomentMakerSetCoverCropFailure"})},this.setCoverDataByMediaId=function(t,e){function i(){this.trigger("dataMomentMakerSetCoverFailure")}var s=this,n=e.fileId,o=c.default.get(n);if(o)return this.trigger(document,"uiMediaSruInit",{fileId:n,uploadId:o.uploadId,mediaCategory:o.mediaCategory}),this.mediaSruFinalize(o).then(function(t){return s.post({url:"/i/moments/edit/"+e.momentId+"/update_cover/"+t,success:"dataMomentMakerSetCoverSuccess",error:"dataMomentMakerSetCoverFailure"})}).catch(function(t){throw i(),t})},this.createMoment=function(t,e){function i(t){this.trigger("uiNavigate",{href:t.url})}function s(){this.trigger("uiShowError",{message:"Something went wrong. This Moment couldn't be created. Give it a minute, then try again."})}this.post({url:"/i/moments/create",data:e,success:i.bind(this),error:s.bind(this)})},this.deleteMoment=function(t,e){function i(t){this.trigger("dataMomentMakerDeleteMomentSuccess",{href:t.href||"/i/moments"})}this.post({url:"/i/moments/delete",data:e,success:i.bind(this),error:"dataMomentMakerDeleteMomentFailure"})},this.updateCrop=function(t,e){function i(){this.trigger("dataMomentMakerUpdateCropFailure"),this.genericErrorMessage()}this.post({url:"/i/moments/edit/"+e.moment_id+"/update_crop",data:e,success:"dataMomentMakerUpdateCropSuccess",error:i.bind(this)})},this.updateMomentVisibility=function(t,e){function i(t){t&&t.permission_error?this.trigger("uiShowError",{message:"You do not currently have permission to perform this action."}):this.trigger("uiMomentMakerUpdateVisibilitySuccess",o({},t,e))}function s(){this.trigger("uiMomentMakerUpdateVisibilityError",e),this.genericErrorMessage()}this.post({url:"/i/moments/visibility/"+e.moment_id,data:{mode:e.visibility_mode},success:i.bind(this),error:s.bind(this)})},this.updateNSFWSetting=function(t,e){function i(){this.trigger("uiShowMessage",{message:"Moment sensitivity updated successfully."})}function s(){this.trigger("dataMomentMakerUpdateNSFWError",{previous_value:e.previous_value})}this.post({url:"/i/moments/edit/"+e.moment_id+"/update_nsfw",data:e,success:i.bind(this),error:s.bind(this)})},this.updatePublishLocationSetting=function(t,e){function i(){this.trigger("uiShowMessage",{message:"Moment location setting updated successfully."})}function s(){this.trigger("dataMomentMakerUpdatePublishLocationError",{previous_value:e.previous_value})}this.post({url:"/i/moments/edit/"+e.moment_id+"/update_publish_location",data:e,success:i.bind(this),error:s.bind(this)})},this.updateThemeColorSetting=function(t,e){function i(){this.trigger("dataMomentMakerUpdateThemeColorError",{previous_value:e.previous_value})}this.post({url:"/i/moments/edit/"+e.moment_id+"/update_theme_color",data:e,success:"dataMomentMakerUpdateThemeColorSuccess",error:i.bind(this)})},this.genericErrorMessage=function(){this.trigger("uiShowError",{message:"Something went wrong. Give it a minute, then try again."})},this.after("initialize",function(){this.bindAction("add"),this.bindAction("remove"),this.bindAction("reorder"),this.on("uiMomentMakerSortMoment",this.sortMoment),this.on("uiMomentMakerEditMeta",this.editMetaData),this.on("uiMomentMakerSetCover",this.setCoverData),this.on("uiMomentMakerSetCoverCrop",this.setCoverCropData),this.on("uiMomentMakerSetCoverByMediaId",this.setCoverDataByMediaId),this.on("uiMomentMakerCreateMoment",this.createMoment),this.on("uiMomentMakerDeleteMoment",this.deleteMoment),this.on("uiMomentMakerUpdateVisibility",this.updateMomentVisibility),this.on("uiMomentMakerUpdateCrop",this.updateCrop),this.on("uiMomentMakerUpdateNSFW",this.updateNSFWSetting),this.on("uiMomentMakerUpdatePublishLocation",this.updatePublishLocationSetting),this.on("uiMomentMakerUpdateThemeColor",this.updateThemeColorSetting)})}Object.defineProperty(e,"__esModule",{value:!0});var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},a=i(111),r=s(a),l=i(224),c=s(l),d=i(244),u=s(d),h=i(351),f=s(h),p=i(860),m=s(p),g=i(123);s(g);e.default=(0,r.default)(n,u.default,f.default,m.default)},,,,function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({successFromEndpoints:{destroy:"dataDidDeleteTweet",retweet:"dataDidRetweet",like:"dataDidFavoriteTweet",unretweet:"dataDidUnretweet",unlike:"dataDidUnfavoriteTweet",report:"dataDidReportTweet",pin:"dataDidUserPinTweet",unpin:"dataDidUserUnpinTweet"},errorsFromEndpoints:{destroy:"dataFailedToDeleteTweet",retweet:"dataFailedToRetweet",like:"dataFailedToFavoriteTweet",unretweet:"dataFailedToUnretweet",unlike:"dataFailedToUnfavoriteTweet",report:"dataFailedToReportTweet",pin:"dataFailedToUserPinTweet",unpin:"dataFailedToUserUnpinTweet"},statsName:"swift_tweet_actions"});var t={like:{path:"/favorites/create.json",counterName:"favorite"},unlike:{path:"/favorites/destroy.json",counterName:"favorite"},retweet:{path:"/statuses/retweet.json",counterName:"retweet"},unretweet:{path:"/statuses/unretweet.json",counterName:"retweet"}};this.takeAction=function(e,i,s){var n=this,o=t[e],a=!!o,r=function(t){t&&t.message&&this.trigger("uiShowMessage",{message:t.message}),this.trigger(this.attr.successFromEndpoints[e],t);var i=t.profile_stats,s=t.tweet_stats;a&&(i=d.default.normalizeProfileStats(t,o,h.default.language),s=d.default.normalizeTweetStats(t,o,h.default.language)),i&&this.trigger("dataGotProfileStats",{stats:i}),s&&this.trigger("dataGotTweetStats",{stats:s})},l=function(t,e){return t?n.apiEndpointUrl(o.path):"/i/tweet/"+e},c=void 0;c=("like"===e||"retweet"===e)&&"retweetId"in s?{id:s.retweetId}:"report"===e?{tweet_id:s.tweetId,user_id:s.userId,screen_name:s.screenName,block_user:s.blockUser,report_type:s.reportType}:{id:s.id},s.tweetStatCount&&(c.tweet_stat_count=s.tweetStatCount),s.impressionId&&(c.impression_id=s.impressionId,s.disclosureType&&(c.earned="earned"===s.disclosureType)),s.featureContext&&(c.feature_context=s.featureContext);var u={destroy:"DELETE",unretweet:"DELETE"},f={url:l(a,e),data:c,eventData:s,success:r.bind(this),error:this.attr.errorsFromEndpoints[e],retryIfUnavailable:!0,statsSubcategory:e,useOAuthSessionAuth:a};"like"===e&&(this.trigger("uiABImpression",{experiment:"like_over_http_client_6421"}),p.default.getDecider("like_over_http_client")&&(f.useHttpClient=!0,f.endpoint=e)),this.JSONRequest(f,u[e]||"POST")},this.hitEndpoint=function(t){return this.takeAction.bind(this,t)},this.getTweet=function(t,e){var i={id:e.id};e.modal&&(i.modal=e.modal),this.get({url:e.hasStickers?"/i/tweet/stickersHtml":"/i/tweet/html",statsSubcategory:"html",data:i,eventData:e,success:"dataGotTweet",error:"dataFailedToGetTweet"})},this.after("initialize",function(){this.on("uiDidRetweet",this.hitEndpoint("retweet")),this.on("uiDidUnretweet",this.hitEndpoint("unretweet")),this.on("uiDidDeleteTweet",this.hitEndpoint("destroy")),this.on("uiDidFavoriteTweet",this.hitEndpoint("like")),this.on("uiDidUnfavoriteTweet",this.hitEndpoint("unlike")),this.on("uiDidBlockOrReport uiDidReportTweet",this.hitEndpoint("report")),this.on("uiGetTweet",this.getTweet),this.on("uiDidUserPinTweet",this.hitEndpoint("pin")),this.on("uiDidUserUnpinTweet",this.hitEndpoint("unpin"))})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(244),l=s(r),c=i(1142),d=s(c),u=i(1154),h=s(u),f=i(136),p=s(f),m=(0,a.default)(n,l.default);e.default=m},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(t,e){var i=e.counterName+"_count",s=t.retweeted_status&&t.retweeted_status[i]?t.retweeted_status[i]:t[i];return"/statuses/unretweet.json"===e.path?s-1>=0?s-1:0:s}function o(t,e,i){var s=n(t,e),o=e.counterName,a=t.retweeted_status&&t.retweeted_status.id_str?t.retweeted_status.id_str:t.id_str;if(void 0!==s&&a){var r=c.default.compactOrCommaize(s,i),l=c.default.getCommaizedFormat(s),u=o===d?c.default.getFavoriteStatTitle(s,l):c.default.getRetweetStatTitle(s,l),h=[{status_id:a,name:o,count:s.toString(),commaized_count:l,compact_count:r,title:u}];return h}}function a(t,e,i){if("object"===r(t.user)){var s=void 0,n=void 0,o=e.counterName,a="\n",l=void 0,p=void 0;if(o===d){var m=t.user.favourites_count;p=c.default.getCommaizedFormat(m),s=c.default.getFavoriteStatPhrase(m,p),n=c.default.getNumericStatText(m,p),l=h}else if(o===u){var g=t.user.statuses_count,v=c.default.compactOrCommaize(g,i);p=c.default.getCommaizedFormat(g),s=c.default.getTweetStatPhrase(g,p),n=c.default.getNumericStatText(g,p),a=c.default.getProfileTweetStat(p,v),l=f}var b=[{highline_stat_phrase:s,highline_stat_value:n,html:a,stat:l,user_id:t.user.id_str}];return b}}Object.defineProperty(e,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l=i(1143),c=s(l),d="favorite",u="retweet",h="favorite",f="tweet";e.default={normalizeTweetStats:o,normalizeProfileStats:a}},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(t,e){return t>=1e3&&z.indexOf(e)===-1}function o(t){return t<9950?1:t<1e6?0:1}function a(t){return q.format(t,{precision:o(t)})}function r(t){return H.format(t)}function l(t,e){return n(t,e)?a(t):r(t)}function c(t,e){var i={intnumber:t.count,localized_number:t.commaizedCount,localized_compact_number:t.compactCount};return i["intnumber_"+y.default.PluralRules.rule_for(t.count)]=!0,e.render(i).trim()}function d(t,e){return c({count:t,commaizedCount:e},P.default)}function u(t,e){return c({count:t,commaizedCount:e},k.default)}function h(t,e){return c({count:t,commaizedCount:e},T.default)}function f(t,e){return c({count:t,commaizedCount:e},N.default)}function p(t,e){return c({count:t,commaizedCount:e},M.default)}function m(t,e){return c({count:t,commaizedCount:e},E.default)}function g(t,e){return c({count:t,commaizedCount:e},R.default)}function v(t,e){return c({commaizedCount:t,compactCount:e},B.default)}function b(t,e){return c({commaizedCount:t,compactCount:e},V.default)}function w(t,e){return c({count:t,commaizedCount:e},j.default)}Object.defineProperty(e,"__esModule",{value:!0});var S=i(483),y=s(S),C=i(1144),T=s(C),D=i(1145),M=s(D),I=i(1146),P=s(I),x=i(1147),k=s(x),A=i(1148),E=s(A),O=i(1149),R=s(O),F=i(1150),N=s(F),U=i(1151),j=s(U),L=i(1152),B=s(L),$=i(1153),V=s($),q=new y.default.ShortDecimalFormatter,H=new y.default.DecimalFormatter,z=["ja","ko","nl"];
e.default={compactOrCommaize:l,getCompactNumberPrecision:o,getCommaizedFormat:r,needsCompacting:n,getFollowerStatPhrase:d,getFollowingStatPhrase:u,getFavoriteStatPhrase:h,getFavoriteStatTitle:p,getTweetStatPhrase:f,getNumericStatText:w,getReplyStatTitle:m,getRetweetStatTitle:g,getProfileTweetStat:v,getProfileFollowingStat:b}},function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b("\n"+i),s.b("  "),s.s(s.f("intnumber_one",t,e,1),t,e,0,21,46,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(i.v(i.f("localized_number",t,e,0))),i.b(" Like")}),t.pop()),s.b("\n"+i),s.b("  "),s.s(s.f("intnumber_other",t,e,1),t,e,0,87,113,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(i.v(i.f("localized_number",t,e,0))),i.b(" Likes")}),t.pop()),s.b("\n"),s.fl()},partials:{},subs:{}})}).call(e,i(1))},function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.s(s.f("intnumber_one",t,e,1),t,e,0,26,51,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(i.v(i.f("localized_number",t,e,0))),i.b(" like")}),t.pop()),s.s(s.f("intnumber_other",t,e,1),t,e,0,97,123,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(i.v(i.f("localized_number",t,e,0))),i.b(" likes")}),t.pop()),s.fl()},partials:{},subs:{}})}).call(e,i(1))},function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b("\n"+i),s.b("  "),s.s(s.f("intnumber_one",t,e,1),t,e,0,21,50,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(i.v(i.f("localized_number",t,e,0))),i.b(" Follower")}),t.pop()),s.b("\n"+i),s.b("  "),s.s(s.f("intnumber_other",t,e,1),t,e,0,91,121,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(i.v(i.f("localized_number",t,e,0))),i.b(" Followers")}),t.pop()),s.b("\n"),s.b("\n"),s.fl()},partials:{},subs:{}})}).call(e,i(1))},function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b("\n"+i),s.b("  "),s.s(s.f("intnumber_one",t,e,1),t,e,0,21,51,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(i.v(i.f("localized_number",t,e,0))),i.b(" Following")}),t.pop()),s.b("\n"+i),s.b("  "),s.s(s.f("intnumber_other",t,e,1),t,e,0,92,122,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(i.v(i.f("localized_number",t,e,0))),i.b(" Following")}),t.pop()),s.b("\n"),s.b("\n"),s.fl()},partials:{},subs:{}})}).call(e,i(1))},function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.s(s.f("intnumber_one",t,e,1),t,e,0,26,52,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(i.v(i.f("localized_number",t,e,0))),i.b(" reply")}),t.pop()),s.s(s.f("intnumber_other",t,e,1),t,e,0,98,126,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(i.v(i.f("localized_number",t,e,0))),i.b(" replies")}),t.pop()),s.fl()},partials:{},subs:{}})}).call(e,i(1))},function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.s(s.f("intnumber_one",t,e,1),t,e,0,26,54,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(i.v(i.f("localized_number",t,e,0))),i.b(" retweet")}),t.pop()),s.s(s.f("intnumber_other",t,e,1),t,e,0,100,129,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(i.v(i.f("localized_number",t,e,0))),i.b(" retweets")}),t.pop()),s.fl()},partials:{},subs:{}})}).call(e,i(1))},function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b("\n"+i),s.b("  "),s.s(s.f("intnumber_one",t,e,1),t,e,0,21,47,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(i.v(i.f("localized_number",t,e,0))),i.b(" Tweet")}),t.pop()),s.b("\n"+i),s.b("  "),s.s(s.f("intnumber_other",t,e,1),t,e,0,88,115,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(i.v(i.f("localized_number",t,e,0))),i.b(" Tweets")}),t.pop()),s.b("\n"),s.b("\n"),s.fl()},partials:{},subs:{}})}).call(e,i(1))},function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b("\n"+i),s.b("  "),s.b(s.v(s.f("localized_number",t,e,0))),s.b("\n"),s.fl()},partials:{},subs:{}})}).call(e,i(1))},function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<strong title="'),s.b(s.v(s.f("localized_number",t,e,0))),s.b('" class="js-mini-profile-stat">'),s.b(s.v(s.f("localized_compact_number",t,e,0))),s.b("</strong>"),s.fl()},partials:{},subs:{}})}).call(e,i(1))},function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<strong title="'),s.b(s.v(s.f("localized_number",t,e,0))),s.b('" class="js-mini-profile-stat">'),s.b(s.v(s.f("localized_compact_number",t,e,0))),s.b("</strong>"),s.fl()},partials:{},subs:{}})}).call(e,i(1))},function(t,e,i){(function(t,e){"use strict";var i=t("html").attr("lang");e.export={language:i}}).call(e,i(10),i(746)(t))},,,,,function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.updateMomentMapAndTriggerEvent=function(t){var e=this;return function(i){e.momentMap=o({},e.momentMap,i.moment_map||{}),e.trigger(document,t,i)}},this.getDropdownUserMoments=function(t,e){this.get({url:"/i/moments/list_user_moments/dropdown",data:{tweet_id:e.tweet_id},success:this.updateMomentMapAndTriggerEvent("dataMomentsGetDropdownUserMomentsSuccess"),error:"dataMomentsGetDropdownUserMomentsFailure"})},this.getDialogUserMoments=function(t,e){this.get({url:"/i/moments/list_user_moments/dialog",data:e,success:this.updateMomentMapAndTriggerEvent("dataMomentsGetDialogUserMomentsSuccess"),error:"dataMomentsGetDialogUserMomentsFailure"})},this.addTweetSuccess=function(t,e){var i=e.moment_id&&this.momentMap[e.moment_id],s=void 0;i&&(s=i.is_empty_title?(0,f.default)('Tweet added to "<a target="_blank" href="{{url}}">Untitled Moment</a>"',{url:e.moment_maker_url}):(0,f.default)('Tweet added to "<a target="_blank" href="{{url}}">{{moment_name}}</a>"',{url:e.moment_maker_url,moment_name:i.title}),this.trigger("uiShowMessage",{message:s}))},this.removeTweetSuccess=function(t,e){var i=e.moment_id&&this.momentMap[e.moment_id],s=void 0;i&&(s=i.is_empty_title?(0,f.default)('Tweet removed from "<a target="_blank" href="{{url}}">Untitled Moment</a>"',{url:e.moment_maker_url}):(0,f.default)('Tweet removed from "<a target="_blank" href="{{url}}">{{moment_name}}</a>"',{url:e.moment_maker_url,moment_name:i.title}),this.trigger("uiShowMessage",{message:s}))},this.after("initialize",function(){this.momentMap={},this.on("uiMomentsGetDropdownUserMoments",this.getDropdownUserMoments),this.on("uiMomentsGetDialogUserMoments",this.getDialogUserMoments),this.on(document,"dataMomentMakerAddTweetSuccess",this.addTweetSuccess),this.on(document,"dataMomentMakerRemoveTweetSuccess",this.removeTweetSuccess)})}Object.defineProperty(e,"__esModule",{value:!0});var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},a=i(111),r=s(a),l=i(244),c=s(l),d=i(142),u=s(d),h=i(123),f=s(h);e.default=(0,r.default)(n,c.default,u.default)},,,,function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({containerSelector:".stream-container",itemsSelector:"#stream-items-id",genericItemSelector:".js-stream-item",timelineEndSelector:".timeline-end",backToTopSelector:".back-to-top",lastItemSelector:".stream-item:last",streamItemContentsSelector:".js-actionable-tweet, .js-actionable-user, .js-activity, .js-story-item",truncationLimit:200,highlightedSelector:".stream-container .stream li.js-stream-item.js-activity",tweetContainerSelector:"li",reloadTimelineSelector:".js-reload-timeline",useDeduping:!1}),this.findFirstItemContent=function(e){var i=e.find(this.attr.streamItemContentsSelector);return i=i.not(".conversation-tweet"),t(i[0])},this.injectItems=function(e,i,s,n){var o=t("<div/>").html(i),a=this.getItemsToInject(o),r=o.find(this.attr.genericItemSelector);if(a.length>0&&this.select("timelineEndSelector").addClass("has-items"),"prepend"===e&&a.length>this.attr.truncationLimit&&(a.length=this.attr.truncationLimit,r.length=this.attr.truncationLimit),this.injectToDOM(e,a),this.reportInjectedItems(r,s,n),"prepend"===e){var l=this.select("itemsSelector");l.find(">:gt("+(this.attr.truncationLimit-1)+")").remove();for(var c=l.children().last(),d=void 0;c.find(".promoted-tweet").length;)d=c.prev(),c.remove(),c=d}return a},this.getItemsToInject=function(t){return t.children()},this.injectToDOM=function(t,e){this.select("itemsSelector")[t](e)},this.removeDuplicates=function(t){var e=[];return t.filter(function(t){return!t.tweetId||e.indexOf(t.tweetId)===-1&&(e.push(t.tweetId),!0)})},this.extractTimestamp=function(t){return t.find("[data-time-ms]").attr("data-time-ms")},this.reportInjectedItems=function(e,i,s){function n(t){return"uiHasInjectedNewTimeline"===i||"uiHasInjectedOldTimelineItems"===i||"uiHasInjectedRangeTimelineItems"===i}var o=this,a=[],r=0;e.each(function(e,s){n(i)&&(a=a.concat(o.extraInteractionData(t(s))),a.push(o.interactionData(o.findFirstItemContent(t(s)))),r=Math.max(r,o.extractTimestamp(t(s)))),o.trigger(s,"uiHasInjectedTimelineItem")}),a=this.removeDuplicates(a);var l={};n(i)&&(l={scribeContext:{component:"stream"},scribeData:{},items:a},s&&s.autoplay&&(l.scribeData.event_initiator=h.default.clientSideApp)),this.trigger("uiWantsToRefreshTimestamps"),this.trigger(i,l)},this.inspectItemsFromServer=function(t,e){this.isOldItem(e)?this.injectOldItems(e):this.isNewItem(e)?this.notifyNewItems(e):this.wasRangeRequest(e)&&this.injectRangeItems(e)},this.investigateDataError=function(t,e){var i=e.sourceEventData;i&&(this.wasRangeRequest(i)?this.notifyRangeItemsError(e):this.wasNewItemsRequest(i)||this.wasOldItemsRequest(i)&&this.notifyOldItemsError(e))},this.possiblyShowBackToTop=function(){var e=this.select("lastItemSelector").position();e&&e.top>=t(window).height()&&this.select("backToTopSelector").show()},this.scrollToTop=function(){(0,g.default)(0,"fast")},this.getTimelinePosition=function(t){return t.closest(this.attr.genericItemSelector).index()},this.updateHighlighting=function(e,i){var s=this,n=this.select("highlightedSelector");n.each(function(e,n){var o=t(n),a=s.extractTimestamp(o);o.toggleClass("highlighted",a>i),a<=i&&o.removeClass("highlighted")})},this.handleTweetRemoved=function(){this.select("genericItemSelector").length||this.select("timelineEndSelector").removeClass("has-items")},this.handleTweetDelete=function(e,i){var s=this.$node.find('[data-tweet-id="'+i.sourceEventData.id+'"]');s.toArray().forEach(function(e,s){var n=t(e);this.trigger(n,"uiBeforeTweetRemoved",i),n.closest(this.attr.tweetContainerSelector).remove(),this.trigger("uiTweetRemoved",i)},this)},this.reloadTimeline=function(t,e){t.preventDefault(),this.trigger("uiNearTheBottom")},this.injectDeferredItems=function(){var t=this.$node.find('script[type="text/twitter-deferred-timeline-stream-items"]');t.length&&(this.injectItems("append",t.html(),"uiHasInjectedOldTimelineItems"),t.remove())},this.after("initialize",function(){this.on("dataGotMoreTimelineItems",this.inspectItemsFromServer),this.on("dataGotMoreTimelineItemsError",this.investigateDataError),this.on(document,"uiUpdateActivityHighlighting",this.updateHighlighting),this.on("uiTweetRemoved",this.handleTweetRemoved),this.on("uiReplyToTweet","uiOpenReplyDialog"),this.on(document,"dataDidDeleteTweet",this.handleTweetDelete),this.on("click",{backToTopSelector:this.scrollToTop,reloadTimelineSelector:this.reloadTimeline}),this.possiblyShowBackToTop(),window.requestIdleCallback(this.injectDeferredItems.bind(this))})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(111),a=s(o),r=i(1164),l=s(r),c=i(138),d=s(c),u=i(1166),h=s(u),f=i(1167),p=s(f),m=i(1140),g=s(m),v=i(1168),b=s(v),w=i(1169),S=s(w);e.default=(0,a.default)(n,l.default,d.default,p.default,b.default,S.default)}).call(e,i(10))},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){a.default.mixin(this,[l.default]),this.defaultAttrs({navigationActiveClass:"js-navigation-active",selectedClass:"selected-stream-item",unselectableClass:"js-unselectable-stream-item",firstItemSelector:".js-stream-item:first-child:not(.js-unselectable-stream-item)",profilePageSelector:".route-profile",profileOwnerUserIdSelector:".ProfileNav .user-actions",pushStateSelector:"a.js-nav",selectedSelector:".selected-stream-item"}),this.moveSelection=function(e){var i=this,s=t(e.target);if(!s.closest(this.attr.selectedSelector).length){var n=s.closest(this.attr.genericItemSelector);s.closest(this.attr.pushStateSelector).length&&(this.$linkClicked=n,clearTimeout(this.linkTimer),this.linkTimer=setTimeout(function(){return i.$linkClicked=t()},0)),this.$selected.length&&this.selectItem(n)}},this.clearSelection=function(){var e=t(this.attr.selectedSelector);this.$previousSelection=e,e.removeAttr("tabIndex").removeClass(this.attr.selectedClass),this.$selected=t(),this.trigger(e,"uiTimelineSelectionCleared")},this.selectTopItemHandler=function(){this.selectTopItem()},this.selectTopItem=function(t){this.clearSelection(),this.trigger("uiInjectNewItems",t||{}),this.selectAdjacentItem("next",{scrollToTop:!0})},this.injectAndPossiblySelectTopItem=function(t,e){var i=this.$selected.length;i&&this.clearSelection(),this.trigger("uiInjectNewItems",e||{}),i&&this.selectAdjacentItem("next")},this.selectTopItemByKeyboard=function(){this.selectTopItem({wasPeriodPress:!0})},this.selectPrevItem=function(){this.selectAdjacentItem("prev")},this.selectNextItem=function(t,e){this.selectAdjacentItem("next",e)},this.selectNextAdjacentItem=function(){var t=this.$selected;this.selectAdjacentItem("next"),t===this.$selected&&this.selectAdjacentItem("prev")},this.selectNextItemNotFrom=function(t){for(var e="next",i=this.$selected;this.getUserIdFromNode(this.$selected)===t;)if(this.selectAdjacentItem(e),i===this.$selected){if("next"!==e)return;e="prev"}else i=this.$selected},this.getAdjacentParentItem=function(t,e){var i=t.closest(".js-navigable-stream"),s=t;return i.length&&(t=i.closest(".js-stream-item"),s=t[e](),!s.length)?this.getAdjacentParentItem(t,e):s},this.getAdjacentChildItem=function(t,e){var i=t,s=i.hasClass("js-has-navigable-stream"),n="next"===e?"first-child":"last-child";return i.length&&s?(i=i.find(".js-navigable-stream").eq(0).find(">li:"+n),this.getAdjacentChildItem(i,e)):i},this.selectAdjacentItem=function(t,e){var i=void 0;if(i=this.$selected.length?this[t](this.$selected):this.select("firstItemSelector").eq(0),i.length||(i=this.getAdjacentParentItem(this.$selected,t)),i=this.getAdjacentChildItem(i,t),i.length&&i.hasClass(this.attr.unselectableClass))return this.$selected=i,this.selectAdjacentItem(t,e);this.selectItem(i);var s="next"===t?"uiNextItemSelected":"uiPreviousItemSelected";this.trigger(this.$selected,s),this.focusSelected(),!i.length||e&&e.maintainPosition||this.adjustScrollForSelectedItem(e)},this.next=function(t){return t.next()},this.prev=function(t){return t.prev()},this.selectItem=function(t){t.length&&this.$selected!==t&&(this.clearSelection(),this.$selected=t,this.$selected.addClass(this.attr.selectedClass),this.trigger(this.$selected,"uiTimelineItemSelected"))},this.focusSelected=function(){var t=this;this.$selected.attr("tabIndex",-1).focus(),setTimeout(function(e){return t.trigger(e,"uiAfterTimelineSelectionFocused")},0,this.$previousSelection)},this.deselect=function(e){var i=["HTML","BODY"].indexOf(e.target.tagName)!==-1,s="page-outer"===e.target.id&&!t(e.target).parents("#page-container").length;(i||s)&&this.clearSelection()},this.muteUser=function(){this.triggerBlockActionOnNode(this.$selected,"uiDidMuteUser")},this.blockUser=function(){this.triggerBlockActionOnNode(this.$selected,"uiOpenBlockUserDialog")},this.updateAfterBlock=function(e,i){var s=i.userId.toString()===t(this.attr.profileOwnerUserIdSelector).attr("data-user-id"),n=0!==t(this.attr.profilePageSelector).length;s?this.trigger("uiHideProfileTweets"):n||(this.selectNextItemNotFrom(i.userId),this.trigger("uiRemoveTweetsFromUser",i))},this.removeTweetsAndEngagementsFromUser=function(t,e){this.selectNextItemNotFrom(e.userId),this.trigger("uiRemoveTweetsFromUser",e)},this.updateSelectionBeforeDelete=function(t,e){this.select("genericItemSelector").length&&this.$selected.attr("data-item-id")===e.sourceEventData.id.toString()&&this.selectNextAdjacentItem()},this.adjustScrollForItem=function(e,i){i&&i.scrollToTop?t(window).scrollTop(0):e.length&&t(window).scrollTop(e.offset().top-t(window).height()/10)},this.notifyExpansionRequest=function(e,i){var s=this.$selected.find(".tweet"),n=s.data("permalink-path"),o=s.data("conversation-id");n&&t(document).trigger("uiNavigate",{href:n,conversation_id:o})},this.adjustScrollForSelectedItem=function(t){this.adjustScrollForItem(this.$selected,t)},this.processActiveNavigation=function(){var t=2;setTimeout(this.removeActiveNavigationClass.bind(this),1e3*t)},this.setNavigationActive=function(){this.$linkClicked.addClass(this.attr.navigationActiveClass)},this.removeActiveNavigationClass=function(){var t=this.$node.find("."+this.attr.navigationActiveClass);t.removeClass(this.attr.navigationActiveClass)},this.handleEvent=function(e){return function(){t("body").hasClass("modal-enabled")||this[e].apply(this,arguments)}},this.changeSelection=function(e,i){var s=t(e.target);this.$selected.length&&(this.selectItem(s),i&&i.setFocus&&this.focusSelected())},this.after("initialize",function(){this.$selected=this.$node.find(this.attr.selectedSelector),this.$linkClicked=t(),this.on(document,"uiShortcutSelectPrev",this.handleEvent("selectPrevItem")),this.on(document,"uiShortcutSelectNext uiSelectNext",this.handleEvent("selectNextItem")),this.on(document,"uiSelectItem",this.handleEvent("changeSelection")),this.on(document,"uiShortcutEnter",this.handleEvent("notifyExpansionRequest")),this.on(document,"uiSelectTopTweet",this.handleEvent("selectTopItemHandler")),this.on(document,"uiShortcutGotoTopOfScreen",this.handleEvent("selectTopItemByKeyboard")),this.on(document,"uiGotoTopOfScreen",this.handleEvent("injectAndPossiblySelectTopItem")),this.on(document,"uiShortcutMuteUser",this.handleEvent("muteUser")),this.on(document,"uiShortcutBlock",this.handleEvent("blockUser")),this.on(document,"uiUpdateAfterBlock",this.updateAfterBlock),this.on(document,"uiRemoveTweetsAndEngagementsFromUser",this.removeTweetsAndEngagementsFromUser),this.on(document,"uiBeforeTweetRemoved",this.updateSelectionBeforeDelete),this.on(document,"uiRemovedSomeTweets",this.adjustScrollForSelectedItem),this.on(document,"uiBeforePageChanged uiClearSelection",this.clearSelection),this.on(document,"uiPageChanged",this.processActiveNavigation),this.on("click",{genericItemSelector:this.moveSelection}),this.on(document,"uiNavigate",this.setNavigationActive),this.on(document,"click",this.deselect)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(121),a=s(o),r=i(1165),l=s(r);e.default=n}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({actionableTweetSelector:".js-actionable-tweet"}),this.triggerBlockActionOnNode=function(t,e){!this.itemIsMine(t)&&this.itemIsBlockable(t)&&this.trigger(t,e,{userId:this.getUserIdFromNode(t),username:this.getUsernameFromNode(t),tweetId:this.getUserTweetIdFromNode(t),fromShortcut:!0})},this.getUserIdFromNode=function(t){var e=a.default.getId(t);return e||(e=a.default.getId(t.find("[data-user-id]"))),e},this.getUserTweetIdFromNode=function(t){var e=t.attr("data-tweet-id");return e||(e=t.find("[data-tweet-id]").attr("data-tweet-id")),e},this.getUsernameFromNode=function(t){var e=a.default.getName(t);return e||(e=a.default.getName(t.find("[data-name]"))),e},this.itemIsMine=function(t){return t.is(this.attr.ownTweetSelector)||t.find(this.attr.ownTweetSelector).length>0},this.itemIsBlockable=function(t){return t.find(this.attr.actionableTweetSelector).length>0||t.is(this.attr.actionableTweetSelector)}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(889),a=s(o);e.default=n},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={clientSideUser:0,serverSideUser:1,clientSideApp:2,serverSideApp:3}},function(t,e,i){(function(t){"use strict";function i(){this.defaultAttrs({focusClass:"focus",focusContainerSelector:".tweet"}),this.addFocusStyle=function(e,i){t(i.el).addClass(this.attr.focusClass)},this.addFocusStyleToTarget=function(e){t(e.target).addClass(this.attr.focusClass)},this.removeFocusStyle=function(e,i){var s=this;setTimeout(function(){var e=i.el,n=document.activeElement;t.contains(e,n)||e===n||t(e).removeClass(s.attr.focusClass)},0)},this.after("initialize",function(){this.on(document,"uiShouldAddFocusStyle",this.addFocusStyleToTarget),this.on("focusin",{focusContainerSelector:this.addFocusStyle}),this.on("focusout",{focusContainerSelector:this.removeFocusStyle})})}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i}).call(e,i(10))},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(t,e){return t=t.getAttribute("data-aria-label-part")||0,e=e.getAttribute("data-aria-label-part")||0,"last"===t?1:"last"===e?-1:(t=parseInt(t,10),e=parseInt(e,10),t||e?t?e?t&&e?t===e?1:t-e:void 0:-1:1:0)}function o(){this.createImageLabel=function(e,i){var s=t(i);s.removeAttr("data-aria-label-part");var n=s.attr("alt");if(n){s.attr({alt:"","data-alt":n});var o=t("<span>",{addClass:"u-hiddenVisually image-description","data-aria-label-part":"",text:(0,r.default)("Image: {{imageDescription}}",{imageDescription:n})});s.before(o)}},this.createARIALabel=function(e,i){var s=e.target,o=t(s),a=o.find("img[data-aria-label-part]");a.each(this.createImageLabel);var r=o.find("[data-aria-label-part]").toArray();if(r.length){r.sort(n);var l=r.map(function(t,e){return(0,c.default)(t)});s.setAttribute("aria-labelledby",l.join(" ")),a.attr("data-aria-label-part","")}},this.removeItemLabel=function(e,i){var s=t(e.target);s.removeAttr("aria-labelledby").find(".image-description[data-aria-label-part]").remove(),s.find("img[data-alt]").each(function(e,i){var s=t(i);s.attr("alt",s.attr("data-alt")).removeAttr("data-alt")})},this.after("initialize",function(){this.on("uiBeforeTimelineSelectionCleared uiAfterTimelineSelectionFocused",this.removeItemLabel),this.on("uiTimelineItemSelected",this.createARIALabel)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(123),r=s(a),l=i(399),c=s(l);e.default=o}).call(e,i(10))},function(t,e,i){(function(t){"use strict";function i(){this.registerItem=function(e){var i=t(e),s=i.attr("data-item-id");s&&(this.idHash[s]?this.idHash[s]=!0:this.dedupItem(s))},this.dedupItem=function(e){var i=this.select("genericItemSelector").filter("[data-item-id="+e+"]").filter(function(e,i){return 0===t(i).closest(".js-no-dedup").length}),s=i.slice(1);s.remove()},this.registerInjectedItem=function(t,e){this.registerItem(t.target)},this.registerExistingItems=function(){var t=this,e=this.select("genericItemSelector");e.get().forEach(function(e){return t.registerItem(e)})},this.after("initialize",function(){this.attr.useDeduping&&(this.idHash={},this.registerExistingItems(),this.on("uiHasInjectedTimelineItem",this.registerInjectedItem))})}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i}).call(e,i(10))},function(t,e,i){(function(t){"use strict";function i(){function e(t){return t.removeClass("u-hidden").show()}function i(t){return t.addClass("u-hidden").hide()}this.defaultAttrs({endOfStreamSelector:".stream-footer",errorMessageSelector:".stream-fail-container",tryAgainSelector:".try-again-after-whale"}),this.getOldItems=function(t){t&&t.stopPropagation(),this.shouldGetOldItems()&&this.trigger("uiWantsMoreTimelineItems",this.getOldItemsData())},this.injectOldItems=function(t){this.hideWhaleEnd(),this.resetStateVariables(t),t.has_more_items?this.showMoreSpinner():this.hideMoreSpinner(),this.injectItems("append",t.items_html,"uiHasInjectedOldTimelineItems"),this.possiblyShowBackToTop()},this.notifyOldItemsError=function(t){this.showWhaleEnd()},this.showWhaleEnd=function(){e(this.select("errorMessageSelector")),i(this.select("endOfStreamSelector")),this.select("timelineEndSelector").addClass("has-items-error")},this.hideWhaleEnd=function(){i(this.select("errorMessageSelector")),e(this.select("endOfStreamSelector")),this.select("timelineEndSelector").removeClass("has-items-error")},this.showMoreSpinner=function(){this.select("timelineEndSelector").addClass("has-more-items")},this.hideMoreSpinner=function(){this.select("timelineEndSelector").removeClass("has-more-items")},this.tryAgainAfterWhale=function(t){t.preventDefault(),this.hideWhaleEnd(),this.getOldItems()},this.after("initialize",function(){var e=this.attr.inOverlay?".PermalinkOverlay":window;this.on(e,"uiNearTheBottom",this.getOldItems),this.$document=t(document),this.$window=t(window),this.on("click",{tryAgainSelector:this.tryAgainAfterWhale})})}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i}).call(e,i(10))},,,,,,,,function(t,e){"use strict";function i(){this.updateYouFollow=function(t,e){this.$node.find("[data-user-id="+t+"][data-you-follow]").attr("data-you-follow",e)},this.updateYouBlock=function(t,e){this.$node.find("[data-user-id="+t+"][data-you-block]").attr("data-you-block",e)},this.setViewerFollowState=function(t){return function(e,i){this.updateYouFollow(i.userId,t)}},this.setViewerBlockState=function(t){return function(e,i){this.updateYouBlock(i.userId,t)}},this.onFollowStateChange=function(t,e){var i=e.userId,s=e.newState;"following"===s?(this.updateYouFollow(i,!0),this.updateYouBlock(i,!1)):"not-following"===s?(this.updateYouFollow(i,!1),this.updateYouBlock(i,!1)):"blocked"===s&&(this.updateYouFollow(i,!1),this.updateYouBlock(i,!0))},this.after("initialize",function(){this.on(document,"uiFollowAction",this.setViewerFollowState(!0)),this.on(document,"uiUnfollowAction uiBlockAction uiReportSpamAction uiDidTriggerBlockingAction",this.setViewerFollowState(!1)),this.on(document,"uiBlockAction uiReportSpamAction uiDidTriggerBlockingAction",this.setViewerBlockState(!0)),this.on(document,"dataFollowStateChange",this.onFollowStateChange)})}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i},function(t,e,i){(function(t){"use strict";function i(){this.isOldItem=function(t){return"undefined"!=typeof t.min_position},this.isNewItem=function(t){return"undefined"!=typeof t.max_position},this.getNewItemsData=function(){return{min_position:this.max_position,isNewItemRequest:!0}},this.getOldItemsData=function(){return{max_position:this.min_position,reset_error_state:void 0===this.min_position&&void 0===this.max_position&&!t(".permalink-container").length}},this.resetStateVariables=function(t){"undefined"!=typeof t.max_position&&(this.max_position=t.max_position,this.select("containerSelector").attr("data-max-position",this.max_position)),"undefined"!=typeof t.min_position&&(this.min_position=t.min_position,this.select("containerSelector").attr("data-min-position",this.min_position))},this.wasRangeRequest=function(){return!1},this.wasNewItemsRequest=function(t){return this.isOldItem(t)},this.wasOldItemsRequest=function(t){return this.isNewItem(t)},this.shouldGetOldItems=function(){return null!==this.min_position},this.shouldGetNewItems=function(){return null!==this.max_position},this.after("initialize",function(){this.min_position=this.select("containerSelector").attr("data-min-position")||void 0,this.max_position=this.select("containerSelector").attr("data-max-position")||void 0})}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i}).call(e,i(10))}]));
//# sourceMappingURL=18.commons.en.a0b65624567e82abf0bd.js.map